/*! For license information please see client-feedback-tool.js.LICENSE.txt */
var ClientFeedbackTool;(()=>{var t={39:function(t,e){!function(t){"use strict";function e(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(i){e(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;i[n]=t[n]}return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||{}.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function o(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}class s{constructor(){e(this,"browserShadowBlurConstant",1),e(this,"DPI",96),e(this,"devicePixelRatio","undefined"!=typeof window?window.devicePixelRatio:1),e(this,"perfLimitSizeTotal",2097152),e(this,"maxCacheSideLimit",4096),e(this,"minCacheSideLimit",256),e(this,"disableStyleCopyPaste",!1),e(this,"enableGLFiltering",!0),e(this,"textureSize",4096),e(this,"forceGLPutImageData",!1),e(this,"cachesBoundsOfCurve",!1),e(this,"fontPaths",{}),e(this,"NUM_FRACTION_DIGITS",4)}}const a=new class extends s{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=n(n({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{delete this.fontPaths[t]}))}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new s,i=(null==t?void 0:t.reduce(((t,i)=>(t[i]=e[i],t)),{}))||e;this.configure(i)}},A=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return console[t]("fabric",...i)};class c extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class l extends c{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class h{}class u extends h{testPrecision(t,e){const i="precision ".concat(e," float;\nvoid main(){}"),n=t.createShader(t.FRAGMENT_SHADER);return!!n&&(t.shaderSource(n,i),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((t=>this.testPrecision(e,t))),e.getExtension("WEBGL_lose_context").loseContext(),A("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const d={};let f;const g=()=>f||(f={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new u,dispose(){},copyPasteData:d}),p=()=>g().document,m=()=>g().window,v=()=>{var t;return Math.max(null!==(t=a.devicePixelRatio)&&void 0!==t?t:m().devicePixelRatio,1)},y=new class{constructor(){e(this,"charWidthsCache",{}),e(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:i,fontWeight:n}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const r=this.charWidthsCache[e],o="".concat(i.toLowerCase(),"_").concat((n+"").toLowerCase());return r[o]||(r[o]={}),r[o]}clearFontCache(t){(t=(t||"").toLowerCase())?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=a,i=Math.sqrt(e*t);return[Math.floor(i),Math.floor(e/i)]}},w="6.6.1";function C(){}const b=Math.PI/2,B=2*Math.PI,x=Math.PI/180,_=Object.freeze([1,0,0,1,0,0]),S=16,I=.4477152502,M="center",T="left",E="top",k="bottom",F="right",D="none",O=/\r?\n/,U="moving",Q="scaling",L="rotating",j="rotate",P="skewing",H="resizing",N="modifyPoly",R="modifyPath",z="changed",G="scale",W="scaleX",Y="scaleY",X="skewX",K="skewY",V="fill",Z="stroke",J="modified",q="json",$="svg",tt=new class{constructor(){this[q]=new Map,this[$]=new Map}has(t){return this[q].has(t)}getClass(t){const e=this[q].get(t);if(!e)throw new c("No class registered for ".concat(t));return e}setClass(t,e){e?this[q].set(e,t):(this[q].set(t.type,t),this[q].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[$].get(t)}setSVGClass(t,e){this[$].set(null!=e?e:t.type.toLowerCase(),t)}},et=new class extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach((t=>t.abort())),t}cancelByCanvas(t){if(!t)return[];const e=this.filter((e=>{var i;return e.target===t||"object"==typeof e.target&&(null===(i=e.target)||void 0===i?void 0:i.canvas)===t}));return e.forEach((t=>t.abort())),e}cancelByTarget(t){if(!t)return[];const e=this.filter((e=>e.target===t));return e.forEach((t=>t.abort())),e}};class it{constructor(){e(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof t)return Object.entries(t).forEach((t=>{let[e,i]=t;this.on(e,i)})),()=>this.off(t);if(e){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(e),()=>this.off(i,e)}return()=>!1}once(t,e){if("object"==typeof t){const e=[];return Object.entries(t).forEach((t=>{let[i,n]=t;e.push(this.once(i,n))})),()=>e.forEach((t=>t()))}if(e){const i=this.on(t,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.call(this,...n),i()}));return i}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const i=this.__eventListeners[t],n=i.indexOf(e);n>-1&&i.splice(n,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(void 0===t)for(const t in this.__eventListeners)this._removeEventListener(t);else"object"==typeof t?Object.entries(t).forEach((t=>{let[e,i]=t;this._removeEventListener(e,i)})):this._removeEventListener(t,e)}fire(t,e){var i;if(!this.__eventListeners)return;const n=null===(i=this.__eventListeners[t])||void 0===i?void 0:i.concat();if(n)for(let t=0;t<n.length;t++)n[t].call(this,e||{})}}const nt=(t,e)=>{const i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},rt=t=>{if(0===t)return 1;switch(Math.abs(t)/b){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},ot=t=>{if(0===t)return 0;const e=t/b,i=Math.sign(t);switch(e){case 1:return i;case 2:return 0;case 3:return-i}return Math.sin(t)};class st{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new st(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new st(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new st(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new st(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new st(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new st(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new st(this.x/t.x,this.y/t.y)}scalarDivide(t){return new st(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new st(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new st(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new st(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}clone(){return new st(this.x,this.y)}rotate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at;const i=ot(t),n=rt(t),r=this.subtract(e);return new st(r.x*n-r.y*i,r.x*i+r.y*n).add(e)}transform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new st(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const at=new st(0,0),At=t=>!!t&&Array.isArray(t._objects);function ct(t){class i extends t{constructor(){super(...arguments),e(this,"_objects",[])}_onObjectAdded(t){}_onObjectRemoved(t){}_onStackOrderChanged(t){}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=this._objects.push(...e);return e.forEach((t=>this._onObjectAdded(t))),n}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return this._objects.splice(t,0,...i),i.forEach((t=>this._onObjectAdded(t))),this._objects.length}remove(){const t=this._objects,e=[];for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.forEach((i=>{const n=t.indexOf(i);-1!==n&&(t.splice(n,1),e.push(i),this._onObjectRemoved(i))})),e}forEachObject(t){this.getObjects().forEach(((e,i,n)=>t(e,i,n)))}getObjects(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 0===e.length?[...this._objects]:this._objects.filter((t=>t.isType(...e)))}item(t){return this._objects[t]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(t,e){return!!this._objects.includes(t)||!!e&&this._objects.some((e=>e instanceof i&&e.contains(t,!0)))}complexity(){return this._objects.reduce(((t,e)=>t+(e.complexity?e.complexity():0)),0)}sendObjectToBack(t){return!(!t||t===this._objects[0]||(nt(this._objects,t),this._objects.unshift(t),this._onStackOrderChanged(t),0))}bringObjectToFront(t){return!(!t||t===this._objects[this._objects.length-1]||(nt(this._objects,t),this._objects.push(t),this._onStackOrderChanged(t),0))}sendObjectBackwards(t,e){if(!t)return!1;const i=this._objects.indexOf(t);if(0!==i){const n=this.findNewLowerIndex(t,i,e);return nt(this._objects,t),this._objects.splice(n,0,t),this._onStackOrderChanged(t),!0}return!1}bringObjectForward(t,e){if(!t)return!1;const i=this._objects.indexOf(t);if(i!==this._objects.length-1){const n=this.findNewUpperIndex(t,i,e);return nt(this._objects,t),this._objects.splice(n,0,t),this._onStackOrderChanged(t),!0}return!1}moveObjectTo(t,e){return t!==this._objects[e]&&(nt(this._objects,t),this._objects.splice(e,0,t),this._onStackOrderChanged(t),!0)}findNewLowerIndex(t,e,i){let n;if(i){n=e;for(let i=e-1;i>=0;--i)if(t.isOverlapping(this._objects[i])){n=i;break}}else n=e-1;return n}findNewUpperIndex(t,e,i){let n;if(i){n=e;for(let i=e+1;i<this._objects.length;++i)if(t.isOverlapping(this._objects[i])){n=i;break}}else n=e+1;return n}collectObjects(t){let{left:e,top:i,width:n,height:r}=t,{includeIntersecting:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[],a=new st(e,i),A=a.add(new st(n,r));for(let t=this._objects.length-1;t>=0;t--){const e=this._objects[t];e.selectable&&e.visible&&(o&&e.intersectsWithRect(a,A)||e.isContainedWithinRect(a,A)||o&&e.containsPoint(a)||o&&e.containsPoint(A))&&s.push(e)}return s}}return i}class lt extends it{_setOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return"object"==typeof t?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this}get(t){return this[t]}}function ht(t){return m().requestAnimationFrame(t)}function ut(t){return m().cancelAnimationFrame(t)}let dt=0;const ft=()=>dt++,gt=()=>{const t=p().createElement("canvas");if(!t||void 0===t.getContext)throw new c("Failed to create `canvas` element");return t},pt=()=>p().createElement("img"),mt=t=>{const e=gt();return e.width=t.width,e.height=t.height,e},vt=(t,e,i)=>t.toDataURL("image/".concat(e),i),yt=(t,e,i)=>new Promise(((n,r)=>{t.toBlob(n,"image/".concat(e),i)})),wt=t=>t*x,Ct=t=>t/x,bt=t=>t.every(((t,e)=>t===_[e])),Bt=(t,e,i)=>new st(t).transform(e,i),xt=t=>{const e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0],0,0],{x:n,y:r}=new st(t[4],t[5]).transform(i,!0);return i[4]=-n,i[5]=-r,i},_t=(t,e,i)=>[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]],St=(t,e)=>t.reduceRight(((t,i)=>i&&t?_t(i,t,e):i||t),void 0)||_.concat(),It=t=>{let[e,i]=t;return Math.atan2(i,e)},Mt=t=>{const e=It(t),i=Math.pow(t[0],2)+Math.pow(t[1],2),n=Math.sqrt(i),r=(t[0]*t[3]-t[2]*t[1])/n,o=Math.atan2(t[0]*t[2]+t[1]*t[3],i);return{angle:Ct(e),scaleX:n,scaleY:r,skewX:Ct(o),skewY:0,translateX:t[4]||0,translateY:t[5]||0}},Tt=function(t){return[1,0,0,1,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function Et(){let{angle:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:e=0,y:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=wt(t),r=rt(n),o=ot(n);return[r,o,-o,r,e?e-(r*e-o*i):0,i?i-(o*e+r*i):0]}const kt=function(t){return[t,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,0,0]},Ft=t=>Math.tan(wt(t)),Dt=t=>[1,0,Ft(t),1,0,0],Ot=t=>[1,Ft(t),0,1,0,0],Ut=t=>{let{scaleX:e=1,scaleY:i=1,flipX:n=!1,flipY:r=!1,skewX:o=0,skewY:s=0}=t,a=kt(n?-e:e,r?-i:i);return o&&(a=_t(a,Dt(o),!0)),s&&(a=_t(a,Ot(s),!0)),a},Qt=t=>{const{translateX:e=0,translateY:i=0,angle:n=0}=t;let r=Tt(e,i);n&&(r=_t(r,Et({angle:n})));const o=Ut(t);return bt(o)||(r=_t(r,o)),r},Lt=function(t){let{signal:e,crossOrigin:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){if(e&&e.aborted)return r(new l("loadImage"));const o=pt();let s;e&&(s=function(t){o.src="",r(t)},e.addEventListener("abort",s,{once:!0}));const a=function(){o.onload=o.onerror=null,s&&(null==e||e.removeEventListener("abort",s)),n(o)};t?(o.onload=a,o.onerror=function(){s&&(null==e||e.removeEventListener("abort",s)),r(new c("Error loading ".concat(o.src)))},i&&(o.crossOrigin=i),o.src=t):a()}))},jt=function(t){let{signal:e,reviver:i=C}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{const o=[];e&&e.addEventListener("abort",r,{once:!0}),Promise.all(t.map((t=>tt.getClass(t.type).fromObject(t,{signal:e}).then((e=>(i(t,e),o.push(e),e)))))).then(n).catch((t=>{o.forEach((t=>{t.dispose&&t.dispose()})),r(t)})).finally((()=>{e&&e.removeEventListener("abort",r)}))}))},Pt=function(t){let{signal:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((i,n)=>{const r=[];e&&e.addEventListener("abort",n,{once:!0});const o=Object.values(t).map((t=>t&&t.type&&tt.has(t.type)?jt([t],{signal:e}).then((t=>{let[e]=t;return r.push(e),e})):t)),s=Object.keys(t);Promise.all(o).then((t=>t.reduce(((t,e,i)=>(t[s[i]]=e,t)),{}))).then(i).catch((t=>{r.forEach((t=>{t.dispose&&t.dispose()})),n(t)})).finally((()=>{e&&e.removeEventListener("abort",n)}))}))},Ht=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(((e,i)=>(i in t&&(e[i]=t[i]),e)),{})},Nt=(t,e)=>Object.keys(t).reduce(((i,n)=>(e(t[n],n,t)&&(i[n]=t[n]),i)),{}),Rt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},zt=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t),Gt=(t,e,i,n)=>{t/=255,e/=255,i/=255;const r=Math.max(t,e,i),o=Math.min(t,e,i);let s,a;const A=(r+o)/2;if(r===o)s=a=0;else{const n=r-o;switch(a=A>.5?n/(2-r-o):n/(r+o),r){case t:s=(e-i)/n+(e<i?6:0);break;case e:s=(i-t)/n+2;break;case i:s=(t-e)/n+4}s/=6}return[Math.round(360*s),Math.round(100*a),Math.round(100*A),n]},Wt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(t)/(t.endsWith("%")?100:1)},Yt=t=>Math.min(Math.round(t),255).toString(16).toUpperCase().padStart(2,"0"),Xt=t=>{let[e,i,n,r=1]=t;const o=Math.round(.3*e+.59*i+.11*n);return[o,o,o,r]};class Kt{constructor(t){if(e(this,"isUnrecognised",!1),t)if(t instanceof Kt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,i,n,r=1]=t;this.setSource([e,i,n,r])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in Rt&&(t=Rt[t]),"transparent"===t?[255,255,255,0]:Kt.sourceFromHex(t)||Kt.sourceFromRgb(t)||Kt.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,i]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,i]=Gt(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(i,"%)")}toHsla(){const[t,e,i,n]=Gt(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(i,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,i,n]=this.getSource();return"".concat(Yt(t)).concat(Yt(e)).concat(Yt(i)).concat(Yt(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Xt(this.getSource())),this}toBlackWhite(t){const[e,,,i]=Xt(this.getSource()),n=e<(t||127)?0:255;return this.setSource([n,n,n,i]),this}overlayWith(t){t instanceof Kt||(t=new Kt(t));const e=this.getSource(),i=t.getSource(),[n,r,o]=e.map(((t,e)=>Math.round(.5*t+.5*i[e])));return this.setSource([n,r,o,e[3]]),this}static fromRgb(t){return Kt.fromRgba(t)}static fromRgba(t){return new Kt(Kt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[t,i,n]=e.slice(1,4).map((t=>{const e=parseFloat(t);return t.endsWith("%")?Math.round(2.55*e):e}));return[t,i,n,Wt(e[4])]}}static fromHsl(t){return Kt.fromHsla(t)}static fromHsla(t){return new Kt(Kt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const i=(Kt.parseAngletoDegrees(e[1])%360+360)%360/360,n=parseFloat(e[2])/100,r=parseFloat(e[3])/100;let o,s,a;if(0===n)o=s=a=r;else{const t=r<=.5?r*(n+1):r+n-r*n,e=2*r-t;o=zt(e,t,i+1/3),s=zt(e,t,i),a=zt(e,t,i-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*a),Wt(e[4])]}static fromHex(t){return new Kt(Kt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let i;i=e.length<=4?e.split("").map((t=>t+t)):e.match(/.{2}/g);const[n,r,o,s=255]=i.map((t=>parseInt(t,16)));return[n,r,o,s/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),i=parseFloat(e);return e.includes("rad")?Ct(i):e.includes("turn")?360*i:i}}const Vt=(t,e)=>parseFloat(Number(t).toFixed(e)),Zt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;const i=/\D{0,2}$/.exec(t),n=parseFloat(t),r=a.DPI;switch(null==i?void 0:i[0]){case"mm":return n*r/25.4;case"cm":return n*r/2.54;case"in":return n*r;case"pt":return n*r/72;case"pc":return n*r/72*12;case"em":return n*e;default:return n}},Jt=t=>{const[e,i]=t.trim().split(" "),[n,r]=(o=e)&&o!==D?[o.slice(1,4),o.slice(5,8)]:o===D?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:i||"meet",alignX:n,alignY:r}},qt=t=>"matrix("+t.map((t=>Vt(t,a.NUM_FRACTION_DIGITS))).join(" ")+")",$t=function(t,e){let i,n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(e.toLive)i="url(#SVGID_".concat(e.id,")");else{const t=new Kt(e),r=t.getAlpha();i=t.toRgb(),1!==r&&(n=r.toString())}else i="none";return r?"".concat(t,": ").concat(i,"; ").concat(n?"".concat(t,"-opacity: ").concat(n,"; "):""):"".concat(t,'="').concat(i,'" ').concat(n?"".concat(t,'-opacity="').concat(n,'" '):"")},te=t=>!!t&&void 0!==t.toLive,ee=t=>!!t&&"function"==typeof t.toObject,ie=t=>!!t&&void 0!==t.offsetX&&"source"in t,ne=t=>!!t&&"multiSelectionStacking"in t;function re(t){const e=t&&oe(t);let i=0,n=0;if(!t||!e)return{left:i,top:n};let r=t;const o=e.documentElement,s=e.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===e?(i=s.scrollLeft||o.scrollLeft||0,n=s.scrollTop||o.scrollTop||0):(i+=r.scrollLeft||0,n+=r.scrollTop||0),1!==r.nodeType||"fixed"!==r.style.position););return{left:i,top:n}}const oe=t=>t.ownerDocument||null,se=t=>{var e;return(null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)||null},ae=function(t,e,i){let{width:n,height:r}=i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t.width=n,t.height=r,o>1&&(t.setAttribute("width",(n*o).toString()),t.setAttribute("height",(r*o).toString()),e.scale(o,o))},Ae=(t,e)=>{let{width:i,height:n}=e;i&&(t.style.width="number"==typeof i?"".concat(i,"px"):i),n&&(t.style.height="number"==typeof n?"".concat(n,"px"):n)};function ce(t){return void 0!==t.onselectstart&&(t.onselectstart=()=>!1),t.style.userSelect=D,t}class le{constructor(t){e(this,"_originalCanvasStyle",void 0),e(this,"lower",void 0);const i=this.createLowerCanvas(t);this.lower={el:i,ctx:i.getContext("2d")}}createLowerCanvas(t){const e=(i=t)&&void 0!==i.getContext?t:t&&p().getElementById(t)||gt();var i;if(e.hasAttribute("data-fabric"))throw new c("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:i}=t;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(e)),n.setAttribute("height","".concat(i)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:i,ctx:n}=this.lower;ae(i,n,t,e)}setCSSDimensions(t){Ae(this.lower.el,t)}calcOffset(){return function(t){var e;const i=t&&oe(t),n={left:0,top:0};if(!i)return n;const r=(null===(e=se(t))||void 0===e?void 0:e.getComputedStyle(t,null))||{};n.left+=parseInt(r.borderLeftWidth,10)||0,n.top+=parseInt(r.borderTopWidth,10)||0,n.left+=parseInt(r.paddingLeft,10)||0,n.top+=parseInt(r.paddingTop,10)||0;let o={left:0,top:0};const s=i.documentElement;void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect());const a=re(t);return{left:o.left+a.left-(s.clientLeft||0)+n.left,top:o.top+a.top-(s.clientTop||0)+n.top}}(this.lower.el)}dispose(){g().dispose(this.lower.el),delete this.lower}}const he={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[..._]};class ue extends(ct(lt)){get lowerCanvasEl(){var t;return null===(t=this.elements.lower)||void 0===t?void 0:t.el}get contextContainer(){var t;return null===(t=this.elements.lower)||void 0===t?void 0:t.ctx}static getDefaults(){return ue.ownDefaults}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new le(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];const r=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),r}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(A("warn","Canvas is trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?v():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e){const e=n({width:this.width,height:this.height},t);this.elements.setDimensions(e,this.getRetinaScaling()),this.hasLostContext=!0,this.width=e.width,this.height=e.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const i=t,n=[...this.viewportTransform],r=Bt(t,xt(n));n[0]=e,n[3]=e;const o=Bt(r,n);n[4]+=i.x-o.x,n[5]+=i.y-o.y,this.setViewportTransform(n)}setZoom(t){this.zoomToPoint(new st(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new st(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ht((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,e=this.height,i=xt(this.viewportTransform),n=Bt({x:0,y:0},i),r=Bt({x:t,y:e},i),o=n.min(r),s=n.max(r);return this.vptCoords={tl:o,tr:new st(s.x,o.y),bl:new st(o.x,s.y),br:s}}cancelRequestedRender(){this.nextRenderHandle&&(ut(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const i=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,n)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)}_renderBackgroundOrOverlay(t,e){const i=this["".concat(e,"Color")],n=this["".concat(e,"Image")],r=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!i&&!n)return;const s=te(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=s?i.toLive(t):i,o&&t.transform(...r),s){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const e=i.gradientTransform||i.patternTransform;e&&t.transform(...e)}t.fill(),t.restore()}if(n){t.save();const{skipOffscreen:e}=this;this.skipOffscreen=o,o&&t.transform(...r),n.render(t),this.skipOffscreen=e,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new st(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new st(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new st(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new st(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new st(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Bt(this.getCenterPoint(),xt(this.viewportTransform))}_centerObject(t,e){t.setXY(e,M,M),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const i=this.clipPath,r=i&&!i.excludeFromExport?this._toObject(i,t,e):null;return n(n(n({version:w},Ht(this,e)),{},{objects:this._objects.filter((t=>!t.excludeFromExport)).map((i=>this._toObject(i,t,e)))},this.__serializeBgOverlay(t,e)),r?{clipPath:r}:null)}_toObject(t,e,i){let n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);const r=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=!!n),r}__serializeBgOverlay(t,e){const i={},n=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,s=this.overlayColor;return te(o)?o.excludeFromExport||(i.background=o.toObject(e)):o&&(i.background=o),te(s)?s.excludeFromExport||(i.overlay=s.toObject(e)):s&&(i.overlay=s),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,t,e)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,t,e)),i}toSVG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(t,e){const i=e.width||"".concat(this.width),n=e.height||"".concat(this.height),r=a.NUM_FRACTION_DIGITS,o=e.viewBox;let s;if(o)s='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const t=this.viewportTransform;s='viewBox="'.concat(Vt(-t[4]/t[0],r)," ").concat(Vt(-t[5]/t[3],r)," ").concat(Vt(this.width/t[0],r)," ").concat(Vt(this.height/t[3],r),'" ')}else s='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',n,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",w,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(ft()),'<clipPath id="'.concat(e.clipPathId,'" >\n').concat(e.toClipPathSVG(t.reviver),"</clipPath>\n")):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const e=this["".concat(t,"Color")];if(te(e)){const i=this["".concat(t,"Vpt")],n=this.viewportTransform,r={isType:()=>!1,width:this.width/(i?n[0]:1),height:this.height/(i?n[3]:1)};return e.toSVG(r,{additionalTransform:i?qt(n):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],e={},i=a.fontPaths;this._objects.forEach((function e(i){t.push(i),At(i)&&i._objects.forEach(e)})),t.forEach((t=>{if(!(n=t)||"function"!=typeof n._renderText)return;var n;const{styles:r,fontFamily:o}=t;!e[o]&&i[o]&&(e[o]=!0,r&&Object.values(r).forEach((t=>{Object.values(t).forEach((t=>{let{fontFamily:n=""}=t;!e[n]&&i[n]&&(e[n]=!0)}))})))}));const n=Object.keys(e).map((t=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(t,"';\n\t\t\tsrc: url('").concat(i[t],"');\n\t\t}\n"))).join("");return n?'\t<style type="text/css"><![CDATA[\n'.concat(n,"]]></style>\n"):""}_setSVGObjects(t,e){this.forEachObject((i=>{i.excludeFromExport||this._setSVGObject(t,i,e)}))}_setSVGObject(t,e,i){t.push(e.toSVG(i))}_setSVGBgOverlayImage(t,e,i){const n=this[e];n&&!n.excludeFromExport&&n.toSVG&&t.push(n.toSVG(i))}_setSVGBgOverlayColor(t,e){const i=this["".concat(e,"Color")];if(i)if(te(i)){const n=i.repeat||"",r=this.width,o=this.height,s=this["".concat(e,"Vpt")]?qt(xt(this.viewportTransform)):"";t.push('<rect transform="'.concat(s," translate(").concat(r/2,",").concat(o/2,')" x="').concat(i.offsetX-r/2,'" y="').concat(i.offsetY-o/2,'" width="').concat("repeat-y"!==n&&"no-repeat"!==n||!ie(i)?r:i.source.width,'" height="').concat("repeat-x"!==n&&"no-repeat"!==n||!ie(i)?o:i.source.height,'" fill="url(#SVGID_').concat(i.id,')"></rect>\n'))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")}loadFromJSON(t,e){let{signal:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return Promise.reject(new c("`json` is undefined"));const n="string"==typeof t?JSON.parse(t):t,{objects:r=[],backgroundImage:o,background:s,overlayImage:a,overlay:A,clipPath:l}=n,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([jt(r,{reviver:e,signal:i}),Pt({backgroundImage:o,backgroundColor:s,overlayImage:a,overlayColor:A,clipPath:l},{signal:i})]).then((t=>{let[e,i]=t;return this.clear(),this.add(...e),this.set(n),this.set(i),this.renderOnAddRemove=h,this}))}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=mt(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:n=1,enableRetinaScaling:r=!1}=t,o=n*(r?this.getRetinaScaling():1);return vt(this.toCanvasElement(o,t),e,i)}toBlob(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:n=1,enableRetinaScaling:r=!1}=t,o=n*(r?this.getRetinaScaling():1);return yt(this.toCanvasElement(o,t),e,i)}toCanvasElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:e,height:i,left:n,top:r,filter:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(e||this.width)*t,a=(i||this.height)*t,A=this.getZoom(),c=this.width,l=this.height,h=this.skipControlsDrawing,u=A*t,d=this.viewportTransform,f=[u,0,0,u,(d[4]-(n||0))*t,(d[5]-(r||0))*t],g=this.enableRetinaScaling,p=mt({width:s,height:a}),m=o?this._objects.filter((t=>o(t))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=f,this.width=s,this.height=a,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(p.getContext("2d"),m),this.viewportTransform=d,this.width=c,this.height=l,this.calcViewportBoundaries(),this.enableRetinaScaling=g,this.skipControlsDrawing=h,p}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),et.cancelByCanvas(this),this.disposed=!0,new Promise(((t,e)=>{const i=()=>{this.destroy(),t(!0)};i.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}e(ue,"ownDefaults",he);const de=["touchstart","touchmove","touchend"],fe=t=>{const e=re(t.target),i=function(t){const e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return new st(i.clientX+e.left,i.clientY+e.top)},ge=t=>de.includes(t.type)||"touch"===t.pointerType,pe=t=>{t.preventDefault(),t.stopPropagation()},me=t=>{let e=0,i=0,n=0,r=0;for(let o=0,s=t.length;o<s;o++){const{x:s,y:a}=t[o];(s>n||!o)&&(n=s),(s<e||!o)&&(e=s),(a>r||!o)&&(r=a),(a<i||!o)&&(i=a)}return{left:e,top:i,width:n-e,height:r-i}},ve=["translateX","translateY","scaleX","scaleY"],ye=(t,e)=>we(t,_t(e,t.calcOwnMatrix())),we=(t,e)=>{const i=Mt(e),{translateX:n,translateY:o,scaleX:s,scaleY:a}=i,A=r(i,ve),c=new st(n,o);t.flipX=!1,t.flipY=!1,Object.assign(t,A),t.set({scaleX:s,scaleY:a}),t.setPositionByOrigin(c,M,M)},Ce=t=>{t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},be=t=>({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}),Be=(t,e,i)=>{const n=t/2,r=e/2,o=[new st(-n,-r),new st(n,-r),new st(-n,r),new st(n,r)].map((t=>t.transform(i))),s=me(o);return new st(s.width,s.height)},xe=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return _t(xt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:_),t)},_e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return t.transform(xe(e,i))},Se=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return t.transform(xe(e,i),!0)},Ie=(t,e,i)=>{const n=xe(e,i);return we(t,_t(n,t.calcOwnMatrix())),n},Me=(t,e)=>{var i;const{transform:{target:r}}=e;null===(i=r.canvas)||void 0===i||i.fire("object:".concat(t),n(n({},e),{},{target:r})),r.fire(t,e)},Te={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ee=t=>"string"==typeof t?Te[t]:t-.5,ke="not-allowed";function Fe(t){return Ee(t.originX)===Ee(M)&&Ee(t.originY)===Ee(M)}function De(t){return.5-Ee(t)}const Oe=(t,e)=>t[e],Ue=(t,e,i,n)=>({e:t,transform:e,pointer:new st(i,n)});function Qe(t,e){const i=t.getTotalAngle()+Ct(Math.atan2(e.y,e.x))+360;return Math.round(i%360/45)}function Le(t,e,i,n,r){var o;let{target:s,corner:a}=t;const A=s.controls[a],c=(null===(o=s.canvas)||void 0===o?void 0:o.getZoom())||1,l=s.padding/c,h=function(t,e,i,n){const r=t.getRelativeCenterPoint(),o=void 0!==i&&void 0!==n?t.translateToGivenOrigin(r,M,M,i,n):new st(t.left,t.top);return(t.angle?e.rotate(-wt(t.angle),r):e).subtract(o)}(s,new st(n,r),e,i);return h.x>=l&&(h.x-=l),h.x<=-l&&(h.x+=l),h.y>=l&&(h.y-=l),h.y<=l&&(h.y+=l),h.x-=A.offsetX,h.y-=A.offsetY,h}const je=(t,e,i,n)=>{const{target:r,offsetX:o,offsetY:s}=e,a=i-o,A=n-s,c=!Oe(r,"lockMovementX")&&r.left!==a,l=!Oe(r,"lockMovementY")&&r.top!==A;return c&&r.set(T,a),l&&r.set(E,A),(c||l)&&Me(U,Ue(t,e,i,n)),c||l};class Pe{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):D,r=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",A=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",l=t?"":this.getSvgFilter(),h=$t(V,this.fill);return[$t(Z,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ",h,"fill-rule: ",e,"; ","opacity: ",A,";",l,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(qt(i));return"".concat(n).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:i=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=n,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:i,withShadow:n,additionalTransform:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),s=n?'style="'.concat(this.getSvgFilter(),'" '):"",a=this.clipPath,A=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=a&&a.absolutePositioned,l=this.stroke,h=this.fill,u=this.shadow,d=[],f=t.indexOf("COMMON_PARTS");let g;a&&(a.clipPathId="CLIPPATH_".concat(ft()),g='<clipPath id="'.concat(a.clipPathId,'" >\n').concat(a.toClipPathSVG(i),"</clipPath>\n")),c&&d.push("<g ",s,this.getSvgCommons()," >\n"),d.push("<g ",this.getSvgTransform(!1),c?"":s+this.getSvgCommons()," >\n");const p=[o,A,e?"":this.addPaintOrder()," ",r?'transform="'.concat(r,'" '):""].join("");return t[f]=p,te(h)&&d.push(h.toSVG(this)),te(l)&&d.push(l.toSVG(this)),u&&d.push(u.toSVG(this)),a&&d.push(g),d.push(t.join("")),d.push("</g>\n"),c&&d.push("</g>\n"),i?i(d.join("")):d.join("")}addPaintOrder(){return this.paintFirst!==V?' paint-order="'.concat(this.paintFirst,'" '):""}}function He(t){return new RegExp("^("+t.join("|")+")\\b","i")}var Ne;const Re=String.raw(Ne||(Ne=o(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),ze="http://www.w3.org/2000/svg",Ge=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Re+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Re+"))?\\s+(.*)"),We={cx:T,x:T,r:"radius",cy:E,y:E,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Ye="font-size",Xe="clip-path",Ke=He(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Ve=He(["symbol","image","marker","pattern","view","svg"]),Ze=He(["symbol","g","a","svg","clipPath","defs"]),Je=new RegExp("^\\s*("+Re+"+)\\s*,?\\s*("+Re+"+)\\s*,?\\s*("+Re+"+)\\s*,?\\s*("+Re+"+)\\s*$"),qe=new st(1,0),$e=new st,ti=(t,e)=>t.rotate(e),ei=(t,e)=>new st(e).subtract(t),ii=t=>t.distanceFrom($e),ni=(t,e)=>Math.atan2(ai(t,e),Ai(t,e)),ri=t=>ni(qe,t),oi=t=>t.eq($e)?t:t.scalarDivide(ii(t)),si=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oi(new st(-t.y,t.x).scalarMultiply(e?1:-1))},ai=(t,e)=>t.x*e.y-t.y*e.x,Ai=(t,e)=>t.x*e.x+t.y*e.y,ci=(t,e,i)=>{if(t.eq(e)||t.eq(i))return!0;const n=ai(e,i),r=ai(e,t),o=ai(i,t);return n>=0?r>=0&&o<=0:!(r<=0&&o>=0)},li="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",hi=new RegExp("(?:\\s|^)"+li+li+"("+Re+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class ui{constructor(t){const e="string"==typeof t?ui.parseShadow(t):t;Object.assign(this,ui.ownDefaults,e),this.id=ft()}static parseShadow(t){const e=t.trim(),[,i=0,n=0,r=0]=(hi.exec(e)||[]).map((t=>parseFloat(t)||0));return{color:(e.replace(hi,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:n,blur:r}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=ti(new st(this.offsetX,this.offsetY),wt(-t.angle)),i=new Kt(this.color);let n=40,r=40;return t.width&&t.height&&(n=100*Vt((Math.abs(e.x)+this.blur)/t.width,a.NUM_FRACTION_DIGITS)+20,r=100*Vt((Math.abs(e.y)+this.blur)/t.height,a.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(r,'%" height="').concat(100+2*r,'%" x="-').concat(n,'%" width="').concat(100+2*n,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat(Vt(this.blur?this.blur/2:0,a.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat(Vt(e.x,a.NUM_FRACTION_DIGITS),'" dy="').concat(Vt(e.y,a.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=ui.ownDefaults;return this.includeDefaultValues?t:Nt(t,((t,i)=>t!==e[i]))}static async fromObject(t){return new this(t)}}e(ui,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),e(ui,"type","shadow"),tt.setClass(ui,"shadow");const di=(t,e,i)=>Math.max(t,Math.min(e,i)),fi=[E,T,W,Y,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",X,K],gi=[V,Z,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],pi={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:T,originY:E,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:V,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},mi=(t,e,i,n)=>(t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/B*Math.asin(1):i/B*Math.asin(e/t),{a:t,c:e,p:i,s:n}),vi=(t,e,i,n,r)=>t*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*B/i),yi=(t,e,i,n)=>-i*Math.cos(t/n*b)+i+e,wi=(t,e,i,n)=>(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e,Ci=(t,e,i,n)=>i-wi(n-t,0,i,n)+e;var bi=Object.freeze({__proto__:null,defaultEasing:yi,easeInBack:function(t,e,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return i*(t/=n)*t*((r+1)*t-r)+e},easeInBounce:Ci,easeInCirc:(t,e,i,n)=>-i*(Math.sqrt(1-(t/=n)*t)-1)+e,easeInCubic:(t,e,i,n)=>i*(t/n)**3+e,easeInElastic:(t,e,i,n)=>{const r=i;let o=0;if(0===t)return e;if(1==(t/=n))return e+i;o||(o=.3*n);const{a:s,s:a,p:A}=mi(r,i,o,1.70158);return-vi(s,a,A,t,n)+e},easeInExpo:(t,e,i,n)=>0===t?e:i*2**(10*(t/n-1))+e,easeInOutBack:function(t,e,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInOutBounce:(t,e,i,n)=>t<n/2?.5*Ci(2*t,0,i,n)+e:.5*wi(2*t-n,0,i,n)+.5*i+e,easeInOutCirc:(t,e,i,n)=>(t/=n/2)<1?-i/2*(Math.sqrt(1-t**2)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e,easeInOutCubic:(t,e,i,n)=>(t/=n/2)<1?i/2*t**3+e:i/2*((t-2)**3+2)+e,easeInOutElastic:(t,e,i,n)=>{const r=i;let o=0;if(0===t)return e;if(2==(t/=n/2))return e+i;o||(o=n*(.3*1.5));const{a:s,s:a,p:A,c}=mi(r,i,o,1.70158);return t<1?-.5*vi(s,a,A,t,n)+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*B/A)*.5+c+e},easeInOutExpo:(t,e,i,n)=>0===t?e:t===n?e+i:(t/=n/2)<1?i/2*2**(10*(t-1))+e:i/2*-(2**(-10*--t)+2)+e,easeInOutQuad:(t,e,i,n)=>(t/=n/2)<1?i/2*t**2+e:-i/2*(--t*(t-2)-1)+e,easeInOutQuart:(t,e,i,n)=>(t/=n/2)<1?i/2*t**4+e:-i/2*((t-=2)*t**3-2)+e,easeInOutQuint:(t,e,i,n)=>(t/=n/2)<1?i/2*t**5+e:i/2*((t-2)**5+2)+e,easeInOutSine:(t,e,i,n)=>-i/2*(Math.cos(Math.PI*t/n)-1)+e,easeInQuad:(t,e,i,n)=>i*(t/=n)*t+e,easeInQuart:(t,e,i,n)=>i*(t/=n)*t**3+e,easeInQuint:(t,e,i,n)=>i*(t/n)**5+e,easeInSine:(t,e,i,n)=>-i*Math.cos(t/n*b)+i+e,easeOutBack:function(t,e,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeOutBounce:wi,easeOutCirc:(t,e,i,n)=>i*Math.sqrt(1-(t=t/n-1)*t)+e,easeOutCubic:(t,e,i,n)=>i*((t/n-1)**3+1)+e,easeOutElastic:(t,e,i,n)=>{const r=i;let o=0;if(0===t)return e;if(1==(t/=n))return e+i;o||(o=.3*n);const{a:s,s:a,p:A,c}=mi(r,i,o,1.70158);return s*2**(-10*t)*Math.sin((t*n-a)*B/A)+c+e},easeOutExpo:(t,e,i,n)=>t===n?e+i:i*-(2**(-10*t/n)+1)+e,easeOutQuad:(t,e,i,n)=>-i*(t/=n)*(t-2)+e,easeOutQuart:(t,e,i,n)=>-i*((t=t/n-1)*t**3-1)+e,easeOutQuint:(t,e,i,n)=>i*((t/n-1)**5+1)+e,easeOutSine:(t,e,i,n)=>i*Math.sin(t/n*b)+e});const Bi=()=>!1;class xi{constructor(t){let{startValue:i,byValue:n,duration:r=500,delay:o=0,easing:s=yi,onStart:a=C,onChange:A=C,onComplete:c=C,abort:l=Bi,target:h}=t;e(this,"_state","pending"),e(this,"durationProgress",0),e(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=o,this.easing=s,this._onStart=a,this._onChange=A,this._onComplete=c,this._abort=l,this.target=h,this.startValue=i,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const t=t=>{"pending"===this._state&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>ht(t)),this.delay):ht(t)}tick(t){const e=(t||+new Date)-this.startTime,i=Math.min(e,this.duration);this.durationProgress=i/this.duration;const{value:n,valueProgress:r}=this.calculate(i);this.value=Object.freeze(n),this.valueProgress=r,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ht(this.tick)))}register(){et.push(this)}unregister(){et.remove(this)}abort(){this._state="aborted",this.unregister()}}const _i=["startValue","endValue"];class Si extends xi{constructor(t){let{startValue:e=0,endValue:i=100}=t;super(n(n({},r(t,_i)),{},{startValue:e,byValue:i-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const Ii=["startValue","endValue"];class Mi extends xi{constructor(t){let{startValue:e=[0],endValue:i=[100]}=t;super(n(n({},r(t,Ii)),{},{startValue:e,byValue:i.map(((t,i)=>t-e[i]))}))}calculate(t){const e=this.startValue.map(((e,i)=>this.easing(t,e,this.byValue[i],this.duration,i)));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const Ti=["startValue","endValue","easing","onChange","onComplete","abort"],Ei=(t,e,i,n)=>e+i*(1-Math.cos(t/n*b)),ki=t=>t&&((e,i,n)=>t(new Kt(e).toRgba(),i,n));class Fi extends xi{constructor(t){let{startValue:e,endValue:i,easing:o=Ei,onChange:s,onComplete:a,abort:A}=t,c=r(t,Ti);const l=new Kt(e).getSource(),h=new Kt(i).getSource();super(n(n({},c),{},{startValue:l,byValue:h.map(((t,e)=>t-l[e])),easing:o,onChange:ki(s),onComplete:ki(a),abort:ki(A)}))}calculate(t){const[e,i,n,r]=this.startValue.map(((e,i)=>this.easing(t,e,this.byValue[i],this.duration,i))),o=[...[e,i,n].map(Math.round),di(0,r,1)];return{value:o,valueProgress:o.map(((t,e)=>0!==this.byValue[e]?Math.abs((t-this.startValue[e])/this.byValue[e]):0)).find((t=>0!==t))||0}}}function Di(t){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(t)?new Mi(t):new Si(t);return e.start(),e}function Oi(t){const e=new Fi(t);return e.start(),e}class Ui{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((e=>e.eq(t)))}append(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.points=this.points.concat(e.filter((t=>!this.includes(t)))),this}static isPointContained(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.eq(i))return t.eq(e);if(e.x===i.x)return t.x===e.x&&(n||t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y));if(e.y===i.y)return t.y===e.y&&(n||t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x));{const r=ei(e,i),o=ei(e,t).divide(r);return n?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const i=new st(t).setX(Math.min(t.x-1,...e.map((t=>t.x))));let n=0;for(let r=0;r<e.length;r++){const o=this.intersectSegmentSegment(e[r],e[(r+1)%e.length],t,i);if(o.includes(t))return!0;n+=Number("Intersection"===o.status)}return n%2==1}static intersectLineLine(t,e,i,n){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s=e.x-t.x,a=e.y-t.y,A=n.x-i.x,c=n.y-i.y,l=t.x-i.x,h=t.y-i.y,u=A*h-c*l,d=s*h-a*l,f=c*s-A*a;if(0!==f){const e=u/f,i=d/f;return(r||0<=e&&e<=1)&&(o||0<=i&&i<=1)?new Ui("Intersection").append(new st(t.x+e*s,t.y+e*a)):new Ui}if(0===u||0===d){const s=r||o||Ui.isPointContained(t,i,n)||Ui.isPointContained(e,i,n)||Ui.isPointContained(i,t,e)||Ui.isPointContained(n,t,e);return new Ui(s?"Coincident":void 0)}return new Ui("Parallel")}static intersectSegmentLine(t,e,i,n){return Ui.intersectLineLine(t,e,i,n,!1,!0)}static intersectSegmentSegment(t,e,i,n){return Ui.intersectLineLine(t,e,i,n,!1,!1)}static intersectLinePolygon(t,e,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new Ui,o=i.length;for(let s,a,A,c=0;c<o;c++){if(s=i[c],a=i[(c+1)%o],A=Ui.intersectLineLine(t,e,s,a,n,!1),"Coincident"===A.status)return A;r.append(...A.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectSegmentPolygon(t,e,i){return Ui.intersectLinePolygon(t,e,i,!1)}static intersectPolygonPolygon(t,e){const i=new Ui,n=t.length,r=[];for(let o=0;o<n;o++){const s=t[o],a=t[(o+1)%n],A=Ui.intersectSegmentPolygon(s,a,e);"Coincident"===A.status?(r.push(A),i.append(s,a)):i.append(...A.points)}return r.length>0&&r.length===t.length?new Ui("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,e,i){const n=e.min(i),r=e.max(i),o=new st(r.x,n.y),s=new st(n.x,r.y);return Ui.intersectPolygonPolygon(t,[n,o,r,s])}}class Qi extends lt{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Bt(t,this.group.calcTransformMatrix()):t}setXY(t,e,i){this.group&&(t=Bt(t,xt(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,i)}getRelativeXY(){return new st(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.originX,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.originY;this.setPositionByOrigin(t,e,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:i,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),r=[t,e,i,n];if(this.group){const t=this.group.calcTransformMatrix();return r.map((e=>Bt(e,t)))}return r}intersectsWithRect(t,e){return"Intersection"===Ui.intersectPolygonRectangle(this.getCoords(),t,e).status}intersectsWithObject(t){const e=Ui.intersectPolygonPolygon(this.getCoords(),t.getCoords());return"Intersection"===e.status||"Coincident"===e.status||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every((e=>t.containsPoint(e)))}isContainedWithinRect(t,e){const{left:i,top:n,width:r,height:o}=this.getBoundingRect();return i>=t.x&&i+r<=e.x&&n>=t.y&&n+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Ui.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some((i=>i.x<=e.x&&i.x>=t.x&&i.y<=e.y&&i.y>=t.y))||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.intersectsWithRect(t,e)||this.getCoords().every((i=>(i.x>=e.x||i.x<=t.x)&&(i.y>=e.y||i.y<=t.y)))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return me(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(W,t),this._set(Y,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return(null===(t=this.canvas)||void 0===t?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Ct(It(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return(null===(t=this.canvas)||void 0===t?void 0:t.viewportTransform)||_.concat()}calcACoords(){const t=Et({angle:this.angle}),{x:e,y:i}=this.getRelativeCenterPoint(),n=Tt(e,i),r=_t(n,t),o=this._getTransformedDimensions(),s=o.x/2,a=o.y/2;return{tl:Bt({x:-s,y:-a},r),tr:Bt({x:s,y:-a},r),bl:Bt({x:-s,y:a},r),br:Bt({x:s,y:a},r)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ee(this.originX),Ee(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const i=this.transformMatrixKey(t),n=this.matrixCache;return n&&n.key.every(((t,e)=>t===i[e]))?n.value:(this.group&&(e=_t(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:i,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const i=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},r=Qt(n);return this.ownMatrixCache={key:t,value:r},r}_getNonTransformedDimensions(){return new st(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=n({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=e.strokeWidth;let r=i,o=0;this.strokeUniform&&(r=0,o=i);const s=e.width+r,a=e.height+r;let A;return A=0===e.skewX&&0===e.skewY?new st(s*e.scaleX,a*e.scaleY):Be(s,a,Ut(e)),A.scalarAdd(o)}translateToGivenOrigin(t,e,i,n,r){let o=t.x,s=t.y;const a=Ee(n)-Ee(e),A=Ee(r)-Ee(i);if(a||A){const t=this._getTransformedDimensions();o+=a*t.x,s+=A*t.y}return new st(o,s)}translateToCenterPoint(t,e,i){if(e===M&&i===M)return t;const n=this.translateToGivenOrigin(t,e,i,M,M);return this.angle?n.rotate(wt(this.angle),t):n}translateToOriginPoint(t,e,i){const n=this.translateToGivenOrigin(t,M,M,e,i);return this.angle?n.rotate(wt(this.angle),t):n}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Bt(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new st(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,i){const n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:r.x,top:r.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),T,E)}}const Li=["type"],ji=["extraParam"];let Pi=class t extends Qi{static getDefaults(){return t.ownDefaults}get type(){const t=this.constructor.type;return"FabricObject"===t?"object":t.toLowerCase()}set type(t){A("warn","Setting type has no effect",t)}constructor(i){super(),e(this,"_cacheContext",null),Object.assign(this,t.ownDefaults),this.setOptions(i)}_createCacheCanvas(){this._cacheCanvas=gt(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,i=t.height,n=a.maxCacheSideLimit,r=a.minCacheSideLimit;if(e<=n&&i<=n&&e*i<=a.perfLimitSizeTotal)return e<r&&(t.width=r),i<r&&(t.height=r),t;const o=e/i,[s,A]=y.limitDimsByArea(o),c=di(r,s,n),l=di(r,A,n);return e>c&&(t.zoomX/=e/c,t.width=c,t.capped=!0),i>l&&(t.zoomY/=i/l,t.height=l,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),i=e.x*t.x/this.scaleX,n=e.y*t.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(n+2),zoomX:t.x,zoomY:t.y,x:i,y:n}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:i,height:n,zoomX:r,zoomY:o,x:s,y:a}=this._limitCacheSize(this._getCacheCanvasDimensions()),A=i!==t.width||n!==t.height,c=this.zoomX!==r||this.zoomY!==o;if(!t||!e)return!1;if(A||c){i!==t.width||n!==t.height?(t.width=i,t.height=n):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const A=s/2,c=a/2;return this.cacheTranslationX=Math.round(t.width/2-A)+A,this.cacheTranslationY=Math.round(t.height/2-c)+c,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(r,o),this.zoomX=r,this.zoomY=o,!0}return!1}setOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new st(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=Mt(this.calcTransformMatrix());return new st(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(e*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t}_set(t,e){t!==W&&t!==Y||(e=this._constrainScale(e)),t===W&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof ui||(e=new ui(e));const i=this[t]!==e;return this[t]=e,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:i,cacheTranslationX:n,cacheTranslationY:r}=this,{width:o,height:s}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:i,cacheTranslationX:n,cacheTranslationY:r,width:o,height:s,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!!(this.paintFirst===Z&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(t,e,i){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.restore()}drawObject(t,e,i){const n=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,i),this.fill=n,this.stroke=r}createClipPathLayer(t,e){const i=mt(e),n=i.getContext("2d");if(n.translate(e.cacheTranslationX,e.cacheTranslationY),n.scale(e.zoomX,e.zoomY),t._cacheCanvas=i,e.parentClipPaths.forEach((t=>{t.transform(n)})),e.parentClipPaths.push(t),t.absolutePositioned){const t=xt(this.calcTransformMatrix());n.transform(t[0],t[1],t[2],t[3],t[4],t[5])}return t.transform(n),t.drawObject(n,!0,e),i}_drawClipPath(t,e,i){if(!e)return;e._transformDone=!0;const n=this.createClipPathLayer(e,i);this.drawClipPathOnCache(t,e,n)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,i=this._cacheContext;return!(!e||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,te(i)?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:i}=e;i&&(te(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&0!==e.length&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,i=this.canvas,n=this.getCanvasRetinaScaling(),[r,,,o]=(null==i?void 0:i.viewportTransform)||_,s=r*n,A=o*n,c=e.nonScaling?new st(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*a.browserShadowBlurConstant*(s+A)*(c.x+c.y)/4,t.shadowOffsetX=e.offsetX*s*c.x,t.shadowOffsetY=e.offsetY*A*c.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!te(e))return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,n,r):t.transform(1,0,0,1,n,r),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:r}}_renderPaintInOrder(t){this.paintFirst===Z?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var i;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),r=this.getCanvasRetinaScaling(),o=n.x/this.scaleX/r,s=n.y/this.scaleY/r,a=mt({width:Math.ceil(o),height:Math.ceil(s)}),A=a.getContext("2d");A&&(A.beginPath(),A.moveTo(0,0),A.lineTo(o,0),A.lineTo(o,s),A.lineTo(0,s),A.closePath(),A.translate(o/2,s/2),A.scale(n.zoomX/this.scaleX/r,n.zoomY/this.scaleY/r),this._applyPatternGradientTransform(A,e),A.fillStyle=e.toLive(t),A.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(r*this.scaleX/n.zoomX,r*this.scaleY/n.zoomY),t.strokeStyle=null!==(i=A.createPattern(a,"no-repeat"))&&void 0!==i?i:"")}_findCenterFromElement(){return new st(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(tt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=be(this),i=this.group,n=this.shadow,r=Math.abs,o=t.enableRetinaScaling?v():1,s=(t.multiplier||1)*o,a=t.canvasProvider||(t=>new ue(t,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Ce(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&Ie(this,this.getViewportTransform()),this.setCoords();const A=gt(),c=this.getBoundingRect(),l=this.shadow,h=new st;if(l){const t=l.blur,e=l.nonScaling?new st(1,1):this.getObjectScaling();h.x=2*Math.round(r(l.offsetX)+t)*r(e.x),h.y=2*Math.round(r(l.offsetY)+t)*r(e.y)}const u=c.width+h.x,d=c.height+h.y;A.width=Math.ceil(u),A.height=Math.ceil(d);const f=a(A);"jpeg"===t.format&&(f.backgroundColor="#fff"),this.setPositionByOrigin(new st(f.width/2,f.height/2),M,M);const g=this.canvas;f._objects=[this],this.set("canvas",f),this.setCoords();const p=f.toCanvasElement(s||1,t);return this.set("canvas",g),this.shadow=n,i&&(this.group=i),this.set(e),this.setCoords(),f._objects=[],f.destroy(),p}toDataURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vt(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yt(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:i,originY:n}=this;if(e){const{x:t,y:e}=this.getRelativeCenterPoint();this.originX=M,this.originY=M,this.left=t,this.top=e}if(this.set("angle",t),e){const{x:t,y:e}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,n);this.left=t,this.top=e,this.originX=i,this.originY=n}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){et.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&g().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce(((t,i)=>{let[n,r]=i;return t[n]=this._animate(n,r,e),t}),{})}_animate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.split("."),o=this.constructor.colorProperties.includes(r[r.length-1]),{abort:s,startValue:a,onChange:A,onComplete:c}=i,l=n(n({},i),{},{target:this,startValue:null!=a?a:r.reduce(((t,e)=>t[e]),this),endValue:e,abort:null==s?void 0:s.bind(this),onChange:(t,e,i)=>{r.reduce(((e,i,n)=>(n===r.length-1&&(e[i]=t),e[i])),this),A&&A(t,e,i)},onComplete:(t,e,i)=>{this.setCoords(),c&&c(t,e,i)}});return o?Oi(l):Di(l)}isDescendantOf(t){const{parent:e,group:i}=this;return e===t||i===t||!!e&&e.isDescendantOf(t)||!!i&&i!==e&&i.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do{e=e.parent,e&&t.push(e)}while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),i=t.getAncestors();if(0===e.length&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let n,r=0;r<e.length;r++){if(n=e[r],n===t)return{fork:[this,...e.slice(0,r)],otherFork:[],common:e.slice(r)};for(let o=0;o<i.length;o++){if(this===i[o])return{fork:[],otherFork:[t,...i.slice(0,o)],common:[this,...e]};if(n===i[o])return{fork:[this,...e.slice(0,r)],otherFork:[t,...i.slice(0,o)],common:e.slice(r)}}}return{fork:[this,...e],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const i=e.common[0]||this.canvas;if(!i)return;const n=e.fork.pop(),r=e.otherFork.pop(),o=i._objects.indexOf(n),s=i._objects.indexOf(r);return o>-1&&o>s}toObject(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(t.customProperties,this.constructor.customProperties||[]);let i;const r=a.NUM_FRACTION_DIGITS,{clipPath:o,fill:s,stroke:A,shadow:c,strokeDashArray:l,left:h,top:u,originX:d,originY:f,width:g,height:p,strokeWidth:m,strokeLineCap:v,strokeDashOffset:y,strokeLineJoin:C,strokeUniform:b,strokeMiterLimit:B,scaleX:x,scaleY:_,angle:S,flipX:I,flipY:M,opacity:T,visible:E,backgroundColor:k,fillRule:F,paintFirst:D,globalCompositeOperation:O,skewX:U,skewY:Q}=this;o&&!o.excludeFromExport&&(i=o.toObject(e.concat("inverted","absolutePositioned")));const L=t=>Vt(t,r),j=n(n({},Ht(this,e)),{},{type:this.constructor.type,version:w,originX:d,originY:f,left:L(h),top:L(u),width:L(g),height:L(p),fill:ee(s)?s.toObject():s,stroke:ee(A)?A.toObject():A,strokeWidth:L(m),strokeDashArray:l?l.concat():l,strokeLineCap:v,strokeDashOffset:y,strokeLineJoin:C,strokeUniform:b,strokeMiterLimit:L(B),scaleX:L(x),scaleY:L(_),angle:L(S),flipX:I,flipY:M,opacity:L(T),shadow:c?c.toObject():c,visible:E,backgroundColor:k,fillRule:F,paintFirst:D,globalCompositeOperation:O,skewX:L(U),skewY:L(Q)},i?{clipPath:i}:null);return this.includeDefaultValues?j:this._removeDefaultValues(j)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Nt(t,((t,e)=>{if(e===T||e===E||"type"===e)return!0;const n=i[e];return t!==n&&!(Array.isArray(t)&&Array.isArray(n)&&0===t.length&&0===n.length)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=r(t,Li),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:n}=i,o=r(i,ji);return Pt(e,o).then((t=>n?(delete t[n],new this(e[n],t)):new this(t)))}static fromObject(t,e){return this._fromObject(t,e)}};e(Pi,"stateProperties",fi),e(Pi,"cacheProperties",gi),e(Pi,"ownDefaults",pi),e(Pi,"type","FabricObject"),e(Pi,"colorProperties",[V,Z,"backgroundColor"]),e(Pi,"customProperties",[]),tt.setClass(Pi),tt.setClass(Pi,"object");const Hi=(t,e,i)=>(r,o,s,a)=>{const A=e(r,o,s,a);return A&&Me(t,n(n({},Ue(r,o,s,a)),i)),A};function Ni(t){return(e,i,n,r)=>{const{target:o,originX:s,originY:a}=i,A=o.getRelativeCenterPoint(),c=o.translateToOriginPoint(A,s,a),l=t(e,i,n,r);return o.setPositionByOrigin(c,i.originX,i.originY),l}}const Ri=Hi(H,Ni(((t,e,i,n)=>{const r=Le(e,e.originX,e.originY,i,n);if(Ee(e.originX)===Ee(M)||Ee(e.originX)===Ee(F)&&r.x<0||Ee(e.originX)===Ee(T)&&r.x>0){const{target:t}=e,i=t.strokeWidth/(t.strokeUniform?t.scaleX:1),n=Fe(e)?2:1,o=t.width,s=Math.abs(r.x*n/t.scaleX)-i;return t.set("width",Math.max(s,1)),o!==t.width}return!1})));function zi(t,e,i,n,r){n=n||{};const o=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:r.transparentCorners,A=a?Z:V,c=!a&&(n.cornerStrokeColor||r.cornerStrokeColor);let l,h=e,u=i;t.save(),t.fillStyle=n.cornerColor||r.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor||"",o>s?(l=o,t.scale(1,s/o),u=i*o/s):s>o?(l=s,t.scale(o/s,1),h=e*s/o):l=o,t.beginPath(),t.arc(h,u,l/2,0,B,!1),t[A](),c&&t.stroke(),t.restore()}function Gi(t,e,i,n,r){n=n||{};const o=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:r.transparentCorners,A=a?Z:V,c=!a&&(n.cornerStrokeColor||r.cornerStrokeColor),l=o/2,h=s/2;t.save(),t.fillStyle=n.cornerColor||r.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor||"",t.translate(e,i);const u=r.getTotalAngle();t.rotate(wt(u)),t["".concat(A,"Rect")](-l,-h,o,s),c&&t.strokeRect(-l,-h,o,s),t.restore()}class Wi{constructor(t){e(this,"visible",!0),e(this,"actionName",G),e(this,"angle",0),e(this,"x",0),e(this,"y",0),e(this,"offsetX",0),e(this,"offsetY",0),e(this,"sizeX",0),e(this,"sizeY",0),e(this,"touchSizeX",0),e(this,"touchSizeY",0),e(this,"cursorStyle","crosshair"),e(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,i,n){var r;let{tl:o,tr:s,br:a,bl:A}=n;return(null===(r=e.canvas)||void 0===r?void 0:r.getActiveObject())===e&&e.isControlVisible(t)&&Ui.isPointInPolygon(i,[o,s,a,A])}getActionHandler(t,e,i){return this.actionHandler}getMouseDownHandler(t,e,i){return this.mouseDownHandler}getMouseUpHandler(t,e,i){return this.mouseUpHandler}cursorStyleHandler(t,e,i){return e.cursorStyle}getActionName(t,e,i){return e.actionName}getVisibility(t,e){var i,n;return null!==(i=null===(n=t._controlsVisibility)||void 0===n?void 0:n[e])&&void 0!==i?i:this.visible}setVisibility(t,e,i){this.visible=t}positionHandler(t,e,i,n){return new st(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,i,n,r,o){const s=St([Tt(i,n),Et({angle:t}),kt((r?this.touchSizeX:this.sizeX)||e,(r?this.touchSizeY:this.sizeY)||e)]);return{tl:new st(-.5,-.5).transform(s),tr:new st(.5,-.5).transform(s),br:new st(.5,.5).transform(s),bl:new st(-.5,.5).transform(s)}}render(t,e,i,n,r){"circle"===((n=n||{}).cornerStyle||r.cornerStyle)?zi.call(this,t,e,i,n,r):Gi.call(this,t,e,i,n,r)}}const Yi=(t,e,i)=>i.lockRotation?ke:e.cursorStyle,Xi=Hi(L,Ni(((t,e,i,n)=>{let{target:r,ex:o,ey:s,theta:a,originX:A,originY:c}=e;const l=r.translateToOriginPoint(r.getRelativeCenterPoint(),A,c);if(Oe(r,"lockRotation"))return!1;const h=Math.atan2(s-l.y,o-l.x),u=Math.atan2(n-l.y,i-l.x);let d=Ct(u-h+a);if(r.snapAngle&&r.snapAngle>0){const t=r.snapAngle,e=r.snapThreshold||t,i=Math.ceil(d/t)*t,n=Math.floor(d/t)*t;Math.abs(d-n)<e?d=n:Math.abs(d-i)<e&&(d=i)}d<0&&(d=360+d),d%=360;const f=r.angle!==d;return r.angle=d,f})));function Ki(t,e){const i=e.canvas,n=t[i.uniScaleKey];return i.uniformScaling&&!n||!i.uniformScaling&&n}function Vi(t,e,i){const n=Oe(t,"lockScalingX"),r=Oe(t,"lockScalingY");if(n&&r)return!0;if(!e&&(n||r)&&i)return!0;if(n&&"x"===e)return!0;if(r&&"y"===e)return!0;const{width:o,height:s,strokeWidth:a}=t;return 0===o&&0===a&&"y"!==e||0===s&&0===a&&"x"!==e}const Zi=["e","se","s","sw","w","nw","n","ne","e"],Ji=(t,e,i)=>{const n=Ki(t,i);if(Vi(i,0!==e.x&&0===e.y?"x":0===e.x&&0!==e.y?"y":"",n))return ke;const r=Qe(i,e);return"".concat(Zi[r],"-resize")};function qi(t,e,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=e.target,s=r.by,a=Ki(t,o);let A,c,l,h,u,d;if(Vi(o,s,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,l=e.scaleY*e.gestureScale;else{if(A=Le(e,e.originX,e.originY,i,n),u="y"!==s?Math.sign(A.x||e.signX||1):1,d="x"!==s?Math.sign(A.y||e.signY||1):1,e.signX||(e.signX=u),e.signY||(e.signY=d),Oe(o,"lockScalingFlip")&&(e.signX!==u||e.signY!==d))return!1;if(h=o._getTransformedDimensions(),a&&!s){const t=Math.abs(A.x)+Math.abs(A.y),{original:i}=e,n=t/(Math.abs(h.x*i.scaleX/o.scaleX)+Math.abs(h.y*i.scaleY/o.scaleY));c=i.scaleX*n,l=i.scaleY*n}else c=Math.abs(A.x*o.scaleX/h.x),l=Math.abs(A.y*o.scaleY/h.y);Fe(e)&&(c*=2,l*=2),e.signX!==u&&"y"!==s&&(e.originX=De(e.originX),c*=-1,e.signX=u),e.signY!==d&&"x"!==s&&(e.originY=De(e.originY),l*=-1,e.signY=d)}const f=o.scaleX,g=o.scaleY;return s?("x"===s&&o.set(W,c),"y"===s&&o.set(Y,l)):(!Oe(o,"lockScalingX")&&o.set(W,c),!Oe(o,"lockScalingY")&&o.set(Y,l)),f!==o.scaleX||g!==o.scaleY}const $i=Hi(Q,Ni(((t,e,i,n)=>qi(t,e,i,n)))),tn=Hi(Q,Ni(((t,e,i,n)=>qi(t,e,i,n,{by:"x"})))),en=Hi(Q,Ni(((t,e,i,n)=>qi(t,e,i,n,{by:"y"})))),nn=["target","ex","ey","skewingSide"],rn={x:{counterAxis:"y",scale:W,skew:X,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Y,skew:K,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},on=["ns","nesw","ew","nwse"],sn=(t,e,i)=>{if(0!==e.x&&Oe(i,"lockSkewingY"))return ke;if(0!==e.y&&Oe(i,"lockSkewingX"))return ke;const n=Qe(i,e)%4;return"".concat(on[n],"-resize")};function an(t,e,i,o,s){const{target:a}=i,{counterAxis:A,origin:c,lockSkewing:l,skew:h,flip:u}=rn[t];if(Oe(a,l))return!1;const{origin:d,flip:f}=rn[A],g=Ee(i[d])*(a[f]?-1:1),p=-Math.sign(g)*(a[u]?-1:1),m=-(0===a[h]&&Le(i,M,M,o,s)[t]>0||a[h]>0?1:-1)*p*.5+.5,v=Hi(P,Ni(((e,i,n,o)=>function(t,e,i){let{target:n,ex:o,ey:s,skewingSide:a}=e,A=r(e,nn);const{skew:c}=rn[t],l=i.subtract(new st(o,s)).divide(new st(n.scaleX,n.scaleY))[t],h=n[c],u=A[c],d=Math.tan(wt(u)),f="y"===t?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,g=2*l*a/Math.max(f,1)+d,p=Ct(Math.atan(g));n.set(c,p);const m=h!==n[c];if(m&&"y"===t){const{skewX:t,scaleX:e}=n,i=n._getTransformedDimensions({skewY:h}),r=n._getTransformedDimensions(),o=0!==t?i.x/r.x:1;1!==o&&n.set(W,o*e)}return m}(t,i,new st(n,o)))));return v(e,n(n({},i),{},{[c]:m,skewingSide:p}),o,s)}const An=(t,e,i,n)=>an("x",t,e,i,n),cn=(t,e,i,n)=>an("y",t,e,i,n);function ln(t,e){return t[e.canvas.altActionKey]}const hn=(t,e,i)=>{const n=ln(t,i);return 0===e.x?n?X:Y:0===e.y?n?K:W:""},un=(t,e,i)=>ln(t,i)?sn(0,e,i):Ji(t,e,i),dn=(t,e,i,n)=>ln(t,e.target)?cn(t,e,i,n):tn(t,e,i,n),fn=(t,e,i,n)=>ln(t,e.target)?An(t,e,i,n):en(t,e,i,n),gn=()=>({ml:new Wi({x:-.5,y:0,cursorStyleHandler:un,actionHandler:dn,getActionName:hn}),mr:new Wi({x:.5,y:0,cursorStyleHandler:un,actionHandler:dn,getActionName:hn}),mb:new Wi({x:0,y:.5,cursorStyleHandler:un,actionHandler:fn,getActionName:hn}),mt:new Wi({x:0,y:-.5,cursorStyleHandler:un,actionHandler:fn,getActionName:hn}),tl:new Wi({x:-.5,y:-.5,cursorStyleHandler:Ji,actionHandler:$i}),tr:new Wi({x:.5,y:-.5,cursorStyleHandler:Ji,actionHandler:$i}),bl:new Wi({x:-.5,y:.5,cursorStyleHandler:Ji,actionHandler:$i}),br:new Wi({x:.5,y:.5,cursorStyleHandler:Ji,actionHandler:$i}),mtr:new Wi({x:0,y:-.5,actionHandler:Xi,cursorStyleHandler:Yi,offsetY:-40,withConnection:!0,actionName:j})}),pn=()=>({mr:new Wi({x:.5,y:0,actionHandler:Ri,cursorStyleHandler:un,actionName:H}),ml:new Wi({x:-.5,y:0,actionHandler:Ri,cursorStyleHandler:un,actionName:H})}),mn=()=>n(n({},gn()),pn());class vn extends Pi{static getDefaults(){return n(n({},super.getDefaults()),vn.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),vn.ownDefaults),this.setOptions(t)}static createControls(){return{controls:gn()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,i=e.target,n=e.action;if(this===i&&n&&n.startsWith(G))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let n=i.length-1;n>=0;n--){const[r,o]=i[n],s=this.controls[r];if(s.shouldActivate(r,this,t,e?o.touchCorner:o.corner))return this.__corner=r,{key:r,control:s,coord:this.oCoords[r]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),i=Tt(e.x,e.y),n=Et({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),r=_t(i,n),o=_t(t,r),s=_t(o,[1/t[0],0,0,1/t[3],0,0]),a=this.group?Mt(this.calcTransformMatrix()):void 0;a&&(a.scaleX=Math.abs(a.scaleX),a.scaleY=Math.abs(a.scaleY));const A=this._calculateCurrentDimensions(a),c={};return this.forEachControl(((t,e)=>{const i=t.positionHandler(A,s,this,t);c[e]=Object.assign(i,this._calcCornerCoords(t,i))})),c}_calcCornerCoords(t,e){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),n=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/n[0],1/n[3]),t.rotate(wt(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=r.borderColor,this._setLineDash(t,r.borderDashArray),this.strokeBorders(t,e),r.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:i,hasControls:r}=this,o=n({hasBorders:i,hasControls:r},e),s=this.getViewportTransform(),a=o.hasBorders,A=o.hasControls,c=_t(s,this.calcTransformMatrix()),l=Mt(c);t.save(),t.translate(l.translateX,l.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(l.angle-=180),t.rotate(wt(this.group?l.angle:this.angle)),a&&this.drawBorders(t,l,e),A&&this.drawControls(t,e),t.restore()}drawBorders(t,e,i){let n;if(i&&i.forActiveSelection||this.group){const t=Be(this.width,this.height,Ut(e)),i=this.isStrokeAccountedForInDimensions()?at:(this.strokeUniform?(new st).scalarAdd(this.canvas?this.canvas.getZoom():1):new st(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);n=t.add(i).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,n,i)}drawControlsConnectingLines(t,e){let i=!1;t.beginPath(),this.forEachControl(((n,r)=>{n.withConnection&&n.getVisibility(this,r)&&(i=!0,t.moveTo(n.x*e.x,n.y*e.y),t.lineTo(n.x*e.x+n.offsetX,n.y*e.y+n.offsetY))})),i&&t.stroke()}drawControls(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:o,cornerColor:s}=this,a=n({cornerStrokeColor:r,cornerDashArray:o,cornerColor:s},e);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=a.cornerColor,this.transparentCorners||(t.strokeStyle=a.cornerStrokeColor),this._setLineDash(t,a.cornerDashArray),this.forEachControl(((e,i)=>{if(e.getVisibility(this,i)){const n=this.oCoords[i];e.render(t,n.x,n.y,a,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((t=>{let[e,i]=t;return this.setControlVisible(e,i)}))}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e);const n=this.width+4,r=this.height+4;return e.clearRect(-n/2,-r/2,n,r),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function yn(t,e){return e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((i=>{"constructor"!==i&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))}))})),t}e(vn,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class wn extends vn{}yn(wn,[Pe]),tt.setClass(wn),tt.setClass(wn,"object");const Cn=(t,e,i,n)=>{const r=2*(n=Math.round(n))+1,{data:o}=t.getImageData(e-n,i-n,r,r);for(let t=3;t<o.length;t+=4)if(o[t]>0)return!1;return!0};class bn{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new st(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new st(1/this.options.scaleX,1/this.options.scaleY):new st(1,1)}createSideVector(t,e){const i=ei(t,e);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,e,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,i)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(t){const e=new st(t);return e.y+=e.x*Math.tan(wt(this.options.skewY)),e.x+=e.y*Math.tan(wt(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const Bn=new st;class xn extends bn{static getOrthogonalRotationFactor(t,e){const i=e?ni(t,e):ri(t);return Math.abs(i)<b?-1:1}constructor(t,i,n,r){super(r),e(this,"AB",void 0),e(this,"AC",void 0),e(this,"alpha",void 0),e(this,"bisector",void 0),this.A=new st(t),this.B=new st(i),this.C=new st(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=ni(this.AB,this.AC),this.bisector=oi(ti(this.AB.eq(Bn)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e),r=si(n),o=xn.getOrthogonalRotationFactor(r,this.bisector);return this.scaleUnitVector(r,i*o)}projectBevel(){const t=[];return(this.alpha%B==0?[this.B]:[this.B,this.C]).forEach((e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))})),t}projectMiter(){const t=[],e=Math.abs(this.alpha),i=1/Math.sin(e/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),r=this.options.strokeUniform?ii(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ii(n)/this.strokeProjectionMagnitude<=r&&t.push(this.applySkew(this.A.add(n))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const i=[],n=new st(xn.getOrthogonalRotationFactor(this.bisector),xn.getOrthogonalRotationFactor(new st(this.bisector.y,this.bisector.x)));return[new st(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new st(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach((n=>{ci(n,t,e)&&i.push(this.A.add(n))})),i}projectRoundWithSkew(t,e){const i=[],{skewX:n,skewY:r,scaleX:o,scaleY:s,strokeUniform:a}=this.options,A=new st(Math.tan(wt(n)),Math.tan(wt(r))),c=this.strokeProjectionMagnitude,l=a?c/s/Math.sqrt(1/s**2+1/o**2*A.y**2):c/Math.sqrt(1+A.y**2),h=new st(Math.sqrt(Math.max(c**2-l**2,0)),l),u=a?c/Math.sqrt(1+A.x**2*(1/s)**2/(1/o+1/o*A.x*A.y)**2):c/Math.sqrt(1+A.x**2/(1+A.x*A.y)**2),d=new st(u,Math.sqrt(Math.max(c**2-u**2,0)));return[d,d.scalarMultiply(-1),h,h.scalarMultiply(-1)].map((t=>this.applySkew(a?t.multiply(this.strokeUniformScalar):t))).forEach((n=>{ci(n,t,e)&&i.push(this.applySkew(this.A).add(n))})),i}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%B==0,i=this.applySkew(this.A),n=t[e?0:2].subtract(i),r=t[e?1:0].subtract(i),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),s=ai(n,o)>0,a=s?n:r,A=s?r:n;return this.isSkewed()?t.push(...this.projectRoundWithSkew(a,A)):t.push(...this.projectRoundNoSkew(a,A)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector})))}}class _n extends bn{constructor(t,e,i){super(i),this.A=new st(t),this.T=new st(e)}calcOrthogonalProjection(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e);return this.scaleUnitVector(si(n),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new st(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new xn(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new st(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(oi(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(i);t.push(n.add(e),n.subtract(e))}return t.map((t=>this.applySkew(t)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const Sn=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];if(0===t.length)return n;const r=t.reduce(((t,e)=>(t[t.length-1].eq(e)||t.push(new st(e)),t)),[new st(t[0])]);if(1===r.length)i=!0;else if(!i){const t=r[0],e=((t,e)=>{for(let i=t.length-1;i>=0;i--)if(e(t[i]))return i;return-1})(r,(e=>!e.eq(t)));r.splice(e+1)}return r.forEach(((t,r,o)=>{let s,a;0===r?(a=o[1],s=i?t:o[o.length-1]):r===o.length-1?(s=o[r-1],a=i?t:o[0]):(s=o[r-1],a=o[r+1]),i&&1===o.length?n.push(...new _n(t,t,e).project()):!i||0!==r&&r!==o.length-1?n.push(...new xn(t,s,a,e).project()):n.push(...new _n(t,0===r?a:s,e).project())})),n},In=t=>{const e={};return Object.keys(t).forEach((i=>{e[i]={},Object.keys(t[i]).forEach((r=>{e[i][r]=n({},t[i][r])}))})),e},Mn=t=>t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Tn=t=>{const e=[];for(let i,n=0;n<t.length;n++)!1!==(i=En(t,n))&&e.push(i);return e},En=(t,e)=>{const i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||i>57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";const i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";const n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var kn=Object.freeze({__proto__:null,capitalize:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(t.charAt(0).toUpperCase()).concat(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:Mn,graphemeSplit:Tn});const Fn=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||i&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},Dn=(t,e)=>{const i=e.split("\n"),n=[];let r=-1,o={};t=In(t);for(let e=0;e<i.length;e++){const s=Tn(i[e]);if(t[e])for(let i=0;i<s.length;i++){r++;const s=t[e][i];s&&Object.keys(s).length>0&&(Fn(o,s,!0)?n.push({start:r,end:r+1,style:s}):n[n.length-1].end++),o=s||{}}else r+=s.length,o={}}return n},On=(t,e)=>{if(!Array.isArray(t))return In(t);const i=e.split(O),r={};let o=-1,s=0;for(let e=0;e<i.length;e++){const a=Tn(i[e]);for(let i=0;i<a.length;i++)o++,t[s]&&t[s].start<=o&&o<t[s].end&&(r[e]=r[e]||{},r[e][i]=n({},t[s].style),o===t[s].end-1&&s++)}return r},Un=["display","transform",V,"fill-opacity","fill-rule","opacity",Z,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Qn(t,e){const i=t.nodeName,n=t.getAttribute("class"),r=t.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let s;if(s=new RegExp("^"+i,"i"),e=e.replace(s,""),r&&e.length&&(s=new RegExp("#"+r+o,"i"),e=e.replace(s,"")),n&&e.length){const t=n.split(" ");for(let i=t.length;i--;)s=new RegExp("\\."+t[i]+o,"i"),e=e.replace(s,"")}return 0===e.length}function Ln(t,e){let i=!0;const n=Qn(t,e.pop());return n&&e.length&&(i=function(t,e){let i,n=!0;for(;t.parentElement&&1===t.parentElement.nodeType&&e.length;)n&&(i=e.pop()),n=Qn(t=t.parentElement,i);return 0===e.length}(t,e)),n&&i&&0===e.length}const jn=t=>{var e;return null!==(e=We[t])&&void 0!==e?e:t},Pn=new RegExp("(".concat(Re,")"),"gi");var Hn,Nn,Rn,zn,Gn,Wn,Yn;const Xn="(".concat(Re,")"),Kn=String.raw(Hn||(Hn=o(["(skewX)(",")"],["(skewX)\\(","\\)"])),Xn),Vn=String.raw(Nn||(Nn=o(["(skewY)(",")"],["(skewY)\\(","\\)"])),Xn),Zn=String.raw(Rn||(Rn=o(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Xn,Xn,Xn),Jn=String.raw(zn||(zn=o(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Xn,Xn),qn=String.raw(Gn||(Gn=o(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Xn,Xn),$n=String.raw(Wn||(Wn=o(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Xn,Xn,Xn,Xn,Xn,Xn),tr="(?:".concat($n,"|").concat(qn,"|").concat(Zn,"|").concat(Jn,"|").concat(Kn,"|").concat(Vn,")"),er="(?:".concat(tr,"*)"),ir=String.raw(Yn||(Yn=o(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),er),nr=new RegExp(ir),rr=new RegExp(tr),or=new RegExp(tr,"g");function sr(t){const e=[];if(!(t=(t=>t.replace(Pn," $1 ").replace(/,/gi," ").replace(/\s+/gi," "))(t).replace(/\s*([()])\s*/gi,"$1"))||t&&!nr.test(t))return[..._];for(const i of t.matchAll(or)){const t=rr.exec(i[0]);if(!t)continue;let n=_;const r=t.filter((t=>!!t)),[,o,...s]=r,[a,A,c,l,h,u]=s.map((t=>parseFloat(t)));switch(o){case"translate":n=Tt(a,A);break;case j:n=Et({angle:a},{x:A,y:c});break;case G:n=kt(a,A);break;case X:n=Dt(a);break;case K:n=Ot(a);break;case"matrix":n=[a,A,c,l,h,u]}e.push(n)}return St(e)}function ar(t,e,i,n){const r=Array.isArray(e);let o,s=e;if(t!==V&&t!==Z||e!==D){if("strokeUniform"===t)return"non-scaling-stroke"===e;if("strokeDashArray"===t)s=e===D?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)s=i&&i.transformMatrix?_t(i.transformMatrix,sr(e)):sr(e);else if("visible"===t)s=e!==D&&"hidden"!==e,i&&!1===i.visible&&(s=!1);else if("opacity"===t)s=parseFloat(e),i&&void 0!==i.opacity&&(s*=i.opacity);else if("textAnchor"===t)s="start"===e?T:"end"===e?F:M;else if("charSpacing"===t)o=Zt(e,n)/n*1e3;else if("paintFirst"===t){const t=e.indexOf(V),i=e.indexOf(Z);s=V,(t>-1&&i>-1&&i<t||-1===t&&i>-1)&&(s=Z)}else{if("href"===t||"xlink:href"===t||"font"===t||"id"===t)return e;if("imageSmoothing"===t)return"optimizeQuality"===e;o=r?e.map(Zt):Zt(e,n)}}else s="";return!r&&isNaN(o)?s:o}function Ar(t,e){const i=t.match(Ge);if(!i)return;const n=i[1],r=i[3],o=i[4],s=i[5],a=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=Zt(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}function cr(t,e){t.replace(/;\s*$/,"").split(";").forEach((t=>{if(!t)return;const[i,n]=t.split(":");e[i.trim().toLowerCase()]=n.trim()}))}function lr(t){const e={},i=t.getAttribute("style");return i?("string"==typeof i?cr(i,e):function(t,e){Object.entries(t).forEach((t=>{let[i,n]=t;void 0!==n&&(e[i.toLowerCase()]=n)}))}(i,e),e):e}const hr={stroke:"strokeOpacity",fill:"fillOpacity"};function ur(t,e,i){if(!t)return{};let r,o={},s=S;t.parentNode&&Ze.test(t.parentNode.nodeName)&&(o=ur(t.parentElement,e,i),o.fontSize&&(r=s=Zt(o.fontSize)));const a=n(n(n({},e.reduce(((e,i)=>{const n=t.getAttribute(i);return n&&(e[i]=n),e}),{})),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};for(const r in e)Ln(t,r.split(" "))&&(i=n(n({},i),e[r]));return i}(t,i)),lr(t));a[Xe]&&t.setAttribute(Xe,a[Xe]),a[Ye]&&(r=Zt(a[Ye],s),a[Ye]="".concat(r));const A={};for(const t in a){const e=jn(t),i=ar(e,a[t],o,r);A[e]=i}A&&A.font&&Ar(A.font,A);const c=n(n({},o),A);return Ze.test(t.nodeName)?c:function(t){const e=wn.getDefaults();return Object.entries(hr).forEach((i=>{let[n,r]=i;if(void 0===t[r]||""===t[n])return;if(void 0===t[n]){if(!e[n])return;t[n]=e[n]}if(0===t[n].indexOf("url("))return;const o=new Kt(t[n]);t[n]=o.setAlpha(Vt(o.getAlpha()*t[r],2)).toRgba()})),t}(c)}const dr=["left","top","width","height","visible"],fr=["rx","ry"];class gr extends wn{static getDefaults(){return n(n({},super.getDefaults()),gr.ownDefaults)}constructor(t){super(),Object.assign(this,gr.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,n=-e/2,r=-i/2,o=this.rx?Math.min(this.rx,e/2):0,s=this.ry?Math.min(this.ry,i/2):0,a=0!==o||0!==s;t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+e-o,r),a&&t.bezierCurveTo(n+e-I*o,r,n+e,r+I*s,n+e,r+s),t.lineTo(n+e,r+i-s),a&&t.bezierCurveTo(n+e,r+i-I*s,n+e-I*o,r+i,n+e-o,r+i),t.lineTo(n+o,r+i),a&&t.bezierCurveTo(n+I*o,r+i,n,r+i-I*s,n,r+i-s),t.lineTo(n,r+s),a&&t.bezierCurveTo(n,r+I*s,n+I*o,r,n+o,r),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...fr,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(i,'" ry="').concat(n,'" width="').concat(t,'" height="').concat(e,'" />\n')]}static async fromElement(t,e,i){const o=ur(t,this.ATTRIBUTE_NAMES,i),{left:s=0,top:a=0,width:A=0,height:c=0,visible:l=!0}=o,h=r(o,dr);return new this(n(n(n({},e),h),{},{left:s,top:a,width:A,height:c,visible:Boolean(l&&A&&c)}))}}e(gr,"type","Rect"),e(gr,"cacheProperties",[...gi,...fr]),e(gr,"ownDefaults",{rx:0,ry:0}),e(gr,"ATTRIBUTE_NAMES",[...Un,"x","y","rx","ry","width","height"]),tt.setClass(gr),tt.setSVGClass(gr);const pr="initialization",mr="added",vr="removed",yr="imperative",wr=(t,e)=>{const{strokeUniform:i,strokeWidth:n,width:r,height:o,group:s}=e,a=s&&s!==t?xe(s.calcTransformMatrix(),t.calcTransformMatrix()):null,A=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),l=i&&c?Se(new st(n,n),void 0,t.calcTransformMatrix()):at,h=!i&&c?n:0,u=Be(r+h,o+h,St([a,e.calcOwnMatrix()],!0)).add(l).scalarDivide(2);return[A.subtract(u),A.add(u)]};class Cr{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:i,strategy:n}=t;return e===pr||e===yr||!!i&&n!==i}shouldLayoutClipPath(t){let{type:e,target:{clipPath:i}}=t;return e!==pr&&i&&!i.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:i,target:n}=e;if(i===yr&&e.overrides)return e.overrides;if(0===t.length)return;const{left:r,top:o,width:s,height:a}=me(t.map((t=>wr(n,t))).reduce(((t,e)=>t.concat(e)),[])),A=new st(s,a),c=new st(r,o).add(A.scalarDivide(2));if(i===pr){const t=this.getInitialSize(e,{size:A,center:c});return{center:c,relativeCorrection:new st(0,0),size:t}}return{center:c.transform(n.calcOwnMatrix()),size:A}}}e(Cr,"type","strategy");class br extends Cr{shouldPerformLayout(t){return!0}}e(br,"type","fit-content"),tt.setClass(br);const Br=["strategy"],xr=["target","strategy","bubbles","prevStrategy"],_r="layoutManager";class Sr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new br;e(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=n(n({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const i=this.getLayoutResult(e);i&&this.commitLayout(e,i),this.onAfterLayout(e,i),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:i}=e;return[J,U,H,L,Q,P,z,N,R].map((e=>t.on(e,(t=>this.performLayout(e===J?{type:"object_modified",trigger:e,e:t,target:i}:{type:"object_modifying",trigger:e,e:t,target:i})))))}subscribe(t,e){this.unsubscribe(t,e);const i=this.attachHandlers(t,e);this._subscriptions.set(t,i)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach((t=>t())),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach((e=>this.unsubscribe(e,t)))}subscribeTargets(t){t.targets.forEach((e=>this.subscribe(e,t)))}onBeforeLayout(t){const{target:e,type:i}=t,{canvas:o}=e;if(i===pr||i===mr?this.subscribeTargets(t):i===vr&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),o&&o.fire("object:layout:before",{target:e,context:t}),i===yr&&t.deep){const i=r(t,Br);e.forEachObject((t=>t.layoutManager&&t.layoutManager.performLayout(n(n({},i),{},{bubbles:!1,target:t}))))}}getLayoutResult(t){const{target:e,strategy:i,type:n}=t,r=i.calcLayoutResult(t,e.getObjects());if(!r)return;const o=n===pr?new st:e.getRelativeCenterPoint(),{center:s,correction:a=new st,relativeCorrection:A=new st}=r,c=o.subtract(s).add(a).transform(n===pr?_:xt(e.calcOwnMatrix()),!0).add(A);return{result:r,prevCenter:o,nextCenter:s,offset:c}}commitLayout(t,e){const{target:i}=t,{result:{size:n},nextCenter:r}=e;var o,s;i.set({width:n.x,height:n.y}),this.layoutObjects(t,e),t.type===pr?i.set({left:null!==(o=t.x)&&void 0!==o?o:r.x+n.x*Ee(i.originX),top:null!==(s=t.y)&&void 0!==s?s:r.y+n.y*Ee(i.originY)}):(i.setPositionByOrigin(r,M,M),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,e){const{target:i}=t;i.forEachObject((n=>{n.group===i&&this.layoutObject(t,e,n)})),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,i.clipPath)}layoutObject(t,e,i){let{offset:n}=e;i.set({left:i.left+n.x,top:i.top+n.y})}onAfterLayout(t,e){const{target:i,strategy:o,bubbles:s,prevStrategy:a}=t,A=r(t,xr),{canvas:c}=i;i.fire("layout:after",{context:t,result:e}),c&&c.fire("object:layout:after",{context:t,result:e,target:i});const l=i.parent;s&&null!=l&&l.layoutManager&&((A.path||(A.path=[])).push(i),l.layoutManager.performLayout(n(n({},A),{},{target:l}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach((t=>t.forEach((t=>t())))),t.clear()}toObject(){return{type:_r,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}tt.setClass(Sr,_r);const Ir=["type","objects","layoutManager"];class Mr extends Sr{performLayout(){}}class Tr extends(ct(wn)){static getDefaults(){return n(n({},super.getDefaults()),Tr.ownDefaults)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e(this,"_activeObjects",[]),e(this,"__objectSelectionTracker",void 0),e(this,"__objectSelectionDisposer",void 0),Object.assign(this,Tr.ownDefaults),this.setOptions(i),this.groupInit(t,i)}groupInit(t,e){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((t=>{this.enterGroup(t,!1)})),this.layoutManager=null!==(i=e.layoutManager)&&void 0!==i?i:new Sr,this.layoutManager.performLayout({type:pr,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(A("error","Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(t)||(A("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((t,e,i)=>this.canEnterGroup(t)&&i.indexOf(t)===e))}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=this._filterObjectsBeforeEnteringGroup(e),r=super.add(...n);return this._onAfterObjectsChange(mr,n),r}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];const r=this._filterObjectsBeforeEnteringGroup(i),o=super.insertAt(t,...r);return this._onAfterObjectsChange(mr,r),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(vr,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const i=this[t];return super._set(t,e),"canvas"===t&&i!==e&&(this._objects||[]).forEach((i=>{i._set(t,e)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:i}=e;const n=this._activeObjects;if(t)n.push(i),this._set("dirty",!0);else if(n.length>0){const t=n.indexOf(i);t>-1&&(n.splice(t,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&we(t,_t(xt(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(we(t,_t(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=wn.prototype.shouldCache.call(this);if(t)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,i){this._renderBackground(t);for(let e=0;e<this._objects.length;e++){var n;const i=this._objects[e];null!==(n=this.canvas)&&void 0!==n&&n.preserveObjectStacking&&i.group!==this?(t.save(),t.transform(...xt(this.calcTransformMatrix())),i.render(t),t.restore()):i.group===this&&i.render(t)}this._drawClipPath(t,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}triggerLayout(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.layoutManager.performLayout(n({target:this,type:yr},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const i=this.includeDefaultValues;return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){const r=n.includeDefaultValues;n.includeDefaultValues=i;const o=n[t||"toObject"](e);return n.includeDefaultValues=r,o}))}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.layoutManager.toObject();return n(n(n({},super.toObject(["subTargetCheck","interactive",...t])),"fit-content"!==e.strategy||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=gr.prototype._toSVG.call(this),i=e.indexOf("COMMON_PARTS");e[i]='for="group" ';const n=e.join("");return t?t(n):n}_toSVG(t){const e=["<g ","COMMON_PARTS"," >\n"],i=this._createSVGBgRect(t);i&&e.push("\t\t",i);for(let i=0;i<this._objects.length;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e}getSvgStyles(){const t=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],i=this._createSVGBgRect(t);i&&e.push("\t",i);for(let i=0;i<this._objects.length;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:i,objects:o=[],layoutManager:s}=t,a=r(t,Ir);return Promise.all([jt(o,e),Pt(a,e)]).then((t=>{let[e,i]=t;const r=new this(e,n(n(n({},a),i),{},{layoutManager:new Mr}));if(s){const t=tt.getClass(s.type),e=tt.getClass(s.strategy);r.layoutManager=new t(new e)}else r.layoutManager=new Sr;return r.layoutManager.subscribeTargets({type:pr,target:r,targets:r.getObjects()}),r.setCoords(),r}))}}e(Tr,"type","Group"),e(Tr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),tt.setClass(Tr);const Er=(t,e)=>Math.min(e.width/t.width,e.height/t.height),kr=(t,e)=>Math.max(e.width/t.width,e.height/t.height),Fr="\\s*,?\\s*",Dr="".concat(Fr,"(").concat(Re,")"),Or="".concat(Dr).concat(Dr).concat(Dr).concat(Fr,"([01])").concat(Fr,"([01])").concat(Dr).concat(Dr),Ur={m:"l",M:"L"},Qr=(t,e,i,n,r,o,s,a,A,c,l)=>{const h=rt(t),u=ot(t),d=rt(e),f=ot(e),g=i*r*d-n*o*f+s,p=n*r*d+i*o*f+a;return["C",c+A*(-i*r*u-n*o*h),l+A*(-n*r*u+i*o*h),g+A*(i*r*f+n*o*d),p+A*(n*r*f-i*o*d),g,p]},Lr=(t,e,i,n)=>{const r=Math.atan2(e,t),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)};function jr(t,e,i,n,r,o,s,A){let c;if(a.cachesBoundsOfCurve&&(c=[...arguments].join(),y.boundsOfCurveCache[c]))return y.boundsOfCurveCache[c];const l=Math.sqrt,h=Math.abs,u=[],d=[[0,0],[0,0]];let f=6*t-12*i+6*r,g=-3*t+9*i-9*r+3*s,p=3*i-3*t;for(let t=0;t<2;++t){if(t>0&&(f=6*e-12*n+6*o,g=-3*e+9*n-9*o+3*A,p=3*n-3*e),h(g)<1e-12){if(h(f)<1e-12)continue;const t=-p/f;0<t&&t<1&&u.push(t);continue}const i=f*f-4*p*g;if(i<0)continue;const r=l(i),s=(-f+r)/(2*g);0<s&&s<1&&u.push(s);const a=(-f-r)/(2*g);0<a&&a<1&&u.push(a)}let m=u.length;const v=m,w=Rr(t,e,i,n,r,o,s,A);for(;m--;){const{x:t,y:e}=w(u[m]);d[0][m]=t,d[1][m]=e}d[0][v]=t,d[1][v]=e,d[0][v+1]=s,d[1][v+1]=A;const C=[new st(Math.min(...d[0]),Math.min(...d[1])),new st(Math.max(...d[0]),Math.max(...d[1]))];return a.cachesBoundsOfCurve&&(y.boundsOfCurveCache[c]=C),C}const Pr=(t,e,i)=>{let[n,r,o,s,a,A,c,l]=i;const h=((t,e,i,n,r,o,s)=>{if(0===i||0===n)return[];let a=0,A=0,c=0;const l=Math.PI,h=s*x,u=ot(h),d=rt(h),f=.5*(-d*t-u*e),g=.5*(-d*e+u*t),p=i**2,m=n**2,v=g**2,y=f**2,w=p*m-p*v-m*y;let C=Math.abs(i),b=Math.abs(n);if(w<0){const t=Math.sqrt(1-w/(p*m));C*=t,b*=t}else c=(r===o?-1:1)*Math.sqrt(w/(p*v+m*y));const B=c*C*g/b,_=-c*b*f/C,S=d*B-u*_+.5*t,I=u*B+d*_+.5*e;let M=Lr(1,0,(f-B)/C,(g-_)/b),T=Lr((f-B)/C,(g-_)/b,(-f-B)/C,(-g-_)/b);0===o&&T>0?T-=2*l:1===o&&T<0&&(T+=2*l);const E=Math.ceil(Math.abs(T/l*2)),k=[],F=T/E,D=8/3*Math.sin(F/4)*Math.sin(F/4)/Math.sin(F/2);let O=M+F;for(let t=0;t<E;t++)k[t]=Qr(M,O,d,u,C,b,S,I,D,a,A),a=k[t][5],A=k[t][6],M=O,O+=F;return k})(c-t,l-e,r,o,a,A,s);for(let i=0,n=h.length;i<n;i++)h[i][1]+=t,h[i][2]+=e,h[i][3]+=t,h[i][4]+=e,h[i][5]+=t,h[i][6]+=e;return h},Hr=t=>{let e=0,i=0,n=0,r=0;const o=[];let s,a=0,A=0;for(const c of t){const t=[...c];let l;switch(t[0]){case"l":t[1]+=e,t[2]+=i;case"L":e=t[1],i=t[2],l=["L",e,i];break;case"h":t[1]+=e;case"H":e=t[1],l=["L",e,i];break;case"v":t[1]+=i;case"V":i=t[1],l=["L",e,i];break;case"m":t[1]+=e,t[2]+=i;case"M":e=t[1],i=t[2],n=t[1],r=t[2],l=["M",e,i];break;case"c":t[1]+=e,t[2]+=i,t[3]+=e,t[4]+=i,t[5]+=e,t[6]+=i;case"C":a=t[3],A=t[4],e=t[5],i=t[6],l=["C",t[1],t[2],a,A,e,i];break;case"s":t[1]+=e,t[2]+=i,t[3]+=e,t[4]+=i;case"S":"C"===s?(a=2*e-a,A=2*i-A):(a=e,A=i),e=t[3],i=t[4],l=["C",a,A,t[1],t[2],e,i],a=l[3],A=l[4];break;case"q":t[1]+=e,t[2]+=i,t[3]+=e,t[4]+=i;case"Q":a=t[1],A=t[2],e=t[3],i=t[4],l=["Q",a,A,e,i];break;case"t":t[1]+=e,t[2]+=i;case"T":"Q"===s?(a=2*e-a,A=2*i-A):(a=e,A=i),e=t[1],i=t[2],l=["Q",a,A,e,i];break;case"a":t[6]+=e,t[7]+=i;case"A":Pr(e,i,t).forEach((t=>o.push(t))),e=t[6],i=t[7];break;case"z":case"Z":e=n,i=r,l=["Z"]}l?(o.push(l),s=l[0]):s=""}return o},Nr=(t,e,i,n)=>Math.sqrt((i-t)**2+(n-e)**2),Rr=(t,e,i,n,r,o,s,a)=>A=>{const c=A**3,l=(t=>3*t**2*(1-t))(A),h=(t=>3*t*(1-t)**2)(A),u=(t=>(1-t)**3)(A);return new st(s*c+r*l+i*h+t*u,a*c+o*l+n*h+e*u)},zr=t=>t**2,Gr=t=>2*t*(1-t),Wr=t=>(1-t)**2,Yr=(t,e,i,n,r,o,s,a)=>A=>{const c=zr(A),l=Gr(A),h=Wr(A),u=3*(h*(i-t)+l*(r-i)+c*(s-r)),d=3*(h*(n-e)+l*(o-n)+c*(a-o));return Math.atan2(d,u)},Xr=(t,e,i,n,r,o)=>s=>{const a=zr(s),A=Gr(s),c=Wr(s);return new st(r*a+i*A+t*c,o*a+n*A+e*c)},Kr=(t,e,i,n,r,o)=>s=>{const a=1-s,A=2*(a*(i-t)+s*(r-i)),c=2*(a*(n-e)+s*(o-n));return Math.atan2(c,A)},Vr=(t,e,i)=>{let n=new st(e,i),r=0;for(let e=1;e<=100;e+=1){const i=t(e/100);r+=Nr(n.x,n.y,i.x,i.y),n=i}return r},Zr=t=>{let e,i,n=0,r=0,o=0,s=0,a=0;const A=[];for(const c of t){const t={x:r,y:o,command:c[0],length:0};switch(c[0]){case"M":i=t,i.x=s=r=c[1],i.y=a=o=c[2];break;case"L":i=t,i.length=Nr(r,o,c[1],c[2]),r=c[1],o=c[2];break;case"C":e=Rr(r,o,c[1],c[2],c[3],c[4],c[5],c[6]),i=t,i.iterator=e,i.angleFinder=Yr(r,o,c[1],c[2],c[3],c[4],c[5],c[6]),i.length=Vr(e,r,o),r=c[5],o=c[6];break;case"Q":e=Xr(r,o,c[1],c[2],c[3],c[4]),i=t,i.iterator=e,i.angleFinder=Kr(r,o,c[1],c[2],c[3],c[4]),i.length=Vr(e,r,o),r=c[3],o=c[4];break;case"Z":i=t,i.destX=s,i.destY=a,i.length=Nr(r,o,s,a),r=s,o=a}n+=i.length,A.push(i)}return A.push({length:n,x:r,y:o}),A},Jr=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zr(t),r=0;for(;e-i[r].length>0&&r<i.length-2;)e-=i[r].length,r++;const o=i[r],s=e/o.length,a=t[r];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return n(n({},new st(o.x,o.y).lerp(new st(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return n(n({},new st(o.x,o.y).lerp(new st(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-o.y,a[1]-o.x)});case"C":case"Q":return((t,e)=>{let i,r=0,o=0,s={x:t.x,y:t.y},a=n({},s),A=.01,c=0;const l=t.iterator,h=t.angleFinder;for(;o<e&&A>1e-4;)a=l(r),c=r,i=Nr(s.x,s.y,a.x,a.y),i+o>e?(r-=A,A/=2):(s=a,r+=A,o+=i);return n(n({},a),{},{angle:h(c)})})(o,e)}},qr=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),$r=new RegExp(Or,"g"),to=new RegExp(Re,"gi"),eo={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},io=t=>{var e;const i=[],n=null!==(e=t.match(qr))&&void 0!==e?e:[];for(const t of n){const e=t[0];if("z"===e||"Z"===e){i.push([e]);continue}const n=eo[e.toLowerCase()];let r=[];if("a"===e||"A"===e){$r.lastIndex=0;for(let e=null;e=$r.exec(t);)r.push(...e.slice(1))}else r=t.match(to)||[];for(let t=0;t<r.length;t+=n){const o=new Array(n),s=Ur[e];o[0]=t>0&&s?s:e;for(let e=0;e<n;e++)o[e+1]=parseFloat(r[t+e]);i.push(o)}}return i},no=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new st(t[0]),n=new st(t[1]),r=1,o=0;const s=[],a=t.length,A=a>2;let c;for(A&&(r=t[2].x<n.x?-1:t[2].x===n.x?0:1,o=t[2].y<n.y?-1:t[2].y===n.y?0:1),s.push(["M",i.x-r*e,i.y-o*e]),c=1;c<a;c++){if(!i.eq(n)){const t=i.midPointFrom(n);s.push(["Q",i.x,i.y,t.x,t.y])}i=t[c],c+1<t.length&&(n=t[c+1])}return A&&(r=i.x>t[c-2].x?1:i.x===t[c-2].x?0:-1,o=i.y>t[c-2].y?1:i.y===t[c-2].y?0:-1),s.push(["L",i.x+r*e,i.y+o*e]),s},ro=(t,e)=>t.map((t=>t.map(((t,i)=>0===i||void 0===e?t:Vt(t,e))).join(" "))).join(" ");function oo(t,e){const i=t.style;i&&e&&("string"==typeof e?i.cssText+=";"+e:Object.entries(e).forEach((t=>{let[e,n]=t;return i.setProperty(e,n)})))}const so=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;function ao(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.onComplete||C,n=new(m().XMLHttpRequest),r=e.signal,o=function(){n.abort()},s=function(){r&&r.removeEventListener("abort",o),n.onerror=n.ontimeout=C};if(r&&r.aborted)throw new l("request");return r&&r.addEventListener("abort",o,{once:!0}),n.onreadystatechange=function(){4===n.readyState&&(s(),i(n),n.onreadystatechange=C)},n.onerror=n.ontimeout=s,n.open("get",t,!0),n.send(),n}const Ao=(t,e)=>{let i=t._findCenterFromElement();t.transformMatrix&&((t=>{if(t.transformMatrix){const{scaleX:e,scaleY:i,angle:n,skewX:r}=Mt(t.transformMatrix);t.flipX=!1,t.flipY=!1,t.set(W,e),t.set(Y,i),t.angle=n,t.skewX=r,t.skewY=0}})(t),i=i.transform(t.transformMatrix)),delete t.transformMatrix,e&&(t.scaleX*=e.scaleX,t.scaleY*=e.scaleY,t.cropX=e.cropX,t.cropY=e.cropY,i.x+=e.offsetLeft,i.y+=e.offsetTop,t.width=e.width,t.height=e.height),t.setPositionByOrigin(i,M,M)};var co=Object.freeze({__proto__:null,addTransformToObject:ye,animate:Di,animateColor:Oi,applyTransformToObject:we,calcAngleBetweenVectors:ni,calcDimensionsMatrix:Ut,calcPlaneChangeMatrix:xe,calcVectorRotation:ri,cancelAnimFrame:ut,capValue:di,composeMatrix:Qt,copyCanvasElement:t=>{var e;const i=mt(t);return null===(e=i.getContext("2d"))||void 0===e||e.drawImage(t,0,0),i},cos:rt,createCanvasElement:gt,createImage:pt,createRotateMatrix:Et,createScaleMatrix:kt,createSkewXMatrix:Dt,createSkewYMatrix:Ot,createTranslateMatrix:Tt,createVector:ei,crossProduct:ai,degreesToRadians:wt,dotProduct:Ai,ease:bi,enlivenObjectEnlivables:Pt,enlivenObjects:jt,findScaleToCover:kr,findScaleToFit:Er,getBoundsOfCurve:jr,getOrthonormalVector:si,getPathSegmentsInfo:Zr,getPointOnPath:Jr,getPointer:fe,getRandomInt:so,getRegularPolygonPath:(t,e)=>{const i=2*Math.PI/t;let n=-b;t%2==0&&(n+=i/2);const r=new Array(t+1);for(let o=0;o<t;o++){const t=o*i+n,{x:s,y:a}=new st(rt(t),ot(t)).scalarMultiply(e);r[o]=[0===o?"M":"L",s,a]}return r[t]=["Z"],r},getSmoothPathFromPoints:no,getSvgAttributes:t=>{const e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:oi,groupSVGElements:(t,e)=>t&&1===t.length?t[0]:new Tr(t,e),hasStyleChanged:Fn,invertTransform:xt,isBetweenVectors:ci,isIdentityMatrix:bt,isTouchEvent:ge,isTransparent:Cn,joinPath:ro,loadImage:Lt,magnitude:ii,makeBoundingBoxFromPoints:me,makePathSimpler:Hr,matrixToSVG:qt,mergeClipPaths:(t,e)=>{var i;let n=t,r=e;n.inverted&&!r.inverted&&(n=e,r=t),Ie(r,null===(i=r.group)||void 0===i?void 0:i.calcTransformMatrix(),n.calcTransformMatrix());const o=n.inverted&&r.inverted;return o&&(n.inverted=r.inverted=!1),new Tr([n],{clipPath:r,inverted:o})},multiplyTransformMatrices:_t,multiplyTransformMatrixArray:St,parsePath:io,parsePreserveAspectRatioAttribute:Jt,parseUnit:Zt,pick:Ht,projectStrokeOnPoints:Sn,qrDecompose:Mt,radiansToDegrees:Ct,removeFromArray:nt,removeTransformFromObject:(t,e)=>{const i=xt(e),n=_t(i,t.calcOwnMatrix());we(t,n)},removeTransformMatrixForSvgParsing:Ao,request:ao,requestAnimFrame:ht,resetObjectTransform:Ce,rotatePoint:(t,e,i)=>t.rotate(i,e),rotateVector:ti,saveObjectTransform:be,sendObjectToPlane:Ie,sendPointToPlane:_e,sendVectorToPlane:Se,setStyle:oo,sin:ot,sizeAfterTransform:Be,string:kn,stylesFromArray:On,stylesToArray:Dn,toBlob:yt,toDataURL:vt,toFixed:Vt,transformPath:(t,e,i)=>(i&&(e=_t(e,[1,0,0,1,-i.x,-i.y])),t.map((t=>{const i=[...t];for(let n=1;n<t.length-1;n+=2){const{x:r,y:o}=Bt({x:t[n],y:t[n+1]},e);i[n]=r,i[n+1]=o}return i}))),transformPoint:Bt});class lo extends le{constructor(t){let{allowTouchScrolling:i=!1,containerClass:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),e(this,"upper",void 0),e(this,"container",void 0);const{el:r}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:i}),this.applyCanvasStyle(o,{allowTouchScrolling:i,styles:{position:"absolute",left:"0",top:"0"}});const s=this.createContainerElement();s.classList.add(n),r.parentNode&&r.parentNode.replaceChild(s,r),s.append(r,o),this.container=s}createUpperCanvas(){const{el:t}=this.lower,e=gt();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=p().createElement("div");return t.setAttribute("data-fabric","wrapper"),oo(t,{position:"relative"}),ce(t),t}applyCanvasStyle(t,e){const{styles:i,allowTouchScrolling:r}=e;oo(t,n(n({},i),{},{"touch-action":r?"manipulation":D})),ce(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:i,ctx:n}=this.upper;ae(i,n,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Ae(this.upper.el,t),Ae(this.container,t)}cleanupDOM(t){const e=this.container,{el:i}=this.lower,{el:n}=this.upper;super.cleanupDOM(t),e.removeChild(n),e.removeChild(i),e.parentNode&&e.parentNode.replaceChild(i,e)}dispose(){super.dispose(),g().dispose(this.upper.el),delete this.upper,delete this.container}}class ho extends ue{constructor(){super(...arguments),e(this,"targets",[]),e(this,"_hoveredTargets",[]),e(this,"_objectsToRender",void 0),e(this,"_currentTransform",null),e(this,"_groupSelector",null),e(this,"contextTopDirty",!1)}static getDefaults(){return n(n({},super.getDefaults()),ho.ownDefaults)}get upperCanvasEl(){var t;return null===(t=this.elements.upper)||void 0===t?void 0:t.el}get contextTop(){var t;return null===(t=this.elements.upper)||void 0===t?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new lo(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((e=>!e.group&&e!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),i=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,i){const n=this.targetFindTolerance,r=this.pixelFindContext;this.clearContext(r),r.save(),r.translate(-e+n,-i+n),r.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(r),t.selectionBackgroundColor=o,r.restore();const s=Math.round(n*this.getRetinaScaling());return Cn(r,s,s,s)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find((e=>!!e&&!0===t[e])):t[e])}_shouldClearSelection(t,e){const i=this.getActiveObjects(),n=this._activeObject;return!!(!e||e&&n&&i.length>1&&-1===i.indexOf(e)&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e)}_shouldCenterTransform(t,e,i){if(!t)return;let n;return e===G||e===W||e===Y||e===H?n=this.centeredScaling||t.centeredScaling:e===j&&(n=this.centeredRotation||t.centeredRotation),n?!i:i}_getOriginFromCorner(t,e){const i={x:t.originX,y:t.originY};return e?(["ml","tl","bl"].includes(e)?i.x=F:["mr","tr","br"].includes(e)&&(i.x=T),["tl","mt","tr"].includes(e)?i.y=k:["bl","mb","br"].includes(e)&&(i.y=E),i):i}_setupCurrentTransform(t,e,i){var r;const o=e.group?_e(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:s="",control:a}=e.getActiveControl()||{},A=i&&a?null===(r=a.getActionHandler(t,e,a))||void 0===r?void 0:r.bind(a):je,c=((t,e,i,n)=>{if(!e||!t)return"drag";const r=n.controls[e];return r.getActionName(i,r,n)})(i,s,t,e),l=t[this.centeredKey],h=this._shouldCenterTransform(e,c,l)?{x:M,y:M}:this._getOriginFromCorner(e,s),u={target:e,action:c,actionHandler:A,actionPerformed:!1,corner:s,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:o.x-e.left,offsetY:o.y-e.top,originX:h.x,originY:h.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:wt(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:l,original:n(n({},be(e)),{},{originX:h.x,originY:h.y})};this._currentTransform=u,this.fire("before:transform",{e:t,transform:u})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:i,deltaX:n,deltaY:r}=this._groupSelector,o=new st(e,i).transform(this.viewportTransform),s=new st(e+n,i+r).transform(this.viewportTransform),a=this.selectionLineWidth/2;let A=Math.min(o.x,s.x),c=Math.min(o.y,s.y),l=Math.max(o.x,s.x),h=Math.max(o.y,s.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(A,c,l-A,h-c)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,A+=a,c+=a,l-=a,h-=a,wn.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(A,c,l-A,h-c))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),i=this._activeObject,n=this.getActiveObjects();if(this.targets=[],i&&n.length>=1){if(i.findControl(e,ge(t)))return i;if(n.length>1&&this.searchPossibleTargets([i],e))return i;if(i===this.searchPossibleTargets([i],e)){if(this.preserveObjectStacking){const n=this.targets;this.targets=[];const r=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&r&&r!==i?(this.targets=n,i):r}return i}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let i=t.getCoords();const n=this.getZoom(),r=t.padding/n;if(r){const[t,e,n,o]=i,s=Math.atan2(e.y-t.y,e.x-t.x),a=rt(s)*r,A=ot(s)*r,c=a+A,l=a-A;i=[new st(t.x-l,t.y-c),new st(e.x+c,e.y-l),new st(n.x+l,n.y+c),new st(o.x-c,o.y+l)]}return Ui.isPointInPolygon(e,i)}_checkTarget(t,e){if(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,_e(e,void 0,this.viewportTransform))){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,e.x,e.y))return!0}return!1}_searchPossibleTargets(t,e){let i=t.length;for(;i--;){const n=t[i];if(this._checkTarget(n,e)){if(At(n)&&n.subTargetCheck){const t=this._searchPossibleTargets(n._objects,e);t&&this.targets.push(t)}return n}}}searchPossibleTargets(t,e){const i=this._searchPossibleTargets(t,e);if(i&&At(i)&&i.interactive&&this.targets[0]){const t=this.targets;for(let e=t.length-1;e>0;e--){const i=t[e];if(!At(i)||!i.interactive)return i}return t[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.upperCanvasEl,n=i.getBoundingClientRect();let r=fe(t),o=n.width||0,s=n.height||0;o&&s||(E in n&&k in n&&(s=Math.abs(n.top-n.bottom)),F in n&&T in n&&(o=Math.abs(n.right-n.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=_e(r,void 0,this.viewportTransform));const a=this.getRetinaScaling();1!==a&&(r.x/=a,r.y/=a);const A=0===o||0===s?new st(1,1):new st(i.width/o,i.height/s);return r.multiply(A)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=gt(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return ne(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let i=!1,n=!1;const r=this.getActiveObjects(),o=[],s=[];t.forEach((t=>{r.includes(t)||(i=!0,t.fire("deselected",{e,target:t}),s.push(t))})),r.forEach((n=>{t.includes(n)||(i=!0,n.fire("selected",{e,target:n}),o.push(n))})),t.length>0&&r.length>0?(n=!0,i&&this.fire("selection:updated",{e,selected:o,deselected:s})):r.length>0?(n=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(n=!0,this.fire("selection:cleared",{e,deselected:s})),n&&(this._objectsToRender=void 0)}setActiveObject(t,e){const i=this.getActiveObjects(),n=this._setActiveObject(t,e);return this._fireSelectionEvents(i,e),n}_setActiveObject(t,e){const i=this._activeObject;return!(i===t||!this._discardActiveObject(e,t)&&this._activeObject||t.onSelect({e})||(this._activeObject=t,ne(t)&&i!==t&&t.set("canvas",this),t.setCoords(),0))}_discardActiveObject(t,e){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),ne(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),i=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const n=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),n}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,i=e.target,n={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),e.actionPerformed&&(this.fire("object:modified",n),i.fire(J,n))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;ne(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,i){const n=this._realizeGroupTransformOnObject(t),r=super._toObject(t,e,i);return t.set(n),r}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&ne(e)&&this._activeObject===e){const i=Ht(t,["angle","flipX","flipY",T,W,Y,X,K,E]);return ye(t,e.calcOwnMatrix()),i}return{}}_setSVGObject(t,e,i){const n=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,i),e.set(n)}}e(ho,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class uo{constructor(t){e(this,"targets",[]),e(this,"__disposer",void 0);const i=()=>{const{hiddenTextarea:e}=t.getActiveObject()||{};e&&e.focus()},n=t.upperCanvasEl;n.addEventListener("click",i),this.__disposer=()=>n.removeEventListener("click",i)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),nt(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;(null===(e=this.target)||void 0===e?void 0:e.isEditing)&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const fo=["target","oldTarget","fireCanvas","e"],go={passive:!1},po=(t,e)=>{const i=t.getViewportPoint(e),n=t.getScenePoint(e);return{viewportPoint:i,scenePoint:n,pointer:i,absolutePointer:n}},mo=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t.addEventListener(...i)},vo=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t.removeEventListener(...i)},yo={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class wo extends ho{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e(this,"_isClick",void 0),e(this,"textEditingManager",new uo(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((t=>{this[t]=this[t].bind(this)})),this.addOrRemove(mo,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const i=this.upperCanvasEl,n=this._getEventPrefix();t(se(i),"resize",this._onResize),t(i,n+"down",this._onMouseDown),t(i,"".concat(n,"move"),this._onMouseMove,go),t(i,"".concat(n,"out"),this._onMouseOut),t(i,"".concat(n,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,go)}removeListeners(){this.addOrRemove(vo,"remove");const t=this._getEventPrefix(),e=oe(this.upperCanvasEl);vo(e,"".concat(t,"up"),this._onMouseUp),vo(e,"touchend",this._onTouchEnd,go),vo(e,"".concat(t,"move"),this._onMouseMove,go),vo(e,"touchmove",this._onMouseMove,go),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,i=n({e:t},po(this,t));this.fire("mouse:out",n(n({},i),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",n({},i)),this._hoveredTargets.forEach((t=>{this.fire("mouse:out",n(n({},i),{},{target:t})),t&&t.fire("mouseout",n({},i))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",n({e:t},po(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const i={e:t,target:e};return this.fire("dragstart",i),e.fire("dragstart",i),void mo(this.upperCanvasEl,"drag",this._onDragProgress)}pe(t)}_renderDragEffects(t,e,i){let n=!1;const r=this._dropTarget;r&&r!==e&&r!==i&&(r.clearContextTop(),n=!0),null==e||e.clearContextTop(),i!==e&&(null==i||i.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),n=!0),i&&(o.save(),i.transform(o),i.renderDropTargetEffect(t),o.restore(),n=!0),o.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==D,i=e?this._activeObject:void 0,n={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:i};vo(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:i,targets:n}=this.findDragTargets(t),r=this._dragSource,o={e:t,target:i,subTargets:n,dragSource:r,canDrop:!1,dropTarget:void 0};let s;this.fire(e,o),this._fireEnterLeaveEvents(i,o),i&&(i.canDrop(t)&&(s=i),i.fire(e,o));for(let i=0;i<n.length;i++){const r=n[i];r.canDrop(t)&&(s=r),r.fire(e,o)}this._renderDragEffects(t,r,s),this._dropTarget=s}_onDragEnter(t){const{target:e,targets:i}=this.findDragTargets(t),n={e:t,target:e,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(e,n)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:i}=this.findDragTargets(t),r=this._basicEventHandler("drop:before",n({e:t,target:e,subTargets:i,dragSource:this._dragSource},po(this,t)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(t){const e=this.findTarget(t),i=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:i});return this.stopContextMenu&&pe(t),this._basicEventHandler("contextmenu",n),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const i=this._activeObject;void 0===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||i&&this._target===i)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,r=this._getEventPrefix(),o=oe(n);mo(o,"touchend",this._onTouchEnd,go),e&&mo(o,"touchmove",this._onMouseMove,go),vo(n,"".concat(r,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();vo(e,"".concat(i,"move"),this._onMouseMove,go);const n=oe(e);mo(n,"".concat(i,"up"),this._onMouseUp),mo(n,"".concat(i,"move"),this._onMouseMove,go)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),i=oe(this.upperCanvasEl);vo(i,"touchend",this._onTouchEnd,go),vo(i,"touchmove",this._onMouseMove,go),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{mo(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const t=oe(this.upperCanvasEl);vo(t,"".concat(i,"up"),this._onMouseUp),vo(t,"".concat(i,"move"),this._onMouseMove,go),mo(e,"".concat(i,"move"),this._onMouseMove,go)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,n=this._isClick,r=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&1===o||this.fireRightClick&&2===o)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let s,a,A=!1;if(i&&(this._finalizeCurrentTransform(t),A=i.actionPerformed),!n){const e=r===this._activeObject;this.handleSelection(t),A||(A=this._shouldRender(r)||!e&&r===this._activeObject)}if(r){const e=r.findControl(this.getViewportPoint(t),ge(t)),{key:n,control:o}=e||{};if(a=n,r.selectable&&r!==this._activeObject&&"up"===r.activeOn)this.setActiveObject(r,t),A=!0;else if(o){const e=o.getMouseUpHandler(t,r,o);e&&(s=this.getScenePoint(t),e.call(o,t,i,s.x,s.y))}r.isMoving=!1}if(i&&(i.target!==r||i.corner!==a)){const e=i.target&&i.target.controls[i.corner],n=e&&e.getMouseUpHandler(t,i.target,e);s=s||this.getScenePoint(t),n&&n.call(e,t,i,s.x,s.y)}this._setCursorFromEvent(t,r),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),A?this.requestRenderAll():n||null!==(e=this._activeObject)&&void 0!==e&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:i,subTargets:n=[]}=e;this.fire(t,e),i&&i.fire(t,e);for(let r=0;r<n.length;r++)n[r]!==i&&n[r].fire(t,e);return e}_handleEvent(t,e){const i=this._target,r=this.targets||[],o=n(n({e:t,target:i,subTargets:r},po(this,t)),{},{transform:this._currentTransform},"up:before"===e||"up"===e?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(e),o),i&&i.fire("mouse".concat(e),o);for(let t=0;t<r.length;t++)r[t]!==i&&r[t].fire("mouse".concat(e),o)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;const{button:i}=t;if(i)return(this.fireMiddleClick&&1===i||this.fireRightClick&&2===i)&&this._handleEvent(t,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t))return;if(this._currentTransform)return;let n=this._shouldRender(e),r=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,r=!0,n=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const e=this.getScenePoint(t);this._groupSelector={x:e.x,y:e.y,deltaY:0,deltaX:0}}if(e){const i=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);const n=e.findControl(this.getViewportPoint(t),ge(t));if(e===this._activeObject&&(n||!r)){this._setupCurrentTransform(t,e,i);const r=n?n.control:void 0,o=this.getScenePoint(t),s=r&&r.getMouseDownHandler(t,e,r);s&&s.call(r,t,this._currentTransform,o.x,o.y)}}n&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),n&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=_e(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const i=this.getScenePoint(t);e.deltaX=i.x-e.x,e.deltaY=i.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const e=this.findTarget(t);this._setCursorFromEvent(t,e),this._fireOverOutEvents(t,e)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const i=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:i,fireCanvas:!0});for(let e=0;e<o;e++)this.fireSyntheticInOutEvents("mouse",{e:t,target:r[e],oldTarget:n[e]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const i=this._draggedoverTarget,r=this._hoveredTargets,o=this.targets,s=Math.max(r.length,o.length);this.fireSyntheticInOutEvents("drag",n(n({},e),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let t=0;t<s;t++)this.fireSyntheticInOutEvents("drag",n(n({},e),{},{target:o[t],oldTarget:r[t]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:i,oldTarget:o,fireCanvas:s,e:a}=e,A=r(e,fo);const{targetIn:c,targetOut:l,canvasIn:h,canvasOut:u}=yo[t],d=o!==i;if(o&&d){const t=n(n({},A),{},{e:a,target:o,nextTarget:i},po(this,a));s&&this.fire(u,t),o.fire(l,t)}if(i&&d){const t=n(n({},A),{},{e:a,target:i,previousTarget:o},po(this,a));s&&this.fire(h,t),i.fire(c,t)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,n=i.target,r=n.group?_e(e,void 0,n.group.calcTransformMatrix()):e;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,r),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,i){const{action:n,actionHandler:r,target:o}=e,s=!!r&&r(t,e,i.x,i.y);s&&o.setCoords(),"drag"===n&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let i=e.hoverCursor||this.hoverCursor;const n=ne(this._activeObject)?this._activeObject:null,r=(!n||e.group!==n)&&e.findControl(this.getViewportPoint(t));if(r){const i=r.control;this.setCursor(i.cursorStyleHandler(t,i,e))}else e.subTargetCheck&&this.targets.concat().reverse().map((t=>{i=t.hoverCursor||i})),this.setCursor(i)}handleMultiSelection(t,e){const i=this._activeObject,n=ne(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(i!==e||n)&&(n||!e.isDescendantOf(i)&&!i.isDescendantOf(e))&&!e.onSelect({e:t})&&!i.getActiveControl()){if(n){const n=i.getObjects();if(e===i){const i=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(n,i)||this.searchPossibleTargets(this._objects,i))||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],1===i.size()&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(n,t)}else{i.isEditing&&i.exitEditing();const n=new(tt.getClass("ActiveSelection"))([],{canvas:this});n.multiSelectAdd(i,e),this._hoveredTarget=n,this._setActiveObject(n,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:i,deltaX:n,deltaY:r}=this._groupSelector,o=new st(e,i),s=o.add(new st(n,r)),a=o.min(s),A=o.max(s).subtract(a),c=this.collectObjects({left:a.x,top:a.y,width:A.x,height:A.y},{includeIntersecting:!this.selectionFullyContained}),l=o.eq(s)?c[0]?[c[0]]:[]:c.length>1?c.filter((e=>!e.onSelect({e:t}))).reverse():c;if(1===l.length)this.setActiveObject(l[0],t);else if(l.length>1){const e=tt.getClass("ActiveSelection");this.setActiveObject(new e(l,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Co={x1:0,y1:0,x2:0,y2:0},bo=n(n({},Co),{},{r1:0,r2:0}),Bo=(t,e)=>isNaN(t)&&"number"==typeof e?e:t,xo=/^(\d+\.\d+)%|(\d+)%$/;function _o(t){return t&&xo.test(t)}function So(t,e){const i="number"==typeof t?t:"string"==typeof t?parseFloat(t)/(_o(t)?100:1):NaN;return di(0,Bo(i,e),1)}const Io=/\s*;\s*/,Mo=/\s*:\s*/;function To(t,e){let i,n;const r=t.getAttribute("style");if(r){const t=r.split(Io);""===t[t.length-1]&&t.pop();for(let e=t.length;e--;){const[r,o]=t[e].split(Mo).map((t=>t.trim()));"stop-color"===r?i=o:"stop-opacity"===r&&(n=o)}}const o=new Kt(i||t.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:So(t.getAttribute("offset"),0),color:o.toRgb(),opacity:Bo(parseFloat(n||t.getAttribute("stop-opacity")||""),1)*o.getAlpha()*e}}function Eo(t,e){const i=[],n=t.getElementsByTagName("stop"),r=So(e,1);for(let t=n.length;t--;)i.push(To(n[t],r));return i}function ko(t){return"linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?"linear":"radial"}function Fo(t){return"userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage"}function Do(t,e){return t.getAttribute(e)}function Oo(t,e){return function(t,e){let i,{width:n,height:r,gradientUnits:o}=e;return Object.keys(t).reduce(((e,s)=>{const a=t[s];return"Infinity"===a?i=1:"-Infinity"===a?i=0:(i="string"==typeof a?parseFloat(a):a,"string"==typeof a&&_o(a)&&(i*=.01,"pixels"===o&&("x1"!==s&&"x2"!==s&&"r2"!==s||(i*=n),"y1"!==s&&"y2"!==s||(i*=r)))),e[s]=i,e}),{})}("linear"===ko(t)?function(t){return{x1:Do(t,"x1")||0,y1:Do(t,"y1")||0,x2:Do(t,"x2")||"100%",y2:Do(t,"y2")||0}}(t):function(t){return{x1:Do(t,"fx")||Do(t,"cx")||"50%",y1:Do(t,"fy")||Do(t,"cy")||"50%",r1:0,x2:Do(t,"cx")||"50%",y2:Do(t,"cy")||"50%",r2:Do(t,"r")||"50%"}}(t),n(n({},e),{},{gradientUnits:Fo(t)}))}class Uo{constructor(t){const{type:e="linear",gradientUnits:i="pixels",coords:r={},colorStops:o=[],offsetX:s=0,offsetY:a=0,gradientTransform:A,id:c}=t||{};Object.assign(this,{type:e,gradientUnits:i,coords:n(n({},"radial"===e?bo:Co),r),colorStops:o,offsetX:s,offsetY:a,gradientTransform:A,id:c?"".concat(c,"_").concat(ft()):ft()})}addColorStop(t){for(const e in t){const i=new Kt(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return n(n({},Ht(this,t)),{},{type:this.type,coords:n({},this.coords),colorStops:this.colorStops.map((t=>n({},t))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],r=this.gradientTransform?this.gradientTransform.concat():_.concat(),o="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",s=this.colorStops.map((t=>n({},t))).sort(((t,e)=>t.offset-e.offset));let a=-this.offsetX,A=-this.offsetY;var c;"objectBoundingBox"===o?(a/=t.width,A/=t.height):(a+=t.width/2,A+=t.height/2),(c=t)&&"function"==typeof c._renderPathCommands&&"percentage"!==this.gradientUnits&&(a-=t.pathOffset.x,A-=t.pathOffset.y),r[4]-=a,r[5]-=A;const l=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(qt(r),'"'),""].join(" ");if("linear"===this.type){const{x1:t,y1:e,x2:n,y2:r}=this.coords;i.push("<linearGradient ",l,' x1="',t,'" y1="',e,'" x2="',n,'" y2="',r,'">\n')}else if("radial"===this.type){const{x1:t,y1:e,x2:n,y2:r,r1:o,r2:a}=this.coords,A=o>a;i.push("<radialGradient ",l,' cx="',A?t:n,'" cy="',A?e:r,'" r="',A?o:a,'" fx="',A?n:t,'" fy="',A?r:e,'">\n'),A&&(s.reverse(),s.forEach((t=>{t.offset=1-t.offset})));const c=Math.min(o,a);if(c>0){const t=c/Math.max(o,a);s.forEach((e=>{e.offset+=t*(1-e.offset)}))}}return s.forEach((t=>{let{color:e,offset:n,opacity:r}=t;i.push("<stop ",'offset="',100*n+"%",'" style="stop-color:',e,void 0!==r?";stop-opacity: "+r:";",'"/>\n')})),i.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),i.join("")}toLive(t){const{x1:e,y1:i,x2:n,y2:r,r1:o,r2:s}=this.coords,a="linear"===this.type?t.createLinearGradient(e,i,n,r):t.createRadialGradient(e,i,o,n,r,s);return this.colorStops.forEach((t=>{let{color:e,opacity:i,offset:n}=t;a.addColorStop(n,void 0!==i?new Kt(e).setAlpha(i).toRgba():e)})),a}static async fromObject(t){const{colorStops:e,gradientTransform:i}=t;return new this(n(n({},t),{},{colorStops:e?e.map((t=>n({},t))):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,e,i){const r=Fo(t),o=e._findCenterFromElement();return new this(n({id:t.getAttribute("id")||void 0,type:ko(t),coords:Oo(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:Eo(t,i.opacity),gradientUnits:r,gradientTransform:sr(t.getAttribute("gradientTransform")||"")},"pixels"===r?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}e(Uo,"type","Gradient"),tt.setClass(Uo,"gradient"),tt.setClass(Uo,"linear"),tt.setClass(Uo,"radial");const Qo=["type","source","patternTransform"];class Lo{get type(){return"pattern"}set type(t){A("warn","Setting type has no effect",t)}constructor(t){e(this,"repeat","repeat"),e(this,"offsetX",0),e(this,"offsetY",0),e(this,"crossOrigin",""),this.id=ft(),Object.assign(this,t)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:e,crossOrigin:i}=this;return n(n({},Ht(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:i,offsetX:Vt(this.offsetX,a.NUM_FRACTION_DIGITS),offsetY:Vt(this.offsetY,a.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:i}=t;const{source:n,repeat:r,id:o}=this,s=Bo(this.offsetX/e,0),a=Bo(this.offsetY/i,0),A="repeat-y"===r||"no-repeat"===r?1+Math.abs(s||0):Bo(n.width/e,0),c="repeat-x"===r||"no-repeat"===r?1+Math.abs(a||0):Bo(n.height/i,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(s,'" y="').concat(a,'" width="').concat(A,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(t,e){let{type:i,source:o,patternTransform:s}=t,a=r(t,Qo);const A=await Lt(o,n(n({},e),{},{crossOrigin:a.crossOrigin}));return new this(n(n({},a),{},{patternTransform:s&&s.slice(0),source:A}))}}e(Lo,"type","Pattern"),tt.setClass(Lo),tt.setClass(Lo,"pattern");class jo{constructor(t){e(this,"color","rgb(0, 0, 0)"),e(this,"width",1),e(this,"shadow",null),e(this,"strokeLineCap","round"),e(this,"strokeLineJoin","round"),e(this,"strokeMiterLimit",10),e(this,"strokeDashArray",null),e(this,"limitedToCanvasSize",!1),this.canvas=t}_setBrushStyles(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])}_saveAndTransform(t){const e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}needsFullRender(){return new Kt(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const t=this.canvas,e=this.shadow,i=t.contextTop,n=t.getZoom()*t.getRetinaScaling();i.shadowColor=e.color,i.shadowBlur=e.blur*n,i.shadowOffsetX=e.offsetX*n,i.shadowOffsetY=e.offsetY*n}_resetShadow(){const t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}_isOutSideCanvas(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}const Po=["path","left","top"],Ho=["d"];class No extends wn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:i,left:n,top:o}=e,s=r(e,Po);super(),Object.assign(this,No.ownDefaults),this.setOptions(s),this._setPath(t||[],!0),"number"==typeof n&&this.set(T,n),"number"==typeof o&&this.set(E,o)}_setPath(t,e){this.path=Hr(Array.isArray(t)?t:io(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new st(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const n of this.path)switch(n[0]){case"L":t.lineTo(n[1]+e,n[2]+i);break;case"M":t.moveTo(n[1]+e,n[2]+i);break;case"C":t.bezierCurveTo(n[1]+e,n[2]+i,n[3]+e,n[4]+i,n[5]+e,n[6]+i);break;case"Q":t.quadraticCurveTo(n[1]+e,n[2]+i,n[3]+e,n[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(n({},super.toObject(t)),{},{path:this.path.map((t=>t.slice()))})}toDatalessObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=ro(this.path,a.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const t=a.NUM_FRACTION_DIGITS;return" translate(".concat(Vt(-this.pathOffset.x,t),", ").concat(Vt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:i,pathOffset:n}=this._calcDimensions();this.set({width:e,height:i,pathOffset:n}),t&&this.setPositionByOrigin(n,M,M)}_calcBoundsFromPath(){const t=[];let e=0,i=0,n=0,r=0;for(const o of this.path)switch(o[0]){case"L":n=o[1],r=o[2],t.push({x:e,y:i},{x:n,y:r});break;case"M":n=o[1],r=o[2],e=n,i=r;break;case"C":t.push(...jr(n,r,o[1],o[2],o[3],o[4],o[5],o[6])),n=o[5],r=o[6];break;case"Q":t.push(...jr(n,r,o[1],o[2],o[1],o[2],o[3],o[4])),n=o[3],r=o[4];break;case"Z":n=e,r=i}return me(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return n(n({},t),{},{pathOffset:new st(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,i){const o=ur(t,this.ATTRIBUTE_NAMES,i),{d:s}=o;return new this(s,n(n(n({},r(o,Ho)),e),{},{left:void 0,top:void 0}))}}e(No,"type","Path"),e(No,"cacheProperties",[...gi,"path","fillRule"]),e(No,"ATTRIBUTE_NAMES",[...Un,"d"]),tt.setClass(No),tt.setSVGClass(No);class Ro extends jo{constructor(t){super(t),e(this,"decimate",.4),e(this,"drawStraightLine",!1),e(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(t,e,i){const n=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,n.x,n.y),n}onMouseDown(t,e){let{e:i}=e;this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],this._prepareForDrawing(t),this._addPoint(t),this._render())}onMouseMove(t,e){let{e:i}=e;if(this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._addPoint(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const t=this._points,e=t.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Ro.drawSegment(i,t[e-2],t[e-1]),i.stroke(),i.restore()}}onMouseUp(t){let{e}=t;return!this.canvas._isMainEvent(e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(t){this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)}_addPoint(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),0))}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.canvas.contextTop,e=this._points[0],i=this._points[1];if(this._saveAndTransform(t),t.beginPath(),2===this._points.length&&e.x===i.x&&e.y===i.y){const t=this.width/1e3;e.x-=t,i.x+=t}t.moveTo(e.x,e.y);for(let n=1;n<this._points.length;n++)Ro.drawSegment(t,e,i),e=this._points[n],i=this._points[n+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}convertPointsToSVGPath(t){const e=this.width/1e3;return no(t,e)}createPath(t){const e=new No(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new ui(this.shadow)),e}decimatePoints(t,e){if(t.length<=2)return t;let i,n=t[0];const r=this.canvas.getZoom(),o=Math.pow(e/r,2),s=t.length-1,a=[n];for(let e=1;e<s-1;e++)i=Math.pow(n.x-t[e].x,2)+Math.pow(n.y-t[e].y,2),i>=o&&(n=t[e],a.push(n));return a.push(t[s]),a}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const t=this.convertPointsToSVGPath(this._points);if(function(t){return"M 0 0 Q 0 0 0 0 L 0 0"===ro(t)}(t))return void this.canvas.requestRenderAll();const e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}const zo=["left","top","radius"],Go=["radius","startAngle","endAngle","counterClockwise"];class Wo extends wn{static getDefaults(){return n(n({},super.getDefaults()),Wo.ownDefaults)}constructor(t){super(),Object.assign(this,Wo.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),"radius"===t&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,wt(this.startAngle),wt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(W)}getRadiusY(){return this.get("radius")*this.get(Y)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Go,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(0===t)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),'" />\n'];{const{radius:e}=this,i=wt(this.startAngle),n=wt(this.endAngle),r=rt(i)*e,o=ot(i)*e,s=rt(n)*e,a=ot(n)*e,A=t>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(r," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(A," ").concat(c," ").concat(s," ").concat(a,'" '),"COMMON_PARTS"," />\n"]}}static async fromElement(t,e,i){const o=ur(t,this.ATTRIBUTE_NAMES,i),{left:s=0,top:a=0,radius:A=0}=o;return new this(n(n({},r(o,zo)),{},{radius:A,left:s-A,top:a-A}))}static fromObject(t){return super._fromObject(t)}}e(Wo,"type","Circle"),e(Wo,"cacheProperties",[...gi,...Go]),e(Wo,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),e(Wo,"ATTRIBUTE_NAMES",["cx","cy","r",...Un]),tt.setClass(Wo),tt.setSVGClass(Wo);const Yo=["x1","y1","x2","y2"],Xo=["x1","y1","x2","y2"],Ko=["x1","x2","y1","y2"];class Vo extends wn{constructor(){let[t,e,i,n]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,Vo.ownDefaults),this.setOptions(r),this.x1=t,this.x2=i,this.y1=e,this.y2=n,this._setWidthHeight();const{left:o,top:s}=r;"number"==typeof o&&this.set(T,o),"number"==typeof s&&this.set(E,s)}_setWidthHeight(){const{x1:t,y1:e,x2:i,y2:n}=this;this.width=Math.abs(i-t),this.height=Math.abs(n-e);const{left:r,top:o,width:s,height:a}=me([{x:t,y:e},{x:i,y:n}]),A=new st(r+s/2,o+a/2);this.setPositionByOrigin(A,M,M)}_set(t,e){return super._set(t,e),Ko.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var n;te(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=null!==(n=this.stroke)&&void 0!==n?n:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new st((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(n({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:i,y2:n,width:r,height:o}=this,s=t<=e?-1:1,a=i<=n?-1:1;return{x1:s*r/2,x2:s*-r/2,y1:a*o/2,y2:a*-o/2}}_toSVG(){const{x1:t,x2:e,y1:i,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(e,'" y2="').concat(n,'" />\n')]}static async fromElement(t,e,i){const n=ur(t,this.ATTRIBUTE_NAMES,i),{x1:o=0,y1:s=0,x2:a=0,y2:A=0}=n;return new this([o,s,a,A],r(n,Yo))}static fromObject(t){let{x1:e,y1:i,x2:o,y2:s}=t,a=r(t,Xo);return this._fromObject(n(n({},a),{},{points:[e,i,o,s]}),{extraParam:"points"})}}e(Vo,"type","Line"),e(Vo,"cacheProperties",[...gi,...Ko]),e(Vo,"ATTRIBUTE_NAMES",Un.concat(Ko)),tt.setClass(Vo),tt.setSVGClass(Vo);class Zo extends wn{static getDefaults(){return n(n({},super.getDefaults()),Zo.ownDefaults)}constructor(t){super(),Object.assign(this,Zo.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}e(Zo,"type","Triangle"),e(Zo,"ownDefaults",{width:100,height:100}),tt.setClass(Zo),tt.setSVGClass(Zo);const Jo=["rx","ry"];class qo extends wn{static getDefaults(){return n(n({},super.getDefaults()),qo.ownDefaults)}constructor(t){super(),Object.assign(this,qo.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(W)}getRy(){return this.get("ry")*this.get(Y)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Jo,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,'" />\n')]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,B,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,i){const n=ur(t,this.ATTRIBUTE_NAMES,i);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}function $o(t){if(!t)return[];const e=t.replace(/,/g," ").trim().split(/\s+/),i=[];for(let t=0;t<e.length;t+=2)i.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return i}e(qo,"type","Ellipse"),e(qo,"cacheProperties",[...gi,...Jo]),e(qo,"ownDefaults",{rx:0,ry:0}),e(qo,"ATTRIBUTE_NAMES",[...Un,"cx","cy","rx","ry"]),tt.setClass(qo),tt.setSVGClass(qo);const ts=["left","top"],es={exactBoundingBox:!1};class is extends wn{static getDefaults(){return n(n({},super.getDefaults()),is.ownDefaults)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e(this,"strokeDiff",void 0),Object.assign(this,is.ownDefaults),this.setOptions(i),this.points=t;const{left:n,top:r}=i;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof n&&this.set(T,n),"number"==typeof r&&this.set(E,r)}isOpen(){return!0}_projectStrokeOnPoints(t){return Sn(this.points,t,this.isOpen())}_calcDimensions(t){t=n({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map((t=>t.projectedPoint)):this.points;if(0===e.length)return{left:0,top:0,width:0,height:0,pathOffset:new st,strokeOffset:new st,strokeDiff:new st};const i=me(e),r=Ut(n(n({},t),{},{scaleX:1,scaleY:1})),o=me(this.points.map((t=>Bt(t,r,!0)))),s=new st(this.scaleX,this.scaleY);let a=i.left+i.width/2,A=i.top+i.height/2;return this.exactBoundingBox&&(a-=A*Math.tan(wt(this.skewX)),A-=a*Math.tan(wt(this.skewY))),n(n({},i),{},{pathOffset:new st(a,A),strokeOffset:new st(o.left,o.top).subtract(new st(i.left,i.top)).multiply(s),strokeDiff:new st(i.width,i.height).subtract(new st(o.width,o.height)).multiply(s)})}_findCenterFromElement(){const t=me(this.points);return new st(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:i,width:n,height:r,pathOffset:o,strokeOffset:s,strokeDiff:a}=this._calcDimensions();this.set({width:n,height:r,pathOffset:o,strokeOffset:s,strokeDiff:a}),t&&this.setPositionByOrigin(new st(e+n/2,i+r/2),M,M)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new st(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some((t=>this.strokeUniform||this.constructor.layoutProperties.includes(t)))){var e,i;const{width:n,height:r}=this._calcDimensions(t);o=new st(null!==(e=t.width)&&void 0!==e?e:n,null!==(i=t.height)&&void 0!==i?i:r)}else{var n,r;o=new st(null!==(n=t.width)&&void 0!==n?n:this.width,null!==(r=t.height)&&void 0!==r?r:this.height)}return o.multiply(new st(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const i=this.initialized&&this[t]!==e,n=super._set(t,e);return this.exactBoundingBox&&i&&((t===W||t===Y)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),n}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(n({},super.toObject(t)),{},{points:this.points.map((t=>{let{x:e,y:i}=t;return{x:e,y:i}}))})}_toSVG(){const t=[],e=this.pathOffset.x,i=this.pathOffset.y,n=a.NUM_FRACTION_DIGITS;for(let r=0,o=this.points.length;r<o;r++)t.push(Vt(this.points[r].x-e,n),",",Vt(this.points[r].y-i,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),'" />\n')]}_render(t){const e=this.points.length,i=this.pathOffset.x,n=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-n);for(let r=0;r<e;r++){const e=this.points[r];t.lineTo(e.x-i,e.y-n)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,i){return new this($o(t.getAttribute("points")),n(n({},r(ur(t,this.ATTRIBUTE_NAMES,i),ts)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}e(is,"ownDefaults",es),e(is,"type","Polyline"),e(is,"layoutProperties",[X,K,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),e(is,"cacheProperties",[...gi,"points"]),e(is,"ATTRIBUTE_NAMES",[...Un]),tt.setClass(is),tt.setSVGClass(is);class ns extends is{isOpen(){return!1}}e(ns,"ownDefaults",es),e(ns,"type","Polygon"),tt.setClass(ns),tt.setSVGClass(ns);const rs=["fontSize","fontWeight","fontFamily","fontStyle"],os=["underline","overline","linethrough"],ss=[...rs,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],as=[...ss,...os,"textBackgroundColor","direction"],As=[...rs,...os,Z,"strokeWidth",V,"deltaY","textBackgroundColor"],cs={_reNewline:O,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:T,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:T,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},ls="justify",hs="justify-left",us="justify-right",ds="justify-center";class fs extends wn{isEmptyStyles(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;const e=void 0===t?this.styles:{line:this.styles[t]};for(const t in e)for(const i in e[t])for(const n in e[t][i])return!1;return!0}styleHas(t,e){if(!this.styles)return!1;if(void 0!==e&&!this.styles[e])return!1;const i=void 0===e?this.styles:{0:this.styles[e]};for(const e in i)for(const n in i[e])if(void 0!==i[e][n][t])return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let i,n,r=0,o=!0,s=0;for(const s in e){i=0;for(const a in e[s]){const A=e[s][a]||{};r++,void 0!==A[t]?(n?A[t]!==n&&(o=!1):n=A[t],A[t]===this[t]&&delete A[t]):o=!1,0!==Object.keys(A).length?i++:delete e[s][a]}0===i&&delete e[s]}for(let t=0;t<this._textLines.length;t++)s+=this._textLines[t].length;o&&r===s&&(this[t]=n,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let i,n,r;for(n in e){for(r in i=e[n],i)delete i[r][t],0===Object.keys(i[r]).length&&delete i[r];0===Object.keys(i).length&&delete e[n]}}_extendStyles(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const o=Nt(n(n({},this._getStyleDeclaration(i,r)),e),(t=>void 0!==t));this._setStyleDeclaration(i,r,o)}getSelectionStyles(t,e,i){const n=[];for(let r=t;r<(e||t);r++)n.push(this.getStyleAtPosition(r,i));return n}getStyleAtPosition(t,e){const{lineIndex:i,charIndex:n}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(i,n):this._getStyleDeclaration(i,n)}setSelectionStyles(t,e,i){for(let n=e;n<(i||e);n++)this._extendStyles(n,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var i;const n=this.styles&&this.styles[t];return n&&null!==(i=n[e])&&void 0!==i?i:{}}getCompleteStyleDeclaration(t,e){return n(n({},Ht(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,i){this.styles[t][e]=i}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}e(fs,"_styleProperties",As);const gs=/  +/g,ps=/"/g;function ms(t,e,i,n,r){return"\t\t".concat(function(t,e){let{left:i,top:n,width:r,height:o}=e,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.NUM_FRACTION_DIGITS;const A=$t(V,t,!1),[c,l,h,u]=[i,n,r,o].map((t=>Vt(t,s)));return"<rect ".concat(A,' x="').concat(c,'" y="').concat(l,'" width="').concat(h,'" height="').concat(u,'"></rect>')}(t,{left:e,top:i,width:n,height:r}),"\n")}const vs=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let ys;class ws extends fs{static getDefaults(){return n(n({},super.getDefaults()),ws.ownDefaults)}constructor(t,i){super(),e(this,"__charBounds",[]),Object.assign(this,ws.ownDefaults),this.setOptions(i),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Zr(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ls)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,i,n,r,o,s;for(let a=0,A=this._textLines.length;a<A;a++)if((this.textAlign===ls||a!==A-1&&!this.isEndOfWrapping(a))&&(n=0,r=this._textLines[a],e=this.getLineWidth(a),e<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){i=s.length,t=(this.width-e)/i;for(let e=0;e<=r.length;e++)o=this.__charBounds[a][e],this._reSpaceAndTab.test(r[e])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const i=e?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<i.length;n++){if(t<=i[n].length)return{lineIndex:n,charIndex:t};t-=i[n].length+this.missingNewlineOffset(n,e)}return{lineIndex:n-1,charIndex:i[n-1].length<t?i[n-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===Z?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case M:t.textBaseline="middle";break;case"ascender":t.textBaseline=E;break;case"descender":t.textBaseline=k}t.font=this._getFontDeclaration(e,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,i=this._textLines.length;e<i;e++){const i=this.getLineWidth(e);i>t&&(t=i)}return t}_renderTextLine(t,e,i,n,r,o){this._renderChars(t,e,i,n,r,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,i=this._getLeftOffset();let n=this._getTopOffset();for(let e=0,r=this._textLines.length;e<r;e++){const r=this.getHeightOfLine(e);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",e)){n+=r;continue}const o=this._textLines[e].length,s=this._getLineLeftOffset(e);let a,A,c=0,l=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<o;u++){const o=this.__charBounds[e][u];A=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),this.path?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=A,A&&t.fillRect(-o.width/2,-r/this.lineHeight*(1-this._fontSizeFraction),o.width,r/this.lineHeight),t.restore()):A!==h?(a=i+s+l,"rtl"===this.direction&&(a=this.width-a-c),t.fillStyle=h,h&&t.fillRect(a,n,c,r/this.lineHeight),l=o.left,c=o.width,h=A):c+=o.kernedWidth}A&&!this.path&&(a=i+s+l,"rtl"===this.direction&&(a=this.width-a-c),t.fillStyle=A,t.fillRect(a,n,c,r/this.lineHeight)),n+=r}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,i,n){const r=y.getFontCache(e),o=this._getFontDeclaration(e),s=i+t,a=i&&o===this._getFontDeclaration(n),A=e.fontSize/this.CACHE_FONT_SIZE;let c,l,h,u;if(i&&void 0!==r[i]&&(h=r[i]),void 0!==r[t]&&(u=c=r[t]),a&&void 0!==r[s]&&(l=r[s],u=l-h),void 0===c||void 0===h||void 0===l){const n=function(){if(!ys){const t=mt({width:0,height:0});ys=t.getContext("2d")}return ys}();this._setTextStyles(n,e,!0),void 0===c&&(u=c=n.measureText(t).width,r[t]=c),void 0===h&&a&&i&&(h=n.measureText(i).width,r[i]=h),a&&void 0===l&&(l=n.measureText(s).width,r[s]=l,u=l-h)}return{width:c*A,kernedWidth:u*A}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,i,n=0;const r=this.pathSide===F,o=this.path,s=this._textLines[t],a=s.length,A=new Array(a);this.__charBounds[t]=A;for(let r=0;r<a;r++){const o=s[r];i=this._getGraphemeBox(o,t,r,e),A[r]=i,n+=i.kernedWidth,e=o}if(A[a]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let t=0;const e=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case T:t=r?e-n:0;break;case M:t=(e-n)/2;break;case F:t=r?0:e-n}t+=this.pathStartOffset*(r?-1:1);for(let n=r?a-1:0;r?n>=0:n<a;r?n--:n++)i=A[n],t>e?t%=e:t<0&&(t+=e),this._setGraphemeOnPath(t,i),t+=i.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(t,e){const i=t+e.kernedWidth/2,n=this.path,r=Jr(n.path,i,n.segmentsInfo);e.renderLeft=r.x-n.pathOffset.x,e.renderTop=r.y-n.pathOffset.y,e.angle=r.angle+(this.pathSide===F?Math.PI:0)}_getGraphemeBox(t,e,i,n,r){const o=this.getCompleteStyleDeclaration(e,i),s=n?this.getCompleteStyleDeclaration(e,i-1):{},a=this._measureChar(t,o,n,s);let A,c=a.kernedWidth,l=a.width;0!==this.charSpacing&&(A=this._getWidthOfCharSpacing(),l+=A,c+=A);const h={width:l,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(i>0&&!r){const t=this.__charBounds[e][i-1];h.left=t.left+t.width+a.kernedWidth-a.width}return h}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let i=1,n=this._textLines[t].length;i<n;i++)e=Math.max(this.getHeightOfChar(t,i),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let i=0,n=this._textLines.length;i<n;i++)t=this.getHeightOfLine(i),e+=i===n-1?t/this.lineHeight:t;return e}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let i=0;const n=this._getLeftOffset(),r=this._getTopOffset();for(let o=0,s=this._textLines.length;o<s;o++){const s=this.getHeightOfLine(o),a=s/this.lineHeight,A=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],n+A,r+i+a,o),i+=s}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(V))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,i,n,r,o){const s=this.getHeightOfLine(o),a=this.textAlign.includes(ls),A=this.path,c=!a&&0===this.charSpacing&&this.isEmptyStyles(o)&&!A,l="ltr"===this.direction,h="ltr"===this.direction?1:-1,u=e.direction;let d,f,g,p,m,v="",y=0;if(e.save(),u!==this.direction&&(e.canvas.setAttribute("dir",l?"ltr":"rtl"),e.direction=l?"ltr":"rtl",e.textAlign=l?T:F),r-=s*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(t,e,o,0,i.join(""),n,r),void e.restore();for(let s=0,c=i.length-1;s<=c;s++)p=s===c||this.charSpacing||A,v+=i[s],g=this.__charBounds[o][s],0===y?(n+=h*(g.kernedWidth-g.width),y+=g.width):y+=g.kernedWidth,a&&!p&&this._reSpaceAndTab.test(i[s])&&(p=!0),p||(d=d||this.getCompleteStyleDeclaration(o,s),f=this.getCompleteStyleDeclaration(o,s+1),p=Fn(d,f,!1)),p&&(A?(e.save(),e.translate(g.renderLeft,g.renderTop),e.rotate(g.angle),this._renderChar(t,e,o,s,v,-y/2,0),e.restore()):(m=n,this._renderChar(t,e,o,s,v,m,r)),v="",d=f,n+=h*y,y=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,i=this.height+this.strokeWidth,n=mt({width:e,height:i}),r=n.getContext("2d");return n.width=e,n.height=i,r.beginPath(),r.moveTo(0,0),r.lineTo(e,0),r.lineTo(e,i),r.lineTo(0,i),r.closePath(),r.translate(e/2,i/2),r.fillStyle=t.toLive(r),this._applyPatternGradientTransform(r,t),r.fill(),r.createPattern(n,"no-repeat")}handleFiller(t,e,i){let n,r;return te(i)?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(n=-this.width/2,r=-this.height/2,t.translate(n,r),t[e]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:r}):(t[e]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:i,strokeWidth:n}=e;return t.lineWidth=n,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,e){let{fill:i}=e;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,e,i,n,r,o,s){const a=this._getStyleDeclaration(i,n),A=this.getCompleteStyleDeclaration(i,n),c="fillText"===t&&A.fill,l="strokeText"===t&&A.stroke&&A.strokeWidth;if(l||c){if(e.save(),e.font=this._getFontDeclaration(A),a.textBackgroundColor&&this._removeShadow(e),a.deltaY&&(s+=a.deltaY),c){const t=this._setFillStyles(e,A);e.fillText(r,o-t.offsetX,s-t.offsetY)}if(l){const t=this._setStrokeStyles(e,A);e.strokeText(r,o-t.offsetX,s-t.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,i){const n=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),s={fontSize:r*i.size,deltaY:o+r*i.baseline};this.setSelectionStyles(s,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),i=this.width-e,n=this.textAlign,r=this.direction,o=this.isEndOfWrapping(t);let s=0;return n===ls||n===ds&&!o||n===us&&!o||n===hs&&!o?0:(n===M&&(s=i/2),n===F&&(s=i),n===ds&&(s=i/2),n===us&&(s=i),"rtl"===r&&(n===F||n===ls||n===us?s=0:n===T||n===hs?s=-i:n!==M&&n!==ds||(s=-i/2)),s)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,i){var n;return null!==(n=this._getStyleDeclaration(t,e)[i])&&void 0!==n?n:this[i]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let i=this._getTopOffset();const n=this._getLeftOffset(),r=this.path,o=this._getWidthOfCharSpacing(),s=this.offsets[e];for(let a=0,A=this._textLines.length;a<A;a++){const A=this.getHeightOfLine(a);if(!this[e]&&!this.styleHas(e,a)){i+=A;continue}const c=this._textLines[a],l=A/this.lineHeight,h=this._getLineLeftOffset(a);let u,d,f=0,g=0,p=this.getValueOfPropertyAt(a,0,e),m=this.getValueOfPropertyAt(a,0,V);const v=i+l*(1-this._fontSizeFraction);let y=this.getHeightOfChar(a,0),w=this.getValueOfPropertyAt(a,0,"deltaY");for(let i=0,o=c.length;i<o;i++){const o=this.__charBounds[a][i];u=this.getValueOfPropertyAt(a,i,e),d=this.getValueOfPropertyAt(a,i,V);const A=this.getHeightOfChar(a,i),c=this.getValueOfPropertyAt(a,i,"deltaY");if(r&&u&&d)t.save(),t.fillStyle=m,t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillRect(-o.kernedWidth/2,s*A+c,o.kernedWidth,this.fontSize/15),t.restore();else if((u!==p||d!==m||A!==y||c!==w)&&g>0){let e=n+h+f;"rtl"===this.direction&&(e=this.width-e-g),p&&m&&(t.fillStyle=m,t.fillRect(e,v+s*y+w,g,this.fontSize/15)),f=o.left,g=o.width,p=u,m=d,y=A,w=c}else g+=o.kernedWidth}let C=n+h+f;"rtl"===this.direction&&(C=this.width-C-g),t.fillStyle=d,u&&d&&t.fillRect(C,v+s*y+w,g-o,this.fontSize/15),i+=A}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||ws.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,i,"".concat(r?this.CACHE_FONT_SIZE:n,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Tn(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),i=new Array(e.length),n=["\n"];let r=[];for(let t=0;t<e.length;t++)i[t]=this.graphemeSplit(e[t]),r=r.concat(i[t],n);return r.pop(),{_unwrappedLines:i,lines:e,graphemeText:r,graphemeLines:i}}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(n({},super.toObject([...as,...t])),{},{styles:Dn(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:i}=this.constructor;super.set(t,e);let n=!1,r=!1;if("object"==typeof t)for(const e in t)"path"===e&&this.setPathInfo(),n=n||i.includes(e),r=r||"path"===e;else n=i.includes(t),r="path"===t;return r&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,i){const o=ur(t,ws.ATTRIBUTE_NAMES,i),s=n(n({},e),o),{textAnchor:a=T,textDecoration:A="",dx:c=0,dy:l=0,top:h=0,left:u=0,fontSize:d=S,strokeWidth:f=1}=s,g=r(s,vs),p=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),n({left:u+c,top:h+l,underline:A.includes("underline"),overline:A.includes("overline"),linethrough:A.includes("line-through"),strokeWidth:0,fontSize:d},g)),m=p.getScaledHeight()/p.height,v=((p.height+p.strokeWidth)*p.lineHeight-p.height)*m,y=p.getScaledHeight()+v;let w=0;return a===M&&(w=p.getScaledWidth()/2),a===F&&(w=p.getScaledWidth()),p.set({left:p.left-w,top:p.top-(y-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:f}),p}static fromObject(t){return this._fromObject(n(n({},t),{},{styles:On(t.styles||{},t.text)}),{extraParam:"text"})}}e(ws,"textLayoutProperties",ss),e(ws,"cacheProperties",[...gi,...as]),e(ws,"ownDefaults",cs),e(ws,"type","Text"),e(ws,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),e(ws,"ATTRIBUTE_NAMES",Un.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),yn(ws,[class extends Pe{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:i}=t;const n=this.getSvgTextDecoration(this);return[e.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(ps,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",i.join(""),"</text>\n"]}_getSVGTextAndBg(t,e){const i=[],n=[];let r,o=t;this.backgroundColor&&n.push(...ms(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let t=0,s=this._textLines.length;t<s;t++)r=this._getLineLeftOffset(t),"rtl"===this.direction&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",t))&&this._setSVGTextLineBg(n,t,e+r,o),this._setSVGTextLineText(i,t,e+r,o),o+=this.getHeightOfLine(t);return{textSpans:i,textBgRects:n}}_createTextCharSpan(t,e,i,n){const r=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(gs)),o=r?'style="'.concat(r,'"'):"",s=e.deltaY,A=s?' dy="'.concat(Vt(s,a.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Vt(i,a.NUM_FRACTION_DIGITS),'" y="').concat(Vt(n,a.NUM_FRACTION_DIGITS),'" ').concat(A).concat(o,">").concat(Mn(t),"</tspan>")}_setSVGTextLineText(t,e,i,n){const r=this.getHeightOfLine(e),o=this.textAlign.includes(ls),s=this._textLines[e];let a,A,c,l,h,u="",d=0;n+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let r=0,f=s.length-1;r<=f;r++)h=r===f||this.charSpacing,u+=s[r],c=this.__charBounds[e][r],0===d?(i+=c.kernedWidth-c.width,d+=c.width):d+=c.kernedWidth,o&&!h&&this._reSpaceAndTab.test(s[r])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,r),A=this.getCompleteStyleDeclaration(e,r+1),h=Fn(a,A,!0)),h&&(l=this._getStyleDeclaration(e,r),t.push(this._createTextCharSpan(u,l,i,n)),u="",a=A,"rtl"===this.direction?i-=d:i+=d,d=0)}_setSVGTextLineBg(t,e,i,n){const r=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight;let s,a=0,A=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let l=0;l<r.length;l++){const{left:r,width:h,kernedWidth:u}=this.__charBounds[e][l];s=this.getValueOfPropertyAt(e,l,"textBackgroundColor"),s!==c?(c&&t.push(...ms(c,i+A,n,a,o)),A=r,a=h,c=s):a+=u}s&&t.push(...ms(c,i+A,n,a,o))}_getSVGLineTopOffset(t){let e,i=0;for(e=0;e<t;e++)i+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:i,strokeWidth:n,stroke:r,fill:o,fontSize:s,fontStyle:a,fontWeight:A,deltaY:c}=t,l=this.getSvgTextDecoration(t);return[r?$t(Z,r):"",n?"stroke-width: ".concat(n,"; "):"",i?"font-family: ".concat(i.includes("'")||i.includes('"')?i:"'".concat(i,"'"),"; "):"",s?"font-size: ".concat(s,"px; "):"",a?"font-style: ".concat(a,"; "):"",A?"font-weight: ".concat(A,"; "):"",l?"text-decoration: ".concat(l,"; "):l,o?$t(V,o):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter((e=>t[e.replace("-","")])).join(" ")}}]),tt.setClass(ws),tt.setSVGClass(ws);class Cs{constructor(t){e(this,"target",void 0),e(this,"__mouseDownInPlace",!1),e(this,"__dragStartFired",!1),e(this,"__isDraggingOver",!1),e(this,"__dragStartSelection",void 0),e(this,"__dragImageDisposer",void 0),e(this,"_dispose",void 0),this.target=t;const i=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{i.forEach((t=>t())),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,i=e.getSelectionStartFromPointer(t);return e.isEditing&&i>=e.selectionStart&&i<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var i;let{selectionStart:n,selectionEnd:r}=e;const o=this.target,s=o.canvas,a=new st(o.flipX?-1:1,o.flipY?-1:1),A=o._getCursorBoundaries(n),c=new st(A.left+A.leftOffset,A.top+A.topOffset).multiply(a).transform(o.calcTransformMatrix()),l=s.getScenePoint(t).subtract(c),h=o.getCanvasRetinaScaling(),u=o.getBoundingRect(),d=c.subtract(new st(u.left,u.top)),f=s.viewportTransform,g=d.add(l).transform(f,!0),p=o.backgroundColor,m=In(o.styles);o.backgroundColor="";const v={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(v,0,n),o.setSelectionStyles(v,r,o.text.length),o.dirty=!0;const y=o.toCanvasElement({enableRetinaScaling:s.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=p,o.styles=m,o.dirty=!0,oo(y,{position:"fixed",left:"".concat(-y.width,"px"),border:D,width:"".concat(y.width/h,"px"),height:"".concat(y.height/h,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{y.remove()},oe(t.target||this.target.hiddenTextarea).body.appendChild(y),null===(i=t.dataTransfer)||void 0===i||i.setDragImage(y,g.x,g.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,i=this.isActive();if(i&&t.dataTransfer){const i=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},r=e._text.slice(i.selectionStart,i.selectionEnd).join(""),o=n({text:e.text,value:r},i);t.dataTransfer.setData("text/plain",r),t.dataTransfer.setData("application/fabric",JSON.stringify({value:r,styles:e.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return e<i.selectionStart||e>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const i=this.targetCanDrop(e);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,i=this.targetCanDrop(e);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:i}=t,n=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let r=null===(e=i.dataTransfer)||void 0===e?void 0:e.getData("text/plain");if(r&&!n){const e=this.target,n=e.canvas;let o=e.getSelectionStartFromPointer(i);const{styles:s}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},a=r[Math.max(0,r.length-1)],A=0;if(this.__dragStartSelection){const t=this.__dragStartSelection.selectionStart,i=this.__dragStartSelection.selectionEnd;o>t&&o<=i?o=t:o>i&&(o-=i-t),e.removeChars(t,i),delete this.__dragStartSelection}e._reNewline.test(a)&&(e._reNewline.test(e._text[o])||o===e._text.length)&&(r=r.trimEnd()),t.didDrop=!0,t.dropTarget=e,e.insertChars(r,s,o),n.setActiveObject(e),e.enterEditing(i),e.selectionStart=Math.min(o+A,e._text.length),e.selectionEnd=Math.min(e.selectionStart+r.length,e._text.length),e.hiddenTextarea.value=e.text,e._updateTextarea(),e.hiddenTextarea.focus(),e.fire(z,{index:o+A,action:"drop"}),n.fire("text:changed",{target:e}),n.contextTopDirty=!0,n.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const t=this.target,n=this.target.canvas,{selectionStart:r,selectionEnd:o}=this.__dragStartSelection,s=(null===(i=e.dataTransfer)||void 0===i?void 0:i.dropEffect)||D;s===D?(t.selectionStart=r,t.selectionEnd=o,t._updateTextarea(),t.hiddenTextarea.focus()):(t.clearContextTop(),"move"===s&&(t.removeChars(r,o),t.selectionStart=t.selectionEnd=r,t.hiddenTextarea&&(t.hiddenTextarea.value=t.text),t._updateTextarea(),t.fire(z,{index:r,action:"dragend"}),n.fire("text:changed",{target:t}),n.requestRenderAll()),t.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const bs=/[ \n\.,;!\?\-]/;class Bs extends ws{constructor(){super(...arguments),e(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:i,delay:n,onComplete:r}=t;return Di({startValue:this._currentCursorOpacity,endValue:e,duration:i,delay:n,onComplete:r,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:t=>{this._currentCursorOpacity=t,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;null===(t=this._currentTickCompleteState)||void 0===t||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((e=>{e&&!e.isDone()&&(t=!0,e.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findWordBoundaryRight(t){let e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}findLineBoundaryLeft(t){let e=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findLineBoundaryRight(t){let e=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}searchWordBoundary(t,e){const i=this._text;let n=t>0&&this._reSpace.test(i[t])&&(-1===e||!O.test(i[t-1]))?t-1:t,r=i[n];for(;n>0&&n<i.length&&!bs.test(r);)n+=e,r=i[n];return-1===e&&bs.test(r)&&n++,n}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),i=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;oe(e).activeElement!==e&&e.focus();const i=this.getSelectionStartFromPointer(t),n=this.selectionStart,r=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&n!==r||n!==i&&r!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===r||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,i){const n=i.slice(0,t),r=this.graphemeSplit(n).length;if(t===e)return{selectionStart:r,selectionEnd:r};const o=i.slice(t,e);return{selectionStart:r,selectionEnd:r+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,i){const n=i.slice(0,t).join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+i.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),n=i.lineIndex,r=i.charIndex,o=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,s=e.leftOffset,a=this.getCanvasRetinaScaling(),A=this.canvas.upperCanvasEl,c=A.width/a,l=A.height/a,h=c-o,u=l-o,d=new st(e.left+s,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new st(A.clientWidth/c,A.clientHeight/l));return d.x<0&&(d.x=0),d.x>h&&(d.x=h),d.y<0&&(d.y=0),d.y>u&&(d.y=u),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:"".concat(d.x,"px"),top:"".concat(d.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(J),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:i,charIndex:n}=this.get2DCursorLocation(t,!0),{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0);if(i!==r){if(this.styles[i])for(let t=n;t<this._unwrappedTextLines[i].length;t++)delete this.styles[i][t];if(this.styles[r])for(let t=o;t<this._unwrappedTextLines[r].length;t++){const e=this.styles[r][t];e&&(this.styles[i]||(this.styles[i]={}),this.styles[i][n+t-o]=e)}for(let t=i+1;t<=r;t++)delete this.styles[t];this.shiftLineStyles(r,i-r)}else if(this.styles[i]){const t=this.styles[i],e=o-n;for(let e=n;e<o;e++)delete t[e];for(const n in this.styles[i]){const i=parseInt(n,10);i>=o&&(t[i-e]=t[n],delete t[n])}}}shiftLineStyles(t,e){const i=Object.assign({},this.styles);for(const n in this.styles){const r=parseInt(n,10);r>t&&(this.styles[r+e]=i[r],i[r-e]||delete this.styles[r])}}insertNewlineStyleObject(t,e,i,r){const o={},s=this._unwrappedTextLines[t].length,a=s===e;let A=!1;i||(i=1),this.shiftLineStyles(t,i);const c=this.styles[t]?this.styles[t][0===e?e:e-1]:void 0;for(const i in this.styles[t]){const n=parseInt(i,10);n>=e&&(A=!0,o[n-e]=this.styles[t][i],a&&0===e||delete this.styles[t][i])}let l=!1;for(A&&!a&&(this.styles[t+i]=o,l=!0),(l||s>e)&&i--;i>0;)r&&r[i-1]?this.styles[t+i]={0:n({},r[i-1])}:c?this.styles[t+i]={0:n({},c)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,e,i,r){this.styles||(this.styles={});const o=this.styles[t],s=o?n({},o):{};i||(i=1);for(const t in s){const n=parseInt(t,10);n>=e&&(o[n+i]=s[n],s[n-i]||delete o[n])}if(this._forceClearCache=!0,r){for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=n({},r[i]));return}if(!o)return;const a=o[e?e-1:1];for(;a&&i--;)this.styles[t][e+i]=n({},a)}insertNewStyleBlock(t,e,i){const n=this.get2DCursorLocation(e,!0),r=[0];let o,s=0;for(let e=0;e<t.length;e++)"\n"===t[e]?(s++,r[s]=0):r[s]++;for(r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),s&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],s),o=1;o<s;o++)r[o]>0?this.insertCharStyleObject(n.lineIndex+o,0,r[o],i):i&&this.styles[n.lineIndex+o]&&i[0]&&(this.styles[n.lineIndex+o][0]=i[0]),i=i&&i.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(n.lineIndex+o,0,r[o],i)}removeChars(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;n>i&&this.removeStyleFromTo(i,n);const r=this.graphemeSplit(t);this.insertNewStyleBlock(r,i,e),this._text=[...this._text.slice(0,i),...r,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,i){i<=t?(e===t?this._selectionDirection=T:this._selectionDirection===F&&(this._selectionDirection=T,this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?this._selectionDirection===F?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=F:this._selectionDirection===T&&(this._selectionDirection=F,this.selectionStart=e),this.selectionEnd=i)}}class xs extends Bs{initHiddenTextarea(){const t=this.canvas&&oe(this.canvas.getElement())||p(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map((t=>{let[i,n]=t;return e.setAttribute(i,n)}));const{top:i,left:n,fontSize:r}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(r,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((t=>{let[i,n]=t;return e.addEventListener(i,this[n].bind(this))})),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const i=()=>{this.updateFromTextArea(),this.fire(z),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void i();const n=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,o=n.length,s=this.selectionStart,A=this.selectionEnd,c=s!==A;let l,h,u,d,f=o-r;const p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=s>p.selectionStart;c?(h=this._text.slice(s,A),f+=A-s):o<r&&(h=m?this._text.slice(A+f,A):this._text.slice(s,s-f));const v=n.slice(p.selectionEnd-f,p.selectionEnd);if(h&&h.length&&(v.length&&(l=this.getSelectionStyles(s,s+1,!1),l=v.map((()=>l[0]))),c?(u=s,d=A):m?(u=A-h.length,d=A):(u=A,d=A+h.length),this.removeStyleFromTo(u,d)),v.length){const{copyPasteData:t}=g();e&&v.join("")===t.copiedText&&!a.disableStyleCopyPaste&&(l=t.copiedTextStyle),this.insertNewStyleBlock(v,s,l)}i()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:i,selectionEnd:n}=e;this.compositionStart=i,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=g();t.copiedText=this.getSelectedText(),a.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let i,n=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n}getDownCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;const o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,s);return this._textLines[r].slice(o).length+a+1+this.missingNewlineOffset(r)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-i;const o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,s),A=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-A.length+(1-c)}_getIndexOnLine(t,e){const i=this._textLines[t];let n,r,o=this._getLineLeftOffset(t),s=0;for(let a=0,A=i.length;a<A;a++)if(n=this.__charBounds[t][a].width,o+=n,o>e){r=!0;const t=o-n,i=o,A=Math.abs(t-e);s=Math.abs(i-e)<A?a:a-1;break}return r||(s=i.length-1),s}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const i=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===F);if(e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i){const t=this.text.length;this.selectionStart=di(0,this.selectionStart,t),this.selectionEnd=di(0,this.selectionEnd,t),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===T?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t}moveCursorLeft(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)}_move(t,e,i){let n;if(t.altKey)n=this["findWordBoundary".concat(i)](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary".concat(i)](this[e])}return void 0!==n&&this[e]!==n&&(this[e]=n,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=T,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===F&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=T,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const i="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===T&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=F,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=F,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const _s=t=>!!t.button;class Ss extends xs{constructor(){super(...arguments),e(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new Cs(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),pe(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;this.canvas&&this.editable&&!_s(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(t){let{e}=t;this.canvas&&this.editable&&!_s(e)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:i}=t;const n=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const t=this.canvas._activeObject;if(t&&t!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||_s(e)||n||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(xt(this.calcTransformMatrix())).add(new st(-this._getLeftOffset(),-this._getTopOffset()));let i=0,n=0,r=0;for(let t=0;t<this._textLines.length&&i<=e.y;t++)i+=this.getHeightOfLine(t),r=t,t>0&&(n+=this._textLines[t-1].length+this.missingNewlineOffset(t-1));let o=Math.abs(this._getLineLeftOffset(r));const s=this._textLines[r].length,a=this.__charBounds[r];for(let t=0;t<s;t++){const i=o+a[t].kernedWidth;if(e.x<=i){Math.abs(e.x-i)<=Math.abs(e.x-o)&&n++;break}o=i,n++}return Math.min(this.flipX?s-n:n,this._text.length)}}const Is="moveCursorUp",Ms="moveCursorDown",Ts="moveCursorLeft",Es="moveCursorRight",ks="exitEditing",Fs=n({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ks,27:ks,33:Is,34:Ms,35:Es,36:Ts,37:Ts,38:Is,39:Es,40:Ms},keysMapRtl:{9:ks,27:ks,33:Is,34:Ms,35:Ts,36:Es,37:Es,38:Is,39:Ts,40:Ms},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ds extends Ss{static getDefaults(){return n(n({},super.getDefaults()),Ds.ownDefaults)}get type(){const t=super.type;return"itext"===t?"i-text":t}constructor(t,e){super(t,n(n({},Ds.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):("canvas"===t&&(this.canvas instanceof wo&&this.canvas.textEditingManager.remove(this),e instanceof wo&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,i)}setSelectionStyles(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,i)}get2DCursorLocation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=e,i}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(t,e):this.renderCursor(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:r.left,topOffset:r.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,i=0;const{charIndex:n,lineIndex:r}=this.get2DCursorLocation(t);for(let t=0;t<r;t++)e+=this.getHeightOfLine(t);const o=this._getLineLeftOffset(r),s=this.__charBounds[r][n];s&&(i=s.left),0!==this.charSpacing&&n===this._textLines[r].length&&(i-=this._getWidthOfCharSpacing());const a={top:e,left:o+(i>0?i:0)};return"rtl"===this.direction&&(this.textAlign===F||this.textAlign===ls||this.textAlign===us?a.left*=-1:this.textAlign===T||this.textAlign===hs?a.left=o-(i>0?i:0):this.textAlign!==M&&this.textAlign!==ds||(a.left=o-(i>0?i:0))),a}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getCursorBoundaries(t);const i=this.get2DCursorLocation(t),n=i.lineIndex,r=i.charIndex>0?i.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),s=this.getObjectScaling().x*this.canvas.getZoom(),a=this.cursorWidth/s,A=this.getValueOfPropertyAt(n,r,"deltaY"),c=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-a/2,top:c+e.top+A,width:a,height:o}}_renderCursor(t,e,i){const{color:n,opacity:r,left:o,top:s,width:a,height:A}=this.getCursorRenderingData(i,e);t.fillStyle=n,t.globalAlpha=r,t.fillRect(o,s,a,A)}renderSelection(t,e){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,i){const n=e.selectionStart,r=e.selectionEnd,o=this.textAlign.includes(ls),s=this.get2DCursorLocation(n),a=this.get2DCursorLocation(r),A=s.lineIndex,c=a.lineIndex,l=s.charIndex<0?0:s.charIndex,h=a.charIndex<0?0:a.charIndex;for(let e=A;e<=c;e++){const n=this._getLineLeftOffset(e)||0;let r=this.getHeightOfLine(e),s=0,a=0,u=0;if(e===A&&(a=this.__charBounds[A][l].left),e>=A&&e<c)u=o&&!this.isEndOfWrapping(e)?this.width:this.getLineWidth(e)||5;else if(e===c)if(0===h)u=this.__charBounds[c][h].left;else{const t=this._getWidthOfCharSpacing();u=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-t}s=r,(this.lineHeight<1||e===c&&this.lineHeight>1)&&(r/=this.lineHeight);let d=i.left+n+a,f=r,g=0;const p=u-a;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",f=1,g=r):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===F||this.textAlign===ls||this.textAlign===us?d=this.width-d-p:this.textAlign===T||this.textAlign===hs?d=i.left+n-u:this.textAlign!==M&&this.textAlign!==ds||(d=i.left+n-u)),t.fillRect(d,i.top+i.topOffset+g,p,f),i.topOffset+=s}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,V)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}e(Ds,"ownDefaults",Fs),e(Ds,"type","IText"),tt.setClass(Ds),tt.setClass(Ds,"i-text");class Os extends Ds{static getDefaults(){return n(n({},super.getDefaults()),Os.ownDefaults)}constructor(t,e){super(t,n(n({},Os.ownDefaults),e))}static createControls(){return{controls:mn()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ls)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,i=0,n=0;const r={};for(let o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[n]&&o>0?(i=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(i++,n++),r[o]={line:e,offset:i},n+=t.graphemeLines[o].length,i+=t.graphemeLines[o].length;return r}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const t=this._styleMap[e];t&&(e=t.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,i=0,n=t+1,r=!1;const o=this._styleMap[t],s=this._styleMap[t+1];o&&(t=o.line,i=o.offset),s&&(n=s.line,r=n===t,e=s.offset);const a=void 0===t?this.styles:{line:this.styles[t]};for(const t in a)for(const n in a[t]){const o=parseInt(n,10);if(o>=i&&(!r||o<e))for(const e in a[t][n])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,e=i.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,i){const n=this._styleMap[t];super._setStyleDeclaration(n.line,n.offset+e,i)}_deleteStyleDeclaration(t,e){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),n=[];for(let t=0;t<i.wordsData.length;t++)n.push(...this._wrapLine(t,e,i));return this.isWrapping=!1,n}getGraphemeDataForRender(t){const e=this.splitByGrapheme,i=e?"":" ";let n=0;return{wordsData:t.map(((t,r)=>{let o=0;const s=e?this.graphemeSplit(t):this.wordSplit(t);return 0===s.length?[{word:[],width:0}]:s.map((t=>{const s=e?[t]:this.graphemeSplit(t),a=this._measureWord(s,r,o);return n=Math.max(a,n),o+=s.length+i.length,{word:s,width:a}}))})),largestWordWidth:n}}_measureWord(t,e){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;for(let o=0,s=t.length;o<s;o++)r+=this._getGraphemeBox(t[o],e,o+n,i,!0).kernedWidth,i=t[o];return r}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,i){let{largestWordWidth:n,wordsData:r}=i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=this._getWidthOfCharSpacing(),a=this.splitByGrapheme,A=[],c=a?"":" ";let l=0,h=[],u=0,d=0,f=!0;e-=o;const g=Math.max(e,n,this.dynamicMinWidth),p=r[t];let m;for(u=0,m=0;m<p.length;m++){const{word:e,width:i}=p[m];u+=e.length,l+=d+i-s,l>g&&!f?(A.push(h),h=[],l=i,f=!0):l+=s,f||a||h.push(c),h=h.concat(e),d=a?0:this._measureWord([c],t,u),u++,f=!1}return m&&A.push(h),n+o>this.dynamicMinWidth&&(this.dynamicMinWidth=n-s+o),A}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),i=this._wrapText(e.lines,this.width),n=new Array(i.length);for(let t=0;t<i.length;t++)n[t]=i[t].join("");return e.lines=n,e.graphemeLines=i,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const i=parseInt(e,10);if(this._textLines[i]){const i=this._styleMap[e].line;t.set("".concat(i),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}e(Os,"type","Textbox"),e(Os,"textLayoutProperties",[...Ds.textLayoutProperties,"width"]),e(Os,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),tt.setClass(Os);class Us extends Cr{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:i}=t,{clipPath:n,group:r}=i;if(!n||!this.shouldPerformLayout(t))return;const{width:o,height:s}=me(wr(i,n)),a=new st(o,s);if(n.absolutePositioned)return{center:_e(n.getRelativeCenterPoint(),void 0,r?r.calcTransformMatrix():void 0),size:a};{const r=n.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:i=new st,correction:n=new st}=this.calcBoundingBox(e,t)||{};return{center:i.add(r),correction:n.subtract(r),size:a}}return{center:i.getRelativeCenterPoint().add(r),size:a}}}}e(Us,"type","clip-path"),tt.setClass(Us);class Qs extends Cr{getInitialSize(t,e){let{target:i}=t,{size:n}=e;return new st(i.width||n.x,i.height||n.y)}}e(Qs,"type","fixed"),tt.setClass(Qs);class Ls extends Sr{subscribeTargets(t){const e=t.target;t.targets.reduce(((t,e)=>(e.parent&&t.add(e.parent),t)),new Set).forEach((t=>{t.layoutManager.subscribeTargets({target:t,targets:[e]})}))}unsubscribeTargets(t){const e=t.target,i=e.getObjects();t.targets.reduce(((t,e)=>(e.parent&&t.add(e.parent),t)),new Set).forEach((t=>{!i.some((e=>e.parent===t))&&t.layoutManager.unsubscribeTargets({target:t,targets:[e]})}))}}class js extends Tr{static getDefaults(){return n(n({},super.getDefaults()),js.ownDefaults)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,js.ownDefaults),this.setOptions(e);const{left:i,top:n,layoutManager:r}=e;this.groupInit(t,{left:i,top:n,layoutManager:null!=r?r:new Ls})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];"selection-order"===this.multiSelectionStacking?this.add(...e):e.forEach((t=>{const e=this._objects.findIndex((e=>e.isInFrontOf(t))),i=-1===e?this.size():e;this.insertAt(i,t)}))}canEnterGroup(t){return this.getObjects().some((e=>e.isDescendantOf(t)||t.isDescendantOf(e)))?(A("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const i=new Set;e.forEach((t=>{const{parent:e}=t;e&&i.add(e)})),t===vr?i.forEach((t=>{t._onAfterObjectsChange(mr,e)})):i.forEach((t=>{t._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=n(n({hasControls:!1},i),{},{forActiveSelection:!0});for(let e=0;e<this._objects.length;e++)this._objects[e]._renderControls(t,r);super._renderControls(t,e),t.restore()}}e(js,"type","ActiveSelection"),e(js,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),tt.setClass(js),tt.setClass(js,"activeSelection");class Ps{constructor(){e(this,"resources",{})}applyFilters(t,e,i,n,r){const o=r.getContext("2d");if(!o)return;o.drawImage(e,0,0,i,n);const s={sourceWidth:i,sourceHeight:n,imageData:o.getImageData(0,0,i,n),originalEl:e,originalImageData:o.getImageData(0,0,i,n),canvasEl:r,ctx:o,filterBackend:this};t.forEach((t=>{t.applyTo(s)}));const{imageData:a}=s;return a.width===i&&a.height===n||(r.width=a.width,r.height=a.height),o.putImageData(a,0,0),s}}class Hs{constructor(){let{tileSize:t=a.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),e(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const i=mt({width:t,height:e}),n=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)}applyFilters(t,e,i,n,r,o){const s=this.gl,a=r.getContext("2d");if(!s||!a)return;let A;o&&(A=this.getCachedTexture(o,e));const c={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,i,n,A?void 0:e),targetTexture:this.createTexture(s,i,n),originalTexture:A||this.createTexture(s,i,n,A?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},l=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,l),t.forEach((t=>{t&&t.applyTo(c)})),function(t){const e=t.targetCanvas,i=e.width,n=e.height,r=t.destinationWidth,o=t.destinationHeight;i===r&&n===o||(e.width=r,e.height=o)}(c),this.copyGLTo2D(s,c),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(c.sourceTexture),s.deleteTexture(c.targetTexture),s.deleteFramebuffer(l),a.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,i,n,r){const{NEAREST:o,TEXTURE_2D:s,RGBA:a,UNSIGNED_BYTE:A,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:l,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:u,TEXTURE_WRAP_T:d}=t,f=t.createTexture();return t.bindTexture(s,f),t.texParameteri(s,l,r||o),t.texParameteri(s,h,r||o),t.texParameteri(s,u,c),t.texParameteri(s,d,c),n?t.texImage2D(s,0,a,a,A,n):t.texImage2D(s,0,a,e,i,0,a,A,null),f}getCachedTexture(t,e,i){const{textureCache:n}=this;if(n[t])return n[t];{const r=this.createTexture(this.gl,e.width,e.height,e,i);return r&&(n[t]=r),r}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const i=t.canvas,n=e.targetCanvas,r=n.getContext("2d");if(!r)return;r.translate(0,n.height),r.scale(1,-1);const o=i.height-n.height;r.drawImage(i,0,o,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(t,e){const i=e.targetCanvas.getContext("2d"),n=e.destinationWidth,r=e.destinationHeight,o=n*r*4;if(!i)return;const s=new Uint8Array(this.imageBuffer,0,o),a=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,s);const A=new ImageData(a,n,r);i.putImageData(A,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const n=t.getParameter(i.UNMASKED_RENDERER_WEBGL),r=t.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}let Ns;function Rs(){const{WebGLProbe:t}=g();return t.queryWebGL(gt()),a.enableGLFiltering&&t.isSupported(a.textureSize)?new Hs({tileSize:a.textureSize}):new Ps}function zs(){return!Ns&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(Ns=Rs()),Ns}const Gs=["filters","resizeFilter","src","crossOrigin","type"],Ws=["cropX","cropY"];class Ys extends wn{static getDefaults(){return n(n({},super.getDefaults()),Ys.ownDefaults)}constructor(t,i){super(),e(this,"_lastScaleX",1),e(this,"_lastScaleY",1),e(this,"_filterScalingX",1),e(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Ys.ownDefaults),this.setOptions(i),this.cacheKey="texture".concat(ft()),this.setElement("string"==typeof t?(this.canvas&&oe(this.canvas.getElement())||p()).getElementById(t):t,i)}getElement(){return this._element}setElement(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(i),null===(e=t.classList)||void 0===e||e.add(Ys.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=zs(!1);e instanceof Hs&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const e=this[t];e&&g().dispose(e),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||0===this.strokeWidth)return;const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=[];return this.filters.forEach((t=>{t&&e.push(t.toObject())})),n(n({},super.toObject([...Ws,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,i=-this.width/2,n=-this.height/2;let r=[],o=[],s="",a="";if(!e)return[];if(this.hasCrop()){const t=ft();r.push('<clipPath id="imageCrop_'+t+'">\n','\t<rect x="'+i+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+t+')" '}if(this.imageSmoothing||(a=' image-rendering="optimizeSpeed"'),t.push("\t<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(a).concat(s,"></image>\n")),this.stroke||this.strokeDashArray){const t=this.fill;this.fill=null,o=['\t<rect x="'.concat(i,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),'" />\n')],this.fill=t}return r=this.paintFirst!==V?r.concat(o,t):r.concat(t,o),r}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lt(t,{crossOrigin:e,signal:i}).then((t=>{void 0!==e&&this.set({crossOrigin:e}),this.setElement(t)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),n=i.x,r=i.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||n>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);const s=mt(o),{width:a,height:A}=o;this._element=s,this._lastScaleX=t.scaleX=n,this._lastScaleY=t.scaleY=r,zs().applyFilters([t],o,a,A,this._element),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(t=t.filter((t=>t&&!t.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===t.length)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,i=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(this._element===this._originalElement){const t=mt({width:i,height:n});this._element=t,this._filteredEl=t}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,n),this._lastScaleX=1,this._lastScaleY=1);zs().applyFilters(t,this._originalElement,i,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const i=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,s=Math.max(this.cropX,0),a=Math.max(this.cropY,0),A=e.naturalWidth||e.width,c=e.naturalHeight||e.height,l=s*i,h=a*n,u=Math.min(r*i,A-l),d=Math.min(o*n,c-h),f=-r/2,g=-o/2,p=Math.min(r,A/i-s),m=Math.min(o,c/n-a);e&&t.drawImage(e,l,h,u,d,f,g,p,m)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=e||i.height}parsePreserveAspectRatioAttribute(){const t=Jt(this.preserveAspectRatio||""),e=this.width,i=this.height,n={width:e,height:i};let r,o=this._element.width,s=this._element.height,a=1,A=1,c=0,l=0,h=0,u=0;return!t||t.alignX===D&&t.alignY===D?(a=e/o,A=i/s):("meet"===t.meetOrSlice&&(a=A=Er(this._element,n),r=(e-o*a)/2,"Min"===t.alignX&&(c=-r),"Max"===t.alignX&&(c=r),r=(i-s*A)/2,"Min"===t.alignY&&(l=-r),"Max"===t.alignY&&(l=r)),"slice"===t.meetOrSlice&&(a=A=kr(this._element,n),r=o-e/a,"Mid"===t.alignX&&(h=r/2),"Max"===t.alignX&&(h=r),r=s-i/A,"Mid"===t.alignY&&(u=r/2),"Max"===t.alignY&&(u=r),o=e/a,s=i/A)),{width:o,height:s,scaleX:a,scaleY:A,offsetLeft:c,offsetTop:l,cropX:h,cropY:u}}static fromObject(t,e){let{filters:i,resizeFilter:o,src:s,crossOrigin:a,type:A}=t,c=r(t,Gs);return Promise.all([Lt(s,n(n({},e),{},{crossOrigin:a})),i&&jt(i,e),o&&jt([o],e),Pt(c,e)]).then((t=>{let[e,i=[],[r]=[],o={}]=t;return new this(e,n(n({},c),{},{src:s,filters:i,resizeFilter:r},o))}))}static fromURL(t){let{crossOrigin:e=null,signal:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Lt(t,{crossOrigin:e,signal:i}).then((t=>new this(t,n)))}static async fromElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=ur(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(n["xlink:href"],e,n).catch((t=>(A("log","Unable to parse Image",t),null)))}}function Xs(t){if(!Ve.test(t.nodeName))return{};const e=t.getAttribute("viewBox");let i,n,r=1,o=1,s=0,a=0;const A=t.getAttribute("width"),c=t.getAttribute("height"),l=t.getAttribute("x")||0,h=t.getAttribute("y")||0,u=!(e&&Je.test(e)),d=!A||!c||"100%"===A||"100%"===c;let f="",g=0,p=0;if(u&&(l||h)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(f=" translate("+Zt(l||"0")+" "+Zt(h||"0")+") ",i=(t.getAttribute("transform")||"")+f,t.setAttribute("transform",i),t.removeAttribute("x"),t.removeAttribute("y")),u&&d)return{width:0,height:0};const m={width:0,height:0};if(u)return m.width=Zt(A),m.height=Zt(c),m;const v=e.match(Je);s=-parseFloat(v[1]),a=-parseFloat(v[2]);const y=parseFloat(v[3]),w=parseFloat(v[4]);m.minX=s,m.minY=a,m.viewBoxWidth=y,m.viewBoxHeight=w,d?(m.width=y,m.height=w):(m.width=Zt(A),m.height=Zt(c),r=m.width/y,o=m.height/w);const C=Jt(t.getAttribute("preserveAspectRatio")||"");if(C.alignX!==D&&("meet"===C.meetOrSlice&&(o=r=r>o?o:r),"slice"===C.meetOrSlice&&(o=r=r>o?r:o),g=m.width-y*r,p=m.height-w*r,"Mid"===C.alignX&&(g/=2),"Mid"===C.alignY&&(p/=2),"Min"===C.alignX&&(g=0),"Min"===C.alignY&&(p=0)),1===r&&1===o&&0===s&&0===a&&0===l&&0===h)return m;if((l||h)&&"#document"!==t.parentNode.nodeName&&(f=" translate("+Zt(l||"0")+" "+Zt(h||"0")+") "),i=f+" matrix("+r+" 0 0 "+o+" "+(s*r+g)+" "+(a*o+p)+") ","svg"===t.nodeName){for(n=t.ownerDocument.createElementNS(ze,"g");t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}else n=t,n.removeAttribute("x"),n.removeAttribute("y"),i=n.getAttribute("transform")+i;return n.setAttribute("transform",i),m}e(Ys,"type","Image"),e(Ys,"cacheProperties",[...gi,...Ws]),e(Ys,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),e(Ys,"CSS_CANVAS","canvas-img"),e(Ys,"ATTRIBUTE_NAMES",[...Un,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),tt.setClass(Ys),tt.setSVGClass(Ys);const Ks=t=>t.tagName.replace("svg:",""),Vs=He(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function Zs(t,e){let i,n,r,o,s=[];for(r=0,o=e.length;r<o;r++)i=e[r],n=t.getElementsByTagNameNS("http://www.w3.org/2000/svg",i),s=s.concat(Array.from(n));return s}const Js=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],qs="xlink:href";function $s(t,e){var i;const n=(null===(i=e.getAttribute(qs))||void 0===i?void 0:i.slice(1))||"",r=t.getElementById(n);if(r&&r.getAttribute(qs)&&$s(t,r),r&&(Js.forEach((t=>{const i=r.getAttribute(t);!e.hasAttribute(t)&&i&&e.setAttribute(t,i)})),!e.children.length)){const t=r.cloneNode(!0);for(;t.firstChild;)e.appendChild(t.firstChild)}e.removeAttribute(qs)}const ta=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function ea(t){const e=t.getElementsByTagName("style");let i,r;const o={};for(i=0,r=e.length;i<r;i++){const t=(e[i].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");""!==t.trim()&&t.split("}").filter(((t,e,i)=>i.length>1&&t.trim())).forEach((t=>{if((t.match(/{/g)||[]).length>1&&t.trim().startsWith("@"))return;const e=t.split("{"),s={},a=e[1].trim().split(";").filter((function(t){return t.trim()}));for(i=0,r=a.length;i<r;i++){const t=a[i].split(":"),e=t[0].trim(),n=t[1].trim();s[e]=n}(t=e[0].trim()).split(",").forEach((t=>{""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]=n(n({},o[t]||{}),s))}))}))}return o}const ia=t=>tt.getSVGClass(Ks(t).toLowerCase());class na{constructor(t,e,i,n,r){this.elements=t,this.options=e,this.reviver=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=n,this.clipPaths=r,this.gradientDefs=function(t){const e=Zs(t,ta),i={};let n=e.length;for(;n--;){const r=e[n];r.getAttribute("xlink:href")&&$s(t,r);const o=r.getAttribute("id");o&&(i[o]=r)}return i}(n),this.cssRules=ea(n)}parse(){return Promise.all(this.elements.map((t=>this.createObject(t))))}async createObject(t){const e=ia(t);if(e){const i=await e.fromElement(t,this.options,this.cssRules);return this.resolveGradient(i,t,V),this.resolveGradient(i,t,Z),i instanceof Ys&&i._originalElement?Ao(i,i.parsePreserveAspectRatioAttribute()):Ao(i),await this.resolveClipPath(i,t),this.reviver&&this.reviver(t,i),i}return null}extractPropertyDefinition(t,e,i){const n=t[e],r=this.regexUrl;if(!r.test(n))return;r.lastIndex=0;const o=r.exec(n)[1];return r.lastIndex=0,i[o]}resolveGradient(t,e,i){const r=this.extractPropertyDefinition(t,i,this.gradientDefs);if(r){const o=e.getAttribute(i+"-opacity"),s=Uo.fromElement(r,t,n(n({},this.options),{},{opacity:o}));t.set(i,s)}}async resolveClipPath(t,e,i){const n=this.extractPropertyDefinition(t,"clipPath",this.clipPaths);if(n){const r=xt(t.calcTransformMatrix()),o=n[0].parentElement;let s=e;for(;!i&&s.parentElement&&s.getAttribute("clip-path")!==t.clipPath;)s=s.parentElement;s.parentElement.appendChild(o);const a=sr("".concat(s.getAttribute("transform")||""," ").concat(o.getAttribute("originalTransform")||""));o.setAttribute("transform","matrix(".concat(a.join(","),")"));const A=await Promise.all(n.map((t=>ia(t).fromElement(t,this.options,this.cssRules).then((t=>(Ao(t),t.fillRule=t.clipRule,delete t.clipRule,t)))))),c=1===A.length?A[0]:new Tr(A),l=_t(r,c.calcTransformMatrix());c.clipPath&&await this.resolveClipPath(c,s,o.getAttribute("clip-path")?s:void 0);const{scaleX:h,scaleY:u,angle:d,skewX:f,translateX:g,translateY:p}=Mt(l);c.set({flipX:!1,flipY:!1}),c.set({scaleX:h,scaleY:u,angle:d,skewX:f,skewY:0}),c.setPositionByOrigin(new st(g,p),M,M),t.clipPath=c}else delete t.clipPath}}const ra=t=>Ke.test(Ks(t));async function oa(t,e){let{crossOrigin:i,signal:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r&&r.aborted)return A("log",new l("parseSVGDocument")),{objects:[],elements:[],options:{},allElements:[]};const o=t.documentElement;!function(t){const e=Zs(t,["use","svg:use"]),i=["x","y","xlink:href","href","transform"];for(const n of e){const e=n.attributes,r={};for(const t of e)t.value&&(r[t.name]=t.value);const o=(r["xlink:href"]||r.href||"").slice(1);if(""===o)return;const s=t.getElementById(o);if(null===s)return;let a=s.cloneNode(!0);const A=a.attributes,c={};for(const t of A)t.value&&(c[t.name]=t.value);const{x:l=0,y:h=0,transform:u=""}=r,d="".concat(u," ").concat(c.transform||""," translate(").concat(l,", ").concat(h,")");if(Xs(a),/^svg$/i.test(a.nodeName)){const t=a.ownerDocument.createElementNS(ze,"g");Object.entries(c).forEach((e=>{let[i,n]=e;return t.setAttributeNS(ze,i,n)})),t.append(...a.childNodes),a=t}for(const t of e){if(!t)continue;const{name:e,value:n}=t;if(!i.includes(e))if("style"===e){const t={};cr(n,t),Object.entries(c).forEach((e=>{let[i,n]=e;t[i]=n})),cr(c.style||"",t);const i=Object.entries(t).map((t=>t.join(":"))).join(";");a.setAttribute(e,i)}else!c[e]&&a.setAttribute(e,n)}a.setAttribute("transform",d),a.setAttribute("instantiated_by_use","1"),a.removeAttribute("id"),n.parentNode.replaceChild(a,n)}}(t);const s=Array.from(o.getElementsByTagName("*")),a=n(n({},Xs(o)),{},{crossOrigin:i,signal:r}),c=s.filter((t=>(Xs(t),ra(t)&&!function(t){let e=t;for(;e&&(e=e.parentElement);)if(e&&e.nodeName&&Vs.test(Ks(e))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(t))));if(!c||c&&!c.length)return n(n({},{objects:[],elements:[],options:{},allElements:[]}),{},{options:a,allElements:s});const h={};s.filter((t=>"clipPath"===Ks(t))).forEach((t=>{t.setAttribute("originalTransform",t.getAttribute("transform")||"");const e=t.getAttribute("id");h[e]=Array.from(t.getElementsByTagName("*")).filter((t=>ra(t)))}));const u=new na(c,a,e,t,h);return{objects:await u.parse(),elements:c,options:a,allElements:s}}const sa=N,aa=t=>function(e,i,n){const{points:r,pathOffset:o}=n;return new st(r[t]).subtract(o).transform(_t(n.getViewportTransform(),n.calcTransformMatrix()))},Aa=(t,e,i,n)=>{const{target:r,pointIndex:o}=e,s=r,a=_e(new st(i,n),void 0,s.calcOwnMatrix());return s.points[o]=a.add(s.pathOffset),s.setDimensions(),!0},ca=(t,e)=>function(i,r,o,s){const a=r.target,A=new st(a.points[(t>0?t:a.points.length)-1]),c=A.subtract(a.pathOffset).transform(a.calcOwnMatrix()),l=e(i,n(n({},r),{},{pointIndex:t}),o,s),h=A.subtract(a.pathOffset).transform(a.calcOwnMatrix()).subtract(c);return a.left-=h.x,a.top-=h.y,l},la=t=>Hi(sa,ca(t,Aa)),ha=(t,e,i)=>{const{path:n,pathOffset:r}=t,o=n[e];return new st(o[i]-r.x,o[i+1]-r.y).transform(_t(t.getViewportTransform(),t.calcTransformMatrix()))};function ua(t,e,i){const{commandIndex:n,pointIndex:r}=this;return ha(i,n,r)}function da(t,e,i,r){const{target:o}=e,{commandIndex:s,pointIndex:a}=this,A=((t,e,i,n,r)=>{const{path:o,pathOffset:s}=t,a=o[(n>0?n:o.length)-1],A=new st(a[r],a[r+1]),c=A.subtract(s).transform(t.calcOwnMatrix()),l=_e(new st(e,i),void 0,t.calcOwnMatrix());o[n][r]=l.x+s.x,o[n][r+1]=l.y+s.y,t.setDimensions();const h=A.subtract(t.pathOffset).transform(t.calcOwnMatrix()).subtract(c);return t.left-=h.x,t.top-=h.y,t.set("dirty",!0),!0})(o,i,r,s,a);return Me(this.actionName,n(n({},Ue(t,e,i,r)),{},{commandIndex:s,pointIndex:a})),A}class fa extends Wi{constructor(t){super(t)}render(t,e,i,r,o){const s=n(n({},r),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(t,e,i,s,o)}}class ga extends fa{constructor(t){super(t)}render(t,e,i,n,r){const{path:o}=r,{commandIndex:s,pointIndex:a,connectToCommandIndex:A,connectToPointIndex:c}=this;t.save(),t.strokeStyle=this.controlStroke,this.connectionDashArray&&t.setLineDash(this.connectionDashArray);const[l]=o[s],h=ha(r,A,c);if("Q"===l){const n=ha(r,s,a+2);t.moveTo(n.x,n.y),t.lineTo(e,i)}else t.moveTo(e,i);t.lineTo(h.x,h.y),t.stroke(),t.restore(),super.render(t,e,i,n,r)}}const pa=(t,e,i,r,o,s)=>new(i?ga:fa)(n(n({commandIndex:t,pointIndex:e,actionName:"modifyPath",positionHandler:ua,actionHandler:da,connectToCommandIndex:o,connectToPointIndex:s},r),i?r.controlPointStyle:r.pointStyle));var ma=Object.freeze({__proto__:null,changeWidth:Ri,createObjectDefaultControls:gn,createPathControls:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={};let n="M";return t.path.forEach(((t,r)=>{const o=t[0];switch("Z"!==o&&(i["c_".concat(r,"_").concat(o)]=pa(r,t.length-2,!1,e)),o){case"C":i["c_".concat(r,"_C_CP_1")]=pa(r,1,!0,e,r-1,(t=>"C"===t?5:"Q"===t?3:1)(n)),i["c_".concat(r,"_C_CP_2")]=pa(r,3,!0,e,r,5);break;case"Q":i["c_".concat(r,"_Q_CP_1")]=pa(r,1,!0,e,r,3)}n=o})),i},createPolyActionHandler:la,createPolyControls:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={};for(let r=0;r<("number"==typeof t?t:t.points.length);r++)i["p".concat(r)]=new Wi(n({actionName:sa,positionHandler:aa(r),actionHandler:la(r)},e));return i},createPolyPositionHandler:aa,createResizeControls:pn,createTextboxDefaultControls:mn,dragHandler:je,factoryPolyActionHandler:ca,getLocalPoint:Le,polyActionHandler:Aa,renderCircleControl:zi,renderSquareControl:Gi,rotationStyleHandler:Yi,rotationWithSnapping:Xi,scaleCursorStyleHandler:Ji,scaleOrSkewActionName:hn,scaleSkewCursorStyleHandler:un,scalingEqually:$i,scalingX:tn,scalingXOrSkewingY:dn,scalingY:en,scalingYOrSkewingX:fn,skewCursorStyleHandler:sn,skewHandlerX:An,skewHandlerY:cn,wrapWithFireEvent:Hi,wrapWithFixedAnchor:Ni});const va=t=>void 0!==t.webgl,ya="precision highp float",wa="\n    ".concat(ya,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),Ca=["type"],ba=["type"],Ba=new RegExp(ya,"g");class xa{get type(){return this.constructor.type}constructor(){let t=r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Ca);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return wa}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"}createProgram(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=g();"highp"!==n&&(e=e.replace(Ba,ya.replace("highp",n)));const r=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),s=t.createProgram();if(!r||!o||!s)throw new c("Vertex, fragment shader or program creation error");if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new c("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(r)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new c("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(s,r),t.attachShader(s,o),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new c('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(s)));const a=this.getUniformLocations(t,s)||{};return a.uStepW=t.getUniformLocation(s,"uStepW"),a.uStepH=t.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:this.getAttributeLocations(t,s),uniformLocations:a}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const i=this.constructor.uniformLocations,n={};for(let r=0;r<i.length;r++)n[i[r]]=t.getUniformLocation(e,i[r]);return n}sendAttributeData(t,e,i){const n=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const i=t.destinationWidth,n=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===n||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,i,n)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){va(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:i}=t,n=mt({width:e,height:i});t.helpLayer=n}}toObject(){const t=Object.keys(this.constructor.defaults||{});return n({type:this.type},t.reduce(((t,e)=>(t[e]=this[e],t)),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(r(t,ba))}}e(xa,"type","BaseFilter"),e(xa,"uniformLocations",[]);const _a={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class Sa extends xa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(_a[this.mode],"\n        }\n      }\n      ")}applyTo2d(t){let{imageData:{data:e}}=t;const i=new Kt(this.color).getSource(),n=this.alpha,r=i[0]*n,o=i[1]*n,s=i[2]*n,a=1-n;for(let t=0;t<e.length;t+=4){const i=e[t],n=e[t+1],A=e[t+2];let c,l,h;switch(this.mode){case"multiply":c=i*r/255,l=n*o/255,h=A*s/255;break;case"screen":c=255-(255-i)*(255-r)/255,l=255-(255-n)*(255-o)/255,h=255-(255-A)*(255-s)/255;break;case"add":c=i+r,l=n+o,h=A+s;break;case"difference":c=Math.abs(i-r),l=Math.abs(n-o),h=Math.abs(A-s);break;case"subtract":c=i-r,l=n-o,h=A-s;break;case"darken":c=Math.min(i,r),l=Math.min(n,o),h=Math.min(A,s);break;case"lighten":c=Math.max(i,r),l=Math.max(n,o),h=Math.max(A,s);break;case"overlay":c=r<128?2*i*r/255:255-2*(255-i)*(255-r)/255,l=o<128?2*n*o/255:255-2*(255-n)*(255-o)/255,h=s<128?2*A*s/255:255-2*(255-A)*(255-s)/255;break;case"exclusion":c=r+i-2*r*i/255,l=o+n-2*o*n/255,h=s+A-2*s*A/255;break;case"tint":c=r+i*a,l=o+n*a,h=s+A*a}e[t]=c,e[t+1]=l,e[t+2]=h}}sendUniformData(t,e){const i=new Kt(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)}}e(Sa,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),e(Sa,"type","BlendColor"),e(Sa,"uniformLocations",["uColor"]),tt.setClass(Sa);const Ia={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},Ma=["type","image"];class Ta extends xa{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ia[this.mode]}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}applyToWebGL(t){const e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]}applyTo2d(t){let{imageData:{data:e,width:i,height:n},filterBackend:{resources:r}}=t;const o=this.image;r.blendImage||(r.blendImage=gt());const s=r.blendImage,a=s.getContext("2d");s.width!==i||s.height!==n?(s.width=i,s.height=n):a.clearRect(0,0,i,n),a.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),a.drawImage(o.getElement(),0,0,i,n);const A=a.getImageData(0,0,i,n).data;for(let t=0;t<e.length;t+=4){const i=e[t],n=e[t+1],r=e[t+2],o=e[t+3],s=A[t],a=A[t+1],c=A[t+2],l=A[t+3];switch(this.mode){case"multiply":e[t]=i*s/255,e[t+1]=n*a/255,e[t+2]=r*c/255,e[t+3]=o*l/255;break;case"mask":e[t+3]=l}}}sendUniformData(t,e){const i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)}toObject(){return n(n({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:i,image:o}=t,s=r(t,Ma);return Ys.fromObject(o,e).then((t=>new this(n(n({},s),{},{image:t}))))}}e(Ta,"type","BlendImage"),e(Ta,"defaults",{mode:"multiply",alpha:1}),e(Ta,"uniformLocations",["uTransformMatrix","uImage"]),tt.setClass(Ta);class Ea extends xa{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        float weight = 1.0 - abs(percent);\n        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\n        total += weight;\n      }\n      gl_FragColor = color / total;\n    }\n  "}applyTo(t){va(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:i,filterBackend:{resources:n}}=t;const{width:r,height:o}=i;n.blurLayer1||(n.blurLayer1=gt(),n.blurLayer2=gt());const s=n.blurLayer1,a=n.blurLayer2;s.width===r&&s.height===o||(a.width=s.width=r,a.height=s.height=o);const A=s.getContext("2d"),c=a.getContext("2d"),l=.06*this.blur*.5;let h,u,d,f;for(A.putImageData(i,0,0),c.clearRect(0,0,r,o),f=-15;f<=15;f++)h=(Math.random()-.5)/4,u=f/15,d=l*u*r+h,c.globalAlpha=1-Math.abs(u),c.drawImage(s,d,h),A.drawImage(a,0,0),c.globalAlpha=1,c.clearRect(0,0,a.width,a.height);for(f=-15;f<=15;f++)h=(Math.random()-.5)/4,u=f/15,d=l*u*o+h,c.globalAlpha=1-Math.abs(u),c.drawImage(s,h,d),A.drawImage(a,0,0),c.globalAlpha=1,c.clearRect(0,0,a.width,a.height);e.drawImage(s,0,0);const g=e.getImageData(0,0,s.width,s.height);return A.globalAlpha=1,A.clearRect(0,0,s.width,s.height),g}sendUniformData(t,e){const i=this.chooseRightDelta();t.uniform2fv(e.uDelta,i)}isNeutralState(){return 0===this.blur}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const i=t*this.blur*.12;return this.horizontal?e[0]=i:e[1]=i,e}}e(Ea,"type","Blur"),e(Ea,"defaults",{blur:0}),e(Ea,"uniformLocations",["uDelta"]),tt.setClass(Ea);class ka extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.round(255*this.brightness);for(let t=0;t<e.length;t+=4)e[t]+=i,e[t+1]+=i,e[t+2]+=i}isNeutralState(){return 0===this.brightness}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}e(ka,"type","Brightness"),e(ka,"defaults",{brightness:0}),e(ka,"uniformLocations",["uBrightness"]),tt.setClass(ka);const Fa={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Da extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(t){const e=t.imageData.data,i=this.matrix,n=this.colorsOnly;for(let t=0;t<e.length;t+=4){const r=e[t],o=e[t+1],s=e[t+2];if(e[t]=r*i[0]+o*i[1]+s*i[2]+255*i[4],e[t+1]=r*i[5]+o*i[6]+s*i[7]+255*i[9],e[t+2]=r*i[10]+o*i[11]+s*i[12]+255*i[14],!n){const n=e[t+3];e[t]+=n*i[3],e[t+1]+=n*i[8],e[t+2]+=n*i[13],e[t+3]=r*i[15]+o*i[16]+s*i[17]+n*i[18]+255*i[19]}}}sendUniformData(t,e){const i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,r)}toObject(){return n(n({},super.toObject()),{},{matrix:[...this.matrix]})}}function Oa(t,i){var n;const r=(e(n=class extends Da{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",t),e(n,"defaults",{colorsOnly:!1,matrix:i}),n);return tt.setClass(r,t),r}e(Da,"type","ColorMatrix"),e(Da,"defaults",Fa),e(Da,"uniformLocations",["uColorMatrix","uConstants"]),tt.setClass(Da);const Ua=Oa("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),Qa=Oa("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),La=Oa("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),ja=Oa("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Pa=Oa("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),Ha=Oa("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Na=Oa("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Ra extends xa{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){va(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((e=>{e.applyTo(t)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((t=>t.toObject()))}}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,e){return Promise.all((t.subFilters||[]).map((t=>tt.getClass(t.type).fromObject(t,e)))).then((t=>new this({subFilters:t})))}}e(Ra,"type","Composed"),tt.setClass(Ra);class za extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}isNeutralState(){return 0===this.contrast}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.floor(255*this.contrast),n=259*(i+255)/(255*(259-i));for(let t=0;t<e.length;t+=4)e[t]=n*(e[t]-128)+128,e[t+1]=n*(e[t+1]-128)+128,e[t+2]=n*(e[t+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}e(za,"type","Contrast"),e(za,"defaults",{contrast:0}),e(za,"uniformLocations",["uContrast"]),tt.setClass(za);const Ga={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class Wa extends xa{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Ga[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,i=e.data,n=this.matrix,r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),s=e.width,a=e.height,A=t.ctx.createImageData(s,a),c=A.data,l=this.opaque?1:0;let h,u,d,f,g,p,m,v,y,w,C,b,B;for(C=0;C<a;C++)for(w=0;w<s;w++){for(g=4*(C*s+w),h=0,u=0,d=0,f=0,B=0;B<r;B++)for(b=0;b<r;b++)m=C+B-o,p=w+b-o,m<0||m>=a||p<0||p>=s||(v=4*(m*s+p),y=n[B*r+b],h+=i[v]*y,u+=i[v+1]*y,d+=i[v+2]*y,l||(f+=i[v+3]*y));c[g]=h,c[g+1]=u,c[g+2]=d,c[g+3]=l?i[g+3]:f}t.imageData=A}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return n(n({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}e(Wa,"type","Convolute"),e(Wa,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),e(Wa,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),tt.setClass(Wa);const Ya="Gamma";class Xa extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.gamma,n=1/i[0],r=1/i[1],o=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const s=this.rgbValues;for(let t=0;t<256;t++)s.r[t]=255*Math.pow(t/255,n),s.g[t]=255*Math.pow(t/255,r),s.b[t]=255*Math.pow(t/255,o);for(let t=0;t<e.length;t+=4)e[t]=s.r[e[t]],e[t+1]=s.g[e[t+1]],e[t+2]=s.b[e[t+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return 1===t[0]&&1===t[1]&&1===t[2]}toObject(){return{type:Ya,gamma:this.gamma.concat()}}}e(Xa,"type",Ya),e(Xa,"defaults",{gamma:[1,1,1]}),e(Xa,"uniformLocations",["uGamma"]),tt.setClass(Xa);const Ka={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class Va extends xa{applyTo2d(t){let{imageData:{data:e}}=t;for(let t,i=0;i<e.length;i+=4){const n=e[i],r=e[i+1],o=e[i+2];switch(this.mode){case"average":t=(n+r+o)/3;break;case"lightness":t=(Math.min(n,r,o)+Math.max(n,r,o))/2;break;case"luminosity":t=.21*n+.72*r+.07*o}e[i+2]=e[i+1]=e[i]=t}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Ka[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}e(Va,"type","Grayscale"),e(Va,"defaults",{mode:"average"}),e(Va,"uniformLocations",["uMode"]),tt.setClass(Va);const Za=n(n({},Fa),{},{rotation:0});class Ja extends Da{calculateMatrix(){const t=this.rotation*Math.PI,e=rt(t),i=ot(t),n=1/3,r=Math.sqrt(n)*i,o=1-e;this.matrix=[e+o/3,n*o-r,n*o+r,0,0,n*o+r,e+n*o,n*o-r,0,0,n*o-r,n*o+r,e+n*o,0,0,0,0,0,1,0]}isNeutralState(){return 0===this.rotation}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}e(Ja,"type","HueRotation"),e(Ja,"defaults",Za),tt.setClass(Ja);class qa extends xa{applyTo2d(t){let{imageData:{data:e}}=t;for(let t=0;t<e.length;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2],this.alpha&&(e[t+3]=255-e[t+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}e(qa,"type","Invert"),e(qa,"defaults",{alpha:!1,invert:!0}),e(qa,"uniformLocations",["uInvert","uAlpha"]),tt.setClass(qa);class $a extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.noise;for(let t=0;t<e.length;t+=4){const n=(.5-Math.random())*i;e[t]+=n,e[t+1]+=n,e[t+2]+=n}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return 0===this.noise}}e($a,"type","Noise"),e($a,"defaults",{noise:0}),e($a,"uniformLocations",["uNoise","uSeed"]),tt.setClass($a);class tA extends xa{applyTo2d(t){let{imageData:{data:e,width:i,height:n}}=t;for(let t=0;t<n;t+=this.blocksize)for(let r=0;r<i;r+=this.blocksize){const o=4*t*i+4*r,s=e[o],a=e[o+1],A=e[o+2],c=e[o+3];for(let o=t;o<Math.min(t+this.blocksize,n);o++)for(let t=r;t<Math.min(r+this.blocksize,i);t++){const n=4*o*i+4*t;e[n]=s,e[n+1]=a,e[n+2]=A,e[n+3]=c}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepH;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}e(tA,"type","Pixelate"),e(tA,"defaults",{blocksize:4}),e(tA,"uniformLocations",["uBlocksize"]),tt.setClass(tA);class eA extends xa{getFragmentSource(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(t){let{imageData:{data:e}}=t;const i=255*this.distance,n=new Kt(this.color).getSource(),r=[n[0]-i,n[1]-i,n[2]-i],o=[n[0]+i,n[1]+i,n[2]+i];for(let t=0;t<e.length;t+=4){const i=e[t],n=e[t+1],s=e[t+2];i>r[0]&&n>r[1]&&s>r[2]&&i<o[0]&&n<o[1]&&s<o[2]&&(e[t+3]=0)}}sendUniformData(t,e){const i=new Kt(this.color).getSource(),n=this.distance,r=[0+i[0]/255-n,0+i[1]/255-n,0+i[2]/255-n,1],o=[i[0]/255+n,i[1]/255+n,i[2]/255+n,1];t.uniform4fv(e.uLow,r),t.uniform4fv(e.uHigh,o)}}e(eA,"type","RemoveColor"),e(eA,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),e(eA,"uniformLocations",["uLow","uHigh"]),tt.setClass(eA);class iA extends xa{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),n=new Array(i);for(let r=1;r<=i;r++)n[r-1]=t(r*e);return n}generateShader(t){const e=new Array(t);for(let i=1;i<=t;i++)e[i-1]="".concat(i,".0 * uDelta");return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec2 uDelta;\n      varying vec2 vTexCoord;\n      uniform float uTaps[".concat(t,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(e.map(((t,e)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(t,") * uTaps[").concat(e,"] + texture2D(uTexture, vTexCoord - ").concat(t,") * uTaps[").concat(e,"];\n              sum += 2.0 * uTaps[").concat(e,"];\n            "))).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){va(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;const i=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(i)/i}}applyTo2d(t){const e=t.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;const r=e.width,o=e.height,s=Math.round(r*i),a=Math.round(o*n);let A;A="sliceHack"===this.resizeType?this.sliceByTwo(t,r,o,s,a):"hermite"===this.resizeType?this.hermiteFastResize(t,r,o,s,a):"bilinear"===this.resizeType?this.bilinearFiltering(t,r,o,s,a):"lanczos"===this.resizeType?this.lanczosResize(t,r,o,s,a):new ImageData(s,a),t.imageData=A}sliceByTwo(t,e,i,n,r){const o=t.imageData,s=.5;let a=!1,A=!1,c=e*s,l=i*s;const h=t.filterBackend.resources;let u=0,d=0;const f=e;let g=0;h.sliceByTwo||(h.sliceByTwo=gt());const p=h.sliceByTwo;(p.width<1.5*e||p.height<i)&&(p.width=1.5*e,p.height=i);const m=p.getContext("2d");for(m.clearRect(0,0,1.5*e,i),m.putImageData(o,0,0),n=Math.floor(n),r=Math.floor(r);!a||!A;)e=c,i=l,n<Math.floor(c*s)?c=Math.floor(c*s):(c=n,a=!0),r<Math.floor(l*s)?l=Math.floor(l*s):(l=r,A=!0),m.drawImage(p,u,d,e,i,f,g,c,l),u=f,d=g,g+=l;return m.getImageData(u,d,n,r)}lanczosResize(t,e,i,n,r){const o=t.imageData.data,s=t.ctx.createImageData(n,r),a=s.data,A=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,l=this.rcpScaleY,h=2/this.rcpScaleX,u=2/this.rcpScaleY,d=Math.ceil(c*this.lanczosLobes/2),f=Math.ceil(l*this.lanczosLobes/2),g={},p={x:0,y:0},m={x:0,y:0};return function t(v){let y,w,C,b,B,x,_,S,I,M,T;for(p.x=(v+.5)*c,m.x=Math.floor(p.x),y=0;y<r;y++){for(p.y=(y+.5)*l,m.y=Math.floor(p.y),B=0,x=0,_=0,S=0,I=0,w=m.x-d;w<=m.x+d;w++)if(!(w<0||w>=e)){M=Math.floor(1e3*Math.abs(w-p.x)),g[M]||(g[M]={});for(let t=m.y-f;t<=m.y+f;t++)t<0||t>=i||(T=Math.floor(1e3*Math.abs(t-p.y)),g[M][T]||(g[M][T]=A(Math.sqrt(Math.pow(M*h,2)+Math.pow(T*u,2))/1e3)),C=g[M][T],C>0&&(b=4*(t*e+w),B+=C,x+=C*o[b],_+=C*o[b+1],S+=C*o[b+2],I+=C*o[b+3]))}b=4*(y*n+v),a[b]=x/B,a[b+1]=_/B,a[b+2]=S/B,a[b+3]=I/B}return++v<n?t(v):s}(0)}bilinearFiltering(t,e,i,n,r){let o,s,a,A,c,l,h,u,d,f,g,p,m,v=0;const y=this.rcpScaleX,w=this.rcpScaleY,C=4*(e-1),b=t.imageData.data,B=t.ctx.createImageData(n,r),x=B.data;for(h=0;h<r;h++)for(u=0;u<n;u++)for(c=Math.floor(y*u),l=Math.floor(w*h),d=y*u-c,f=w*h-l,m=4*(l*e+c),g=0;g<4;g++)o=b[m+g],s=b[m+4+g],a=b[m+C+g],A=b[m+C+4+g],p=o*(1-d)*(1-f)+s*d*(1-f)+a*f*(1-d)+A*d*f,x[v++]=p;return B}hermiteFastResize(t,e,i,n,r){const o=this.rcpScaleX,s=this.rcpScaleY,a=Math.ceil(o/2),A=Math.ceil(s/2),c=t.imageData.data,l=t.ctx.createImageData(n,r),h=l.data;for(let t=0;t<r;t++)for(let i=0;i<n;i++){const r=4*(i+t*n);let l=0,u=0,d=0,f=0,g=0,p=0,m=0;const v=(t+.5)*s;for(let n=Math.floor(t*s);n<(t+1)*s;n++){const t=Math.abs(v-(n+.5))/A,r=(i+.5)*o,s=t*t;for(let t=Math.floor(i*o);t<(i+1)*o;t++){let i=Math.abs(r-(t+.5))/a;const o=Math.sqrt(s+i*i);o>1&&o<-1||(l=2*o*o*o-3*o*o+1,l>0&&(i=4*(t+n*e),m+=l*c[i+3],d+=l,c[i+3]<255&&(l=l*c[i+3]/250),f+=l*c[i],g+=l*c[i+1],p+=l*c[i+2],u+=l))}}h[r]=f/u,h[r+1]=g/u,h[r+2]=p/u,h[r+3]=m/d}return l}}e(iA,"type","Resize"),e(iA,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),e(iA,"uniformLocations",["uDelta","uTaps"]),tt.setClass(iA);class nA extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.saturation;for(let t=0;t<e.length;t+=4){const n=e[t],r=e[t+1],o=e[t+2],s=Math.max(n,r,o);e[t]+=s!==n?(s-n)*i:0,e[t+1]+=s!==r?(s-r)*i:0,e[t+2]+=s!==o?(s-o)*i:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return 0===this.saturation}}e(nA,"type","Saturation"),e(nA,"defaults",{saturation:0}),e(nA,"uniformLocations",["uSaturation"]),tt.setClass(nA);class rA extends xa{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.vibrance;for(let t=0;t<e.length;t+=4){const n=e[t],r=e[t+1],o=e[t+2],s=Math.max(n,r,o),a=(n+r+o)/3,A=2*Math.abs(s-a)/255*i;e[t]+=s!==n?(s-n)*A:0,e[t+1]+=s!==r?(s-r)*A:0,e[t+2]+=s!==o?(s-o)*A:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return 0===this.vibrance}}e(rA,"type","Vibrance"),e(rA,"defaults",{vibrance:0}),e(rA,"uniformLocations",["uVibrance"]),tt.setClass(rA);var oA=Object.freeze({__proto__:null,BaseFilter:xa,BlackWhite:Na,BlendColor:Sa,BlendImage:Ta,Blur:Ea,Brightness:ka,Brownie:Ua,ColorMatrix:Da,Composed:Ra,Contrast:za,Convolute:Wa,Gamma:Xa,Grayscale:Va,HueRotation:Ja,Invert:qa,Kodachrome:La,Noise:$a,Pixelate:tA,Polaroid:Pa,RemoveColor:eA,Resize:iA,Saturation:nA,Sepia:Ha,Technicolor:ja,Vibrance:rA,Vintage:Qa});t.ActiveSelection=js,t.BaseBrush=jo,t.BaseFabricObject=Pi,t.Canvas=wo,t.Canvas2dFilterBackend=Ps,t.CanvasDOMManager=lo,t.Circle=Wo,t.CircleBrush=class extends jo{constructor(t){super(t),e(this,"width",10),this.points=[]}drawDot(t){const e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()}dot(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()}onMouseDown(t){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)}_render(){const t=this.canvas.contextTop,e=this.points;this._saveAndTransform(t);for(let i=0;i<e.length;i++)this.dot(t,e[i]);t.restore()}onMouseMove(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let t=0;t<this.points.length;t++){const i=this.points[t],n=new Wo({radius:i.radius,left:i.x,top:i.y,originX:M,originY:M,fill:i.fill});this.shadow&&(n.shadow=new ui(this.shadow)),e.push(n)}const i=new Tr(e,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}addPoint(t){let{x:e,y:i}=t;const n={x:e,y:i,radius:so(Math.max(0,this.width-20),this.width+20)/2,fill:new Kt(this.color).setAlpha(so(0,100)/100).toRgba()};return this.points.push(n),n}},t.ClipPathLayout=Us,t.Color=Kt,t.Control=Wi,t.Ellipse=qo,t.FabricImage=Ys,t.FabricObject=wn,t.FabricText=ws,t.FitContentLayout=br,t.FixedLayout=Qs,t.Gradient=Uo,t.Group=Tr,t.IText=Ds,t.Image=Ys,t.InteractiveFabricObject=vn,t.Intersection=Ui,t.LayoutManager=Sr,t.LayoutStrategy=Cr,t.Line=Vo,t.Object=wn,t.Observable=it,t.Path=No,t.Pattern=Lo,t.PatternBrush=class extends Ro{constructor(t){super(t)}getPatternSrc(){const t=gt(),e=t.getContext("2d");return t.width=t.height=25,e&&(e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill()),t}getPattern(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(t){super._setBrushStyles(t);const e=this.getPattern(t);e&&(t.strokeStyle=e)}createPath(t){const e=super.createPath(t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new Lo({source:this.source||this.getPatternSrc(),offsetX:-i.x,offsetY:-i.y}),e}},t.PencilBrush=Ro,t.Point=st,t.Polygon=ns,t.Polyline=is,t.Rect=gr,t.Shadow=ui,t.SprayBrush=class extends jo{constructor(t){super(t),e(this,"width",10),e(this,"density",20),e(this,"dotWidth",1),e(this,"dotWidthVariance",1),e(this,"randomOpacity",!1),e(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(t){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.renderChunck(this.sprayChunk)}onMouseMove(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.renderChunck(this.sprayChunk))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let t=0;t<this.sprayChunks.length;t++){const i=this.sprayChunks[t];for(let t=0;t<i.length;t++){const n=i[t],r=new gr({width:n.width,height:n.width,left:n.x+1,top:n.y+1,originX:M,originY:M,fill:this.color});e.push(r)}}const i=new Tr(this.optimizeOverlapping?function(t){const e={},i=[];for(let n,r=0;r<t.length;r++)n="".concat(t[r].left).concat(t[r].top),e[n]||(e[n]=!0,i.push(t[r]));return i}(e):e,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&i.set("shadow",new ui(this.shadow)),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}renderChunck(t){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let i=0;i<t.length;i++){const n=t[i];e.globalAlpha=n.opacity,e.fillRect(n.x,n.y,n.width,n.width)}e.restore()}_render(){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let t=0;t<this.sprayChunks.length;t++)this.renderChunck(this.sprayChunks[t]);t.restore()}addSprayChunk(t){this.sprayChunk=[];const e=this.width/2;for(let i=0;i<this.density;i++)this.sprayChunk.push({x:so(t.x-e,t.x+e),y:so(t.y-e,t.y+e),width:this.dotWidthVariance?so(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?so(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}},t.StaticCanvas=ue,t.StaticCanvasDOMManager=le,t.Text=ws,t.Textbox=Os,t.Triangle=Zo,t.WebGLFilterBackend=Hs,t.cache=y,t.classRegistry=tt,t.config=a,t.controlsUtils=ma,t.createCollectionMixin=ct,t.filters=oA,t.getCSSRules=ea,t.getEnv=g,t.getFabricDocument=p,t.getFabricWindow=m,t.getFilterBackend=zs,t.iMatrix=_,t.initFilterBackend=Rs,t.isPutImageFaster=(t,e)=>{const i=mt({width:t,height:e}),n=gt().getContext("webgl"),r={imageBuffer:new ArrayBuffer(t*e*4)},o={destinationWidth:t,destinationHeight:e,targetCanvas:i};let s;s=m().performance.now(),Hs.prototype.copyGLTo2D.call(r,n,o);const a=m().performance.now()-s;return s=m().performance.now(),Hs.prototype.copyGLTo2DPutImageData.call(r,n,o),a>m().performance.now()-s},t.isWebGLPipelineState=va,t.loadSVGFromString=function(t,e,i){return oa((new(m().DOMParser)).parseFromString(t.trim(),"text/xml"),e,i)},t.loadSVGFromURL=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((e,n)=>{ao(t.replace(/^\n\s*/,"").trim(),{onComplete:t=>{const i=t.responseXML;i&&e(i),n()},signal:i.signal})})).then((t=>oa(t,e,i))).catch((()=>({objects:[],elements:[],options:{},allElements:[]})))},t.parseAttributes=ur,t.parseFontDeclaration=Ar,t.parsePointsAttribute=$o,t.parseSVGDocument=oa,t.parseStyleAttribute=lr,t.parseTransformAttribute=sr,t.runningAnimations=et,t.setEnv=t=>{f=t},t.setFilterBackend=function(t){Ns=t},t.util=co,t.version=w}(e)},109:function(t,e,i){var n;!function(r,o){"use strict";var s,a="user-agent",A="",c="function",l="undefined",h="object",u="string",d="browser",f="cpu",g="device",p="engine",m="os",v="result",y="name",w="type",C="vendor",b="version",B="architecture",x="major",_="model",S="console",I="mobile",M="tablet",T="smarttv",E="wearable",k="xr",F="embedded",D="inapp",O="brands",U="formFactors",Q="fullVersionList",L="platform",j="platformVersion",P="bitness",H="sec-ch-ua",N=H+"-full-version-list",R=H+"-arch",z=H+"-"+P,G=H+"-form-factors",W=H+"-"+I,Y=H+"-"+_,X=H+"-"+L,K=X+"-version",V=[O,Q,I,_,L,j,B,U,P],Z="Amazon",J="Apple",q="ASUS",$="BlackBerry",tt="Google",et="Huawei",it="Lenovo",nt="Honor",rt="LG",ot="Microsoft",st="Motorola",at="Nvidia",At="OnePlus",ct="OPPO",lt="Samsung",ht="Sharp",ut="Sony",dt="Xiaomi",ft="Zebra",gt="Chrome",pt="Chromium",mt="Chromecast",vt="Firefox",yt="Opera",wt="Facebook",Ct="Sogou",bt="Mobile ",Bt=" Browser",xt="Windows",_t=typeof r!==l,St=_t&&r.navigator?r.navigator:o,It=St&&St.userAgentData?St.userAgentData:o,Mt=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},Tt=function(t,e){if(typeof t===h&&t.length>0){for(var i in t)if(Dt(t[i])==Dt(e))return!0;return!1}return!!kt(t)&&-1!==Dt(e).indexOf(Dt(t))},Et=function(t,e){for(var i in t)return/^(browser|cpu|device|engine|os)$/.test(i)||!!e&&Et(t[i])},kt=function(t){return typeof t===u},Ft=function(t){if(!t)return o;for(var e=[],i=Qt(/\\?\"/g,t).split(","),n=0;n<i.length;n++)if(i[n].indexOf(";")>-1){var r=jt(i[n]).split(";v=");e[n]={brand:r[0],version:r[1]}}else e[n]=jt(i[n]);return e},Dt=function(t){return kt(t)?t.toLowerCase():t},Ot=function(t){return kt(t)?Qt(/[^\d\.]/g,t).split(".")[0]:o},Ut=function(t){for(var e in t){var i=t[e];typeof i==h&&2==i.length?this[i[0]]=i[1]:this[i]=o}return this},Qt=function(t,e){return kt(e)?e.replace(t,A):e},Lt=function(t){return Qt(/\\?\"/g,t)},jt=function(t,e){if(kt(t))return t=Qt(/^\s\s*/,t),typeof e===l?t:t.substring(0,500)},Pt=function(t,e){if(t&&e)for(var i,n,r,s,a,A,l=0;l<e.length&&!a;){var u=e[l],d=e[l+1];for(i=n=0;i<u.length&&!a&&u[i];)if(a=u[i++].exec(t))for(r=0;r<d.length;r++)A=a[++n],typeof(s=d[r])===h&&s.length>0?2===s.length?typeof s[1]==c?this[s[0]]=s[1].call(this,A):this[s[0]]=s[1]:3===s.length?typeof s[1]!==c||s[1].exec&&s[1].test?this[s[0]]=A?A.replace(s[1],s[2]):o:this[s[0]]=A?s[1].call(this,A,s[2]):o:4===s.length&&(this[s[0]]=A?s[3].call(this,A.replace(s[1],s[2])):o):this[s]=A||o;l+=2}},Ht=function(t,e){for(var i in e)if(typeof e[i]===h&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(Tt(e[i][n],t))return"?"===i?o:i}else if(Tt(e[i],t))return"?"===i?o:i;return e.hasOwnProperty("*")?e["*"]:t},Nt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Rt={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":o},zt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[y,bt+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,b],[/opios[\/ ]+([\w\.]+)/i],[b,[y,yt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[b,[y,yt+" GX"]],[/\bopr\/([\w\.]+)/i],[b,[y,yt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[b,[y,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[b,[y,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[y,b],[/quark(?:pc)?\/([-\w\.]+)/i],[b,[y,"Quark"]],[/\bddg\/([\w\.]+)/i],[b,[y,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[b,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[y,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[b,[y,"Smart "+it+Bt]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure"+Bt],b],[/\bfocus\/([\w\.]+)/i],[b,[y,vt+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[y,yt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[y,yt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[y,"MIUI"+Bt]],[/fxios\/([\w\.-]+)/i],[b,[y,bt+vt]],[/\bqihoobrowser\/?([\w\.]*)/i],[b,[y,"360"]],[/\b(qq)\/([\w\.]+)/i],[[y,/(.+)/,"$1Browser"],b],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1"+Bt],b],[/samsungbrowser\/([\w\.]+)/i],[b,[y,lt+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[b,[y,Ct+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[y,Ct+" Mobile"],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[y,b],[/(lbbrowser|rekonq)/i],[y],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[b,y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,wt],b,[w,D]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[y,b,[w,D]],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[y,"GSA"],[w,D]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[y,"TikTok"],[w,D]],[/\[(linkedin)app\]/i],[y,[w,D]],[/(chromium)[\/ ]([-\w\.]+)/i],[y,b],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[y,gt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,gt+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[y,"Android"+Bt]],[/chrome\/([\w\.]+) mobile/i],[b,[y,bt+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,b],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[b,[y,bt+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[y,bt+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[b,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[b,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[y,b],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[y,bt+vt],b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],b],[/(wolvic|librewolf)\/([\w\.]+)/i],[y,b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[y,vt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[y,[b,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[y,[b,/[^\d\.]+./,A]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[B,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[B,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[B,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[B,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[B,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[B,/ower/,A,Dt]],[/ sun4\w[;\)]/i],[[B,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[B,Dt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[_,[C,lt],[w,M]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[_,[C,lt],[w,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[_,[C,J],[w,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_,[C,J],[w,M]],[/(macintosh);/i],[_,[C,J]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[_,[C,ht],[w,I]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[_,[C,nt],[w,M]],[/honor([-\w ]+)[;\)]/i],[_,[C,nt],[w,I]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[_,[C,et],[w,M]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[_,[C,et],[w,I]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[_,/_/g," "],[C,dt],[w,M]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[_,/_/g," "],[C,dt],[w,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[_,[C,ct],[w,I]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[_,[C,Ht,{OnePlus:["304","403","203"],"*":ct}],[w,M]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[_,[C,"BLU"],[w,I]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[_,[C,"Vivo"],[w,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[_,[C,"Realme"],[w,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[_,[C,st],[w,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[_,[C,st],[w,M]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[_,[C,rt],[w,M]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[_,[C,rt],[w,I]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[_,[C,it],[w,M]],[/(nokia) (t[12][01])/i],[C,_,[w,M]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[_,/_/g," "],[w,I],[C,"Nokia"]],[/(pixel (c|tablet))\b/i],[_,[C,tt],[w,M]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[_,[C,tt],[w,I]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_,[C,ut],[w,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[_,"Xperia Tablet"],[C,ut],[w,M]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[_,[C,At],[w,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[_,[C,Z],[w,M]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[_,/(.+)/g,"Fire Phone $1"],[C,Z],[w,I]],[/(playbook);[-\w\),; ]+(rim)/i],[_,C,[w,M]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[_,[C,$],[w,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[_,[C,q],[w,M]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[_,[C,q],[w,I]],[/(nexus 9)/i],[_,[C,"HTC"],[w,M]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[C,[_,/_/g," "],[w,I]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[_,[C,"TCL"],[w,M]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[_,[C,"TCL"],[w,I]],[/(itel) ((\w+))/i],[[C,Dt],_,[w,Ht,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[_,[C,"Acer"],[w,M]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[_,[C,"Meizu"],[w,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[_,[C,"Ulefone"],[w,I]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[_,[C,"Energizer"],[w,I]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[_,[C,"Cat"],[w,I]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[_,[C,"Smartfren"],[w,I]],[/droid.+; (a(?:015|06[35]|142p?))/i],[_,[C,"Nothing"],[w,I]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[_,[C,"Archos"],[w,M]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[_,[C,"Archos"],[w,I]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[C,_,[w,M]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[C,_,[w,I]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[C,_,[w,M]],[/(surface duo)/i],[_,[C,ot],[w,M]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[_,[C,"Fairphone"],[w,I]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[_,[C,at],[w,M]],[/(sprint) (\w+)/i],[C,_,[w,I]],[/(kin\.[onetw]{3})/i],[[_,/\./g," "],[C,ot],[w,I]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_,[C,ft],[w,M]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[_,[C,ft],[w,I]],[/smart-tv.+(samsung)/i],[C,[w,T]],[/hbbtv.+maple;(\d+)/i],[[_,/^/,"SmartTV"],[C,lt],[w,T]],[/tcast.+(lg)e?. ([-\w]+)/i],[C,_,[w,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[C,rt],[w,T]],[/(apple) ?tv/i],[C,[_,J+" TV"],[w,T]],[/crkey.*devicetype\/chromecast/i],[[_,mt+" Third Generation"],[C,tt],[w,T]],[/crkey.*devicetype\/([^/]*)/i],[[_,/^/,"Chromecast "],[C,tt],[w,T]],[/fuchsia.*crkey/i],[[_,mt+" Nest Hub"],[C,tt],[w,T]],[/crkey/i],[[_,mt],[C,tt],[w,T]],[/(portaltv)/i],[_,[C,wt],[w,T]],[/droid.+aft(\w+)( bui|\))/i],[_,[C,Z],[w,T]],[/(shield \w+ tv)/i],[_,[C,at],[w,T]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[_,[C,ht],[w,T]],[/(bravia[\w ]+)( bui|\))/i],[_,[C,ut],[w,T]],[/(mi(tv|box)-?\w+) bui/i],[_,[C,dt],[w,T]],[/Hbbtv.*(technisat) (.*);/i],[C,_,[w,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[C,jt],[_,jt],[w,T]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[_,[w,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[w,T]],[/(ouya)/i,/(nintendo) (\w+)/i],[C,_,[w,S]],[/droid.+; (shield)( bui|\))/i],[_,[C,at],[w,S]],[/(playstation \w+)/i],[_,[C,ut],[w,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[_,[C,ot],[w,S]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[_,[C,lt],[w,E]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[C,_,[w,E]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[_,[C,ct],[w,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[_,[C,J],[w,E]],[/(opwwe\d{3})/i],[_,[C,At],[w,E]],[/(moto 360)/i],[_,[C,st],[w,E]],[/(smartwatch 3)/i],[_,[C,ut],[w,E]],[/(g watch r)/i],[_,[C,rt],[w,E]],[/droid.+; (wt63?0{2,3})\)/i],[_,[C,ft],[w,E]],[/droid.+; (glass) \d/i],[_,[C,tt],[w,k]],[/(pico) (4|neo3(?: link|pro)?)/i],[C,_,[w,k]],[/(quest( \d| pro)?s?).+vr/i],[_,[C,wt],[w,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[C,[w,F]],[/(aeobc)\b/i],[_,[C,Z],[w,F]],[/(homepod).+mac os/i],[_,[C,J],[w,F]],[/windows iot/i],[[w,F]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[_,[w,Ht,{mobile:"Mobile",xr:"VR","*":M}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[w,M]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[w,I]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[_,[C,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[y,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[y,b],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,b],[/ladybird\//i],[[y,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,b],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[y,[b,Ht,Nt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,Ht,Nt],[y,xt]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,"macOS"],[b,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[b,[y,mt+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[b,[y,mt+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[b,[y,mt+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[b,[y,mt+" Linux"]],[/crkey\/([\d\.]+)/i],[b,[y,mt]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,y],[/(ubuntu) ([\w\.]+) like android/i],[[y,/(.+)/,"$1 Touch"],b],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[y,b],[/\(bb(10);/i],[b,[y,$]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[b,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[y,vt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[y,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,"Chrome OS"],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,b],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,b]]},Gt=(Ut.call((s={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[d,[y,b,x,w]],[f,[B]],[g,[w,_,C]],[p,[y,b]],[m,[y,b]]]),Ut.call(s.isIgnore,[[d,[b,x]],[p,[b]],[m,[b]]]),Ut.call(s.isIgnoreRgx,[[d,/ ?browser$/i],[m,/ ?os$/i]]),Ut.call(s.toString,[[d,[y,b]],[f,[B]],[g,[C,_]],[p,[y,b]],[m,[y,b]]]),s),Wt=function(t,e){var i=Gt.init[e],n=Gt.isIgnore[e]||0,r=Gt.isIgnoreRgx[e]||0,o=Gt.toString[e]||0;function s(){Ut.call(this,i)}return s.prototype.getItem=function(){return t},s.prototype.withClientHints=function(){return It?It.getHighEntropyValues(V).then((function(e){return t.setCH(new Yt(e,!1)).parseCH().get()})):t.parseCH().get()},s.prototype.withFeatureCheck=function(){return t.detectFeature().get()},e!=v&&(s.prototype.is=function(t){var e=!1;for(var i in this)if(this.hasOwnProperty(i)&&!Tt(n,i)&&Dt(r?Qt(r,this[i]):this[i])==Dt(r?Qt(r,t):t)){if(e=!0,t!=l)break}else if(t==l&&e){e=!e;break}return e},s.prototype.toString=function(){var t=A;for(var e in o)typeof this[o[e]]!==l&&(t+=(t?" ":A)+this[o[e]]);return t||l}),It||(s.prototype.then=function(t){var e=this,i=function(){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};i.prototype={is:s.prototype.is,toString:s.prototype.toString};var n=new i;return t(n),n}),new s};function Yt(t,e){if(t=t||{},Ut.call(this,V),e)Ut.call(this,[[O,Ft(t[H])],[Q,Ft(t[N])],[I,/\?1/.test(t[W])],[_,Lt(t[Y])],[L,Lt(t[X])],[j,Lt(t[K])],[B,Lt(t[R])],[U,Ft(t[G])],[P,Lt(t[z])]]);else for(var i in t)this.hasOwnProperty(i)&&typeof t[i]!==l&&(this[i]=t[i])}function Xt(t,e,i,n){return this.get=function(t){return t?this.data.hasOwnProperty(t)?this.data[t]:o:this.data},this.set=function(t,e){return this.data[t]=e,this},this.setCH=function(t){return this.uaCH=t,this},this.detectFeature=function(){if(St&&St.userAgent==this.ua)switch(this.itemType){case d:St.brave&&typeof St.brave.isBrave==c&&this.set(y,"Brave");break;case g:!this.get(w)&&It&&It[I]&&this.set(w,I),"Macintosh"==this.get(_)&&St&&typeof St.standalone!==l&&St.maxTouchPoints&&St.maxTouchPoints>2&&this.set(_,"iPad").set(w,M);break;case m:!this.get(y)&&It&&It[L]&&this.set(y,It[L]);break;case v:var t=this.data,e=function(e){return t[e].getItem().detectFeature().get()};this.set(d,e(d)).set(f,e(f)).set(g,e(g)).set(p,e(p)).set(m,e(m))}return this},this.parseUA=function(){return this.itemType!=v&&Pt.call(this.data,this.ua,this.rgxMap),this.itemType==d&&this.set(x,Ot(this.get(b))),this},this.parseCH=function(){var t=this.uaCH,e=this.rgxMap;switch(this.itemType){case d:case p:var i,n=t[Q]||t[O];if(n)for(var r in n){var s=n[r].brand||n[r],a=n[r].version;this.itemType!=d||/not.a.brand/i.test(s)||i&&(!/chrom/i.test(i)||s==pt)||(s=Ht(s,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(y,s).set(b,a).set(x,Ot(a)),i=s),this.itemType==p&&s==pt&&this.set(b,a)}break;case f:var A=t[B];A&&(A&&"64"==t[P]&&(A+="64"),Pt.call(this.data,A+";",e));break;case g:if(t[I]&&this.set(w,I),t[_]&&(this.set(_,t[_]),!this.get(w)||!this.get(C))){var c={};Pt.call(c,"droid 9; "+t[_]+")",e),!this.get(w)&&c.type&&this.set(w,c.type),!this.get(C)&&c.vendor&&this.set(C,c.vendor)}if(t[U]){var l;if("string"!=typeof t[U])for(var h=0;!l&&h<t[U].length;)l=Ht(t[U][h++],Rt);else l=Ht(t[U],Rt);this.set(w,l)}break;case m:var u=t[L];if(u){var S=t[j];u==xt&&(S=parseInt(Ot(S),10)>=13?"11":"10"),this.set(y,u).set(b,S)}this.get(y)==xt&&"Xbox"==t[_]&&this.set(y,"Xbox").set(b,o);break;case v:var M=this.data,T=function(e){return M[e].getItem().setCH(t).parseCH().get()};this.set(d,T(d)).set(f,T(f)).set(g,T(g)).set(p,T(p)).set(m,T(m))}return this},Ut.call(this,[["itemType",t],["ua",e],["uaCH",n],["rgxMap",i],["data",Wt(this,t)]]),this}function Kt(t,e,i){if(typeof t===h?(Et(t,!0)?(typeof e===h&&(i=e),e=t):(i=t,e=o),t=o):typeof t!==u||Et(e,!0)||(i=e,e=o),i&&typeof i.append===c){var n={};i.forEach((function(t,e){n[e]=t})),i=n}if(!(this instanceof Kt))return new Kt(t,e,i).getResult();var r=typeof t===u?t:i&&i[a]?i[a]:St&&St.userAgent?St.userAgent:A,s=new Yt(i,!0),l=e?function(t,e){var i={},n=e;if(!Et(e))for(var r in n={},e)for(var o in e[r])n[o]=e[r][o].concat(n[o]?n[o]:[]);for(var s in t)i[s]=n[s]&&n[s].length%2==0?n[s].concat(t[s]):t[s];return i}(zt,e):zt,y=function(t){return t==v?function(){return new Xt(t,r,l,s).set("ua",r).set(d,this.getBrowser()).set(f,this.getCPU()).set(g,this.getDevice()).set(p,this.getEngine()).set(m,this.getOS()).get()}:function(){return new Xt(t,r,l[t],s).parseUA().get()}};return Ut.call(this,[["getBrowser",y(d)],["getCPU",y(f)],["getDevice",y(g)],["getEngine",y(p)],["getOS",y(m)],["getResult",y(v)],["getUA",function(){return r}],["setUA",function(t){return kt(t)&&(r=t.length>500?jt(t,500):t),this}]]).setUA(r),this}Kt.VERSION="2.0.3",Kt.BROWSER=Mt([y,b,x,w]),Kt.CPU=Mt([B]),Kt.DEVICE=Mt([_,C,w,S,I,T,M,E,F]),Kt.ENGINE=Kt.OS=Mt([y,b]),typeof e!==l?(t.exports&&(e=t.exports=Kt),e.UAParser=Kt):i.amdO?(n=function(){return Kt}.call(e,i,e,t))===o||(t.exports=n):_t&&(r.UAParser=Kt);var Vt=_t&&(r.jQuery||r.Zepto);if(Vt&&!Vt.ua){var Zt=new Kt;Vt.ua=Zt.getResult(),Vt.ua.get=function(){return Zt.getUA()},Vt.ua.set=function(t){Zt.setUA(t);var e=Zt.getResult();for(var i in e)Vt.ua[i]=e[i]}}}("object"==typeof window?window:this)},213:function(t,e,i){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){a(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,i,s){var a=o.URL||o.webkitURL,A=document.createElement("a");i=i||t.name||"download",A.download=i,A.rel="noopener","string"==typeof t?(A.href=t,A.origin===location.origin?r(A):n(A.href)?e(t,i,s):r(A,A.target="_blank")):(A.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(A.href)}),4e4),setTimeout((function(){r(A)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){r(s)}))}}:function(t,i,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var a="application/octet-stream"===t.type,A=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&A||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,u=h.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout((function(){h.revokeObjectURL(u)}),4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?n.apply(e,[]):n)||(t.exports=r)},237:(t,e,i)=>{const n=i(354),{makeUI:r}=i(436),o=()=>{const t=document.createElement("div");t.id="feedback-tool-button",document.body.appendChild(t),t.style.position="fixed",t.style.bottom="10px",t.style.right="10px",t.style.backgroundColor="white",t.style.padding="10px",t.style.border="1px solid black",t.style.borderRadius="5px",t.style.cursor="pointer",t.style.zIndex="20000000",t.style.fontFamily="Verdana",t.style.backgroundColor="white",t.innerHTML="\n        Feedback\n    ",t.addEventListener("click",(()=>{n(document.body).then((t=>{r(t,console.everything)}))}))};t.exports={ClientFeedbackTool:()=>{document.getElementById("feedback-tool-button")||(void 0===console.everything&&(console.everything=[],console.defaultLog=console.log.bind(console),console.log=function(){console.everything.push({type:"log",datetime:Date().toLocaleString(),value:Array.from(arguments)}),console.defaultLog.apply(console,arguments)},console.defaultError=console.error.bind(console),console.error=function(){console.everything.push({type:"error",datetime:Date().toLocaleString(),value:Array.from(arguments)}),console.defaultError.apply(console,arguments)},console.defaultWarn=console.warn.bind(console),console.warn=function(){console.everything.push({type:"warn",datetime:Date().toLocaleString(),value:Array.from(arguments)}),console.defaultWarn.apply(console,arguments)},console.defaultDebug=console.debug.bind(console),console.debug=function(){console.everything.push({type:"debug",datetime:Date().toLocaleString(),value:Array.from(arguments)}),console.defaultDebug.apply(console,arguments)}),window.onerror=function(t,e,i,n,r){console.error("Error: "+t+"\nURL: "+e+"\nLine: "+i+"\nColumn: "+n+"\nError Cause: "+r.cause+"\nError Stack: "+r.stack)},"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",(()=>{o()})))},setContext:t=>{window.CFContext=window.CFContext||{},window.CFContext={...window.CFContext,...t}},clearContext:()=>{window.CFContext={}}}},354:function(t){t.exports=function(){"use strict";var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};function n(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{A(n.next(t))}catch(t){o(t)}}function a(t){try{A(n.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}A((n=n.apply(t,e||[])).next())}))}function r(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function o(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||e)}for(var s=function(){function t(t,e,i,n){this.left=t,this.top=e,this.width=i,this.height=n}return t.prototype.add=function(e,i,n,r){return new t(this.left+e,this.top+i,this.width+n,this.height+r)},t.fromClientRect=function(e,i){return new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},t.fromDOMRectList=function(e,i){var n=Array.from(i).find((function(t){return 0!==t.width}));return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),a=function(t,e){return s.fromClientRect(t,e.getBoundingClientRect())},A=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),i--)}else e.push(r)}return e},c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],r=-1,o="";++r<i;){var s=t[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===i||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"==typeof Uint8Array?[]:new Uint8Array(256),u=0;u<64;u++)h[l.charCodeAt(u)]=u;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"==typeof Uint8Array?[]:new Uint8Array(256),g=0;g<64;g++)f[d.charCodeAt(g)]=g;for(var p=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},m=function(){function t(t,e,i,n,r,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=r,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y="undefined"==typeof Uint8Array?[]:new Uint8Array(256),w=0;w<64;w++)y[v.charCodeAt(w)]=w;var C=10,b=13,B=15,x=17,_=18,S=19,I=20,M=21,T=22,E=24,k=25,F=26,D=27,O=28,U=30,Q=32,L=33,j=34,P=35,H=37,N=38,R=39,z=40,G=42,W=[9001,65288],Y="",X="",K=function(t){var e,i,n,r=function(t){var e,i,n,r,o,s=.75*t.length,a=t.length,A=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<a;e+=4)i=f[t.charCodeAt(e)],n=f[t.charCodeAt(e+1)],r=f[t.charCodeAt(e+2)],o=f[t.charCodeAt(e+3)],l[A++]=i<<2|n>>4,l[A++]=(15&n)<<4|r>>2,l[A++]=(3&r)<<6|63&o;return c}(t),o=Array.isArray(r)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i}(r):new Uint32Array(r),s=Array.isArray(r)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i}(r):new Uint16Array(r),a=p(s,12,o[4]/2),A=2===o[5]?p(s,(24+o[4])/2):(e=o,i=Math.ceil((24+o[4])/4),e.slice?e.slice(i,n):new Uint32Array(Array.prototype.slice.call(e,i,n)));return new m(o[0],o[1],o[2],o[3],a,A)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),V=[U,36],Z=[1,2,3,5],J=[C,8],q=[D,F],$=Z.concat(J),tt=[N,R,z,j,P],et=[B,b],it=function(t,e,i,n){var r=n[i];if(Array.isArray(t)?-1!==t.indexOf(r):t===r)for(var o=i;o<=n.length;){if((A=n[++o])===e)return!0;if(A!==C)break}if(r===C)for(o=i;o>0;){var s=n[--o];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var a=i;a<=n.length;){var A;if((A=n[++a])===e)return!0;if(A!==C)break}if(s!==C)break}return!1},nt=function(t,e){for(var i=t;i>=0;){var n=e[i];if(n!==C)return n;i--}return 0},rt=function(t,e,i,n,r){if(0===i[n])return Y;var o=n-1;if(Array.isArray(r)&&!0===r[o])return Y;var s=o-1,a=o+1,A=e[o],c=s>=0?e[s]:0,l=e[a];if(2===A&&3===l)return Y;if(-1!==Z.indexOf(A))return"!";if(-1!==Z.indexOf(l))return Y;if(-1!==J.indexOf(l))return Y;if(8===nt(o,e))return X;if(11===K.get(t[o]))return Y;if((A===Q||A===L)&&11===K.get(t[a]))return Y;if(7===A||7===l)return Y;if(9===A)return Y;if(-1===[C,b,B].indexOf(A)&&9===l)return Y;if(-1!==[x,_,S,E,O].indexOf(l))return Y;if(nt(o,e)===T)return Y;if(it(23,T,o,e))return Y;if(it([x,_],M,o,e))return Y;if(it(12,12,o,e))return Y;if(A===C)return X;if(23===A||23===l)return Y;if(16===l||16===A)return X;if(-1!==[b,B,M].indexOf(l)||14===A)return Y;if(36===c&&-1!==et.indexOf(A))return Y;if(A===O&&36===l)return Y;if(l===I)return Y;if(-1!==V.indexOf(l)&&A===k||-1!==V.indexOf(A)&&l===k)return Y;if(A===D&&-1!==[H,Q,L].indexOf(l)||-1!==[H,Q,L].indexOf(A)&&l===F)return Y;if(-1!==V.indexOf(A)&&-1!==q.indexOf(l)||-1!==q.indexOf(A)&&-1!==V.indexOf(l))return Y;if(-1!==[D,F].indexOf(A)&&(l===k||-1!==[T,B].indexOf(l)&&e[a+1]===k)||-1!==[T,B].indexOf(A)&&l===k||A===k&&-1!==[k,O,E].indexOf(l))return Y;if(-1!==[k,O,E,x,_].indexOf(l))for(var h=o;h>=0;){if((u=e[h])===k)return Y;if(-1===[O,E].indexOf(u))break;h--}if(-1!==[D,F].indexOf(l))for(h=-1!==[x,_].indexOf(A)?s:o;h>=0;){var u;if((u=e[h])===k)return Y;if(-1===[O,E].indexOf(u))break;h--}if(N===A&&-1!==[N,R,j,P].indexOf(l)||-1!==[R,j].indexOf(A)&&-1!==[R,z].indexOf(l)||-1!==[z,P].indexOf(A)&&l===z)return Y;if(-1!==tt.indexOf(A)&&-1!==[I,F].indexOf(l)||-1!==tt.indexOf(l)&&A===D)return Y;if(-1!==V.indexOf(A)&&-1!==V.indexOf(l))return Y;if(A===E&&-1!==V.indexOf(l))return Y;if(-1!==V.concat(k).indexOf(A)&&l===T&&-1===W.indexOf(t[a])||-1!==V.concat(k).indexOf(l)&&A===_)return Y;if(41===A&&41===l){for(var d=i[o],f=1;d>0&&41===e[--d];)f++;if(f%2!=0)return Y}return A===Q&&l===L?Y:X},ot=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=function(t,e){void 0===e&&(e="strict");var i=[],n=[],r=[];return t.forEach((function(t,o){var s=K.get(t);if(s>50?(r.push(!0),s-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return n.push(o),i.push(16);if(4===s||11===s){if(0===o)return n.push(o),i.push(U);var a=i[o-1];return-1===$.indexOf(a)?(n.push(n[o-1]),i.push(a)):(n.push(o),i.push(U))}return n.push(o),31===s?i.push("strict"===e?M:H):s===G||29===s?i.push(U):43===s?t>=131072&&t<=196605||t>=196608&&t<=262141?i.push(H):i.push(U):void i.push(s)})),[n,i,r]}(t,e.lineBreak),n=i[0],r=i[1],o=i[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(r=r.map((function(t){return-1!==[k,U,G].indexOf(t)?H:t})));var s="keep-all"===e.wordBreak?o.map((function(e,i){return e&&t[i]>=19968&&t[i]<=40959})):void 0;return[n,r,s]},st=function(){function t(t,e,i,n){this.codePoints=t,this.required="!"===e,this.start=i,this.end=n}return t.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),at=45,At=43,ct=-1,lt=function(t){return t>=48&&t<=57},ht=function(t){return lt(t)||t>=65&&t<=70||t>=97&&t<=102},ut=function(t){return 10===t||9===t||32===t},dt=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},ft=function(t){return dt(t)||lt(t)||t===at},gt=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},pt=function(t,e){return 92===t&&10!==e},mt=function(t,e,i){return t===at?dt(e)||pt(e,i):!!dt(t)||!(92!==t||!pt(t,e))},vt=function(t,e,i){return t===At||t===at?!!lt(e)||46===e&&lt(i):lt(46===t?e:t)},yt=function(t){var e=0,i=1;t[e]!==At&&t[e]!==at||(t[e]===at&&(i=-1),e++);for(var n=[];lt(t[e]);)n.push(t[e++]);var r=n.length?parseInt(c.apply(void 0,n),10):0;46===t[e]&&e++;for(var o=[];lt(t[e]);)o.push(t[e++]);var s=o.length,a=s?parseInt(c.apply(void 0,o),10):0;69!==t[e]&&101!==t[e]||e++;var A=1;t[e]!==At&&t[e]!==at||(t[e]===at&&(A=-1),e++);for(var l=[];lt(t[e]);)l.push(t[e++]);var h=l.length?parseInt(c.apply(void 0,l),10):0;return i*(r+a*Math.pow(10,-s))*Math.pow(10,A*h)},wt={type:2},Ct={type:3},bt={type:4},Bt={type:13},xt={type:8},_t={type:21},St={type:9},It={type:10},Mt={type:11},Tt={type:12},Et={type:14},kt={type:23},Ft={type:1},Dt={type:25},Ot={type:24},Ut={type:26},Qt={type:27},Lt={type:28},jt={type:29},Pt={type:31},Ht={type:32},Nt=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(A(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Ht;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(ft(e)||pt(i,n)){var r=mt(e,i,n)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Bt;break;case 39:return this.consumeStringToken(39);case 40:return wt;case 41:return Ct;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Et;break;case At:if(vt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return bt;case at:var o=t,s=this.peekCodePoint(0),a=this.peekCodePoint(1);if(vt(o,s,a))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(mt(o,s,a))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(s===at&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),Ot;break;case 46:if(vt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(42===A&&47===(A=this.consumeCodePoint()))return this.consumeToken();if(A===ct)return this.consumeToken()}break;case 58:return Ut;case 59:return Qt;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),Dt;break;case 64:var l=this.peekCodePoint(0),h=this.peekCodePoint(1),u=this.peekCodePoint(2);if(mt(l,h,u))return{type:7,value:this.consumeName()};break;case 91:return Lt;case 92:if(pt(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return jt;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),xt;break;case 123:return Mt;case 125:return Tt;case 117:case 85:var d=this.peekCodePoint(0),f=this.peekCodePoint(1);return d!==At||!ht(f)&&63!==f||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),St;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),_t;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),It;break;case ct:return Ht}return ut(t)?(this.consumeWhiteSpace(),Pt):lt(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):dt(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:c(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();ht(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var i=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(c.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),end:parseInt(c.apply(void 0,t.map((function(t){return 63===t?70:t}))),16)};var n=parseInt(c.apply(void 0,t),16);if(this.peekCodePoint(0)===at&&ht(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var r=[];ht(e)&&r.length<6;)r.push(e),e=this.consumeCodePoint();return{type:30,start:n,end:parseInt(c.apply(void 0,r),16)}}return{type:30,start:n,end:n}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ct)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ct||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),kt)}for(;;){var n=this.consumeCodePoint();if(n===ct||41===n)return{type:22,value:c.apply(void 0,t)};if(ut(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ct||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,t)}):(this.consumeBadUrlRemnants(),kt);if(34===n||39===n||40===n||gt(n))return this.consumeBadUrlRemnants(),kt;if(92===n){if(!pt(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),kt;t.push(this.consumeEscapedCodePoint())}else t.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;ut(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===ct)return;pt(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var i=Math.min(5e4,t);e+=c.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",i=0;;){var n=this._value[i];if(n===ct||void 0===n||n===t)return{type:0,value:e+=this.consumeStringSlice(i)};if(10===n)return this._value.splice(0,i),Ft;if(92===n){var r=this._value[i+1];r!==ct&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(i),i=-1,this._value.shift()):pt(n,r)&&(e+=this.consumeStringSlice(i),e+=c(this.consumeEscapedCodePoint()),i=-1))}i++}},t.prototype.consumeNumber=function(){var t=[],e=4,i=this.peekCodePoint(0);for(i!==At&&i!==at||t.push(this.consumeCodePoint());lt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===i&&lt(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;lt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===i||101===i)&&((n===At||n===at)&&lt(r)||lt(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;lt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[yt(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],i=t[1],n=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);return mt(n,r,o)?{type:15,number:e,flags:i,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:e,flags:i}):{type:17,number:e,flags:i}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(ht(t)){for(var e=c(t);ht(this.peekCodePoint(0))&&e.length<6;)e+=c(this.consumeCodePoint());ut(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(e,16);return 0===i||function(t){return t>=55296&&t<=57343}(i)||i>1114111?65533:i}return t===ct?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(ft(e))t+=c(e);else{if(!pt(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=c(this.consumeEscapedCodePoint())}}},t}(),Rt=function(){function t(t){this._tokens=t}return t.create=function(e){var i=new Nt;return i.write(e),new t(i.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},i=this.consumeToken();;){if(32===i.type||Jt(i,t))return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue()),i=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Ht:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),zt=function(t){return 15===t.type},Gt=function(t){return 17===t.type},Wt=function(t){return 20===t.type},Yt=function(t){return 0===t.type},Xt=function(t,e){return Wt(t)&&t.value===e},Kt=function(t){return 31!==t.type},Vt=function(t){return 31!==t.type&&4!==t.type},Zt=function(t){var e=[],i=[];return t.forEach((function(t){if(4===t.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(i),void(i=[])}31!==t.type&&i.push(t)})),i.length&&e.push(i),e},Jt=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},qt=function(t){return 17===t.type||15===t.type},$t=function(t){return 16===t.type||qt(t)},te=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ee={type:17,number:0,flags:4},ie={type:16,number:50,flags:4},ne={type:16,number:100,flags:4},re=function(t,e,i){var n=t[0],r=t[1];return[oe(n,e),oe(void 0!==r?r:n,i)]},oe=function(t,e){if(16===t.type)return t.number/100*e;if(zt(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},se="grad",ae="turn",Ae=function(t,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case se:return Math.PI/200*e.number;case"rad":return e.number;case ae:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},ce=function(t){return 15===t.type&&("deg"===t.unit||t.unit===se||"rad"===t.unit||t.unit===ae)},le=function(t){switch(t.filter(Wt).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ee,ee];case"to top":case"bottom":return he(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ee,ne];case"to right":case"left":return he(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ne,ne];case"to bottom":case"top":return he(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ne,ee];case"to left":case"right":return he(270)}return 0},he=function(t){return Math.PI*t/180},ue=function(t,e){if(18===e.type){var i=we[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(5===e.type){if(3===e.value.length){var n=e.value.substring(0,1),r=e.value.substring(1,2),o=e.value.substring(2,3);return ge(parseInt(n+n,16),parseInt(r+r,16),parseInt(o+o,16),1)}if(4===e.value.length){n=e.value.substring(0,1),r=e.value.substring(1,2),o=e.value.substring(2,3);var s=e.value.substring(3,4);return ge(parseInt(n+n,16),parseInt(r+r,16),parseInt(o+o,16),parseInt(s+s,16)/255)}if(6===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),o=e.value.substring(4,6),ge(parseInt(n,16),parseInt(r,16),parseInt(o,16),1);if(8===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),o=e.value.substring(4,6),s=e.value.substring(6,8),ge(parseInt(n,16),parseInt(r,16),parseInt(o,16),parseInt(s,16)/255)}if(20===e.type){var a=be[e.value.toUpperCase()];if(void 0!==a)return a}return be.TRANSPARENT},de=function(t){return!(255&t)},fe=function(t){var e=255&t,i=255&t>>8,n=255&t>>16,r=255&t>>24;return e<255?"rgba("+r+","+n+","+i+","+e/255+")":"rgb("+r+","+n+","+i+")"},ge=function(t,e,i,n){return(t<<24|e<<16|i<<8|Math.round(255*n))>>>0},pe=function(t,e){if(17===t.type)return t.number;if(16===t.type){var i=3===e?1:255;return 3===e?t.number/100*i:Math.round(t.number/100*i)}return 0},me=function(t,e){var i=e.filter(Vt);if(3===i.length){var n=i.map(pe),r=n[0],o=n[1],s=n[2];return ge(r,o,s,1)}if(4===i.length){var a=i.map(pe),A=(r=a[0],o=a[1],s=a[2],a[3]);return ge(r,o,s,A)}return 0};function ve(t,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-t)*i*6+t:i<.5?e:i<2/3?6*(e-t)*(2/3-i)+t:t}var ye=function(t,e){var i=e.filter(Vt),n=i[0],r=i[1],o=i[2],s=i[3],a=(17===n.type?he(n.number):Ae(t,n))/(2*Math.PI),A=$t(r)?r.number/100:0,c=$t(o)?o.number/100:0,l=void 0!==s&&$t(s)?oe(s,1):1;if(0===A)return ge(255*c,255*c,255*c,1);var h=c<=.5?c*(A+1):c+A-c*A,u=2*c-h,d=ve(u,h,a+1/3),f=ve(u,h,a),g=ve(u,h,a-1/3);return ge(255*d,255*f,255*g,l)},we={hsl:ye,hsla:ye,rgb:me,rgba:me},Ce=function(t,e){return ue(t,Rt.create(e).parseComponentValue())},be={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Be={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Wt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},xe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_e=function(t,e){var i=ue(t,e[0]),n=e[1];return n&&$t(n)?{color:i,stop:n}:{color:i,stop:null}},Se=function(t,e){var i=t[0],n=t[t.length-1];null===i.stop&&(i.stop=ee),null===n.stop&&(n.stop=ne);for(var r=[],o=0,s=0;s<t.length;s++){var a=t[s].stop;if(null!==a){var A=oe(a,e);A>o?r.push(A):r.push(o),o=A}else r.push(null)}var c=null;for(s=0;s<r.length;s++){var l=r[s];if(null===l)null===c&&(c=s);else if(null!==c){for(var h=s-c,u=(l-r[c-1])/(h+1),d=1;d<=h;d++)r[c+d-1]=u*d;c=null}}return t.map((function(t,i){return{color:t.color,stop:Math.max(Math.min(1,r[i]/e),0)}}))},Ie=function(t,e,i){var n="number"==typeof t?t:function(t,e,i){var n=e/2,r=i/2,o=oe(t[0],e)-n,s=r-oe(t[1],i);return(Math.atan2(s,o)+2*Math.PI)%(2*Math.PI)}(t,e,i),r=Math.abs(e*Math.sin(n))+Math.abs(i*Math.cos(n)),o=e/2,s=i/2,a=r/2,A=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[r,o-c,o+c,s-A,s+A]},Me=function(t,e){return Math.sqrt(t*t+e*e)},Te=function(t,e,i,n,r){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var o=e[0],s=e[1],a=Me(i-o,n-s);return(r?a<t.optimumDistance:a>t.optimumDistance)?{optimumCorner:e,optimumDistance:a}:t}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},Ee=function(t,e){var i=he(180),n=[];return Zt(e).forEach((function(e,r){if(0===r){var o=e[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(i=le(e));if(ce(o))return void(i=(Ae(t,o)+he(270))%he(360))}var s=_e(t,e);n.push(s)})),{angle:i,stops:n,type:1}},ke="closest-side",Fe="farthest-side",De="closest-corner",Oe="farthest-corner",Ue="circle",Qe="ellipse",Le="cover",je="contain",Pe=function(t,e){var i=0,n=3,r=[],o=[];return Zt(e).forEach((function(e,s){var a=!0;if(0===s?a=e.reduce((function(t,e){if(Wt(e))switch(e.value){case"center":return o.push(ie),!1;case"top":case"left":return o.push(ee),!1;case"right":case"bottom":return o.push(ne),!1}else if($t(e)||qt(e))return o.push(e),!1;return t}),a):1===s&&(a=e.reduce((function(t,e){if(Wt(e))switch(e.value){case Ue:return i=0,!1;case Qe:return i=1,!1;case je:case ke:return n=0,!1;case Fe:return n=1,!1;case De:return n=2,!1;case Le:case Oe:return n=3,!1}else if(qt(e)||$t(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),a)),a){var A=_e(t,e);r.push(A)}})),{size:n,shape:i,stops:r,position:o,type:2}},He=function(t,e){if(22===e.type){var i={url:e.value,type:0};return t.cache.addImage(e.value),i}if(18===e.type){var n=Re[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)};var Ne,Re={"linear-gradient":function(t,e){var i=he(180),n=[];return Zt(e).forEach((function(e,r){if(0===r){var o=e[0];if(20===o.type&&"to"===o.value)return void(i=le(e));if(ce(o))return void(i=Ae(t,o))}var s=_e(t,e);n.push(s)})),{angle:i,stops:n,type:1}},"-moz-linear-gradient":Ee,"-ms-linear-gradient":Ee,"-o-linear-gradient":Ee,"-webkit-linear-gradient":Ee,"radial-gradient":function(t,e){var i=0,n=3,r=[],o=[];return Zt(e).forEach((function(e,s){var a=!0;if(0===s){var A=!1;a=e.reduce((function(t,e){if(A)if(Wt(e))switch(e.value){case"center":return o.push(ie),t;case"top":case"left":return o.push(ee),t;case"right":case"bottom":return o.push(ne),t}else($t(e)||qt(e))&&o.push(e);else if(Wt(e))switch(e.value){case Ue:return i=0,!1;case Qe:return i=1,!1;case"at":return A=!0,!1;case ke:return n=0,!1;case Le:case Fe:return n=1,!1;case je:case De:return n=2,!1;case Oe:return n=3,!1}else if(qt(e)||$t(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),a)}if(a){var c=_e(t,e);r.push(c)}})),{size:n,shape:i,stops:r,position:o,type:2}},"-moz-radial-gradient":Pe,"-ms-radial-gradient":Pe,"-o-radial-gradient":Pe,"-webkit-radial-gradient":Pe,"-webkit-gradient":function(t,e){var i=he(180),n=[],r=1;return Zt(e).forEach((function(e,i){var o=e[0];if(0===i){if(Wt(o)&&"linear"===o.value)return void(r=1);if(Wt(o)&&"radial"===o.value)return void(r=2)}if(18===o.type)if("from"===o.name){var s=ue(t,o.values[0]);n.push({stop:ee,color:s})}else if("to"===o.name)s=ue(t,o.values[0]),n.push({stop:ne,color:s});else if("color-stop"===o.name){var a=o.values.filter(Vt);if(2===a.length){s=ue(t,a[1]);var A=a[0];Gt(A)&&n.push({stop:{type:16,number:100*A.number,flags:A.flags},color:s})}}})),1===r?{angle:(i+he(180))%he(360),stops:n,type:r}:{size:3,shape:0,stops:n,position:[],type:r}}},ze={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e.filter((function(t){return Vt(t)&&function(t){return!(20===t.type&&"none"===t.value||18===t.type&&!Re[t.name])}(t)})).map((function(e){return He(t,e)}))}},Ge={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Wt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},We={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Zt(e).map((function(t){return t.filter($t)})).map(te)}},Ye={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Zt(e).map((function(t){return t.filter(Wt).map((function(t){return t.value})).join(" ")})).map(Xe)}},Xe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(Ne||(Ne={}));var Ke,Ve={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Zt(e).map((function(t){return t.filter(Ze)}))}},Ze=function(t){return Wt(t)||$t(t)},Je=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qe=Je("top"),$e=Je("right"),ti=Je("bottom"),ei=Je("left"),ii=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return te(e.filter($t))}}},ni=ii("top-left"),ri=ii("top-right"),oi=ii("bottom-right"),si=ii("bottom-left"),ai=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Ai=ai("top"),ci=ai("right"),li=ai("bottom"),hi=ai("left"),ui=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zt(e)?e.number:0}}},di=ui("top"),fi=ui("right"),gi=ui("bottom"),pi=ui("left"),mi={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vi={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},yi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Wt).reduce((function(t,e){return t|wi(e.value)}),0)}},wi=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ci={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},bi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Ke||(Ke={}));var Bi,xi={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?Ke.STRICT:Ke.NORMAL}},_i={name:"line-height",initialValue:"normal",prefix:!1,type:4},Si=function(t,e){return Wt(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:$t(t)?oe(t,e):e},Ii={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:He(t,e)}},Mi={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},Ti={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ei=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},ki=Ei("top"),Fi=Ei("right"),Di=Ei("bottom"),Oi=Ei("left"),Ui={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Wt).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Qi={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},Li=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ji=Li("top"),Pi=Li("right"),Hi=Li("bottom"),Ni=Li("left"),Ri={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},zi={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Gi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Xt(e[0],"none")?[]:Zt(e).map((function(e){for(var i={color:be.TRANSPARENT,offsetX:ee,offsetY:ee,blur:ee},n=0,r=0;r<e.length;r++){var o=e[r];qt(o)?(0===n?i.offsetX=o:1===n?i.offsetY=o:i.blur=o,n++):i.color=ue(t,o)}return i}))}},Wi={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Yi={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var i=Xi[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},Xi={matrix:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),i=e[0],n=e[1];e[2],e[3];var r=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],a=e[13];return e[14],e[15],16===e.length?[i,n,r,o,s,a]:null}},Ki={type:16,number:50,flags:4},Vi=[Ki,Ki],Zi={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var i=e.filter($t);return 2!==i.length?Vi:[i[0],i[1]]}},Ji={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(Bi||(Bi={}));for(var qi={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Bi.BREAK_ALL;case"keep-all":return Bi.KEEP_ALL;default:return Bi.NORMAL}}},$i={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(Gt(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},tn={name:"time",parse:function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},en={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Gt(e)?e.number:1}},nn={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rn={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Wt).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},on={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],n=[];return e.forEach((function(t){switch(t.type){case 20:case 0:i.push(t.value);break;case 17:i.push(t.number.toString());break;case 4:n.push(i.join(" ")),i.length=0}})),i.length&&n.push(i.join(" ")),n.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},sn={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},an={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return Gt(e)?e.number:Wt(e)&&"bold"===e.value?700:400}},An={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Wt).map((function(t){return t.value}))}},cn={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ln=function(t,e){return!!(t&e)},hn={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e}},un={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;for(var n=[],r=e.filter(Kt),o=0;o<r.length;o++){var s=r[o],a=r[o+1];if(20===s.type){var A=a&&Gt(a)?a.number:1;n.push({counter:s.value,increment:A})}}return n}},dn={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var i=[],n=e.filter(Kt),r=0;r<n.length;r++){var o=n[r],s=n[r+1];if(Wt(o)&&"none"!==o.value){var a=s&&Gt(s)?s.number:0;i.push({counter:o.value,reset:a})}}return i}},fn={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(zt).map((function(e){return tn.parse(t,e)}))}},gn={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;var n=[],r=e.filter(Yt);if(r.length%2!=0)return null;for(var o=0;o<r.length;o+=2){var s=r[o].value,a=r[o+1].value;n.push({open:s,close:a})}return n}},pn=function(t,e,i){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?i?n.open:n.close:""},mn={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Xt(e[0],"none")?[]:Zt(e).map((function(e){for(var i={color:255,offsetX:ee,offsetY:ee,blur:ee,spread:ee,inset:!1},n=0,r=0;r<e.length;r++){var o=e[r];Xt(o,"inset")?i.inset=!0:qt(o)?(0===n?i.offsetX=o:1===n?i.offsetY=o:2===n?i.blur=o:i.spread=o,n++):i.color=ue(t,o)}return i}))}},vn={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[];return e.filter(Wt).forEach((function(t){switch(t.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}})),[0,1,2].forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),i}},yn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zt(e)?e.number:0}},Cn=function(){function t(t,e){var i,n;this.animationDuration=xn(t,fn,e.animationDuration),this.backgroundClip=xn(t,Be,e.backgroundClip),this.backgroundColor=xn(t,xe,e.backgroundColor),this.backgroundImage=xn(t,ze,e.backgroundImage),this.backgroundOrigin=xn(t,Ge,e.backgroundOrigin),this.backgroundPosition=xn(t,We,e.backgroundPosition),this.backgroundRepeat=xn(t,Ye,e.backgroundRepeat),this.backgroundSize=xn(t,Ve,e.backgroundSize),this.borderTopColor=xn(t,qe,e.borderTopColor),this.borderRightColor=xn(t,$e,e.borderRightColor),this.borderBottomColor=xn(t,ti,e.borderBottomColor),this.borderLeftColor=xn(t,ei,e.borderLeftColor),this.borderTopLeftRadius=xn(t,ni,e.borderTopLeftRadius),this.borderTopRightRadius=xn(t,ri,e.borderTopRightRadius),this.borderBottomRightRadius=xn(t,oi,e.borderBottomRightRadius),this.borderBottomLeftRadius=xn(t,si,e.borderBottomLeftRadius),this.borderTopStyle=xn(t,Ai,e.borderTopStyle),this.borderRightStyle=xn(t,ci,e.borderRightStyle),this.borderBottomStyle=xn(t,li,e.borderBottomStyle),this.borderLeftStyle=xn(t,hi,e.borderLeftStyle),this.borderTopWidth=xn(t,di,e.borderTopWidth),this.borderRightWidth=xn(t,fi,e.borderRightWidth),this.borderBottomWidth=xn(t,gi,e.borderBottomWidth),this.borderLeftWidth=xn(t,pi,e.borderLeftWidth),this.boxShadow=xn(t,mn,e.boxShadow),this.color=xn(t,mi,e.color),this.direction=xn(t,vi,e.direction),this.display=xn(t,yi,e.display),this.float=xn(t,Ci,e.cssFloat),this.fontFamily=xn(t,on,e.fontFamily),this.fontSize=xn(t,sn,e.fontSize),this.fontStyle=xn(t,cn,e.fontStyle),this.fontVariant=xn(t,An,e.fontVariant),this.fontWeight=xn(t,an,e.fontWeight),this.letterSpacing=xn(t,bi,e.letterSpacing),this.lineBreak=xn(t,xi,e.lineBreak),this.lineHeight=xn(t,_i,e.lineHeight),this.listStyleImage=xn(t,Ii,e.listStyleImage),this.listStylePosition=xn(t,Mi,e.listStylePosition),this.listStyleType=xn(t,Ti,e.listStyleType),this.marginTop=xn(t,ki,e.marginTop),this.marginRight=xn(t,Fi,e.marginRight),this.marginBottom=xn(t,Di,e.marginBottom),this.marginLeft=xn(t,Oi,e.marginLeft),this.opacity=xn(t,en,e.opacity);var r=xn(t,Ui,e.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=xn(t,Qi,e.overflowWrap),this.paddingTop=xn(t,ji,e.paddingTop),this.paddingRight=xn(t,Pi,e.paddingRight),this.paddingBottom=xn(t,Hi,e.paddingBottom),this.paddingLeft=xn(t,Ni,e.paddingLeft),this.paintOrder=xn(t,vn,e.paintOrder),this.position=xn(t,zi,e.position),this.textAlign=xn(t,Ri,e.textAlign),this.textDecorationColor=xn(t,nn,null!==(i=e.textDecorationColor)&&void 0!==i?i:e.color),this.textDecorationLine=xn(t,rn,null!==(n=e.textDecorationLine)&&void 0!==n?n:e.textDecoration),this.textShadow=xn(t,Gi,e.textShadow),this.textTransform=xn(t,Wi,e.textTransform),this.transform=xn(t,Yi,e.transform),this.transformOrigin=xn(t,Zi,e.transformOrigin),this.visibility=xn(t,Ji,e.visibility),this.webkitTextStrokeColor=xn(t,yn,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=xn(t,wn,e.webkitTextStrokeWidth),this.wordBreak=xn(t,qi,e.wordBreak),this.zIndex=xn(t,$i,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return de(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return ln(this.display,4)||ln(this.display,33554432)||ln(this.display,268435456)||ln(this.display,536870912)||ln(this.display,67108864)||ln(this.display,134217728)},t}(),bn=function(t,e){this.content=xn(t,hn,e.content),this.quotes=xn(t,gn,e.quotes)},Bn=function(t,e){this.counterIncrement=xn(t,un,e.counterIncrement),this.counterReset=xn(t,dn,e.counterReset)},xn=function(t,e,i){var n=new Nt,r=null!=i?i.toString():e.initialValue;n.write(r);var o=new Rt(n.read());switch(e.type){case 2:var s=o.parseComponentValue();return e.parse(t,Wt(s)?s.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return Ae(t,o.parseComponentValue());case"color":return ue(t,o.parseComponentValue());case"image":return He(t,o.parseComponentValue());case"length":var a=o.parseComponentValue();return qt(a)?a:ee;case"length-percentage":var A=o.parseComponentValue();return $t(A)?A:ee;case"time":return tn.parse(t,o.parseComponentValue())}}},_n=function(t,e){var i=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(t);return 1===i||e===i},Sn=function(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,_n(e,3),this.styles=new Cn(t,window.getComputedStyle(e,null)),Er(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=a(this.context,e),_n(e,4)&&(this.flags|=16)},In="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Tn=0;Tn<64;Tn++)Mn[In.charCodeAt(Tn)]=Tn;for(var En=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},kn=function(){function t(t,e,i,n,r,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=r,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),On=0;On<64;On++)Dn[Fn.charCodeAt(On)]=On;var Un,Qn=8,Ln=9,jn=11,Pn=12,Hn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],r=-1,o="";++r<i;){var s=t[r];s<=65535?n.push(s):(s-=65536,n.push(55296+(s>>10),s%1024+56320)),(r+1===i||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},Nn=function(t){var e,i,n,r=function(t){var e,i,n,r,o,s=.75*t.length,a=t.length,A=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<a;e+=4)i=Mn[t.charCodeAt(e)],n=Mn[t.charCodeAt(e+1)],r=Mn[t.charCodeAt(e+2)],o=Mn[t.charCodeAt(e+3)],l[A++]=i<<2|n>>4,l[A++]=(15&n)<<4|r>>2,l[A++]=(3&r)<<6|63&o;return c}(t),o=Array.isArray(r)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i}(r):new Uint32Array(r),s=Array.isArray(r)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i}(r):new Uint16Array(r),a=En(s,12,o[4]/2),A=2===o[5]?En(s,(24+o[4])/2):(e=o,i=Math.ceil((24+o[4])/4),e.slice?e.slice(i,n):new Uint32Array(Array.prototype.slice.call(e,i,n)));return new kn(o[0],o[1],o[2],o[3],a,A)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Rn="",zn=function(t){return Nn.get(t)},Gn=function(t,e,i){var n=i-2,r=e[n],o=e[i-1],s=e[i];if(2===o&&3===s)return Rn;if(2===o||3===o||4===o)return"";if(2===s||3===s||4===s)return"";if(o===Qn&&-1!==[Qn,Ln,jn,Pn].indexOf(s))return Rn;if(!(o!==jn&&o!==Ln||s!==Ln&&10!==s))return Rn;if((o===Pn||10===o)&&10===s)return Rn;if(13===s||5===s)return Rn;if(7===s)return Rn;if(1===o)return Rn;if(13===o&&14===s){for(;5===r;)r=e[--n];if(14===r)return Rn}if(15===o&&15===s){for(var a=0;15===r;)a++,r=e[--n];if(a%2==0)return Rn}return""},Wn=function(t){var e=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),i--)}else e.push(r)}return e}(t),i=e.length,n=0,r=0,o=e.map(zn);return{next:function(){if(n>=i)return{done:!0,value:null};for(var t=Rn;n<i&&(t=Gn(0,o,++n))===Rn;);if(t!==Rn||n===i){var s=Hn.apply(null,e.slice(r,n));return r=n,{value:s,done:!1}}return{done:!0,value:null}}}},Yn=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Xn=function(t,e,i,n,r){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",t.toString()),s.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(a),a.appendChild(r),s},Kn=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Vn={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var i=t.createElement("boundtest");i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i);var n=e.getBoundingClientRect(),r=Math.round(n.height);if(t.body.removeChild(i),123===r)return!0}}return!1}(document);return Object.defineProperty(Vn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Vn.SUPPORT_RANGE_BOUNDS&&function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var i=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=e.firstChild,r=A(n.data).map((function(t){return c(t)})),o=0,s={},a=r.every((function(t,e){i.setStart(n,o),i.setEnd(n,o+t.length);var r=i.getBoundingClientRect();o+=t.length;var a=r.x>s.x||r.y>s.y;return s=r,0===e||a}));return t.body.removeChild(e),a}(document);return Object.defineProperty(Vn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,i=t.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),i.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(Vn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),i=100;e.width=i,e.height=i;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var r=new Image,o=e.toDataURL();r.src=o;var s=Xn(i,i,0,0,r);return n.fillStyle="red",n.fillRect(0,0,i,i),Kn(s).then((function(e){n.drawImage(e,0,0);var r=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var s=t.createElement("div");return s.style.backgroundImage="url("+o+")",s.style.height=i+"px",Yn(r)?Kn(Xn(i,i,0,0,s)):Promise.reject(!1)})).then((function(t){return n.drawImage(t,0,0),Yn(n.getImageData(0,0,i,i).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Vn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(Vn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Vn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Vn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Vn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Zn=function(t,e){this.text=t,this.bounds=e},Jn=function(t,e){var i=e.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var o=a(t,n);return n.firstChild&&r.replaceChild(n.firstChild,n),o}}return s.EMPTY},qn=function(t,e,i){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(t,e),r.setEnd(t,e+i),r},$n=function(t){if(Vn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return function(t){for(var e,i=Wn(t),n=[];!(e=i.next()).done;)e.value&&n.push(e.value.slice());return n}(t)},tr=function(t,e){return 0!==e.letterSpacing?$n(t):function(t,e){if(Vn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(t)).map((function(t){return t.segment}))}return ir(t,e)}(t,e)},er=[32,160,4961,65792,65793,4153,4241],ir=function(t,e){for(var i,n=function(t,e){var i=A(t),n=ot(i,e),r=n[0],o=n[1],s=n[2],a=i.length,c=0,l=0;return{next:function(){if(l>=a)return{done:!0,value:null};for(var t=Y;l<a&&(t=rt(i,o,r,++l,s))===Y;);if(t!==Y||l===a){var e=new st(i,t,c,l);return c=l,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),r=[],o=function(){if(i.value){var t=i.value.slice(),e=A(t),n="";e.forEach((function(t){-1===er.indexOf(t)?n+=c(t):(n.length&&r.push(n),r.push(c(t)),n="")})),n.length&&r.push(n)}};!(i=n.next()).done;)o();return r},nr=function(t,e,i){this.text=rr(e.data,i.textTransform),this.textBounds=function(t,e,i,n){var r=tr(e,i),o=[],a=0;return r.forEach((function(e){if(i.textDecorationLine.length||e.trim().length>0)if(Vn.SUPPORT_RANGE_BOUNDS){var r=qn(n,a,e.length).getClientRects();if(r.length>1){var A=$n(e),c=0;A.forEach((function(e){o.push(new Zn(e,s.fromDOMRectList(t,qn(n,c+a,e.length).getClientRects()))),c+=e.length}))}else o.push(new Zn(e,s.fromDOMRectList(t,r)))}else{var l=n.splitText(e.length);o.push(new Zn(e,Jn(t,n))),n=l}else Vn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));a+=e.length})),o}(t,this.text,i,e)},rr=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(or,sr);case 2:return t.toUpperCase();default:return t}},or=/(^|\s|:|-|\(|\))([a-z])/g,sr=function(t,e,i){return t.length>0?e+i.toUpperCase():t},ar=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return e(i,t),i}(Sn),Ar=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return e(i,t),i}(Sn),cr=function(t){function i(e,i){var n=t.call(this,e,i)||this,r=new XMLSerializer,o=a(e,i);return i.setAttribute("width",o.width+"px"),i.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e(i,t),i}(Sn),lr=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return e(i,t),i}(Sn),hr=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.start=i.start,n.reversed="boolean"==typeof i.reversed&&!0===i.reversed,n}return e(i,t),i}(Sn),ur=[{type:15,flags:0,unit:"px",number:3}],dr=[{type:16,flags:0,number:50}],fr="checkbox",gr="radio",pr="password",mr=707406591,vr=function(t){function i(e,i){var n,r,o,a=t.call(this,e,i)||this;switch(a.type=i.type.toLowerCase(),a.checked=i.checked,a.value=0===(o=(r=i).type===pr?new Array(r.value.length+1).join(""):r.value).length?r.placeholder||"":o,a.type!==fr&&a.type!==gr||(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=(n=a.bounds).width>n.height?new s(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new s(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),a.type){case fr:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ur;break;case gr:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=dr}return a}return e(i,t),i}(Sn),yr=function(t){function i(e,i){var n=t.call(this,e,i)||this,r=i.options[i.selectedIndex||0];return n.value=r&&r.text||"",n}return e(i,t),i}(Sn),wr=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return e(i,t),i}(Sn),Cr=function(t){function i(e,i){var n=t.call(this,e,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=_r(e,i.contentWindow.document.documentElement);var r=i.contentWindow.document.documentElement?Ce(e,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):be.TRANSPARENT,o=i.contentWindow.document.body?Ce(e,getComputedStyle(i.contentWindow.document.body).backgroundColor):be.TRANSPARENT;n.backgroundColor=de(r)?de(o)?n.styles.backgroundColor:o:r}}catch(t){}return n}return e(i,t),i}(Sn),br=["OL","UL","MENU"],Br=function(t,e,i,n){for(var r=e.firstChild,o=void 0;r;r=o)if(o=r.nextSibling,Mr(r)&&r.data.trim().length>0)i.textNodes.push(new nr(t,r,i.styles));else if(Tr(r))if(Gr(r)&&r.assignedNodes)r.assignedNodes().forEach((function(e){return Br(t,e,i,n)}));else{var s=xr(t,r);s.styles.isVisible()&&(Sr(r,s,n)?s.flags|=4:Ir(s.styles)&&(s.flags|=2),-1!==br.indexOf(r.tagName)&&(s.flags|=8),i.elements.push(s),r.slot,r.shadowRoot?Br(t,r.shadowRoot,s,n):Rr(r)||Ur(r)||zr(r)||Br(t,r,s,n))}},xr=function(t,e){return Pr(e)?new ar(t,e):Lr(e)?new Ar(t,e):Ur(e)?new cr(t,e):Fr(e)?new lr(t,e):Dr(e)?new hr(t,e):Or(e)?new vr(t,e):zr(e)?new yr(t,e):Rr(e)?new wr(t,e):Hr(e)?new Cr(t,e):new Sn(t,e)},_r=function(t,e){var i=xr(t,e);return i.flags|=4,Br(t,e,i,i),i},Sr=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Qr(t)&&i.styles.isTransparent()},Ir=function(t){return t.isPositioned()||t.isFloating()},Mr=function(t){return t.nodeType===Node.TEXT_NODE},Tr=function(t){return t.nodeType===Node.ELEMENT_NODE},Er=function(t){return Tr(t)&&void 0!==t.style&&!kr(t)},kr=function(t){return"object"==typeof t.className},Fr=function(t){return"LI"===t.tagName},Dr=function(t){return"OL"===t.tagName},Or=function(t){return"INPUT"===t.tagName},Ur=function(t){return"svg"===t.tagName},Qr=function(t){return"BODY"===t.tagName},Lr=function(t){return"CANVAS"===t.tagName},jr=function(t){return"VIDEO"===t.tagName},Pr=function(t){return"IMG"===t.tagName},Hr=function(t){return"IFRAME"===t.tagName},Nr=function(t){return"STYLE"===t.tagName},Rr=function(t){return"TEXTAREA"===t.tagName},zr=function(t){return"SELECT"===t.tagName},Gr=function(t){return"SLOT"===t.tagName},Wr=function(t){return t.tagName.indexOf("-")>0},Yr=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,i=t.counterIncrement,n=t.counterReset,r=!0;null!==i&&i.forEach((function(t){var i=e.counters[t.counter];i&&0!==t.increment&&(r=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=t.increment)}));var o=[];return r&&n.forEach((function(t){var i=e.counters[t.counter];o.push(t.counter),i||(i=e.counters[t.counter]=[]),i.push(t.reset)})),o},t}(),Xr={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Kr={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Jr=function(t,e,i,n,r,o){return t<e||t>i?so(t,r,o.length>0):n.integers.reduce((function(e,i,r){for(;t>=i;)t-=i,e+=n.values[r];return e}),"")+o},qr=function(t,e,i,n){var r="";do{i||t--,r=n(t)+r,t/=e}while(t*e>=e);return r},$r=function(t,e,i,n,r){var o=i-e+1;return(t<0?"-":"")+(qr(Math.abs(t),o,n,(function(t){return c(Math.floor(t%o)+e)}))+r)},to=function(t,e,i){void 0===i&&(i=". ");var n=e.length;return qr(Math.abs(t),n,!1,(function(t){return e[Math.floor(t%n)]}))+i},eo=function(t,e,i,n,r,o){if(t<-9999||t>9999)return so(t,4,r.length>0);var s=Math.abs(t),a=r;if(0===s)return e[0]+a;for(var A=0;s>0&&A<=4;A++){var c=s%10;0===c&&ln(o,1)&&""!==a?a=e[c]+a:c>1||1===c&&0===A||1===c&&1===A&&ln(o,2)||1===c&&1===A&&ln(o,4)&&t>100||1===c&&A>1&&ln(o,8)?a=e[c]+(A>0?i[A-1]:"")+a:1===c&&A>0&&(a=i[A-1]+a),s=Math.floor(s/10)}return(t<0?n:"")+a},io="",no="",ro="",oo="",so=function(t,e,i){var n=i?". ":"",r=i?"":"",o=i?", ":"",s=i?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var a=$r(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return to(t,"",r);case 6:return Jr(t,1,3999,Xr,3,n).toLowerCase();case 7:return Jr(t,1,3999,Xr,3,n);case 8:return $r(t,945,969,!1,n);case 9:return $r(t,97,122,!1,n);case 10:return $r(t,65,90,!1,n);case 11:return $r(t,1632,1641,!0,n);case 12:case 49:return Jr(t,1,9999,Kr,3,n);case 35:return Jr(t,1,9999,Kr,3,n).toLowerCase();case 13:return $r(t,2534,2543,!0,n);case 14:case 30:return $r(t,6112,6121,!0,n);case 15:return to(t,"",r);case 16:return to(t,"",r);case 17:case 48:return eo(t,"",io,"",r,14);case 47:return eo(t,"",no,"",r,15);case 42:return eo(t,"",io,"",r,14);case 41:return eo(t,"",no,"",r,15);case 26:return eo(t,"","",ro,r,0);case 25:return eo(t,"","",ro,r,7);case 31:return eo(t,"","",oo,o,7);case 33:return eo(t,"","",oo,o,0);case 32:return eo(t,"","",oo,o,7);case 18:return $r(t,2406,2415,!0,n);case 20:return Jr(t,1,19999,Zr,3,n);case 21:return $r(t,2790,2799,!0,n);case 22:return $r(t,2662,2671,!0,n);case 22:return Jr(t,1,10999,Vr,3,n);case 23:return to(t,"");case 24:return to(t,"");case 27:return $r(t,3302,3311,!0,n);case 28:return to(t,"",r);case 29:return to(t,"",r);case 34:return $r(t,3792,3801,!0,n);case 37:return $r(t,6160,6169,!0,n);case 38:return $r(t,4160,4169,!0,n);case 39:return $r(t,2918,2927,!0,n);case 40:return $r(t,1776,1785,!0,n);case 43:return $r(t,3046,3055,!0,n);case 44:return $r(t,3174,3183,!0,n);case 45:return $r(t,3664,3673,!0,n);case 46:return $r(t,3872,3881,!0,n);default:return $r(t,48,57,!0,n)}},ao="data-html2canvas-ignore",Ao=function(){function t(t,e,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=e,this.counters=new Yr,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var i=this,o=lo(t,e);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,A=o.contentWindow,c=A.document,l=fo(o).then((function(){return n(i,void 0,void 0,(function(){var t,i;return r(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(yo),A&&(A.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||A.scrollY===e.top&&A.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-e.left,A.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,uo(c)]:[3,4];case 3:n.sent(),n.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(c,i)})).then((function(){return o}))]:[2,o]}}))}))}));return c.open(),c.write(mo(document.doctype)+"<html></html>"),vo(this.referenceElement.ownerDocument,s,a),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),l},t.prototype.createElementClone=function(t){if(_n(t,2),Lr(t))return this.createCanvasClone(t);if(jr(t))return this.createVideoClone(t);if(Nr(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Pr(e)&&(Pr(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),Wr(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return po(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var i=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),n=t.cloneNode(!1);return n.textContent=i,n}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var r=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&r)o.putImageData(r.getImageData(0,0,t.width,t.height),0,0);else{var s=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(s){var a=s.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var i=e.getContext("2d");try{return i&&(i.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||i.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},t.prototype.appendChildNode=function(t,e,i){Tr(e)&&("SCRIPT"===e.tagName||e.hasAttribute(ao)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&Tr(e)&&Nr(e)||t.appendChild(this.cloneNode(e,i))},t.prototype.cloneChildNodes=function(t,e,i){for(var n=this,r=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;r;r=r.nextSibling)if(Tr(r)&&Gr(r)&&"function"==typeof r.assignedNodes){var o=r.assignedNodes();o.length&&o.forEach((function(t){return n.appendChildNode(e,t,i)}))}else this.appendChildNode(e,r,i)},t.prototype.cloneNode=function(t,e){if(Mr(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&Tr(t)&&(Er(t)||kr(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var r=i.getComputedStyle(t),o=i.getComputedStyle(t,":before"),s=i.getComputedStyle(t,":after");this.referenceElement===t&&Er(n)&&(this.clonedReferenceElement=n),Qr(n)&&Bo(n);var a=this.counters.parse(new Bn(this.context,r)),A=this.resolvePseudoContent(t,n,o,Un.BEFORE);Wr(t)&&(e=!0),jr(t)||this.cloneChildNodes(t,n,e),A&&n.insertBefore(A,n.firstChild);var c=this.resolvePseudoContent(t,n,s,Un.AFTER);return c&&n.appendChild(c),this.counters.pop(a),(r&&(this.options.copyStyles||kr(t))&&!Hr(t)||e)&&po(r,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Rr(t)||zr(t))&&(Rr(n)||zr(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,i,n){var r=this;if(i){var o=i.content,s=e.ownerDocument;if(s&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==i.display){this.counters.parse(new Bn(this.context,i));var a=new bn(this.context,i),A=s.createElement("html2canvaspseudoelement");po(i,A),a.content.forEach((function(e){if(0===e.type)A.appendChild(s.createTextNode(e.value));else if(22===e.type){var i=s.createElement("img");i.src=e.value,i.style.opacity="1",A.appendChild(i)}else if(18===e.type){if("attr"===e.name){var n=e.values.filter(Wt);n.length&&A.appendChild(s.createTextNode(t.getAttribute(n[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(Vt),c=o[0],l=o[1];if(c&&Wt(c)){var h=r.counters.getCounterValue(c.value),u=l&&Wt(l)?Ti.parse(r.context,l.value):3;A.appendChild(s.createTextNode(so(h,u,!1)))}}else if("counters"===e.name){var d=e.values.filter(Vt),f=(c=d[0],d[1]);if(l=d[2],c&&Wt(c)){var g=r.counters.getCounterValues(c.value),p=l&&Wt(l)?Ti.parse(r.context,l.value):3,m=f&&0===f.type?f.value:"",v=g.map((function(t){return so(t,p,!1)})).join(m);A.appendChild(s.createTextNode(v))}}}else if(20===e.type)switch(e.value){case"open-quote":A.appendChild(s.createTextNode(pn(a.quotes,r.quoteDepth++,!0)));break;case"close-quote":A.appendChild(s.createTextNode(pn(a.quotes,--r.quoteDepth,!1)));break;default:A.appendChild(s.createTextNode(e.value))}})),A.className=wo+" "+Co;var c=n===Un.BEFORE?" "+wo:" "+Co;return kr(e)?e.className.baseValue+=c:e.className+=c,A}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(Un||(Un={}));var co,lo=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(ao,"true"),t.body.appendChild(i),i},ho=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},uo=function(t){return Promise.all([].slice.call(t.images,0).map(ho))},fo=function(t){return new Promise((function(e,i){var n=t.contentWindow;if(!n)return i("No window assigned for iframe");var r=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(i),e(t))}),50)}}))},go=["all","d","content"],po=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t.item(i);-1===go.indexOf(n)&&e.style.setProperty(n,t.getPropertyValue(n))}return e},mo=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},vo=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},yo=function(t){var e=t[0],i=t[1],n=t[2];e.scrollLeft=i,e.scrollTop=n},wo="___html2canvas___pseudoelement_before",Co="___html2canvas___pseudoelement_after",bo='{\n    content: "" !important;\n    display: none !important;\n}',Bo=function(t){xo(t,"."+wo+":before"+bo+"\n         ."+Co+":after"+bo)},xo=function(t,e){var i=t.ownerDocument;if(i){var n=i.createElement("style");n.textContent=e,t.appendChild(n)}},_o=function(){function t(){}return t.getOrigin=function(e){var i=t._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),So=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:Do(t)||Eo(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return n(this,void 0,void 0,(function(){var e,i,n,o,s=this;return r(this,(function(r){switch(r.label){case 0:return e=_o.isSameOrigin(t),i=!ko(t)&&!0===this._options.useCORS&&Vn.SUPPORT_CORS_IMAGES&&!e,n=!ko(t)&&!e&&!Do(t)&&"string"==typeof this._options.proxy&&Vn.SUPPORT_CORS_XHR&&!i,e||!1!==this._options.allowTaint||ko(t)||Do(t)||n||i?(o=t,n?[4,this.proxy(o)]:[3,2]):[2];case 1:o=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var n=new Image;n.onload=function(){return t(n)},n.onerror=e,(Fo(o)||i)&&(n.crossOrigin="anonymous"),n.src=o,!0===n.complete&&setTimeout((function(){return t(n)}),500),s._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+s._options.imageTimeout+"ms) loading image")}),s._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise((function(r,o){var s=Vn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===s)r(a.response);else{var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)}),!1),t.addEventListener("error",(function(t){return o(t)}),!1),t.readAsDataURL(a.response)}else o("Failed to proxy resource "+n+" with status code "+a.status)},a.onerror=o;var A=i.indexOf("?")>-1?"&":"?";if(a.open("GET",""+i+A+"url="+encodeURIComponent(t)+"&responseType="+s),"text"!==s&&a instanceof XMLHttpRequest&&(a.responseType=s),e._options.imageTimeout){var c=e._options.imageTimeout;a.timeout=c,a.ontimeout=function(){return o("Timed out ("+c+"ms) proxying "+n)}}a.send()}))},t}(),Io=/^data:image\/svg\+xml/i,Mo=/^data:image\/.*;base64,/i,To=/^data:image\/.*/i,Eo=function(t){return Vn.SUPPORT_SVG_DRAWING||!Oo(t)},ko=function(t){return To.test(t)},Fo=function(t){return Mo.test(t)},Do=function(t){return"blob"===t.substr(0,4)},Oo=function(t){return"svg"===t.substr(-3).toLowerCase()||Io.test(t)},Uo=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,i){return new t(this.x+e,this.y+i)},t}(),Qo=function(t,e,i){return new Uo(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},Lo=function(){function t(t,e,i,n){this.type=1,this.start=t,this.startControl=e,this.endControl=i,this.end=n}return t.prototype.subdivide=function(e,i){var n=Qo(this.start,this.startControl,e),r=Qo(this.startControl,this.endControl,e),o=Qo(this.endControl,this.end,e),s=Qo(n,r,e),a=Qo(r,o,e),A=Qo(s,a,e);return i?new t(this.start,n,s,A):new t(A,a,o,this.end)},t.prototype.add=function(e,i){return new t(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),jo=function(t){return 1===t.type},Po=function(t){var e=t.styles,i=t.bounds,n=re(e.borderTopLeftRadius,i.width,i.height),r=n[0],o=n[1],s=re(e.borderTopRightRadius,i.width,i.height),a=s[0],A=s[1],c=re(e.borderBottomRightRadius,i.width,i.height),l=c[0],h=c[1],u=re(e.borderBottomLeftRadius,i.width,i.height),d=u[0],f=u[1],g=[];g.push((r+a)/i.width),g.push((d+l)/i.width),g.push((o+f)/i.height),g.push((A+h)/i.height);var p=Math.max.apply(Math,g);p>1&&(r/=p,o/=p,a/=p,A/=p,l/=p,h/=p,d/=p,f/=p);var m=i.width-a,v=i.height-h,y=i.width-l,w=i.height-f,C=e.borderTopWidth,b=e.borderRightWidth,B=e.borderBottomWidth,x=e.borderLeftWidth,_=oe(e.paddingTop,t.bounds.width),S=oe(e.paddingRight,t.bounds.width),I=oe(e.paddingBottom,t.bounds.width),M=oe(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||o>0?Ho(i.left+x/3,i.top+C/3,r-x/3,o-C/3,co.TOP_LEFT):new Uo(i.left+x/3,i.top+C/3),this.topRightBorderDoubleOuterBox=r>0||o>0?Ho(i.left+m,i.top+C/3,a-b/3,A-C/3,co.TOP_RIGHT):new Uo(i.left+i.width-b/3,i.top+C/3),this.bottomRightBorderDoubleOuterBox=l>0||h>0?Ho(i.left+y,i.top+v,l-b/3,h-B/3,co.BOTTOM_RIGHT):new Uo(i.left+i.width-b/3,i.top+i.height-B/3),this.bottomLeftBorderDoubleOuterBox=d>0||f>0?Ho(i.left+x/3,i.top+w,d-x/3,f-B/3,co.BOTTOM_LEFT):new Uo(i.left+x/3,i.top+i.height-B/3),this.topLeftBorderDoubleInnerBox=r>0||o>0?Ho(i.left+2*x/3,i.top+2*C/3,r-2*x/3,o-2*C/3,co.TOP_LEFT):new Uo(i.left+2*x/3,i.top+2*C/3),this.topRightBorderDoubleInnerBox=r>0||o>0?Ho(i.left+m,i.top+2*C/3,a-2*b/3,A-2*C/3,co.TOP_RIGHT):new Uo(i.left+i.width-2*b/3,i.top+2*C/3),this.bottomRightBorderDoubleInnerBox=l>0||h>0?Ho(i.left+y,i.top+v,l-2*b/3,h-2*B/3,co.BOTTOM_RIGHT):new Uo(i.left+i.width-2*b/3,i.top+i.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=d>0||f>0?Ho(i.left+2*x/3,i.top+w,d-2*x/3,f-2*B/3,co.BOTTOM_LEFT):new Uo(i.left+2*x/3,i.top+i.height-2*B/3),this.topLeftBorderStroke=r>0||o>0?Ho(i.left+x/2,i.top+C/2,r-x/2,o-C/2,co.TOP_LEFT):new Uo(i.left+x/2,i.top+C/2),this.topRightBorderStroke=r>0||o>0?Ho(i.left+m,i.top+C/2,a-b/2,A-C/2,co.TOP_RIGHT):new Uo(i.left+i.width-b/2,i.top+C/2),this.bottomRightBorderStroke=l>0||h>0?Ho(i.left+y,i.top+v,l-b/2,h-B/2,co.BOTTOM_RIGHT):new Uo(i.left+i.width-b/2,i.top+i.height-B/2),this.bottomLeftBorderStroke=d>0||f>0?Ho(i.left+x/2,i.top+w,d-x/2,f-B/2,co.BOTTOM_LEFT):new Uo(i.left+x/2,i.top+i.height-B/2),this.topLeftBorderBox=r>0||o>0?Ho(i.left,i.top,r,o,co.TOP_LEFT):new Uo(i.left,i.top),this.topRightBorderBox=a>0||A>0?Ho(i.left+m,i.top,a,A,co.TOP_RIGHT):new Uo(i.left+i.width,i.top),this.bottomRightBorderBox=l>0||h>0?Ho(i.left+y,i.top+v,l,h,co.BOTTOM_RIGHT):new Uo(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=d>0||f>0?Ho(i.left,i.top+w,d,f,co.BOTTOM_LEFT):new Uo(i.left,i.top+i.height),this.topLeftPaddingBox=r>0||o>0?Ho(i.left+x,i.top+C,Math.max(0,r-x),Math.max(0,o-C),co.TOP_LEFT):new Uo(i.left+x,i.top+C),this.topRightPaddingBox=a>0||A>0?Ho(i.left+Math.min(m,i.width-b),i.top+C,m>i.width+b?0:Math.max(0,a-b),Math.max(0,A-C),co.TOP_RIGHT):new Uo(i.left+i.width-b,i.top+C),this.bottomRightPaddingBox=l>0||h>0?Ho(i.left+Math.min(y,i.width-x),i.top+Math.min(v,i.height-B),Math.max(0,l-b),Math.max(0,h-B),co.BOTTOM_RIGHT):new Uo(i.left+i.width-b,i.top+i.height-B),this.bottomLeftPaddingBox=d>0||f>0?Ho(i.left+x,i.top+Math.min(w,i.height-B),Math.max(0,d-x),Math.max(0,f-B),co.BOTTOM_LEFT):new Uo(i.left+x,i.top+i.height-B),this.topLeftContentBox=r>0||o>0?Ho(i.left+x+M,i.top+C+_,Math.max(0,r-(x+M)),Math.max(0,o-(C+_)),co.TOP_LEFT):new Uo(i.left+x+M,i.top+C+_),this.topRightContentBox=a>0||A>0?Ho(i.left+Math.min(m,i.width+x+M),i.top+C+_,m>i.width+x+M?0:a-x+M,A-(C+_),co.TOP_RIGHT):new Uo(i.left+i.width-(b+S),i.top+C+_),this.bottomRightContentBox=l>0||h>0?Ho(i.left+Math.min(y,i.width-(x+M)),i.top+Math.min(v,i.height+C+_),Math.max(0,l-(b+S)),h-(B+I),co.BOTTOM_RIGHT):new Uo(i.left+i.width-(b+S),i.top+i.height-(B+I)),this.bottomLeftContentBox=d>0||f>0?Ho(i.left+x+M,i.top+w,Math.max(0,d-(x+M)),f-(B+I),co.BOTTOM_LEFT):new Uo(i.left+x+M,i.top+i.height-(B+I))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(co||(co={}));var Ho=function(t,e,i,n,r){var o=(Math.sqrt(2)-1)/3*4,s=i*o,a=n*o,A=t+i,c=e+n;switch(r){case co.TOP_LEFT:return new Lo(new Uo(t,c),new Uo(t,c-a),new Uo(A-s,e),new Uo(A,e));case co.TOP_RIGHT:return new Lo(new Uo(t,e),new Uo(t+s,e),new Uo(A,c-a),new Uo(A,c));case co.BOTTOM_RIGHT:return new Lo(new Uo(A,e),new Uo(A,e+a),new Uo(t+s,c),new Uo(t,c));case co.BOTTOM_LEFT:default:return new Lo(new Uo(A,c),new Uo(A-s,c),new Uo(t,e+a),new Uo(t,e))}},No=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Ro=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},zo=function(t,e,i){this.offsetX=t,this.offsetY=e,this.matrix=i,this.type=0,this.target=6},Go=function(t,e){this.path=t,this.target=e,this.type=1},Wo=function(t){this.opacity=t,this.type=2,this.target=6},Yo=function(t){return 1===t.type},Xo=function(t,e){return t.length===e.length&&t.some((function(t,i){return t===e[i]}))},Ko=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Vo=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new Po(this.container),this.container.styles.opacity<1&&this.effects.push(new Wo(this.container.styles.opacity)),null!==this.container.styles.transform){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new zo(i,n,r))}if(0!==this.container.styles.overflowX){var o=No(this.curves),s=Ro(this.curves);Xo(o,s)?this.effects.push(new Go(o,6)):(this.effects.push(new Go(o,2)),this.effects.push(new Go(s,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,n=this.effects.slice(0);i;){var r=i.effects.filter((function(t){return!Yo(t)}));if(e||0!==i.container.styles.position||!i.parent){if(n.unshift.apply(n,r),e=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var o=No(i.curves),s=Ro(i.curves);Xo(o,s)||n.unshift(new Go(s,6))}}else n.unshift.apply(n,r);i=i.parent}return n.filter((function(e){return ln(e.target,t)}))},t}(),Zo=function(t,e,i,n){t.container.elements.forEach((function(r){var o=ln(r.flags,4),s=ln(r.flags,2),a=new Vo(r,t);ln(r.styles.display,2048)&&n.push(a);var A=ln(r.flags,8)?[]:n;if(o||s){var c=o||r.styles.isPositioned()?i:e,l=new Ko(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var h=r.styles.zIndex.order;if(h<0){var u=0;c.negativeZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(u=e,!1):u>0})),c.negativeZIndex.splice(u,0,l)}else if(h>0){var d=0;c.positiveZIndex.some((function(t,e){return h>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0})),c.positiveZIndex.splice(d,0,l)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)}else r.styles.isFloating()?c.nonPositionedFloats.push(l):c.nonPositionedInlineLevel.push(l);Zo(a,l,o?l:i,A)}else r.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Zo(a,e,i,A);ln(r.flags,8)&&Jo(r,A)}))},Jo=function(t,e){for(var i=t instanceof hr?t.start:1,n=t instanceof hr&&t.reversed,r=0;r<e.length;r++){var o=e[r];o.container instanceof lr&&"number"==typeof o.container.value&&0!==o.container.value&&(i=o.container.value),o.listValue=so(i,o.container.styles.listStyleType,!0),i+=n?-1:1}},qo=function(t,e){switch(e){case 0:return ts(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ts(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ts(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return ts(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$o=function(t,e){var i=[];return jo(t)?i.push(t.subdivide(.5,!1)):i.push(t),jo(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},ts=function(t,e,i,n){var r=[];return jo(t)?r.push(t.subdivide(.5,!1)):r.push(t),jo(i)?r.push(i.subdivide(.5,!0)):r.push(i),jo(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),jo(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},es=function(t){var e=t.bounds,i=t.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},is=function(t){var e=t.styles,i=t.bounds,n=oe(e.paddingLeft,i.width),r=oe(e.paddingRight,i.width),o=oe(e.paddingTop,i.width),s=oe(e.paddingBottom,i.width);return i.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+r),-(e.borderTopWidth+e.borderBottomWidth+o+s))},ns=function(t,e,i){var n=function(t,e){return 0===t?e.bounds:2===t?is(e):es(e)}(as(t.styles.backgroundOrigin,e),t),r=function(t,e){return 0===t?e.bounds:2===t?is(e):es(e)}(as(t.styles.backgroundClip,e),t),o=ss(as(t.styles.backgroundSize,e),i,n),s=o[0],a=o[1],A=re(as(t.styles.backgroundPosition,e),n.width-s,n.height-a);return[As(as(t.styles.backgroundRepeat,e),A,o,n,r),Math.round(n.left+A[0]),Math.round(n.top+A[1]),s,a]},rs=function(t){return Wt(t)&&t.value===Ne.AUTO},os=function(t){return"number"==typeof t},ss=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=t[0],a=t[1];if(!s)return[0,0];if($t(s)&&a&&$t(a))return[oe(s,i.width),oe(a,i.height)];var A=os(o);if(Wt(s)&&(s.value===Ne.CONTAIN||s.value===Ne.COVER))return os(o)?i.width/i.height<o!=(s.value===Ne.COVER)?[i.width,i.width/o]:[i.height*o,i.height]:[i.width,i.height];var c=os(n),l=os(r),h=c||l;if(rs(s)&&(!a||rs(a)))return c&&l?[n,r]:A||h?h&&A?[c?n:r*o,l?r:n/o]:[c?n:i.width,l?r:i.height]:[i.width,i.height];if(A){var u=0,d=0;return $t(s)?u=oe(s,i.width):$t(a)&&(d=oe(a,i.height)),rs(s)?u=d*o:a&&!rs(a)||(d=u/o),[u,d]}var f=null,g=null;if($t(s)?f=oe(s,i.width):a&&$t(a)&&(g=oe(a,i.height)),null===f||a&&!rs(a)||(g=c&&l?f/n*r:i.height),null!==g&&rs(s)&&(f=c&&l?g/r*n:i.width),null!==f&&null!==g)return[f,g];throw new Error("Unable to calculate background-size for element")},as=function(t,e){var i=t[e];return void 0===i?t[0]:i},As=function(t,e,i,n,r){var o=e[0],s=e[1],a=i[0],A=i[1];switch(t){case 2:return[new Uo(Math.round(n.left),Math.round(n.top+s)),new Uo(Math.round(n.left+n.width),Math.round(n.top+s)),new Uo(Math.round(n.left+n.width),Math.round(A+n.top+s)),new Uo(Math.round(n.left),Math.round(A+n.top+s))];case 3:return[new Uo(Math.round(n.left+o),Math.round(n.top)),new Uo(Math.round(n.left+o+a),Math.round(n.top)),new Uo(Math.round(n.left+o+a),Math.round(n.height+n.top)),new Uo(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new Uo(Math.round(n.left+o),Math.round(n.top+s)),new Uo(Math.round(n.left+o+a),Math.round(n.top+s)),new Uo(Math.round(n.left+o+a),Math.round(n.top+s+A)),new Uo(Math.round(n.left+o),Math.round(n.top+s+A))];default:return[new Uo(Math.round(r.left),Math.round(r.top)),new Uo(Math.round(r.left+r.width),Math.round(r.top)),new Uo(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Uo(Math.round(r.left),Math.round(r.height+r.top))]}},cs="Hidden Text",ls=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var i=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),o=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",o.appendChild(i),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(cs)),i.appendChild(r),i.appendChild(n);var s=n.offsetTop-r.offsetTop+2;i.removeChild(r),i.appendChild(this._document.createTextNode(cs)),i.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-i.offsetTop+2;return o.removeChild(i),{baseline:s,middle:a}},t.prototype.getMetrics=function(t,e){var i=t+" "+e;return void 0===this._data[i]&&(this._data[i]=this.parseMetrics(t,e)),this._data[i]},t}(),hs=function(t,e){this.context=t,this.options=e},us=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new ls(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return e(i,t),i.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},i.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 2===t.type}(t)&&(this.ctx.globalAlpha=t.opacity),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Yo(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},i.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},i.prototype.renderStack=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},i.prototype.renderNode=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return ln(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},i.prototype.renderTextWithLetterSpacing=function(t,e,i){var n=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i):$n(t.text).reduce((function(e,r){return n.ctx.fillText(r,e,t.bounds.top+i),e+n.ctx.measureText(r).width}),t.bounds.left)},i.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),i=ms(t.fontFamily).join(", "),n=zt(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,n,i].join(" "),i,n]},i.prototype.renderTextNode=function(t,e){return n(this,void 0,void 0,(function(){var i,n,o,s,a,A,c,l,h=this;return r(this,(function(r){return i=this.createFontStyle(e),n=i[0],o=i[1],s=i[2],this.ctx.font=n,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(o,s),A=a.baseline,c=a.middle,l=e.paintOrder,t.textBounds.forEach((function(t){l.forEach((function(i){switch(i){case 0:h.ctx.fillStyle=fe(e.color),h.renderTextWithLetterSpacing(t,e.letterSpacing,A);var n=e.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach((function(i){h.ctx.shadowColor=fe(i.color),h.ctx.shadowOffsetX=i.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=i.offsetY.number*h.options.scale,h.ctx.shadowBlur=i.blur.number,h.renderTextWithLetterSpacing(t,e.letterSpacing,A)})),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),e.textDecorationLine.length&&(h.ctx.fillStyle=fe(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+A),t.bounds.width,1);break;case 2:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:h.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+c),t.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(h.ctx.strokeStyle=fe(e.webkitTextStrokeColor),h.ctx.lineWidth=e.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter"}}))})),[2]}))}))},i.prototype.renderReplacedElement=function(t,e,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=is(t),r=Ro(e);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},i.prototype.renderNodeContent=function(t){return n(this,void 0,void 0,(function(){var e,n,o,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C;return r(this,(function(r){switch(r.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,n=t.curves,o=e.styles,a=0,A=e.textNodes,r.label=1;case 1:return a<A.length?(c=A[a],[4,this.renderTextNode(c,o)]):[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:if(!(e instanceof ar))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return v=r.sent(),this.renderReplacedElement(e,n,v),[3,8];case 7:return r.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof Ar&&this.renderReplacedElement(e,n,e.canvas),!(e instanceof cr))return[3,12];r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return v=r.sent(),this.renderReplacedElement(e,n,v),[3,12];case 11:return r.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof Cr&&e.tree?[4,new i(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:l=r.sent(),e.width&&e.height&&this.ctx.drawImage(l,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),r.label=14;case 14:if(e instanceof vr&&(h=Math.min(e.bounds.width,e.bounds.height),e.type===fr?e.checked&&(this.ctx.save(),this.path([new Uo(e.bounds.left+.39363*h,e.bounds.top+.79*h),new Uo(e.bounds.left+.16*h,e.bounds.top+.5549*h),new Uo(e.bounds.left+.27347*h,e.bounds.top+.44071*h),new Uo(e.bounds.left+.39694*h,e.bounds.top+.5649*h),new Uo(e.bounds.left+.72983*h,e.bounds.top+.23*h),new Uo(e.bounds.left+.84*h,e.bounds.top+.34085*h),new Uo(e.bounds.left+.39363*h,e.bounds.top+.79*h)]),this.ctx.fillStyle=fe(mr),this.ctx.fill(),this.ctx.restore()):e.type===gr&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+h/2,e.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=fe(mr),this.ctx.fill(),this.ctx.restore())),ds(e)&&e.value.length){switch(u=this.createFontStyle(o),w=u[0],d=u[1],f=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=fe(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gs(e.styles.textAlign),C=is(e),g=0,e.styles.textAlign){case 1:g+=C.width/2;break;case 2:g+=C.width}p=C.add(g,0,0,-C.height/2+1),this.ctx.save(),this.path([new Uo(C.left,C.top),new Uo(C.left+C.width,C.top),new Uo(C.left+C.width,C.top+C.height),new Uo(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zn(e.value,p),o.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ln(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(m=e.styles.listStyleImage).type)return[3,18];v=void 0,y=m.url,r.label=15;case 15:return r.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=r.sent(),this.ctx.drawImage(v,e.bounds.left-(v.width+10),e.bounds.top),[3,18];case 17:return r.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==e.styles.listStyleType&&(w=this.createFontStyle(o)[0],this.ctx.font=w,this.ctx.fillStyle=fe(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new s(e.bounds.left,e.bounds.top+oe(e.styles.paddingTop,e.bounds.width),e.bounds.width,Si(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zn(t.listValue,C),o.letterSpacing,Si(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),r.label=20;case 20:return[2]}}))}))},i.prototype.renderStackContent=function(t){return n(this,void 0,void 0,(function(){var e,i,n,o,s,a,A,c,l,h,u,d,f,g,p;return r(this,(function(r){switch(r.label){case 0:return ln(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:r.sent(),e=0,i=t.negativeZIndex,r.label=2;case 2:return e<i.length?(p=i[e],[4,this.renderStack(p)]):[3,5];case 3:r.sent(),r.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:r.sent(),n=0,o=t.nonInlineLevel,r.label=7;case 7:return n<o.length?(p=o[n],[4,this.renderNode(p)]):[3,10];case 8:r.sent(),r.label=9;case 9:return n++,[3,7];case 10:s=0,a=t.nonPositionedFloats,r.label=11;case 11:return s<a.length?(p=a[s],[4,this.renderStack(p)]):[3,14];case 12:r.sent(),r.label=13;case 13:return s++,[3,11];case 14:A=0,c=t.nonPositionedInlineLevel,r.label=15;case 15:return A<c.length?(p=c[A],[4,this.renderStack(p)]):[3,18];case 16:r.sent(),r.label=17;case 17:return A++,[3,15];case 18:l=0,h=t.inlineLevel,r.label=19;case 19:return l<h.length?(p=h[l],[4,this.renderNode(p)]):[3,22];case 20:r.sent(),r.label=21;case 21:return l++,[3,19];case 22:u=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,r.label=23;case 23:return u<d.length?(p=d[u],[4,this.renderStack(p)]):[3,26];case 24:r.sent(),r.label=25;case 25:return u++,[3,23];case 26:f=0,g=t.positiveZIndex,r.label=27;case 27:return f<g.length?(p=g[f],[4,this.renderStack(p)]):[3,30];case 28:r.sent(),r.label=29;case 29:return f++,[3,27];case 30:return[2]}}))}))},i.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},i.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},i.prototype.formatPath=function(t){var e=this;t.forEach((function(t,i){var n=jo(t)?t.start:t;0===i?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),jo(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},i.prototype.renderRepeat=function(t,e,i,n){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(i,n),this.ctx.fill(),this.ctx.translate(-i,-n)},i.prototype.resizeImage=function(t,e,i){var n;if(t.width===e&&t.height===i)return t;var r=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,i),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,i),r},i.prototype.renderBackgroundImage=function(t){return n(this,void 0,void 0,(function(){var e,i,n,o,s,a;return r(this,(function(A){switch(A.label){case 0:e=t.styles.backgroundImage.length-1,i=function(i){var o,s,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C,b,B,x,_,S,I,M,T,E,k,F,D,O,U;return r(this,(function(r){switch(r.label){case 0:if(0!==i.type)return[3,5];o=void 0,s=i.url,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.context.cache.match(s)];case 2:return o=r.sent(),[3,4];case 3:return r.sent(),n.context.logger.error("Error loading background-image "+s),[3,4];case 4:return o&&(a=ns(t,e,[o.width,o.height,o.width/o.height]),w=a[0],S=a[1],I=a[2],B=a[3],x=a[4],v=n.ctx.createPattern(n.resizeImage(o,B,x),"repeat"),n.renderRepeat(w,v,S,I)),[3,6];case 5:1===i.type?(A=ns(t,e,[null,null,null]),w=A[0],S=A[1],I=A[2],B=A[3],x=A[4],c=Ie(i.angle,B,x),l=c[0],h=c[1],u=c[2],d=c[3],f=c[4],(g=document.createElement("canvas")).width=B,g.height=x,p=g.getContext("2d"),m=p.createLinearGradient(h,d,u,f),Se(i.stops,l).forEach((function(t){return m.addColorStop(t.stop,fe(t.color))})),p.fillStyle=m,p.fillRect(0,0,B,x),B>0&&x>0&&(v=n.ctx.createPattern(g,"repeat"),n.renderRepeat(w,v,S,I))):function(t){return 2===t.type}(i)&&(y=ns(t,e,[null,null,null]),w=y[0],C=y[1],b=y[2],B=y[3],x=y[4],_=0===i.position.length?[ie]:i.position,S=oe(_[0],B),I=oe(_[_.length-1],x),M=function(t,e,i,n,r){var o=0,s=0;switch(t.size){case 0:0===t.shape?o=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-r)):1===t.shape&&(o=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(i),Math.abs(i-r)));break;case 2:if(0===t.shape)o=s=Math.min(Me(e,i),Me(e,i-r),Me(e-n,i),Me(e-n,i-r));else if(1===t.shape){var a=Math.min(Math.abs(i),Math.abs(i-r))/Math.min(Math.abs(e),Math.abs(e-n)),A=Te(n,r,e,i,!0),c=A[0],l=A[1];s=a*(o=Me(c-e,(l-i)/a))}break;case 1:0===t.shape?o=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-r)):1===t.shape&&(o=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(i),Math.abs(i-r)));break;case 3:if(0===t.shape)o=s=Math.max(Me(e,i),Me(e,i-r),Me(e-n,i),Me(e-n,i-r));else if(1===t.shape){a=Math.max(Math.abs(i),Math.abs(i-r))/Math.max(Math.abs(e),Math.abs(e-n));var h=Te(n,r,e,i,!1);c=h[0],l=h[1],s=a*(o=Me(c-e,(l-i)/a))}}return Array.isArray(t.size)&&(o=oe(t.size[0],n),s=2===t.size.length?oe(t.size[1],r):o),[o,s]}(i,S,I,B,x),T=M[0],E=M[1],T>0&&E>0&&(k=n.ctx.createRadialGradient(C+S,b+I,0,C+S,b+I,T),Se(i.stops,2*T).forEach((function(t){return k.addColorStop(t.stop,fe(t.color))})),n.path(w),n.ctx.fillStyle=k,T!==E?(F=t.bounds.left+.5*t.bounds.width,D=t.bounds.top+.5*t.bounds.height,U=1/(O=E/T),n.ctx.save(),n.ctx.translate(F,D),n.ctx.transform(1,0,0,O,0,0),n.ctx.translate(-F,-D),n.ctx.fillRect(C,U*(b-D)+D,B,x*U),n.ctx.restore()):n.ctx.fill())),r.label=6;case 6:return e--,[2]}}))},n=this,o=0,s=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<s.length?(a=s[o],[5,i(a)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},i.prototype.renderSolidBorder=function(t,e,i){return n(this,void 0,void 0,(function(){return r(this,(function(n){return this.path(qo(i,e)),this.ctx.fillStyle=fe(t),this.ctx.fill(),[2]}))}))},i.prototype.renderDoubleBorder=function(t,e,i,o){return n(this,void 0,void 0,(function(){var n,s;return r(this,(function(r){switch(r.label){case 0:return e<3?[4,this.renderSolidBorder(t,i,o)]:[3,2];case 1:return r.sent(),[2];case 2:return n=function(t,e){switch(e){case 0:return ts(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ts(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ts(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return ts(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(o,i),this.path(n),this.ctx.fillStyle=fe(t),this.ctx.fill(),s=function(t,e){switch(e){case 0:return ts(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ts(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ts(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return ts(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(o,i),this.path(s),this.ctx.fill(),[2]}}))}))},i.prototype.renderNodeBackgroundAndBorders=function(t){return n(this,void 0,void 0,(function(){var e,i,n,o,s,a,A,c,l=this;return r(this,(function(r){switch(r.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,i=!de(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],o=fs(as(e.backgroundClip,0),t.curves),i||e.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),de(e.backgroundColor)||(this.ctx.fillStyle=fe(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:r.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){l.ctx.save();var i,n,r,o,s,a=No(t.curves),A=e.inset?0:1e4,c=(i=a,n=-A+(e.inset?1:-1)*e.spread.number,r=(e.inset?1:-1)*e.spread.number,o=e.spread.number*(e.inset?-2:2),s=e.spread.number*(e.inset?-2:2),i.map((function(t,e){switch(e){case 0:return t.add(n,r);case 1:return t.add(n+o,r);case 2:return t.add(n+o,r+s);case 3:return t.add(n,r+s)}return t})));e.inset?(l.path(a),l.ctx.clip(),l.mask(c)):(l.mask(a),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=e.offsetX.number+A,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=fe(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?fe(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),r.label=2;case 2:s=0,a=0,A=n,r.label=3;case 3:return a<A.length?0!==(c=A[a]).style&&!de(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,s,t.curves,2)]:[3,11]:[3,13];case 4:return r.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,s,t.curves,3)];case 6:return r.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,s,t.curves)];case 8:return r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,s,t.curves)];case 10:r.sent(),r.label=11;case 11:s++,r.label=12;case 12:return a++,[3,3];case 13:return[2]}}))}))},i.prototype.renderDashedDottedBorder=function(t,e,i,o,s){return n(this,void 0,void 0,(function(){var n,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C;return r(this,(function(r){return this.ctx.save(),n=function(t,e){switch(e){case 0:return $o(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return $o(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return $o(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return $o(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(o,i),a=qo(o,i),2===s&&(this.path(a),this.ctx.clip()),jo(a[0])?(A=a[0].start.x,c=a[0].start.y):(A=a[0].x,c=a[0].y),jo(a[1])?(l=a[1].end.x,h=a[1].end.y):(l=a[1].x,h=a[1].y),u=0===i||2===i?Math.abs(A-l):Math.abs(c-h),this.ctx.beginPath(),3===s?this.formatPath(n):this.formatPath(a.slice(0,2)),d=e<3?3*e:2*e,f=e<3?2*e:e,3===s&&(d=e,f=e),g=!0,u<=2*d?g=!1:u<=2*d+f?(d*=p=u/(2*d+f),f*=p):(m=Math.floor((u+f)/(d+f)),v=(u-m*d)/(m-1),f=(y=(u-(m+1)*d)/m)<=0||Math.abs(f-v)<Math.abs(f-y)?v:y),g&&(3===s?this.ctx.setLineDash([0,d+f]):this.ctx.setLineDash([d,f])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=fe(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(jo(a[0])&&(w=a[3],C=a[0],this.ctx.beginPath(),this.formatPath([new Uo(w.end.x,w.end.y),new Uo(C.start.x,C.start.y)]),this.ctx.stroke()),jo(a[1])&&(w=a[1],C=a[2],this.ctx.beginPath(),this.formatPath([new Uo(w.end.x,w.end.y),new Uo(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},i.prototype.render=function(t){return n(this,void 0,void 0,(function(){var e;return r(this,(function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=fe(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new Vo(t,null),r=new Ko(n),Zo(n,r,r,o=[]),Jo(n.container,o),e=r,[4,this.renderStack(e)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}var n,r,o}))}))},i}(hs),ds=function(t){return t instanceof wr||t instanceof yr||t instanceof vr&&t.type!==gr&&t.type!==fr},fs=function(t,e){switch(t){case 0:return No(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return Ro(e)}},gs=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},ps=["-apple-system","system-ui"],ms=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===ps.indexOf(t)})):t},vs=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return e(i,t),i.prototype.render=function(t){return n(this,void 0,void 0,(function(){var e,i;return r(this,(function(n){switch(n.label){case 0:return e=Xn(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,ys(e)];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=fe(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},i}(hs),ys=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},ws=function(){function t(t){var e=t.id,i=t.enabled;this.id=e,this.enabled=i,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,o([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),Cs=function(){function t(e,i){var n;this.windowBounds=i,this.instanceName="#"+t.instanceCount++,this.logger=new ws({id:this.instanceName,enabled:e.logging}),this.cache=null!==(n=e.cache)&&void 0!==n?n:new So(this,e)}return t.instanceCount=1,t}();"undefined"!=typeof window&&_o.setContext(window);var bs=function(t,e){return n(void 0,void 0,void 0,(function(){var n,o,A,c,l,h,u,d,f,g,p,m,v,y,w,C,b,B,x,_,S,I,M,T,E,k,F,D,O,U,Q,L,j,P,H,N,R,z;return r(this,(function(r){switch(r.label){case 0:if(!t||"object"!=typeof t)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(o=n.defaultView))throw new Error("Document is not attached to a Window");return A={allowTaint:null!==(I=e.allowTaint)&&void 0!==I&&I,imageTimeout:null!==(M=e.imageTimeout)&&void 0!==M?M:15e3,proxy:e.proxy,useCORS:null!==(T=e.useCORS)&&void 0!==T&&T},c=i({logging:null===(E=e.logging)||void 0===E||E,cache:e.cache},A),l={windowWidth:null!==(k=e.windowWidth)&&void 0!==k?k:o.innerWidth,windowHeight:null!==(F=e.windowHeight)&&void 0!==F?F:o.innerHeight,scrollX:null!==(D=e.scrollX)&&void 0!==D?D:o.pageXOffset,scrollY:null!==(O=e.scrollY)&&void 0!==O?O:o.pageYOffset},h=new s(l.scrollX,l.scrollY,l.windowWidth,l.windowHeight),u=new Cs(c,h),d=null!==(U=e.foreignObjectRendering)&&void 0!==U&&U,f={allowTaint:null!==(Q=e.allowTaint)&&void 0!==Q&&Q,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},u.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),g=new Ao(u,t,f),(p=g.clonedReferenceElement)?[4,g.toIFrame(n,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=r.sent(),v=Qr(p)||"HTML"===p.tagName?function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),r=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new s(0,0,n,r)}(p.ownerDocument):a(u,p),y=v.width,w=v.height,C=v.left,b=v.top,B=Bs(u,p,e.backgroundColor),x={canvas:e.canvas,backgroundColor:B,scale:null!==(j=null!==(L=e.scale)&&void 0!==L?L:o.devicePixelRatio)&&void 0!==j?j:1,x:(null!==(P=e.x)&&void 0!==P?P:0)+C,y:(null!==(H=e.y)&&void 0!==H?H:0)+b,width:null!==(N=e.width)&&void 0!==N?N:Math.ceil(y),height:null!==(R=e.height)&&void 0!==R?R:Math.ceil(w)},d?(u.logger.debug("Document cloned, using foreign object rendering"),[4,new vs(u,x).render(p)]):[3,3];case 2:return _=r.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+C+","+b+" with size "+y+"x"+w+" using computed rendering"),u.logger.debug("Starting DOM parsing"),S=_r(u,p),B===S.styles.backgroundColor&&(S.styles.backgroundColor=be.TRANSPARENT),u.logger.debug("Starting renderer for element at "+x.x+","+x.y+" with size "+x.width+"x"+x.height),[4,new us(u,x).render(S)];case 4:_=r.sent(),r.label=5;case 5:return(null===(z=e.removeContainer)||void 0===z||z)&&(Ao.destroy(m)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,_]}}))}))},Bs=function(t,e,i){var n=e.ownerDocument,r=n.documentElement?Ce(t,getComputedStyle(n.documentElement).backgroundColor):be.TRANSPARENT,o=n.body?Ce(t,getComputedStyle(n.body).backgroundColor):be.TRANSPARENT,s="string"==typeof i?Ce(t,i):null===i?be.TRANSPARENT:4294967295;return e===n.documentElement?de(r)?de(o)?s:o:r:s};return function(t,e){return void 0===e&&(e={}),bs(t,e)}}()},436:(t,e,i)=>{i(692),i(39);const n=i(710),r=i(213),o=i(109),s=i(456);let a;const A=()=>{const t=document.getElementById("image-editor-popup");document.body.removeChild(t)};t.exports={makeUI:(t,e)=>{if(document.getElementById("image-editor-popup"))return;const i=document.createElement("link");i.href="https://uicdn.toast.com/tui-image-editor/latest/tui-image-editor.css",i.rel="stylesheet",document.head.appendChild(i);const c=document.createElement("style");c.innerHTML="\n        #image-editor-popup-image .tui-image-editor-header-buttons {\n            display: none !important;\n        }\n        .tui-colorpicker-palette-button {\n            width: 8px;\n            height: 8px;\n        }\n    ",document.head.appendChild(c);const l=document.createElement("div");l.id="image-editor-popup",l.style.position="fixed",l.style.top="5%",l.style.right="10%",l.style.left="10%",l.style.bottom="5%",l.style.zIndex="20000000",l.style.justifyContent="center",l.style.alignItems="center",l.style.display="flex",l.style.flexDirection="column",document.body.appendChild(l);const h=new Image;h.src=t.toDataURL("image/png"),h.style.width="100%",h.style.height="100%",l.innerHTML='\n        <div style="background-color: #fff; height: 100%; width: 100%; flex-grow: 1; display: flex; flex-direction: column; border: 1px solid #000; padding: 10px; box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5); font-family: \'Verdana\';" id="image-editor-popup-content">\n            <div style="font-size: 20px; font-weight: bold; border-bottom: 1px solid #000; padding-bottom: 10px;">Leave Feedback</div>\n            <div style="flex-grow: 1; display: flex; justify-content: center; align-items: center; overflow: auto;">\n                <div id="image-editor-popup-image"></div>\n            </div>\n            <div style="display: flex; flex-direction: column; gap: 10px;">\n                <textarea style="width: 100%; height: 100px; box-sizing: border-box;" id="feedback-textarea" placeholder="Leave Comment"></textarea>\n                <div style="display: flex; justify-content: flex-end;">\n                    <button style="margin-right:5px; width: 100px; height: 30px; background-color: #fff; color: #000; border: 1px solid #000; border-radius: 5px; cursor: pointer;" id="feedback-button-close">Close</button>\n                    <button style="width: 100px; height: 30px; background-color: #000; color: #fff; border: none; border-radius: 5px; cursor: pointer;" id="feedback-button">Download</button>\n                </div>\n            </div>\n        </div>\n    ',((t,e)=>{a=new s(t,{includeUI:{loadImage:{path:e.toDataURL("image/png"),name:"feedbackImage"},menuBarPosition:"bottom"}})})(document.getElementById("image-editor-popup-image"),t),document.getElementById("feedback-button").addEventListener("click",(()=>{const t=document.getElementById("feedback-textarea").value;((t,e,i)=>{const s=(new o).getResult();s.screen={},s.screen.width=screen.width,s.screen.height=screen.height,s.body={},s.body.width=document.body.clientWidth,s.body.height=document.body.clientHeight,s.context=window.CFContext;const a=new n;a.file("feedback.png",t.split(",")[1],{base64:!0}),a.file("browserLogs.txt",(t=>{let e="";return t.forEach((t=>{e+=`${t.datetime} ${t.type}: ${t.value.join(" ")}\n`})),e})(i)),a.file("userFeedback.txt",e),a.file("browserInfo.json",JSON.stringify(s)),a.generateAsync({type:"blob"}).then((t=>{r(t,"feedback.zip")}))})(a.toDataURL(),t,e),A()})),document.getElementById("feedback-button-close").addEventListener("click",(()=>{A()}))}}},456:(t,e,i)=>{var n;self,n=function(t){return function(){var e={2777:function(t,e,i){var n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C,b,B,x,_=_||{version:"4.6.0"};if(e.fabric=_,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?_.document=document:_.document=document.implementation.createHTMLDocument(""),_.window=window;else{var S=new(i(4960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;_.document=S.document,_.jsdomImplForWrapper=i(6759).implForWrapper,_.nodeCanvas=i(6272).Canvas,_.window=S,DOMParser=_.window.DOMParser}function I(t,e){var i=t.canvas,n=e.targetCanvas,r=n.getContext("2d");r.translate(0,n.height),r.scale(1,-1);var o=i.height-n.height;r.drawImage(i,0,o,n.width,n.height,0,0,n.width,n.height)}function M(t,e){var i=e.targetCanvas.getContext("2d"),n=e.destinationWidth,r=e.destinationHeight,o=n*r*4,s=new Uint8Array(this.imageBuffer,0,o),a=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,s);var A=new ImageData(a,n,r);i.putImageData(A,0,0)}_.isTouchSupported="ontouchstart"in _.window||"ontouchstart"in _.document||_.window&&_.window.navigator&&_.window.navigator.maxTouchPoints>0,_.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,_.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],_.DPI=96,_.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",_.commaWsp="(?:\\s+,?\\s*|,\\s*)",_.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,_.reNonWord=/[ \n\.,;!\?\-]/,_.fontPaths={},_.iMatrix=[1,0,0,1,0,0],_.svgNS="http://www.w3.org/2000/svg",_.perfLimitSizeTotal=2097152,_.maxCacheSideLimit=4096,_.minCacheSideLimit=256,_.charWidthsCache={},_.textureSize=2048,_.disableStyleCopyPaste=!1,_.enableGLFiltering=!0,_.devicePixelRatio=_.window.devicePixelRatio||_.window.webkitDevicePixelRatio||_.window.mozDevicePixelRatio||1,_.browserShadowBlurConstant=1,_.arcToSegmentsCache={},_.boundsOfCurveCache={},_.cachesBoundsOfCurve=!0,_.forceGLPutImageData=!1,_.initFilterBackend=function(){return _.enableGLFiltering&&_.isWebglSupported&&_.isWebglSupported(_.textureSize)?(console.log("max texture size: "+_.maxTextureSize),new _.WebglFilterBackend({tileSize:_.textureSize})):_.Canvas2dFilterBackend?new _.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=_),function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:_.util.array.fill(i,!1)}}function e(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}_.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter((function(t){return!1!==t})),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,i){if(1===arguments.length)for(var n in t)e.call(this,n,t[n]);else e.call(this,t,i);return this},off:function(e,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}}(),_.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var n=this._objects;return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,n=0,r=arguments.length;n<r;n++)-1!==(t=e.indexOf(arguments[n]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,r=i.length;n<r;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return void 0===t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return"function"==typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+(e.complexity?e.complexity():0)}),0)}},_.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof _.Gradient||this.set(e,new _.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof _.Pattern?i&&i():this.set(e,new _.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},n=e,r=Math.sqrt,o=Math.atan2,s=Math.pow,a=Math.PI/180,A=Math.PI/2,_.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/A){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/A){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,i){var n=new _.Point(t.x-e.x,t.y-e.y),r=_.util.rotateVector(n,i);return new _.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var i=_.util.sin(e),n=_.util.cos(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}},transformPoint:function(t,e,i){return i?new _.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new _.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=_.util.transformPoint(t[i],e);var n=[t[0].x,t[1].x,t[2].x,t[3].x],r=_.util.array.min(n),o=_.util.array.max(n)-r,s=[t[0].y,t[1].y,t[2].y,t[3].y],a=_.util.array.min(s);return{left:r,top:a,width:o,height:_.util.array.max(s)-a}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=_.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=_.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*_.DPI/25.4;case"cm":return n*_.DPI/2.54;case"in":return n*_.DPI;case"pt":return n*_.DPI/72;case"pc":return n*_.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=_.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),_.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(t){if(!t)return _;var e,i=t.split("."),r=i.length,o=n||_.window;for(e=0;e<r;++e)o=o[i[e]];return o},loadImage:function(t,e,i,n){if(t){var r=_.util.createImage(),o=function(){e&&e.call(i,r,!1),r=r.onload=r.onerror=null};r.onload=o,r.onerror=function(){_.log("Error loading "+r.src),e&&e.call(i,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&null!=n&&(r.crossOrigin=n),"data:image/svg"===t.substring(0,14)&&(r.onload=null,_.util.loadImageInDom(r,o)),r.src=t}else e&&e.call(i,t)},loadImageInDom:function(t,e){var i=_.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(t),_.document.querySelector("body").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,i,n){var r=[],o=0,s=(t=t||[]).length;function a(){++o===s&&e&&e(r.filter((function(t){return t})))}s?t.forEach((function(t,e){t&&t.type?_.util.getKlass(t.type,i).fromObject(t,(function(i,o){o||(r[e]=i),n&&n(t,i,o),a()})):a()})):e&&e(r)},enlivenPatterns:function(t,e){function i(){++r===o&&e&&e(n)}var n=[],r=0,o=(t=t||[]).length;o?t.forEach((function(t,e){t&&t.source?new _.Pattern(t,(function(t){n[e]=t,i()})):(n[e]=t,i())})):e&&e(n)},groupSVGElements:function(t,e,i){var n;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),n=new _.Group(t,e),void 0!==i&&(n.sourcePath=i),n)},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,e,i,n,s,a){var A=n-e,c=s-i,l=r(A*A+c*c),h=o(c,A),u=a.length,d=0,f=!0;for(t.save(),t.translate(e,i),t.moveTo(0,0),t.rotate(h),e=0;l>e;)(e+=a[d++%u])>l&&(e=l),t[f?"lineTo":"moveTo"](e,0),f=!f;t.restore()},createCanvasElement:function(){return _.document.createElement("canvas")},copyCanvasElement:function(t){var e=_.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL("image/"+e,i)},createImage:function(){return _.document.createElement("img")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=o(t[1],t[0]),i=s(t[0],2)+s(t[1],2),n=r(i),A=(t[0]*t[3]-t[2]*t[1])/n,c=o(t[0]*t[2]+t[1]*t[3],i);return{angle:e/a,scaleX:n,scaleY:A,skewX:c/a,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return _.iMatrix.concat();var e=_.util.degreesToRadians(t.angle),i=_.util.cos(e),n=_.util.sin(e);return[i,n,-n,i,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,i=void 0===t.scaleY?1:t.scaleY,n=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],r=_.util.multiplyTransformMatrices,o=_.util.degreesToRadians;return t.skewX&&(n=r(n,[1,0,Math.tan(o(t.skewX)),1],!0)),t.skewY&&(n=r(n,[1,Math.tan(o(t.skewY)),0,1],!0)),n},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=_.util.multiplyTransformMatrices;return t.angle&&(e=i(e,_.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=i(e,_.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var r,o=!0,s=t.getImageData(e,i,2*n||1,2*n||1),a=s.data.length;for(r=3;r<a&&0!=(o=s.data[r]<=0);r+=4);return s=null,o},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n=t.split(" ");return n&&n.length&&("meet"!==(i=n.pop())&&"slice"!==i?(e=i,i="meet"):n.length&&(e=n.pop())),{meetOrSlice:i,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?_.charWidthsCache[t]&&delete _.charWidthsCache[t]:_.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),n=Math.floor(e/i);return{x:Math.floor(i),y:n}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return _.util.toFixed(t,_.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var i=_.util.invertTransform(e),n=_.util.multiplyTransformMatrices(i,t.calcOwnMatrix());_.util.applyTransformToObject(t,n)},addTransformToObject:function(t,e){_.util.applyTransformToObject(t,_.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var i=_.util.qrDecompose(e),n=new _.Point(i.translateX,i.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(n,"center","center")},sizeAfterTransform:function(t,e,i){var n=t/2,r=e/2,o=[{x:-n,y:-r},{x:n,y:-r},{x:-n,y:r},{x:n,y:r}],s=_.util.calcDimensionsMatrix(i),a=_.util.makeBoundingBoxFromPoints(o,s);return{x:a.width,y:a.height}}},function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function n(t,e,i,n,r,o,s,a,A,c,l){var h=_.util.cos(t),u=_.util.sin(t),d=_.util.cos(e),f=_.util.sin(e),g=i*r*d-n*o*f+s,p=n*r*d+i*o*f+a;return["C",c+A*(-i*r*u-n*o*h),l+A*(-n*r*u+i*o*h),g+A*(i*r*f+n*o*d),p+A*(n*r*f-i*o*d),g,p]}function r(t,e,i,r,s,a,A){var c=Math.PI,l=A*c/180,h=_.util.sin(l),u=_.util.cos(l),d=0,f=0,g=-u*t*.5-h*e*.5,p=-u*e*.5+h*t*.5,m=(i=Math.abs(i))*i,v=(r=Math.abs(r))*r,y=p*p,w=g*g,C=m*v-m*y-v*w,b=0;if(C<0){var B=Math.sqrt(1-C/(m*v));i*=B,r*=B}else b=(s===a?-1:1)*Math.sqrt(C/(m*y+v*w));var x=b*i*p/r,S=-b*r*g/i,I=u*x-h*S+.5*t,M=h*x+u*S+.5*e,T=o(1,0,(g-x)/i,(p-S)/r),E=o((g-x)/i,(p-S)/r,(-g-x)/i,(-p-S)/r);0===a&&E>0?E-=2*c:1===a&&E<0&&(E+=2*c);for(var k=Math.ceil(Math.abs(E/c*2)),F=[],D=E/k,O=8/3*Math.sin(D/4)*Math.sin(D/4)/Math.sin(D/2),U=T+D,Q=0;Q<k;Q++)F[Q]=n(T,U,u,h,i,r,I,M,O,d,f),d=F[Q][5],f=F[Q][6],T=U,U+=D;return F}function o(t,e,i,n){var r=Math.atan2(e,t),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)}function s(e,i,n,r,o,s,a,A){var c;if(_.cachesBoundsOfCurve&&(c=t.call(arguments),_.boundsOfCurveCache[c]))return _.boundsOfCurveCache[c];var l,h,u,d,f,g,p,m,v=Math.sqrt,y=Math.min,w=Math.max,C=Math.abs,b=[],B=[[],[]];h=6*e-12*n+6*o,l=-3*e+9*n-9*o+3*a,u=3*n-3*e;for(var x=0;x<2;++x)if(x>0&&(h=6*i-12*r+6*s,l=-3*i+9*r-9*s+3*A,u=3*r-3*i),C(l)<1e-12){if(C(h)<1e-12)continue;0<(d=-u/h)&&d<1&&b.push(d)}else(p=h*h-4*u*l)<0||(0<(f=(-h+(m=v(p)))/(2*l))&&f<1&&b.push(f),0<(g=(-h-m)/(2*l))&&g<1&&b.push(g));for(var S,I,M,T=b.length,E=T;T--;)S=(M=1-(d=b[T]))*M*M*e+3*M*M*d*n+3*M*d*d*o+d*d*d*a,B[0][T]=S,I=M*M*M*i+3*M*M*d*r+3*M*d*d*s+d*d*d*A,B[1][T]=I;B[0][E]=e,B[1][E]=i,B[0][E+1]=a,B[1][E+1]=A;var k=[{x:y.apply(null,B[0]),y:y.apply(null,B[1])},{x:w.apply(null,B[0]),y:w.apply(null,B[1])}];return _.cachesBoundsOfCurve&&(_.boundsOfCurveCache[c]=k),k}function a(t,e,i){for(var n=i[1],o=i[2],s=i[3],a=i[4],A=i[5],c=r(i[6]-t,i[7]-e,n,o,a,A,s),l=0,h=c.length;l<h;l++)c[l][1]+=t,c[l][2]+=e,c[l][3]+=t,c[l][4]+=e,c[l][5]+=t,c[l][6]+=e;return c}function A(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}function c(t,e,i,n,r,o,s,a){return function(A){var c,l=(c=A)*c*c,h=function(t){return 3*t*t*(1-t)}(A),u=function(t){return 3*t*(1-t)*(1-t)}(A),d=function(t){return(1-t)*(1-t)*(1-t)}(A);return{x:s*l+r*h+i*u+t*d,y:a*l+o*h+n*u+e*d}}}function l(t,e,i,n,r,o,s,a){return function(A){var c=1-A,l=3*c*c*(i-t)+6*c*A*(r-i)+3*A*A*(s-r),h=3*c*c*(n-e)+6*c*A*(o-n)+3*A*A*(a-o);return Math.atan2(h,l)}}function h(t,e,i,n,r,o){return function(s){var a,A=(a=s)*a,c=function(t){return 2*t*(1-t)}(s),l=function(t){return(1-t)*(1-t)}(s);return{x:r*A+i*c+t*l,y:o*A+n*c+e*l}}}function u(t,e,i,n,r,o){return function(s){var a=1-s,A=2*a*(i-t)+2*s*(r-i),c=2*a*(n-e)+2*s*(o-n);return Math.atan2(c,A)}}function d(t,e,i){var n,r,o={x:e,y:i},s=0;for(r=1;r<=100;r+=1)n=t(r/100),s+=A(o.x,o.y,n.x,n.y),o=n;return s}function f(t){for(var e,i,n,r,o=0,s=t.length,a=0,f=0,g=0,p=0,m=[],v=0;v<s;v++){switch(n={x:a,y:f,command:(e=t[v])[0]},e[0]){case"M":n.length=0,g=a=e[1],p=f=e[2];break;case"L":n.length=A(a,f,e[1],e[2]),a=e[1],f=e[2];break;case"C":i=c(a,f,e[1],e[2],e[3],e[4],e[5],e[6]),r=l(a,f,e[1],e[2],e[3],e[4],e[5],e[6]),n.iterator=i,n.angleFinder=r,n.length=d(i,a,f),a=e[5],f=e[6];break;case"Q":i=h(a,f,e[1],e[2],e[3],e[4]),r=u(a,f,e[1],e[2],e[3],e[4]),n.iterator=i,n.angleFinder=r,n.length=d(i,a,f),a=e[3],f=e[4];break;case"Z":case"z":n.destX=g,n.destY=p,n.length=A(a,f,g,p),a=g,f=p}o+=n.length,m.push(n)}return m.push({length:o,x:a,y:f}),m}_.util.joinPath=function(t){return t.map((function(t){return t.join(" ")})).join(" ")},_.util.parsePath=function(t){var n,r,o,s,a,A=[],c=[],l=_.rePathCommand,h="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",u="("+h+")"+_.commaWsp,d="([01])"+_.commaWsp+"?",f=new RegExp(u+"?"+u+"?"+u+d+d+u+"?("+h+")","g");if(!t||!t.match)return A;for(var g,p=0,m=(a=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;p<m;p++){s=(n=a[p]).slice(1).trim(),c.length=0;var v=n.charAt(0);if(g=[v],"a"===v.toLowerCase())for(var y;y=f.exec(s);)for(var w=1;w<y.length;w++)c.push(y[w]);else for(;o=l.exec(s);)c.push(o[0]);w=0;for(var C=c.length;w<C;w++)r=parseFloat(c[w]),isNaN(r)||g.push(r);var b=e[v.toLowerCase()],B=i[v]||v;if(g.length-1>b)for(var x=1,S=g.length;x<S;x+=b)A.push([v].concat(g.slice(x,x+b))),v=B;else A.push(g)}return A},_.util.makePathSimpler=function(t){var e,i,n,r,o,s,A=0,c=0,l=t.length,h=0,u=0,d=[];for(i=0;i<l;++i){switch(n=!1,(e=t[i].slice(0))[0]){case"l":e[0]="L",e[1]+=A,e[2]+=c;case"L":A=e[1],c=e[2];break;case"h":e[1]+=A;case"H":e[0]="L",e[2]=c,A=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=A,e[2]=c;break;case"m":e[0]="M",e[1]+=A,e[2]+=c;case"M":A=e[1],c=e[2],h=e[1],u=e[2];break;case"c":e[0]="C",e[1]+=A,e[2]+=c,e[3]+=A,e[4]+=c,e[5]+=A,e[6]+=c;case"C":o=e[3],s=e[4],A=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=A,e[2]+=c,e[3]+=A,e[4]+=c;case"S":"C"===r?(o=2*A-o,s=2*c-s):(o=A,s=c),A=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=o,e[2]=s,o=e[3],s=e[4];break;case"q":e[0]="Q",e[1]+=A,e[2]+=c,e[3]+=A,e[4]+=c;case"Q":o=e[1],s=e[2],A=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=A,e[2]+=c;case"T":"Q"===r?(o=2*A-o,s=2*c-s):(o=A,s=c),e[0]="Q",A=e[1],c=e[2],e[1]=o,e[2]=s,e[3]=A,e[4]=c;break;case"a":e[0]="A",e[6]+=A,e[7]+=c;case"A":n=!0,d=d.concat(a(A,c,e)),A=e[6],c=e[7];break;case"z":case"Z":A=h,c=u}n||d.push(e),r=e[0]}return d},_.util.getSmoothPathFromPoints=function(t,e){var i,n=[],r=new _.Point(t[0].x,t[0].y),o=new _.Point(t[1].x,t[1].y),s=t.length,a=1,A=0,c=s>2;for(e=e||0,c&&(a=t[2].x<o.x?-1:t[2].x===o.x?0:1,A=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push(["M",r.x-a*e,r.y-A*e]),i=1;i<s;i++){if(!r.eq(o)){var l=r.midPointFrom(o);n.push(["Q",r.x,r.y,l.x,l.y])}r=t[i],i+1<t.length&&(o=t[i+1])}return c&&(a=r.x>t[i-2].x?1:r.x===t[i-2].x?0:-1,A=r.y>t[i-2].y?1:r.y===t[i-2].y?0:-1),n.push(["L",r.x+a*e,r.y+A*e]),n},_.util.getPathSegmentsInfo=f,_.util.getBoundsOfCurve=s,_.util.getPointOnPath=function(t,e,i){i||(i=f(t));for(var n=0;e-i[n].length>0&&n<i.length-2;)e-=i[n].length,n++;var r,o=i[n],s=e/o.length,a=o.command,c=t[n];switch(a){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(r=new _.Point(o.x,o.y).lerp(new _.Point(o.destX,o.destY),s)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),r;case"L":return(r=new _.Point(o.x,o.y).lerp(new _.Point(c[1],c[2]),s)).angle=Math.atan2(c[2]-o.y,c[1]-o.x),r;case"C":case"Q":return function(t,e){for(var i,n,r,o=0,s=0,a=t.iterator,c={x:t.x,y:t.y},l=.01,h=t.angleFinder;s<e&&o<=1&&l>1e-4;)i=a(o),r=o,(n=A(c.x,c.y,i.x,i.y))+s>e?o-=l/=2:(c=i,o+=l,s+=n);return i.angle=h(r),i}(o,e)}},_.util.transformPath=function(t,e,i){return i&&(e=_.util.multiplyTransformMatrices(e,[1,0,0,1,-i.x,-i.y])),t.map((function(t){for(var i=t.slice(0),n={},r=1;r<t.length-1;r+=2)n.x=t[r],n.y=t[r+1],n=_.util.transformPoint(n,e),i[r]=n.x,i[r+1]=n.y;return i}))},_.util.fromArcToBeizers=a,_.util.getBoundsOfArc=function(t,e,i,n,o,a,A,c,l){for(var h,u=0,d=0,f=[],g=r(c-t,l-e,i,n,a,A,o),p=0,m=g.length;p<m;p++)h=s(u,d,g[p][1],g[p][2],g[p][3],g[p][4],g[p][5],g[p][6]),f.push({x:h[0].x+t,y:h[0].y+e}),f.push({x:h[1].x+t,y:h[1].y+e}),u=g[p][5],d=g[p][6];return f},_.util.drawArc=function(t,e,i,n){a(e,i,n=n.slice(0).unshift("X")).forEach((function(e){t.bezierCurveTo.apply(t,e.slice(1))}))}}(),function(){var t=Array.prototype.slice;function e(t,e,i){if(t&&0!==t.length){var n=t.length-1,r=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],r)&&(r=t[n][e]);else for(;n--;)i(t[n],r)&&(r=t[n]);return r}}_.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(e,i){for(var n=t.call(arguments,2),r=[],o=0,s=e.length;o<s;o++)r[o]=n.length?e[o][i].apply(e[o],n):e[o][i].call(e[o]);return r},min:function(t,i){return e(t,i,(function(t,e){return t<e}))},max:function(t,i){return e(t,i,(function(t,e){return t>=e}))}}}(),function(){function t(e,i,n){if(n)if(!_.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var r=0,o=i.length;r<o;r++)e[r]=t({},i[r],n)}else if(i&&"object"==typeof i)for(var s in i)"canvas"===s||"group"===s?e[s]=null:i.hasOwnProperty(s)&&(e[s]=t({},i[s],n));else e=i;else for(var s in i)e[s]=i[s];return e}_.util.object={extend:t,clone:function(e,i){return t({},e,i)}},_.util.object.extend(_.util,_.Observable)}(),function(){function t(t,e){var i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||i>57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var n=t.charCodeAt(e+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}_.util.string={camelize:function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var i,n=0,r=[];for(n=0;n<e.length;n++)!1!==(i=t(e,n))&&r.push(i);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),n=function(t,e,n){for(var r in e)r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],i&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function r(){}function o(e){for(var i=null,n=this;n.constructor.superclass;){var r=n.constructor.superclass.prototype[e];if(n[e]!==r){i=r;break}n=n.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,t.call(arguments,1)):i.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}_.util.createClass=function(){var i=null,s=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(i=s.shift()),a.superclass=i,a.subclasses=[],i&&(r.prototype=i.prototype,a.prototype=new r,i.subclasses.push(a));for(var A=0,c=s.length;A<c;A++)n(a,s[A],i);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=o,a}}(),c=!!_.document.createElement("div").attachEvent,l=["touchstart","touchmove","touchend"],_.util.addListener=function(t,e,i,n){t&&t.addEventListener(e,i,!c&&n)},_.util.removeListener=function(t,e,i,n){t&&t.removeEventListener(e,i,!c&&n)},_.util.getPointer=function(t){var e=t.target,i=_.util.getScrollLeftTop(e),n=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:n.clientX+i.left,y:n.clientY+i.top}},_.util.isTouchEvent=function(t){return l.indexOf(t.type)>-1||"touch"===t.pointerType},u="string"==typeof(h=_.document.createElement("div")).style.opacity,d="string"==typeof h.style.filter,f=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,g=function(t){return t},u?g=function(t,e){return t.style.opacity=e,t}:d&&(g=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),f.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(f,e)):i.filter+=" alpha(opacity="+100*e+")",t}),_.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?g(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)"opacity"===n?g(t,e[n]):i["float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n]=e[n];return t},function(){var t,e,i,n,r=Array.prototype.slice,o=function(t){return r.call(t,0)};try{t=o(_.document.childNodes)instanceof Array}catch(t){}function s(t,e){var i=_.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function a(t){for(var e=0,i=0,n=_.document.documentElement,r=_.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===_.document?(e=r.scrollLeft||n.scrollLeft||0,i=r.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:i}}t||(o=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),e=_.document.defaultView&&_.document.defaultView.getComputedStyle?function(t,e){var i=_.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},i=_.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",_.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=_.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},_.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},_.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},_.util.getById=function(t){return"string"==typeof t?_.document.getElementById(t):t},_.util.toArray=o,_.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},_.util.makeElement=s,_.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=s(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},_.util.getScrollLeftTop=a,_.util.getElementOffset=function(t){var i,n,r=t&&t.ownerDocument,o={left:0,top:0},s={left:0,top:0},A={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return s;for(var c in A)s[A[c]]+=parseInt(e(t,c),10)||0;return i=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=a(t),{left:o.left+n.left-(i.clientLeft||0)+s.left,top:o.top+n.top-(i.clientTop||0)+s.top}},_.util.getNodeCanvas=function(t){var e=_.jsdomImplForWrapper(t);return e._canvas||e._image},_.util.cleanUpJsdomNode=function(t){if(_.isLikelyNode){var e=_.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}_.util.request=function(e,i){i||(i={});var n=i.method?i.method.toUpperCase():"GET",r=i.onComplete||function(){},o=new _.window.XMLHttpRequest,s=i.body||i.parameters;return o.onreadystatechange=function(){4===o.readyState&&(r(o),o.onreadystatechange=t)},"GET"===n&&(s=null,"string"==typeof i.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,i.parameters))),o.open(n,e,!0),"POST"!==n&&"PUT"!==n||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o}}(),_.log=console.log,_.warn=console.warn,function(){function t(){return!1}function e(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}var i=_.window.requestAnimationFrame||_.window.webkitRequestAnimationFrame||_.window.mozRequestAnimationFrame||_.window.oRequestAnimationFrame||_.window.msRequestAnimationFrame||function(t){return _.window.setTimeout(t,1e3/60)},n=_.window.cancelAnimationFrame||_.window.clearTimeout;function r(){return i.apply(_.window,arguments)}_.util.animate=function(i){var n=!1;return r((function(o){i||(i={});var s,a=o||+new Date,A=i.duration||500,c=a+A,l=i.onChange||t,h=i.abort||t,u=i.onComplete||t,d=i.easing||e,f="startValue"in i?i.startValue:0,g="endValue"in i?i.endValue:100,p=i.byValue||g-f;i.onStart&&i.onStart(),function t(e){var i=(s=e||+new Date)>c?A:s-a,o=i/A,m=d(i,f,p,A),v=Math.abs((m-f)/p);if(!n){if(!h(m,v,o))return s>c?(l(g,1,1),void u(g,1,1)):(l(m,v,o),void r(t));u(g,1,1)}}(a)})),function(){n=!0}},_.util.requestAnimFrame=r,_.util.cancelAnimFrame=function(){return n.apply(_.window,arguments)}}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return(n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1))+")"}_.util.animateColor=function(e,i,n,r){var o=new _.Color(e).getSource(),s=new _.Color(i).getSource(),a=r.onComplete,A=r.onChange;return r=r||{},_.util.animate(_.util.object.extend(r,{duration:n||500,startValue:o,endValue:s,byValue:s,easing:function(e,i,n,o){return t(i,n,r.colorEasing?r.colorEasing(e,o):1-Math.cos(e/o*(Math.PI/2)))},onComplete:function(e,i,n){if(a)return a(t(s,s,0),i,n)},onChange:function(e,i,n){if(A){if(Array.isArray(e))return A(t(e,e,0),i,n);A(e,i,n)}}}))}}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,r){return i-n(r-t,0,i,r)+e}function n(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}_.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(i,n,r,o){var s=0;return 0===i?n:1==(i/=o)?n+r:(s||(s=.3*o),-e(t(r,r,s,1.70158),i,o)+n)},easeOutElastic:function(e,i,n,r){var o=0;if(0===e)return i;if(1==(e/=r))return i+n;o||(o=.3*r);var s=t(n,n,o,1.70158);return s.a*Math.pow(2,-10*e)*Math.sin((e*r-s.s)*(2*Math.PI)/s.p)+s.c+i},easeInOutElastic:function(i,n,r,o){var s=0;if(0===i)return n;if(2==(i/=o/2))return n+r;s||(s=o*(.3*1.5));var a=t(r,r,s,1.70158);return i<1?-.5*e(a,i,o)+n:a.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-a.s)*(2*Math.PI)/a.p)*.5+a.c+n},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:i,easeOutBounce:n,easeInOutBounce:function(t,e,r,o){return t<o/2?.5*i(2*t,0,r,o)+e:.5*n(2*t-o,0,r,o)+.5*r+e}}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.util.parseUnit,s=e.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},A={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",l="clip-path";function h(t){return t in a?a[t]:t}function u(t,i,n,r){var a,A="[object Array]"===Object.prototype.toString.call(i);if("fill"!==t&&"stroke"!==t||"none"!==i){if("strokeUniform"===t)return"non-scaling-stroke"===i;if("strokeDashArray"===t)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)i=n&&n.transformMatrix?s(n.transformMatrix,e.parseTransformAttribute(i)):e.parseTransformAttribute(i);else if("visible"===t)i="none"!==i&&"hidden"!==i,n&&!1===n.visible&&(i=!1);else if("opacity"===t)i=parseFloat(i),n&&void 0!==n.opacity&&(i*=n.opacity);else if("textAnchor"===t)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===t)a=o(i,r)/r*1e3;else if("paintFirst"===t){var c=i.indexOf("fill"),l=i.indexOf("stroke");i="fill",(c>-1&&l>-1&&l<c||-1===c&&l>-1)&&(i="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return i;if("imageSmoothing"===t)return"optimizeQuality"===i;a=A?i.map(o):o(i,r)}}else i="";return!A&&isNaN(a)?i:a}function d(t){return new RegExp("^("+t.join("|")+")\\b","i")}function f(t,e){var i,n,r,o,s=[];for(r=0,o=e.length;r<o;r++)i=e[r],n=t.getElementsByTagName(i),s=s.concat(Array.prototype.slice.call(n));return s}function g(t,e){var i,n=!0;return(i=p(t,e.pop()))&&e.length&&(n=function(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),n=p(t=t.parentNode,i);return 0===e.length}(t,e)),i&&n&&0===e.length}function p(t,e){var i,n,r=t.nodeName,o=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+r,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),o&&e.length)for(n=(o=o.split(" ")).length;n--;)i=new RegExp("\\."+o[n]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function m(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,r,o,s=t.getElementsByTagName("*");for(r=0,o=s.length;r<o;r++)if(e===(n=s[r]).getAttribute("id"))return n}e.svgValidTagNamesRegEx=d(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=d(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=d(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=d(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,i,n){t[n]=Math.tan(e.util.degreesToRadians(i[0]))}var i=e.iMatrix,n=e.reNum,r=e.commaWsp,o="(?:(?:(matrix)\\s*\\(\\s*("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+")"+r+"("+n+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+n+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+n+")\\s*\\)))",s=new RegExp("^\\s*(?:(?:"+o+"(?:"+r+"*"+o+")*)?)\\s*$"),a=new RegExp(o,"g");return function(n){var r=i.concat(),A=[];if(!n||n&&!s.test(n))return r;n.replace(a,(function(n){var s=new RegExp(o).exec(n).filter((function(t){return!!t})),a=s[1],c=s.slice(2).map(parseFloat);switch(a){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,i){var n=e.util.cos(i[0]),r=e.util.sin(i[0]),o=0,s=0;3===i.length&&(o=i[1],s=i[2]),t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=o-(n*o-r*s),t[5]=s-(r*o+n*s)}(r,c);break;case"scale":!function(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}(r,c);break;case"skewX":t(r,c,2);break;case"skewY":t(r,c,1);break;case"matrix":r=c}A.push(r.concat()),r=i.concat()}));for(var c=A[0];A.length>1;)A.shift(),c=e.util.multiplyTransformMatrices(c,A[0]);return c}}();var v=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function y(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var i,n,r,s,a,A,c=t.getAttribute("viewBox"),l=1,h=1,u=t.getAttribute("width"),d=t.getAttribute("height"),f=t.getAttribute("x")||0,g=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",m=!c||!(c=c.match(v)),y=!u||!d||"100%"===u||"100%"===d,w=m&&y,C={},b="",B=0,x=0;if(C.width=0,C.height=0,C.toBeParsed=w,m&&(f||g)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(b=" translate("+o(f)+" "+o(g)+") ",a=(t.getAttribute("transform")||"")+b,t.setAttribute("transform",a),t.removeAttribute("x"),t.removeAttribute("y")),w)return C;if(m)return C.width=o(u),C.height=o(d),C;if(i=-parseFloat(c[1]),n=-parseFloat(c[2]),r=parseFloat(c[3]),s=parseFloat(c[4]),C.minX=i,C.minY=n,C.viewBoxWidth=r,C.viewBoxHeight=s,y?(C.width=r,C.height=s):(C.width=o(u),C.height=o(d),l=C.width/r,h=C.height/s),"none"!==(p=e.util.parsePreserveAspectRatioAttribute(p)).alignX&&("meet"===p.meetOrSlice&&(h=l=l>h?h:l),"slice"===p.meetOrSlice&&(h=l=l>h?l:h),B=C.width-r*l,x=C.height-s*l,"Mid"===p.alignX&&(B/=2),"Mid"===p.alignY&&(x/=2),"Min"===p.alignX&&(B=0),"Min"===p.alignY&&(x=0)),1===l&&1===h&&0===i&&0===n&&0===f&&0===g)return C;if((f||g)&&"#document"!==t.parentNode.nodeName&&(b=" translate("+o(f)+" "+o(g)+") "),a=b+" matrix("+l+" 0 0 "+h+" "+(i*l+B)+" "+(n*h+x)+") ","svg"===t.nodeName){for(A=t.ownerDocument.createElementNS(e.svgNS,"g");t.firstChild;)A.appendChild(t.firstChild);t.appendChild(A)}else(A=t).removeAttribute("x"),A.removeAttribute("y"),a=A.getAttribute("transform")+a;return A.setAttribute("transform",a),C}function w(t,e){var i="xlink:href",n=m(t,e.getAttribute(i).substr(1));if(n&&n.getAttribute(i)&&w(t,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(t){n&&!e.hasAttribute(t)&&n.hasAttribute(t)&&e.setAttribute(t,n.getAttribute(t))})),!e.children.length)for(var r=n.cloneNode(!0);r.firstChild;)e.appendChild(r.firstChild);e.removeAttribute(i)}e.parseSVGDocument=function(t,i,r,o){if(t){!function(t){for(var i=f(t,["use","svg:use"]),n=0;i.length&&n<i.length;){var r=i[n],o=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===o)return;var s,a,A,c,l=o.substr(1),h=r.getAttribute("x")||0,u=r.getAttribute("y")||0,d=m(t,l).cloneNode(!0),g=(d.getAttribute("transform")||"")+" translate("+h+", "+u+")",p=i.length,v=e.svgNS;if(y(d),/^svg$/i.test(d.nodeName)){var w=d.ownerDocument.createElementNS(v,"g");for(a=0,c=(A=d.attributes).length;a<c;a++)s=A.item(a),w.setAttributeNS(v,s.nodeName,s.nodeValue);for(;d.firstChild;)w.appendChild(d.firstChild);d=w}for(a=0,c=(A=r.attributes).length;a<c;a++)"x"!==(s=A.item(a)).nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&"href"!==s.nodeName&&("transform"===s.nodeName?g=s.nodeValue+" "+g:d.setAttribute(s.nodeName,s.nodeValue));d.setAttribute("transform",g),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),r.parentNode.replaceChild(d,r),i.length===p&&n++}}(t);var s,a,A=e.Object.__uid++,c=y(t),l=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=A,0===l.length&&e.isLikelyNode){var h=[];for(s=0,a=(l=t.selectNodes('//*[name(.)!="svg"]')).length;s<a;s++)h[s]=l[s];l=h}var u=l.filter((function(t){return y(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)}));if(!u||u&&!u.length)i&&i([],{});else{var d={};l.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var i=t.getAttribute("id");d[i]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[A]=e.getGradientDefs(t),e.cssRules[A]=e.getCSSRules(t),e.clipPaths[A]=d,e.parseElements(u,(function(t,n){i&&(i(t,c,n,l),delete e.gradientDefs[A],delete e.cssRules[A],delete e.clipPaths[A])}),n(c),r,o)}}};var C=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");i(e,{parseFontDeclaration:function(t,e){var i=t.match(C);if(i){var n=i[1],r=i[3],s=i[4],a=i[5],A=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=o(s)),A&&(e.fontFamily=A),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,i=f(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),n=0,r={};for(n=i.length;n--;)(e=i[n]).getAttribute("xlink:href")&&w(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,n,s){if(t){var a,d,f,p={};void 0===s&&(s=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(p=e.parseAttributes(t.parentNode,n,s));var m=n.reduce((function(e,i){return(a=t.getAttribute(i))&&(e[i]=a),e}),{}),v=i(function(t,i){var n={};for(var r in e.cssRules[i])if(g(t,r.split(" ")))for(var o in e.cssRules[i][r])n[o]=e.cssRules[i][r][o];return n}(t,s),e.parseStyleAttribute(t));m=i(m,v),v[l]&&t.setAttribute(l,v[l]),d=f=p.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,m[c]&&(m[c]=d=o(m[c],f));var y,w,C={};for(var b in m)w=u(y=h(b),m[b],p,d),C[y]=w;C&&C.font&&e.parseFontDeclaration(C.font,C);var B=i(p,C);return e.svgValidParentsRegEx.test(t.nodeName)?B:function(t){for(var i in A)if(void 0!==t[A[i]]&&""!==t[i]){if(void 0===t[i]){if(!e.Object.prototype[i])continue;t[i]=e.Object.prototype[i]}if(0!==t[i].indexOf("url(")){var n=new e.Color(t[i]);t[i]=n.setAlpha(r(n.getAlpha()*t[A[i]],2)).toRgba()}}return t}(B)}},parseElements:function(t,i,n,r,o){new e.ElementsParser(t,i,n,r,o).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?function(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach((function(t){var r=t.split(":");i=r[0].trim().toLowerCase(),n=r[1].trim(),e[i]=n}))}(i,e):function(t,e){var i,n;for(var r in t)void 0!==t[r]&&(i=r.toLowerCase(),n=t[r],e[i]=n)}(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,i,n=[];for(e=0,i=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){var i,n,r=t.getElementsByTagName("style"),o={};for(i=0,n=r.length;i<n;i++){var s=r[i].textContent;""!==(s=s.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&s.match(/[^{]*\{[\s\S]*?\}/g).map((function(t){return t.trim()})).forEach((function(t){var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),s={},a=r[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(i=0,n=a.length;i<n;i++){var A=a[i].split(/\s*:\s*/),c=A[0],l=A[1];s[c]=l}(t=r[1]).split(",").forEach((function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]?e.util.object.extend(o[t],s):o[t]=e.util.object.clone(s))}))}))}return o},loadSVGFromURL:function(t,i,n,r){t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:function(t){var o=t.responseXML;if(!o||!o.documentElement)return i&&i(null),!1;e.parseSVGDocument(o.documentElement,(function(t,e,n,r){i&&i(t,e,n,r)}),n,r)}})},loadSVGFromString:function(t,i,n,r){var o=(new e.window.DOMParser).parseFromString(t.trim(),"text/xml");e.parseSVGDocument(o.documentElement,(function(t,e,n,r){i(t,e,n,r)}),n,r)}})}(e),_.ElementsParser=function(t,e,i,n,r,o){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},(p=_.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},p.createObjects=function(){var t=this;this.elements.forEach((function(e,i){e.setAttribute("svgUid",t.svgUid),t.createObject(e,i)}))},p.findTag=function(t){return _[_.util.string.capitalize(t.tagName.replace("svg:",""))]},p.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(t){_.log(t)}else this.checkIfDone()},p.createCallback=function(t,e){var i=this;return function(n){var r;i.resolveGradient(n,e,"fill"),i.resolveGradient(n,e,"stroke"),n instanceof _.Image&&n._originalElement&&(r=n.parsePreserveAspectRatioAttribute(e)),n._removeTransformMatrix(r),i.resolveClipPath(n,e),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},p.extractPropertyDefinition=function(t,e,i){var n=t[e],r=this.regexUrl;if(r.test(n)){r.lastIndex=0;var o=r.exec(n)[1];return r.lastIndex=0,_[i][this.svgUid][o]}},p.resolveGradient=function(t,e,i){var n=this.extractPropertyDefinition(t,i,"gradientDefs");if(n){var r=e.getAttribute(i+"-opacity"),o=_.Gradient.fromElement(n,t,r,this.options);t.set(i,o)}},p.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},p.resolveClipPath=function(t,e){var i,n,r,o,s=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(s){r=[],n=_.util.invertTransform(t.calcTransformMatrix());for(var a=s[0].parentNode,A=e;A.parentNode&&A.getAttribute("clip-path")!==t.clipPath;)A=A.parentNode;A.parentNode.appendChild(a);for(var c=0;c<s.length;c++)i=s[c],this.findTag(i).fromElement(i,this.createClipPathCallback(t,r),this.options);s=1===r.length?r[0]:new _.Group(r),o=_.util.multiplyTransformMatrices(n,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,A);var l=_.util.qrDecompose(o);s.flipX=!1,s.flipY=!1,s.set("scaleX",l.scaleX),s.set("scaleY",l.scaleY),s.angle=l.angle,s.skewX=l.skewX,s.skewY=0,s.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),t.clipPath=s}else delete t.clipPath},p.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))},function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=i,i.prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=i,e.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,n,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),A=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(n.x-t.x)-(o.x-r.x)*(n.y-t.y);if(0!==c){var l=a/c,h=A/c;0<=l&&l<=1&&0<=h&&h<=1?(s=new i("Intersection")).appendPoint(new e.Point(t.x+l*(n.x-t.x),t.y+l*(n.y-t.y))):s=new i}else s=new i(0===a||0===A?"Coincident":"Parallel");return s},e.Intersection.intersectLinePolygon=function(t,e,n){var r,o,s,a,A=new i,c=n.length;for(a=0;a<c;a++)r=n[a],o=n[(a+1)%c],s=i.intersectLineLine(t,e,r,o),A.appendPoints(s.points);return A.points.length>0&&(A.status="Intersection"),A},e.Intersection.intersectPolygonPolygon=function(t,e){var n,r=new i,o=t.length;for(n=0;n<o;n++){var s=t[n],a=t[(n+1)%o],A=i.intersectLinePolygon(s,a,e);r.appendPoints(A.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,n,r){var o=n.min(r),s=n.max(r),a=new e.Point(s.x,o.y),A=new e.Point(o.x,s.y),c=i.intersectLinePolygon(o,a,t),l=i.intersectLinePolygon(a,s,t),h=i.intersectLinePolygon(s,A,t),u=i.intersectLinePolygon(A,o,t),d=new i;return d.appendPoints(c.points),d.appendPoints(l.points),d.appendPoints(h.points),d.appendPoints(u.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=i,e.Color.prototype={_tryParsingColor:function(t){var e;t in i.colorNameMap&&(t=i.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,i,n){t/=255,i/=255,n/=255;var r,o,s,a=e.util.array.max([t,i,n]),A=e.util.array.min([t,i,n]);if(s=(a+A)/2,a===A)r=o=0;else{var c=a-A;switch(o=s>.5?c/(2-a-A):c/(a+A),a){case t:r=(i-n)/c+(i<n?6:0);break;case i:r=(n-t)/c+2;break;case n:r=(t-i)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=1===(t=n[0].toString(16)).length?"0"+t:t,e=1===(e=n[1].toString(16)).length?"0"+e:e,i=1===(i=n[2].toString(16)).length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof i||(t=new i(t));var e,n=[],r=this.getAlpha(),o=this.getSource(),s=t.getSource();for(e=0;e<3;e++)n.push(Math.round(.5*o[e]+.5*s[e]));return n[3]=r,this.setSource(n),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return i.fromSource(i.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(i.reRGBa);if(e){var n=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=i.fromRgb,e.Color.fromHsl=function(t){return i.fromSource(i.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(i.reHSLa);if(e){var r,o,s,a=(parseFloat(e[1])%360+360)%360/360,A=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===A)r=o=s=c;else{var l=c<=.5?c*(A+1):c+A-c*A,h=2*c-l;r=n(h,l,a+1/3),o=n(h,l,a),s=n(h,l,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=i.fromHsl,e.Color.fromHex=function(t){return i.fromSource(i.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(i.reHex)){var e=t.slice(t.indexOf("#")+1),n=3===e.length||4===e.length,r=8===e.length||4===e.length,o=n?e.charAt(0)+e.charAt(0):e.substring(0,2),s=n?e.charAt(1)+e.charAt(1):e.substring(2,4),a=n?e.charAt(2)+e.charAt(2):e.substring(4,6),A=r?n?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(s,16),parseInt(a,16),parseFloat((parseInt(A,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new i;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],r={},o="left",s="top",a="right",A="bottom",c="center",l={top:A,bottom:s,left:a,right:o,center:c},h=e.util.radiansToDegrees,u=Math.sign||function(t){return(t>0)-(t<0)||+t};function d(t,e){var i=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(i%360/45)}function f(t,i){var n=i.transform.target,r=n.canvas,o=e.util.object.clone(i);o.target=n,r&&r.fire("object:"+t,o),n.fire(t,i)}function g(t,e){var i=e.canvas,n=t[i.uniScaleKey];return i.uniformScaling&&!n||!i.uniformScaling&&n}function p(t){return t.originX===c&&t.originY===c}function m(t,e,i){var n=t.lockScalingX,r=t.lockScalingY;return!((!n||!r)&&(e||!n&&!r||!i)&&(!n||"x"!==e)&&(!r||"y"!==e))}function v(t,e,i,n){return{e:t,transform:e,pointer:{x:i,y:n}}}function y(t){return function(e,i,n,r){var o=i.target,s=o.getCenterPoint(),a=o.translateToOriginPoint(s,i.originX,i.originY),A=t(e,i,n,r);return o.setPositionByOrigin(a,i.originX,i.originY),A}}function w(t,e){return function(i,n,r,o){var s=e(i,n,r,o);return s&&f(t,v(i,n,r,o)),s}}function C(t,i,n,r,o){var s=t.target,a=s.controls[t.corner],A=s.canvas.getZoom(),c=s.padding/A,l=s.toLocalPoint(new e.Point(r,o),i,n);return l.x>=c&&(l.x-=c),l.x<=-c&&(l.x+=c),l.y>=c&&(l.y-=c),l.y<=c&&(l.y+=c),l.x-=a.offsetX,l.y-=a.offsetY,l}function b(t){return t.flipX!==t.flipY}function B(t,e,i,n,r){if(0!==t[e]){var o=r/t._getTransformedDimensions()[n]*t[i];t.set(i,o)}}function x(t,e,i,n){var r,c=e.target,l=c._getTransformedDimensions(0,c.skewY),u=C(e,e.originX,e.originY,i,n),d=Math.abs(2*u.x)-l.x,f=c.skewX;d<2?r=0:(r=h(Math.atan2(d/c.scaleX,l.y/c.scaleY)),e.originX===o&&e.originY===A&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),b(c)&&(r=-r));var g=f!==r;if(g){var p=c._getTransformedDimensions().y;c.set("skewX",r),B(c,"skewY","scaleY","y",p)}return g}function _(t,e,i,n){var r,c=e.target,l=c._getTransformedDimensions(c.skewX,0),u=C(e,e.originX,e.originY,i,n),d=Math.abs(2*u.y)-l.y,f=c.skewY;d<2?r=0:(r=h(Math.atan2(d/c.scaleY,l.x/c.scaleX)),e.originX===o&&e.originY===A&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),b(c)&&(r=-r));var g=f!==r;if(g){var p=c._getTransformedDimensions().x;c.set("skewY",r),B(c,"skewX","scaleX","x",p)}return g}function S(t,e,i,n,r){r=r||{};var o,s,a,A,c,h,d=e.target,f=d.lockScalingX,v=d.lockScalingY,y=r.by,w=g(t,d),b=m(d,y,w),B=e.gestureScale;if(b)return!1;if(B)s=e.scaleX*B,a=e.scaleY*B;else{if(o=C(e,e.originX,e.originY,i,n),c="y"!==y?u(o.x):1,h="x"!==y?u(o.y):1,e.signX||(e.signX=c),e.signY||(e.signY=h),d.lockScalingFlip&&(e.signX!==c||e.signY!==h))return!1;if(A=d._getTransformedDimensions(),w&&!y){var x=Math.abs(o.x)+Math.abs(o.y),_=e.original,S=x/(Math.abs(A.x*_.scaleX/d.scaleX)+Math.abs(A.y*_.scaleY/d.scaleY));s=_.scaleX*S,a=_.scaleY*S}else s=Math.abs(o.x*d.scaleX/A.x),a=Math.abs(o.y*d.scaleY/A.y);p(e)&&(s*=2,a*=2),e.signX!==c&&"y"!==y&&(e.originX=l[e.originX],s*=-1,e.signX=c),e.signY!==h&&"x"!==y&&(e.originY=l[e.originY],a*=-1,e.signY=h)}var I=d.scaleX,M=d.scaleY;return y?("x"===y&&d.set("scaleX",s),"y"===y&&d.set("scaleY",a)):(!f&&d.set("scaleX",s),!v&&d.set("scaleY",a)),I!==d.scaleX||M!==d.scaleY}r.scaleCursorStyleHandler=function(t,e,n){var r=g(t,n),o="";if(0!==e.x&&0===e.y?o="x":0===e.x&&0!==e.y&&(o="y"),m(n,o,r))return"not-allowed";var s=d(n,e);return i[s]+"-resize"},r.skewCursorStyleHandler=function(t,e,i){var r="not-allowed";if(0!==e.x&&i.lockSkewingY)return r;if(0!==e.y&&i.lockSkewingX)return r;var o=d(i,e)%4;return n[o]+"-resize"},r.scaleSkewCursorStyleHandler=function(t,e,i){return t[i.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,i):r.scaleCursorStyleHandler(t,e,i)},r.rotationWithSnapping=w("rotating",y((function(t,e,i,n){var r=e,o=r.target,s=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var a,A=Math.atan2(r.ey-s.y,r.ex-s.x),c=Math.atan2(n-s.y,i-s.x),l=h(c-A+r.theta);if(o.snapAngle>0){var u=o.snapAngle,d=o.snapThreshold||u,f=Math.ceil(l/u)*u,g=Math.floor(l/u)*u;Math.abs(l-g)<d?l=g:Math.abs(l-f)<d&&(l=f)}return l<0&&(l=360+l),l%=360,a=o.angle!==l,o.angle=l,a}))),r.scalingEqually=w("scaling",y((function(t,e,i,n){return S(t,e,i,n)}))),r.scalingX=w("scaling",y((function(t,e,i,n){return S(t,e,i,n,{by:"x"})}))),r.scalingY=w("scaling",y((function(t,e,i,n){return S(t,e,i,n,{by:"y"})}))),r.scalingYOrSkewingX=function(t,e,i,n){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,i,n):r.scalingY(t,e,i,n)},r.scalingXOrSkewingY=function(t,e,i,n){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,i,n):r.scalingX(t,e,i,n)},r.changeWidth=w("resizing",y((function(t,e,i,n){var r=e.target,o=C(e,e.originX,e.originY,i,n),s=r.strokeWidth/(r.strokeUniform?r.scaleX:1),a=p(e)?2:1,A=r.width,c=Math.abs(o.x*a/r.scaleX)-s;return r.set("width",Math.max(c,0)),A!==c}))),r.skewHandlerX=function(t,e,i,n){var r,A=e.target,l=A.skewX,h=e.originY;return!A.lockSkewingX&&(0===l?r=C(e,c,c,i,n).x>0?o:a:(l>0&&(r=h===s?o:a),l<0&&(r=h===s?a:o),b(A)&&(r=r===o?a:o)),e.originX=r,w("skewing",y(x))(t,e,i,n))},r.skewHandlerY=function(t,e,i,n){var r,a=e.target,l=a.skewY,h=e.originX;return!a.lockSkewingY&&(0===l?r=C(e,c,c,i,n).y>0?s:A:(l>0&&(r=h===o?s:A),l<0&&(r=h===o?A:s),b(a)&&(r=r===s?A:s)),e.originY=r,w("skewing",y(_))(t,e,i,n))},r.dragHandler=function(t,e,i,n){var r=e.target,o=i-e.offsetX,s=n-e.offsetY,a=!r.get("lockMovementX")&&r.left!==o,A=!r.get("lockMovementY")&&r.top!==s;return a&&r.set("left",o),A&&r.set("top",s),(a||A)&&f("moving",v(t,e,i,n)),a||A},r.scaleOrSkewActionName=function(t,e,i){var n=t[i.canvas.altActionKey];return 0===e.x?n?"skewX":"scaleY":0===e.y?n?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(t,e,i){return i.lockRotation?"not-allowed":e.cursorStyle},r.fireEvent=f,r.wrapWithFixedAnchor=y,r.wrapWithFireEvent=w,r.getLocalPoint=C,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.degreesToRadians,n=e.controlsUtils;n.renderCircleControl=function(t,e,i,n,r){n=n||{};var o,s=this.sizeX||n.cornerSize||r.cornerSize,a=this.sizeY||n.cornerSize||r.cornerSize,A=void 0!==n.transparentCorners?n.transparentCorners:r.transparentCorners,c=A?"stroke":"fill",l=!A&&(n.cornerStrokeColor||r.cornerStrokeColor),h=e,u=i;t.save(),t.fillStyle=n.cornerColor||r.cornerColor,t.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor,s>a?(o=s,t.scale(1,a/s),u=i*s/a):a>s?(o=a,t.scale(s/a,1),h=e*a/s):o=s,t.lineWidth=1,t.beginPath(),t.arc(h,u,o/2,0,2*Math.PI,!1),t[c](),l&&t.stroke(),t.restore()},n.renderSquareControl=function(t,e,n,r,o){r=r||{};var s=this.sizeX||r.cornerSize||o.cornerSize,a=this.sizeY||r.cornerSize||o.cornerSize,A=void 0!==r.transparentCorners?r.transparentCorners:o.transparentCorners,c=A?"stroke":"fill",l=!A&&(r.cornerStrokeColor||o.cornerStrokeColor),h=s/2,u=a/2;t.save(),t.fillStyle=r.cornerColor||o.cornerColor,t.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,t.lineWidth=1,t.translate(e,n),t.rotate(i(o.angle)),t[c+"Rect"](-h,-u,s,a),l&&t.strokeRect(-h,-u,s,a),t.restore()}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Control=function(t){for(var e in t)this[e]=t[e]},e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var i=t._controlsVisibility;return i&&void 0!==i[e]?i[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,i){return e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},i)},calcCornerCoords:function(t,i,n,r,o){var s,a,A,c,l=o?this.touchSizeX:this.sizeX,h=o?this.touchSizeY:this.sizeY;if(l&&h&&l!==h){var u=Math.atan2(h,l),d=Math.sqrt(l*l+h*h)/2,f=u-e.util.degreesToRadians(t),g=Math.PI/2-u-e.util.degreesToRadians(t);s=d*e.util.cos(f),a=d*e.util.sin(f),A=d*e.util.cos(g),c=d*e.util.sin(g)}else d=.7071067812*(l&&h?l:i),f=e.util.degreesToRadians(45-t),s=A=d*e.util.cos(f),a=c=d*e.util.sin(f);return{tl:{x:n-c,y:r-A},tr:{x:n+s,y:r-a},bl:{x:n-s,y:r+a},br:{x:n+c,y:r+A}}},render:function(t,i,n,r,o){"circle"===((r=r||{}).cornerStyle||o.cornerStyle)?e.controlsUtils.renderCircleControl.call(this,t,i,n,r,o):e.controlsUtils.renderSquareControl.call(this,t,i,n,r,o)}}}(e),function(){function t(t,e){var i,n,r,o,s=t.getAttribute("style"),a=t.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a>1?1:a,s){var A=s.split(/\s*;\s*/);for(""===A[A.length-1]&&A.pop(),o=A.length;o--;){var c=A[o].split(/\s*:\s*/),l=c[0].trim(),h=c[1].trim();"stop-color"===l?i=h:"stop-opacity"===l&&(r=h)}}return i||(i=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),n=(i=new _.Color(i)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=n*e,{offset:a,color:i.toRgb(),opacity:r}}var e=_.util.object.clone;_.Gradient=_.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,i=this;Object.keys(t).forEach((function(e){i[e]=t[e]})),this.id?this.id+="_"+_.Object.__uid++:this.id=_.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new _.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return _.util.populateWithProperties(this,e,t),e},toSVG:function(t,i){var n,r,o,s,a=e(this.coords,!0),A=(i=i||{},e(this.colorStops,!0)),c=a.r1>a.r2,l=this.gradientTransform?this.gradientTransform.concat():_.iMatrix.concat(),h=-this.offsetX,u=-this.offsetY,d=!!i.additionalTransform,f="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(A.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===f?(h/=t.width,u/=t.height):(h+=t.width/2,u+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(h-=t.pathOffset.x,u-=t.pathOffset.y),l[4]-=h,l[5]-=u,s='id="SVGID_'+this.id+'" gradientUnits="'+f+'"',s+=' gradientTransform="'+(d?i.additionalTransform+" ":"")+_.util.matrixToSVG(l)+'" ',"linear"===this.type?o=["<linearGradient ",s,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",s,' cx="',c?a.x1:a.x2,'" cy="',c?a.y1:a.y2,'" r="',c?a.r1:a.r2,'" fx="',c?a.x2:a.x1,'" fy="',c?a.y2:a.y1,'">\n']),"radial"===this.type){if(c)for((A=A.concat()).reverse(),n=0,r=A.length;n<r;n++)A[n].offset=1-A[n].offset;var g=Math.min(a.r1,a.r2);if(g>0){var p=g/Math.max(a.r1,a.r2);for(n=0,r=A.length;n<r;n++)A[n].offset+=p*(1-A[n].offset)}}for(n=0,r=A.length;n<r;n++){var m=A[n];o.push("<stop ",'offset="',100*m.offset+"%",'" style="stop-color:',m.color,void 0!==m.opacity?";stop-opacity: "+m.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(t){var e,i,n,r=_.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),i=0,n=this.colorStops.length;i<n;i++){var o=this.colorStops[i].color,s=this.colorStops[i].opacity,a=this.colorStops[i].offset;void 0!==s&&(o=new _.Color(o).setAlpha(s).toRgba()),e.addColorStop(a,o)}return e}}}),_.util.object.extend(_.Gradient,{fromElement:function(e,i,n,r){var o=parseFloat(n)/(/%$/.test(n)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var s,a,A,c,l=e.getElementsByTagName("stop"),h="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",u=e.getAttribute("gradientTransform")||"",d=[],f=0,g=0;for("linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(s="linear",a=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e)):(s="radial",a=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),A=l.length;A--;)d.push(t(l[A],o));return c=_.parseTransformAttribute(u),function(t,e,i,n){var r,o;Object.keys(e).forEach((function(t){"Infinity"===(r=e[t])?o=1:"-Infinity"===r?o=0:(o=parseFloat(e[t],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===n&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=i.viewBoxWidth||i.width),"y1"!==t&&"y2"!==t||(o*=i.viewBoxHeight||i.height)))),e[t]=o}))}(0,a,r,h),"pixels"===h&&(f=-i.left,g=-i.top),new _.Gradient({id:e.getAttribute("id"),type:s,coords:a,colorStops:d,gradientUnits:h,gradientTransform:c,offsetX:f,offsetY:g})}})}(),function(){"use strict";var t=_.util.toFixed;_.Pattern=_.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=_.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else{var i=this;this.source=_.util.createImage(),_.util.loadImage(t.source,(function(t,n){i.source=t,e&&e(i,n)}),null,this.crossOrigin)}},toObject:function(e){var i,n,r=_.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?i=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),n={type:"pattern",source:i,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},_.util.populateWithProperties(this,n,e),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,o&&(n+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,r&&(i+=Math.abs(r))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var i in"string"==typeof t&&(t=this._parseShadow(t)),t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,r=40,o=e.Object.NUM_FRACTION_DIGITS,s=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(n=100*i((Math.abs(s.x)+this.blur)/t.width,o)+20,r=100*i((Math.abs(s.y)+this.blur)/t.height,o)+20),t.flipX&&(s.x*=-1),t.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(s.x,o)+'" dy="'+i(s.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==i[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(_.StaticCanvas)_.warn("fabric.StaticCanvas is already defined.");else{var t=_.util.object.extend,e=_.util.getElementOffset,i=_.util.removeFromArray,n=_.util.toFixed,r=_.util.transformPoint,o=_.util.invertTransform,s=_.util.getNodeCanvas,a=_.util.createCanvasElement,A=new Error("Could not initialize `canvas` element");_.StaticCanvas=_.util.createClass(_.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:_.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==_.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?_.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=_.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,i){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?_.util.loadImage(e,(function(e,r){if(e){var o=new _.Image(e,n);this[t]=o,o.canvas=this}i&&i(e,r)}),this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,e&&(e.canvas=this),i&&i(e,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=a();if(!t)throw A;if(t.style||(t.style={}),void 0===t.getContext)throw A;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=_.util.getById(t)||this._createCanvasElement(),_.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var n in e=e||{},t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(n,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,n,r=this._activeObject,o=this.backgroundImage,s=this.overlayImage;for(this.viewportTransform=t,i=0,n=this._objects.length;i<n;i++)(e=this._objects[i]).group||e.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),s&&s.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=r(t,o(this.viewportTransform)),n[0]=e,n[3]=e;var s=r(t,n);return n[4]+=i.x-s.x,n[5]+=i.y-s.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new _.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new _.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=_.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,n=o(this.viewportTransform);return t.tl=r({x:0,y:0},n),t.br=r({x:e,y:i},n),t.tr=new _.Point(t.br.x,t.tl.y),t.bl=new _.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(_.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,n=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),_.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),n&&(n.canvas=this,n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var i,n;for(i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"],n=this[e+"Image"],r=this.viewportTransform,o=this[e+"Vpt"];if(i||n){if(i){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var s=i.gradientTransform||i.patternTransform;s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.fill(),t.restore()}n&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),n.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new _.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new _.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new _.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new _.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new _.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return r({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n=this.clipPath,r={version:_.version,objects:this._toObjects(e,i)};return n&&!n.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,e,i)),t(r,this.__serializeBgOverlay(e,i)),_.util.populateWithProperties(this,r,i),r},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(i){return this._toObject(i,t,e)}),this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),r},__serializeBgOverlay:function(t,e){var i={},n=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,s=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(i.background=o.toObject(e)):o&&(i.background=o),s&&s.toObject?s.excludeFromExport||(i.overlay=s.toObject(e)):s&&(i.overlay=s),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,t,e)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,o=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',a=_.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,s='viewBox="'+n(-i[4]/i[0],a)+" "+n(-i[5]/i[3],a)+" "+n(this.width/i[0],a)+" "+n(this.height/i[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",_.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+_.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map((function(e){var i=t[e+"Color"];if(i&&i.toLive){var n=t[e+"Vpt"],r=t.viewportTransform,o={width:t.width/(n?r[0]:1),height:t.height/(n?r[3]:1)};return i.toSVG(o,{additionalTransform:n?_.util.matrixToSVG(r):""})}})).join("")},createSVGFontFacesMarkup:function(){var t,e,i,n,r,o,s,a,A="",c={},l=_.fontPaths,h=[];for(this._objects.forEach((function t(e){h.push(e),e._objects&&e._objects.forEach(t)})),s=0,a=h.length;s<a;s++)if(e=(t=h[s]).fontFamily,-1!==t.type.indexOf("text")&&!c[e]&&l[e]&&(c[e]=!0,t.styles))for(r in i=t.styles)for(o in n=i[r])!c[e=n[o].fontFamily]&&l[e]&&(c[e]=!0);for(var u in c)A+=["\t\t@font-face {\n","\t\t\tfont-family: '",u,"';\n","\t\t\tsrc: url('",l[u],"');\n","\t\t}\n"].join("");return A&&(A=['\t<style type="text/css">',"<![CDATA[\n",A,"]]>","</style>\n"].join("")),A},_setSVGObjects:function(t,e){var i,n,r,o=this._objects;for(n=0,r=o.length;n<r;n++)(i=o[n]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e+"Color"],n=this.viewportTransform,r=this.width,o=this.height;if(i)if(i.toLive){var s=i.repeat,a=_.util.invertTransform(n),A=this[e+"Vpt"]?_.util.matrixToSVG(a):"";t.push('<rect transform="'+A+" translate(",r/2,",",o/2,')"',' x="',i.offsetX-r/2,'" y="',i.offsetY-o/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?i.source.width:r,'" height="',"repeat-x"===s||"no-repeat"===s?i.source.height:o,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(e=(r=o._objects).length;e--;)n=r[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,n,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=0;e<r.length;e++)n=r[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var n,r,o,s,a,A=this._activeObject,c=0;if(t===A&&"activeSelection"===t.type)for(a=A._objects,n=0;n<a.length;n++)r=a[n],(o=this._objects.indexOf(r))>0+c&&(s=o-1,i(this._objects,r),this._objects.splice(s,0,r)),c++;else 0!==(o=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,o,e),i(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var n,r;if(i){for(n=e,r=e-1;r>=0;--r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,r,o,s,a,A=this._activeObject,c=0;if(t===A&&"activeSelection"===t.type)for(n=(a=A._objects).length;n--;)r=a[n],(o=this._objects.indexOf(r))<this._objects.length-1-c&&(s=o+1,i(this._objects,r),this._objects.splice(s,0,r)),c++;else(o=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,o,e),i(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var n,r,o;if(i){for(n=e,r=e+1,o=this._objects.length;r<o;++r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(_.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),_.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(_.StaticCanvas.prototype,_.Observable),t(_.StaticCanvas.prototype,_.Collection),t(_.StaticCanvas.prototype,_.DataURLExporter),t(_.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=a();if(!e||!e.getContext)return null;var i=e.getContext("2d");return i&&"setLineDash"===t?void 0!==i.setLineDash:null}}),_.StaticCanvas.prototype.toJSON=_.StaticCanvas.prototype.toObject,_.isLikelyNode&&(_.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},_.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),_.BaseBrush=_.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,i=t.contextTop,n=t.getZoom();t&&t._isRetinaScaling()&&(n*=_.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*n,i.shadowOffsetX=e.offsetX*n,i.shadowOffsetY=e.offsetY*n}},needsFullRender:function(){return new _.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),_.PencilBrush=_.util.createClass(_.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,i){var n=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,n.x,n.y),n},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,n=i.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,i[n-2],i[n-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new _.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new _.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,n=this._points[0],r=this._points[1];if(this._saveAndTransform(i),i.beginPath(),2===this._points.length&&n.x===r.x&&n.y===r.y){var o=this.width/1e3;n=new _.Point(n.x,n.y),r=new _.Point(r.x,r.y),n.x-=o,r.x+=o}for(i.moveTo(n.x,n.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(i,n,r),n=this._points[t],r=this._points[t+1];i.lineTo(n.x,n.y),i.stroke(),i.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return _.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return"M 0 0 Q 0 0 0 0 L 0 0"===_.util.joinPath(t)},createPath:function(t){var e=new _.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new _.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var i,n=this.canvas.getZoom(),r=Math.pow(e/n,2),o=t.length-1,s=t[0],a=[s];for(i=1;i<o-1;i++)Math.pow(s.x-t[i].x,2)+Math.pow(s.y-t[i].y,2)>=r&&(s=t[i],a.push(s));return a.push(t[o]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(t))this.canvas.requestRenderAll();else{var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}}),_.CircleBrush=_.util.createClass(_.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(i),t=0,e=n.length;t<e;t++)this.dot(i,n[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var n=[];for(t=0,e=this.points.length;t<e;t++){var r=this.points[t],o=new _.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new _.Shadow(this.shadow)),n.push(o)}var s=new _.Group(n);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var e=new _.Point(t.x,t.y),i=_.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new _.Color(this.color).setAlpha(_.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),_.SprayBrush=_.util.createClass(_.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,s=r.length;o<s;o++){var a=new _.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var A=new _.Group(e);this.shadow&&A.set("shadow",new _.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:A}),this.canvas.add(A),this.canvas.fire("path:created",{path:A}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,i,n,r={};for(i=0,n=t.length;i<n;i++)r[e=t[i].left+""+t[i].top]||(r[e]=t[i]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,i,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,i=t.length;e<i;e++){var r=t[e];void 0!==r.opacity&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,i,n,r,o=this.width/2;for(r=0;r<this.density;r++){e=_.util.getRandomInt(t.x-o,t.x+o),i=_.util.getRandomInt(t.y-o,t.y+o),n=this.dotWidthVariance?_.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new _.Point(e,i);s.width=n,this.randomOpacity&&(s.opacity=_.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),_.PatternBrush=_.util.createClass(_.PencilBrush,{getPatternSrc:function(){var t=_.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new _.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=_.util.getPointer,e=_.util.degreesToRadians,i=_.util.isTouchEvent;for(var n in _.Canvas=_.util.createClass(_.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=_.PencilBrush&&new _.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){e=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)t=this._objects[r],-1===n.indexOf(t)?e.push(t):i.push(t);n.length>1&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),n=_.util.invertTransform(i),r=this.restorePointerVpt(e);return _.util.transformPoint(r,n)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var n=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+n.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+n.y*t.zoomY,0);return _.util.isTransparent(t._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var s=this.contextCache,a=t.selectionBackgroundColor,A=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(A[0],A[1],A[2],A[3],A[4],A[5]),t.render(s),s.restore(),t.selectionBackgroundColor=a,_.util.isTransparent(s,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),n=this._activeObject;return!e||e&&n&&i.length>1&&-1===i.indexOf(e)&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t,e,i){var n;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?n=this.centeredScaling||t.centeredScaling:"rotate"===e&&(n=this.centeredRotation||t.centeredRotation),n?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,n){if(!e||!t)return"drag";var r=n.controls[e];return r.getActionName(i,r,n)},_setupCurrentTransform:function(t,i,n){if(i){var r=this.getPointer(t),o=i.__corner,s=i.controls[o],a=n&&o?s.getActionHandler(t,i,s):_.controlsUtils.dragHandler,A=this._getActionFromCorner(n,o,t,i),c=this._getOriginFromCorner(i,o),l=t[this.centeredKey],h={target:i,action:A,actionHandler:a,corner:o,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:c.x,originY:c.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:e(i.angle),width:i.width*i.scaleX,shiftKey:t.shiftKey,altKey:l,original:_.util.saveObjectTransform(i)};this._shouldCenterTransform(i,A,l)&&(h.originX="center",h.originY="center"),h.original.originX=c.x,h.original.originY=c.y,this._currentTransform=h,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new _.Point(e.ex,e.ey),n=_.util.transformPoint(i,this.viewportTransform),r=new _.Point(e.ex+e.left,e.ey+e.top),o=_.util.transformPoint(r,this.viewportTransform),s=Math.min(n.x,o.x),a=Math.min(n.y,o.y),A=Math.max(n.x,o.x),c=Math.max(n.y,o.y),l=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(s,a,A-s,c-a)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,s+=l,a+=l,A-=l,c-=l,_.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(s,a,A-s,c-a))},findTarget:function(t,e){if(!this.skipTargetFind){var n,r,o=this.getPointer(t,!0),s=this._activeObject,a=this.getActiveObjects(),A=i(t),c=a.length>1&&!e||1===a.length;if(this.targets=[],c&&s._findTargetCorner(o,A))return s;if(a.length>1&&!e&&s===this._searchPossibleTargets([s],o))return s;if(1===a.length&&s===this._searchPossibleTargets([s],o)){if(!this.preserveObjectStacking)return s;n=s,r=this.targets,this.targets=[]}var l=this._searchPossibleTargets(this._objects,o);return t[this.altSelectionKey]&&l&&n&&l!==n&&(l=n,this.targets=r),l}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,i.x,i.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,n,r=t.length;r--;){var o=t[r],s=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(s,o,e)){(i=t[r]).subTargetCheck&&i instanceof _.Group&&(n=this._searchPossibleTargets(i._objects,e))&&this.targets.push(n);break}}return i},restorePointerVpt:function(t){return _.util.transformPoint(t,_.util.invertTransform(this.viewportTransform))},getPointer:function(e,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var n,r=t(e),o=this.upperCanvasEl,s=o.getBoundingClientRect(),a=s.width||0,A=s.height||0;a&&A||("top"in s&&"bottom"in s&&(A=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,i||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),n=0===a||0===A?{width:1,height:1}:{width:o.width/a,height:o.height/A},{x:r.x*n.width,y:r.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),_.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=_.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),_.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),_.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;_.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,_.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,n=this.getActiveObjects(),r=[],o=[];t.forEach((function(t){-1===n.indexOf(t)&&(i=!0,t.fire("deselected",{e,target:t}),o.push(t))})),n.forEach((function(n){-1===t.indexOf(n)&&(i=!0,n.fire("selected",{e,target:n}),r.push(n))})),t.length>0&&n.length>0?i&&this.fire("selection:updated",{e,selected:r,deselected:o,updated:r[0]||o[0],target:this._activeObject}):n.length>0?this.fire("selection:created",{e,selected:r,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){_.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,_.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(i){e[i]=t[i]})),_.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),_.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),_.StaticCanvas)"prototype"!==n&&(_.Canvas[n]=_.StaticCanvas[n])}(),function(){var t=_.util.addListener,e=_.util.removeListener,i={passive:!1};function n(t,e){return t.button&&t.button===e-1}_.util.object.extend(_.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var n=this.upperCanvasEl,r=this._getEventPrefix();t(_.window,"resize",this._onResize),t(n,r+"down",this._onMouseDown),t(n,r+"move",this._onMouseMove,i),t(n,r+"out",this._onMouseOut),t(n,r+"enter",this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,i),"undefined"!=typeof eventjs&&e in eventjs&&(eventjs[e](n,"gesture",this._onGesture),eventjs[e](n,"drag",this._onDrag),eventjs[e](n,"orientation",this._onOrientationChange),eventjs[e](n,"shake",this._onShake),eventjs[e](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(_.document,t+"up",this._onMouseUp),e(_.document,"touchend",this._onTouchEnd,i),e(_.document,t+"move",this._onMouseMove,i),e(_.document,"touchmove",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach((function(n){i.fire("mouse:out",{target:e,e:t}),n&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();t(_.document,"touchend",this._onTouchEnd,i),t(_.document,"touchmove",this._onMouseMove,i),e(r,o+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(r,o+"move",this._onMouseMove,i),t(_.document,o+"up",this._onMouseUp),t(_.document,o+"move",this._onMouseMove,i)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();e(_.document,"touchend",this._onTouchEnd,i),e(_.document,"touchmove",this._onMouseMove,i);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(n)&&(e(_.document,o+"up",this._onMouseUp),e(_.document,o+"move",this._onMouseMove,i),t(r,o+"move",this._onMouseMove,i))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,i=this._currentTransform,r=this._groupSelector,o=!1,s=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),n(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,s);else{if(n(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,s),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),o=i.actionPerformed),!s){var a=e===this._activeObject;this._maybeGroupObjects(t),o||(o=this._shouldRender(e)||!a&&e===this._activeObject)}if(e){if(e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),o=!0;else{var A=e._findTargetCorner(this.getPointer(t,!0),_.util.isTouchEvent(t)),c=e.controls[A],l=c&&c.getMouseUpHandler(t,e,c);if(l){var h=this.getPointer(t);l(t,i,h.x,h.y)}}e.isMoving=!1}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,s),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),o?this.requestRenderAll():s||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),n=this.targets,r={e,target:i,subTargets:n};if(this.fire(t,r),i&&i.fire(t,r),!n)return i;for(var o=0;o<n.length;o++)n[o].fire(t,r);return i},_handleEvent:function(t,e,i,n){var r=this._target,o=this.targets||[],s={e:t,target:r,subTargets:o,button:i||1,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(s.currentTarget=this.findTarget(t),s.currentSubTargets=this.targets),this.fire("mouse:"+e,s),r&&r.fire("mouse"+e,s);for(var a=0;a<o.length;a++)o[a].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e,i=this._currentTransform,n=i.target,r={e:t,target:n,transform:i,action:i.action};n._scaling&&(n._scaling=!1),n.setCoords(),(i.actionPerformed||this.stateful&&n.hasStateChanged())&&(i.actionPerformed&&(e=this._addEventOptions(r,i),this._fire(e,r)),this._fire("modified",r))},_addEventOptions:function(t,e){var i,n;switch(e.action){case"scaleX":i="scaled",n="x";break;case"scaleY":i="scaled",n="y";break;case"skewX":i="skewed",n="x";break;case"skewY":i="skewed",n="y";break;case"scale":i="scaled",n="equally";break;case"rotate":i="rotated";break;case"drag":i="moved"}return t.by=n,i},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(n(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(n(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var r=this._shouldRender(e),o=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):o&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var s=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var a=e._findTargetCorner(this.getPointer(t,!0),_.util.isTouchEvent(t));if(e.__corner=a,e===this._activeObject&&(a||!o)){this._setupCurrentTransform(t,e,s);var A=e.controls[a],c=(i=this.getPointer(t),A&&A.getMouseDownHandler(t,e,A));c&&c(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,"down"),(r||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var n=this._groupSelector;n?(i=this._absolutePointer,n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:n[s],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:n[s],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var n,r,o,s=i.oldTarget,a=s!==t,A=i.canvasEvtIn,c=i.canvasEvtOut;a&&(n={e,target:t,previousTarget:s},r={e,target:s,nextTarget:t}),o=t&&a,s&&a&&(c&&this.fire(c,r),s.fire(i.evtOut,r)),o&&(A&&this.fire(A,n),t.fire(i.evtIn,n))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var n=i.x,r=i.y,o=e.action,s=!1,a=e.actionHandler;a&&(s=a(t,e,n,r)),"drag"===o&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:_.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){i=t.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(t,e,i){var n=e.controls[t];return n.cursorStyleHandler(i,n,e)}})}(),m=Math.min,v=Math.max,_.util.object.extend(_.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||"activeSelection"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0))&&e.selectable)&&(i&&"activeSelection"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,n=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),n=this._createGroup(t);this._hoveredTarget=n,this._setActiveObject(n,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,i=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new _.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(t){var e,i=this._collectObjects(t);1===i.length?this.setActiveObject(i[0],t):i.length>1&&(e=new _.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(t){for(var e,i=[],n=this._groupSelector.ex,r=this._groupSelector.ey,o=n+this._groupSelector.left,s=r+this._groupSelector.top,a=new _.Point(m(n,o),m(r,s)),A=new _.Point(v(n,o),v(r,s)),c=!this.selectionFullyContained,l=n===o&&r===s,h=this._objects.length;h--&&!((e=this._objects[h])&&e.selectable&&e.visible&&(c&&e.intersectsWithRect(a,A,!0)||e.isContainedWithinRect(a,A,!0)||c&&e.containsPoint(a,null,!0)||c&&e.containsPoint(A,null,!0))&&(i.push(e),l)););return i.length>1&&(i=i.filter((function(e){return!e.onSelect({e:t})}))),i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}}),_.util.object.extend(_.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(n,t);return _.util.toDataURL(r,e,i)},toCanvasElement:function(t,e){t=t||1;var i=((e=e||{}).width||this.width)*t,n=(e.height||this.height)*t,r=this.getZoom(),o=this.width,s=this.height,a=r*t,A=this.viewportTransform,c=(A[4]-(e.left||0))*t,l=(A[5]-(e.top||0))*t,h=this.interactive,u=[a,0,0,a,c,l],d=this.enableRetinaScaling,f=_.util.createCanvasElement(),g=this.contextTop;return f.width=i,f.height=n,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=u,this.width=i,this.height=n,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),this._objects),this.viewportTransform=A,this.width=o,this.height=s,this.calcViewportBoundaries(),this.interactive=h,this.enableRetinaScaling=d,this.contextTop=g,f}}),_.util.object.extend(_.StaticCanvas.prototype,{loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):_.util.object.clone(t),r=this,o=n.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete n.clipPath,this._enlivenObjects(n.objects,(function(t){r.clear(),r._setBgOverlay(n,(function(){o?r._enlivenObjects([o],(function(i){r.clipPath=i[0],r.__setupCanvas.call(r,n,t,s,e)})):r.__setupCanvas.call(r,n,t,s,e)}))}),i),this}},__setupCanvas:function(t,e,i,n){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),n&&n()},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,n),this.__setBgOverlay("overlayImage",t.overlayImage,i,n),this.__setBgOverlay("backgroundColor",t.background,i,n),this.__setBgOverlay("overlayColor",t.overlay,i,n)}else e&&e()},__setBgOverlay:function(t,e,i,n){var r=this;if(!e)return i[t]=!0,void(n&&n());"backgroundImage"===t||"overlayImage"===t?_.util.enlivenObjects([e],(function(e){r[t]=e[0],i[t]=!0,n&&n()})):this["set"+_.util.string.capitalize(t,!0)](e,(function(){i[t]=!0,n&&n()}))},_enlivenObjects:function(t,e,i){t&&0!==t.length?_.util.enlivenObjects(t,(function(t){e&&e(t)}),null,i):e&&e([])},_toDataURL:function(t,e){this.clone((function(i){e(i.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,i){this.clone((function(n){i(n.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(i,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=_.util.createCanvasElement();e.width=this.width,e.height=this.height;var i=new _.Canvas(e);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),t&&t(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.util.string.capitalize,s=e.util.degreesToRadians,a=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var i=e.perfLimitSizeTotal,n=t.width,r=t.height,o=e.maxCacheSideLimit,s=e.minCacheSideLimit;if(n<=o&&r<=o&&n*r<=i)return n<s&&(t.width=s),r<s&&(t.height=s),t;var a=n/r,A=e.util.limitDimsByArea(a,i),c=e.util.capValue,l=c(s,A.x,o),h=c(s,A.y,o);return n>l&&(t.zoomX/=n/l,t.width=l,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,n=e.y*t.scaleY/this.scaleY;return{width:i+2,height:n+2,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:n}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var i=t._currentTransform.target,n=t._currentTransform.action;if(this===i&&n.slice&&"scale"===n.slice(0,5))return!1}var r,o,s=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),A=e.minCacheSideLimit,c=a.width,l=a.height,h=a.zoomX,u=a.zoomY,d=c!==this.cacheWidth||l!==this.cacheHeight,f=this.zoomX!==h||this.zoomY!==u,g=d||f,p=0,m=0,v=!1;if(d){var y=this._cacheCanvas.width,w=this._cacheCanvas.height,C=c>y||l>w;v=C||(c<.9*y||l<.9*w)&&y>A&&w>A,C&&!a.capped&&(c>A||l>A)&&(p=.1*c,m=.1*l)}return this instanceof e.Text&&this.path&&(g=!0,v=!0,p+=this.getHeightOfLine(0)*this.zoomX,m+=this.getHeightOfLine(0)*this.zoomY),!!g&&(v?(s.width=Math.ceil(c+p),s.height=Math.ceil(l+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),r=a.x/2,o=a.y/2,this.cacheTranslationX=Math.round(s.width/2-r)+r,this.cacheTranslationY=Math.round(s.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,u),this.zoomX=h,this.zoomY=u,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,i),skewY:r(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(t),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach((function(e){"left"!==e&&"top"!==e&&(t[e]===i[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e])&&0===t[e].length&&0===i[e].length&&delete t[e])})),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,i=t.scaleY;if(this.canvas){var n=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=n*r,i*=n*r}return{scaleX:e,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,i){var n="scaleX"===t||"scaleY"===t,r=this[t]!==i,o=!1;return n&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var i=this.clipPath;if(t.save(),i.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",i.absolutePositioned){var n=e.util.invertTransform(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,n=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t),this.fill=i,this.stroke=n},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,i){var n,r,o,a=this.getViewportTransform(),A=this.calcTransformMatrix();r=void 0!==(i=i||{}).hasBorders?i.hasBorders:this.hasBorders,o=void 0!==i.hasControls?i.hasControls:this.hasControls,A=e.util.multiplyTransformMatrices(a,A),n=e.util.qrDecompose(A),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),t.rotate(s(n.angle)),i.forActiveSelection||this.group?r&&this.drawBordersInGroup(t,n,i):r&&this.drawBorders(t,i),o&&this.drawControls(t,i),t.restore()},_setShadow:function(t){if(this.shadow){var i,n=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,s=r&&r.viewportTransform[3]||1;i=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=e.devicePixelRatio,s*=e.devicePixelRatio),t.shadowColor=n.color,t.shadowBlur=n.blur*e.browserShadowBlurConstant*(o+s)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=n.offsetX*o*i.scaleX,t.shadowOffsetY=n.offsetY*s*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,n,r):t.transform(1,0,0,1,n,r),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,i){var n,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),a=r.x/this.scaleX/s,A=r.y/this.scaleY/s;o.width=a,o.height=A,(n=o.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(a,0),n.lineTo(a,A),n.lineTo(0,A),n.closePath(),n.translate(a/2,A/2),n.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(n,i),n.fillStyle=i.toLive(t),n.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=n.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=e.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,i.x+=t.offsetLeft,i.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(i,"center","center")},clone:function(t,i){var n=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(n,t):e.Object._fromObject("Object",n,t)},cloneAsImage:function(t,i){var n=this.toCanvasElement(i);return t&&t(new e.Image(n)),this},toCanvasElement:function(t){t||(t={});var i=e.util,n=i.saveObjectTransform(this),r=this.group,o=this.shadow,s=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var A,c,l,h,u=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),f=this.shadow,g={x:0,y:0};f&&(c=f.blur,A=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(s(f.offsetX)+c)*s(A.scaleX),g.y=2*Math.round(s(f.offsetY)+c)*s(A.scaleY)),l=d.width+g.x,h=d.height+g.y,u.width=Math.ceil(l),u.height=Math.ceil(h);var p=new e.StaticCanvas(u,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(p.width/2,p.height/2),"center","center");var m=this.canvas;p.add(this);var v=p.toCanvasElement(a||1,t);return this.shadow=o,this.set("canvas",m),r&&(this.group=r),this.set(n).setCoords(),p._objects=[],p.dispose(),p=null,v},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),r=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,r,s(-this.angle))),{x:n.x-r.x,y:n.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,r,o){var s=e[t];i=n(i,!0),e.util.enlivenPatterns([i.fill,i.stroke],(function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]),e.util.enlivenObjects([i.clipPath],(function(t){i.clipPath=t[0];var e=o?new s(i[o],i):new s(i);r&&r(e)}))}))},e.Object.__uid=0)}(e),y=_.util.degreesToRadians,w={left:-.5,center:0,right:.5},C={top:-.5,center:0,bottom:.5},_.util.object.extend(_.Object.prototype,{translateToGivenOrigin:function(t,e,i,n,r){var o,s,a,A=t.x,c=t.y;return"string"==typeof e?e=w[e]:e-=.5,"string"==typeof n?n=w[n]:n-=.5,"string"==typeof i?i=C[i]:i-=.5,"string"==typeof r?r=C[r]:r-=.5,s=r-i,((o=n-e)||s)&&(a=this._getTransformedDimensions(),A=t.x+o*a.x,c=t.y+s*a.y),new _.Point(A,c)},translateToCenterPoint:function(t,e,i){var n=this.translateToGivenOrigin(t,e,i,"center","center");return this.angle?_.util.rotatePoint(n,t,y(this.angle)):n},translateToOriginPoint:function(t,e,i){var n=this.translateToGivenOrigin(t,"center","center",e,i);return this.angle?_.util.rotatePoint(n,t,y(this.angle)):n},getCenterPoint:function(){var t=new _.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var n,r,o=this.getCenterPoint();return n=void 0!==e&&void 0!==i?this.translateToGivenOrigin(o,"center","center",e,i):new _.Point(this.left,this.top),r=new _.Point(t.x,t.y),this.angle&&(r=_.util.rotatePoint(r,o,-y(this.angle))),r.subtractEquals(n)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e,i,n=y(this.angle),r=this.getScaledWidth(),o=_.util.cos(n)*r,s=_.util.sin(n)*r;e="string"==typeof this.originX?w[this.originX]:this.originX-.5,i="string"==typeof t?w[t]:t-.5,this.left+=o*(i-e),this.top+=s*(i-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var t=_.util,e=t.degreesToRadians,i=t.multiplyTransformMatrices,n=t.transformPoint;t.object.extend(_.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new _.Point(i.tl.x,i.tl.y),new _.Point(i.tr.x,i.tr.y),new _.Point(i.br.x,i.br.y),new _.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,n){var r=this.getCoords(i,n);return"Intersection"===_.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===_.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),r=e?t.aCoords:t.lineCoords,o=0,s=t._getImageLines(r);o<4;o++)if(!t.containsPoint(n[o],s))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var r=this.getBoundingRect(i,n);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,i,n){var r=this._getCoords(i,n),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some((function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y}))||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(n,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every((function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)}))&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,o=0;for(var s in e)if(!((r=e[s]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?n=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),n=-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)),n>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(e,i){var n=this.getCoords(e,i);return t.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcCoords:function(t){return t?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var i=this.getViewportTransform(),r=this.padding,o=e(this.angle),s=t.cos(o)*r,a=t.sin(o)*r,A=s+a,c=s-a,l=this.calcACoords(),h={tl:n(l.tl,i),tr:n(l.tr,i),bl:n(l.bl,i),br:n(l.br,i)};return r&&(h.tl.x-=c,h.tl.y-=A,h.tr.x+=A,h.tr.y-=c,h.bl.x-=A,h.bl.y+=c,h.br.x+=c,h.br.y+=A),h},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=this.getViewportTransform(),r=i(n,e),o=i(r,t),s=(o=i(o,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl((function(t,e,i){a[e]=t.positionHandler(s,o,i)})),a},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),r=i(e,t),o=this._getTransformedDimensions(),s=o.x/2,a=o.y/2;return{tl:n({x:-s,y:-a},r),tr:n({x:s,y:-a},r),bl:n({x:-s,y:a},r),br:n({x:s,y:a},r)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return t.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var n=this.transformMatrixKey(t),r=this.matrixCache||(this.matrixCache={});return r.key===n?r.value:(this.group&&(e=i(this.group.calcTransformMatrix(!1),e)),r.key=n,r.value=e,e)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===e)return i.value;var n=this._calcTranslateMatrix(),r={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=e,i.value=t.composeMatrix(r),i.value},_calcDimensionsTransformMatrix:function(e,i,n){return t.calcDimensionsMatrix({skewX:e,skewY:i,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(e,i){void 0===e&&(e=this.skewX),void 0===i&&(i=this.skewY);var n,r,o,s=0===e&&0===i;if(this.strokeUniform?(r=this.width,o=this.height):(r=(n=this._getNonTransformedDimensions()).x,o=n.y),s)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var a=t.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:i});return this._finalizeDimensions(a.x,a.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return n(e,t,!0).scalarAdd(2*this.padding)}})}(),_.util.object.extend(_.Object.prototype,{sendToBack:function(){return this.group?_.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?_.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?_.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?_.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?_.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new _.Color(e),n=t+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(n+=t+"-opacity: "+r.toString()+"; "),n}return t+": none; "}var e=_.util.toFixed;_.util.object.extend(_.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",A=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),u=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",A,"; ",u,"fill-rule: ",i,"; ","opacity: ",c,";",h,l].join("")},getSvgSpanStyles:function(e,i){var n="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+n:"",o=e.strokeWidth?"stroke-width: "+e.strokeWidth+n:"",s=e.fontSize?"font-size: "+e.fontSize+"px"+n:"",a=e.fontStyle?"font-style: "+e.fontStyle+n:"",A=e.fontWeight?"font-weight: "+e.fontWeight+n:"",c=e.fill?t("fill",e.fill):"",l=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e);return h&&(h="text-decoration: "+h+n),[l,o,r,s,a,A,h,c,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",i?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var i=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+_.util.matrixToSVG(i)+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var i=_.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,i),'" y="',e(-this.height/2,i),'" width="',e(this.width,i),'" height="',e(this.height,i),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var i=(e=e||{}).reviver,n=e.additionalTransform||"",r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=r,i?i(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var i,n,r=(e=e||{}).noStyle,o=e.reviver,s=r?"":'style="'+this.getSvgStyles()+'" ',a=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",A=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",l=A&&A.absolutePositioned,h=this.stroke,u=this.fill,d=this.shadow,f=[],g=t.indexOf("COMMON_PARTS"),p=e.additionalTransform;return A&&(A.clipPathId="CLIPPATH_"+_.Object.__uid++,n='<clipPath id="'+A.clipPathId+'" >\n'+A.toClipPathSVG(o)+"</clipPath>\n"),l&&f.push("<g ",a,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),l?"":a+this.getSvgCommons()," >\n"),i=[s,c,r?"":this.addPaintOrder()," ",p?'transform="'+p+'" ':""].join(""),t[g]=i,u&&u.toLive&&f.push(u.toSVG(this)),h&&h.toLive&&f.push(h.toSVG(this)),d&&f.push(d.toSVG(this)),A&&f.push(n),f.push(t.join("")),f.push("</g>\n"),l&&f.push("</g>\n"),o?o(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=_.util.object.extend,e="stateProperties";function i(e,i,n){var r={};n.forEach((function(t){r[t]=e[t]})),t(e[i],r,!0)}function n(t,e,i){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0,o=t.length;r<o;r++)if(!n(t[r],e[r]))return!1;return!0}if(t&&"object"==typeof t){var s,a=Object.keys(t);if(!e||"object"!=typeof e||!i&&a.length!==Object.keys(e).length)return!1;for(r=0,o=a.length;r<o;r++)if("canvas"!==(s=a[r])&&"group"!==s&&!n(t[s],e[s]))return!1;return!0}}_.util.object.extend(_.Object.prototype,{hasStateChanged:function(t){var i="_"+(t=t||e);return Object.keys(this[i]).length<this[t].length||!n(this[i],this,!0)},saveState:function(t){var n=t&&t.propertySet||e,r="_"+n;return this[r]?(i(this,r,this[n]),t&&t.stateProperties&&i(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){var i=(t=t||{}).propertySet||e;return t.propertySet=i,this["_"+i]={},this.saveState(t),this}})}(),function(){var t=_.util.degreesToRadians;_.util.object.extend(_.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,n,r,o=t.x,s=t.y,a=Object.keys(this.oCoords),A=a.length-1;for(this.__corner=0;A>=0;A--)if(r=a[A],this.isControlVisible(r)&&(n=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(i=this._findCrossPoints({x:o,y:s},n))&&i%2==1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var i=this.controls[e];t[e].corner=i.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),n=this.borderScaleFactor,r=i.x+n,o=i.y+n,s=void 0!==e.hasControls?e.hasControls:this.hasControls,a=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-r/2,-o/2,r,o),s&&(t.beginPath(),this.forEachControl((function(e,i,n){e.withConnection&&e.getVisibility(n,i)&&(a=!0,t.moveTo(e.x*r,e.y*o),t.lineTo(e.x*r+e.offsetX,e.y*o+e.offsetY))})),a&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var n=_.util.sizeAfterTransform(this.width,this.height,e),r=this.strokeWidth,o=this.strokeUniform,s=this.borderScaleFactor,a=n.x+r*(o?this.canvas.getZoom():e.scaleX)+s,A=n.y+r*(o?this.canvas.getZoom():e.scaleY)+s;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-a/2,-A/2,a,A),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var i,n,r=this.canvas.getRetinaScaling();return t.setTransform(r,0,0,r,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl((function(r,o,s){n=s.oCoords[o],r.getVisibility(s,o)&&(i&&(n=_.util.transformPoint(n,i)),r.render(t,n.x,n.y,e,s))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),_.util.object.extend(_.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,r=e.onChange||i,o=this;return _.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,r=e.onChange||i,o=this;return _.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,r=e.onChange||i,o=this;return _.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),o.requestRenderAll(),r()},onComplete:function(){o.remove(t),n()}}),this}}),_.util.object.extend(_.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var r,o=this;e=e.toString(),i=i?_.util.object.clone(i):{},~t.indexOf(".")&&(r=t.split("."));var s=o.colorProperties.indexOf(t)>-1||r&&o.colorProperties.indexOf(r[1])>-1,a=r?this.get(r[0])[r[1]]:this.get(t);"from"in i||(i.from=a),s||(e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e));var A={startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(t,e,n){return i.abort.call(o,t,e,n)},onChange:function(e,s,a){r?o[r[0]][r[1]]=e:o.set(t,e),n||i.onChange&&i.onChange(e,s,a)},onComplete:function(t,e,r){n||(o.setCoords(),i.onComplete&&i.onComplete(t,e,r))}};return s?_.util.animateColor(A.startValue,A.endValue,A.duration,A):_.util.animate(A)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function o(t,e){var i=t.origin,n=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,A=e.farthest;return function(){switch(this.get(i)){case s:return Math.min(this.get(n),this.get(r));case a:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case A:return Math.max(this.get(n),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var i=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:n,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,n,r){r=r||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),s=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];n(new e.Line(s,i(o,r)))},e.Line.fromObject=function(t,i){var r=n(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,(function(t){delete t.points,i&&i(t)}),"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.PI;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,n=(this.endAngle-this.startAngle)%(2*i);if(0===n)t=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=e.util.cos(this.startAngle)*this.radius,o=e.util.sin(this.startAngle)*this.radius,s=e.util.cos(this.endAngle)*this.radius,a=e.util.sin(this.endAngle)*this.radius,A=n>i?"1":"0";t=['<path d="M '+r+" "+o," A "+this.radius+" "+this.radius," 0 ",+A+" 1"," "+s+" "+a,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,i){var n,r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(n=r)&&n.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,i(new e.Circle(r))},e.Circle.fromObject=function(t,i){e.Object._fromObject("Circle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),e.Triangle.fromObject=function(t,i){return e.Object._fromObject("Triangle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){var n=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,i(new e.Ellipse(n))},e.Ellipse.fromObject=function(t,i){e.Object._fromObject("Ellipse",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,r=this.height,o=-this.width/2,s=-this.height/2,a=0!==e||0!==i,A=.4477152502;t.beginPath(),t.moveTo(o+e,s),t.lineTo(o+n-e,s),a&&t.bezierCurveTo(o+n-A*e,s,o+n,s+A*i,o+n,s+i),t.lineTo(o+n,s+r-i),a&&t.bezierCurveTo(o+n,s+r-A*i,o+n-A*e,s+r,o+n-e,s+r),t.lineTo(o+e,s+r),a&&t.bezierCurveTo(o+A*e,s+r,o,s+r-A*i,o,s+r-i),t.lineTo(o,s+i),a&&t.bezierCurveTo(o,s+A*i,o+A*e,s,o+e,s),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n,r){if(!t)return n(null);r=r||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var s=new e.Rect(i(r?e.util.object.clone(r):{},o));s.visible=s.visible&&s.width>0&&s.height>0,n(s)},e.Rect.fromObject=function(t,i){return e.Object._fromObject("Rect",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t);this.width=i.width,this.height=i.height,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2,y:i.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?i.left:e.x),void 0===t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2,y:i.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x")||0,i=n(t,"y")||0;return{left:e,top:i,width:(r(t,"x")||0)-e,height:(r(t,"y")||0)-i}},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],i=this.pathOffset.x,n=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,s=0,a=this.points.length;s<a;s++)t.push(o(this.points[s].x-i,r),",",o(this.points[s].y-n,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,i=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-r);for(var o=0;o<i;o++)e=this.points[o],t.lineTo(e.x-n,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(n,r,o){if(!n)return r(null);o||(o={});var s=e.parsePointsAttribute(n.getAttribute("points")),a=e.parseAttributes(n,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new e[t](s,i(a,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,i){return e.Object._fromObject("Polyline",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,i){e.Object._fromObject("Polygon",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,s=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,i){i=i||{},this.callSuper("initialize",i),t||(t=[]);var n="[object Array]"===o.call(t);this.path=e.util.makePathSimpler(n?t:e.util.parsePath(t)),this.path&&e.Polyline.prototype._setPositionDimensions.call(this,i)},_renderPathCommands:function(t){var e,i=0,n=0,r=0,o=0,s=0,a=0,A=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(var l=0,h=this.path.length;l<h;++l)switch((e=this.path[l])[0]){case"L":r=e[1],o=e[2],t.lineTo(r+A,o+c);break;case"M":i=r=e[1],n=o=e[2],t.moveTo(r+A,o+c);break;case"C":r=e[5],o=e[6],s=e[3],a=e[4],t.bezierCurveTo(e[1]+A,e[2]+c,s+A,a+c,r+A,o+c);break;case"Q":t.quadraticCurveTo(e[1]+A,e[2]+c,e[3]+A,e[4]+c),r=e[3],o=e[4],s=e[1],a=e[2];break;case"z":case"Z":r=i,o=n,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',e.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,t)+", "+s(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,o=[],s=[],a=0,A=0,c=0,l=0,h=0,u=this.path.length;h<u;++h){switch((t=this.path[h])[0]){case"L":c=t[1],l=t[2],r=[];break;case"M":a=c=t[1],A=l=t[2],r=[];break;case"C":r=e.util.getBoundsOfCurve(c,l,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],l=t[6];break;case"Q":r=e.util.getBoundsOfCurve(c,l,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],l=t[4];break;case"z":case"Z":c=a,l=A}r.forEach((function(t){o.push(t.x),s.push(t.y)})),o.push(c),s.push(l)}var d=i(o)||0,f=i(s)||0;return{left:d,top:f,width:(n(o)||0)-d,height:(n(s)||0)-f}}}),e.Path.fromObject=function(t,i){if("string"==typeof t.sourcePath){var n=t.sourcePath;e.loadSVGFromURL(n,(function(e){var n=e[0];n.setOptions(t),i&&i(n)}))}else e.Object._fromObject("Path",t,i,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,i(new e.Path(o.d,r(o,n)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(i)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,n=t.top;t.set({left:i-e.x,top:n-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var i=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(i&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,i){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(t,i);if("canvas"===t)for(;n--;)this._objects[n]._set(t,i);e.Object.prototype._set.call(this,t,i)},toObject:function(t){var i=this.includeDefaultValues,n=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=i;var r=e.toObject(t);return e.includeDefaultValues=n,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=n,r},toDatalessObject:function(t){var i,n=this.sourcePath;if(n)i=n;else{var r=this.includeDefaultValues;i=this._objects.map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=r;var n=e.toDatalessObject(t);return e.includeDefaultValues=i,n}))}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=i,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var i=0,n=this._objects.length;i<n;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-r/2,n,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(i){e.util.addTransformToObject(i,t),delete i.group,i.setCoords()})),this},realizeTransform:function(t,i){return e.util.addTransformToObject(t,i),t},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,i=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var r=new e.ActiveSelection([]);return r.set(n),r.type="activeSelection",i.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,i.add(t)})),r.canvas=i,r._objects=t,i._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(t){t.setCoords(!0)})),this},_calcBounds:function(t){for(var e,i,n,r,o=[],s=[],a=["tr","br","bl","tl"],A=0,c=this._objects.length,l=a.length;A<c;++A){for(n=(e=this._objects[A]).calcACoords(),r=0;r<l;r++)i=a[r],o.push(n[i].x),s.push(n[i].y);e.aCoords=n}this._getBounds(o,s,t)},_getBounds:function(t,r,o){var s=new e.Point(i(t),i(r)),a=new e.Point(n(t),n(r)),A=s.y||0,c=s.x||0,l=a.x-s.x||0,h=a.y-s.y||0;this.width=l,this.height=h,o||this.setPositionByOrigin({x:c,y:A},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,n=this._objects.length;i<n;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,i){var n=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!=typeof n?e.util.enlivenObjects(n,(function(n){e.util.enlivenObjects([t.clipPath],(function(r){var o=e.util.object.clone(t,!0);o.clipPath=r[0],delete o.objects,i&&i(new e.Group(n,o,!0))}))})):e.loadSVGFromURL(n,(function(o){var s=e.util.groupSVGElements(o,t,n);s.set(r),i&&i(s)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,i){i=i||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var i=e.Object.prototype.toObject.call(this),n=new e.Group([]);if(delete i.type,n.set(i),t.forEach((function(t){t.canvas.remove(t),t.group=n})),n._objects=t,!this.canvas)return n;var r=this.canvas;return r.add(n),r._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var n=0,r=this._objects.length;n<r;n++)this._objects[n]._renderControls(t,i);t.restore()}}),e.ActiveSelection.fromObject=function(t,i){e.util.enlivenObjects(t.objects,(function(n){delete t.objects,i&&i(new e.ActiveSelection(n,t,!0))}))})}(e),function(t){"use strict";var e=_.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?_.warn("fabric.Image is already defined."):(_.Image=_.util.createClass(_.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:_.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:_.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+_.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=_.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){_.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},toObject:function(t){var i=[];this.filters.forEach((function(t){t&&i.push(t.toObject())}));var n=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],i=[],n=this._element,r=-this.width/2,o=-this.height/2,s="",a="";if(!n)return[];if(this.hasCrop()){var A=_.Object.__uid++;e.push('<clipPath id="imageCrop_'+A+'">\n','\t<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+A+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),i.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',o-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,a,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,t=["\t<rect ",'x="',r,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=c}return"fill"!==this.paintFirst?e.concat(t,i):e.concat(i,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,i){return _.util.loadImage(t,(function(t,n){this.setElement(t,i),this._setWidthHeight(),e&&e(this,n)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),n=i.scaleX,r=i.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||n>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);_.filterBackend||(_.filterBackend=_.initFilterBackend());var s=_.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,A=o.width,c=o.height;s.width=A,s.height=c,this._element=s,this._lastScaleX=t.scaleX=n,this._lastScaleY=t.scaleY=r,_.filterBackend.applyFilters([t],o,A,c,this._element,a),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(this._element===this._originalElement){var r=_.util.createCanvasElement();r.width=i,r.height=n,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,n),this._lastScaleX=1,this._lastScaleY=1;return _.filterBackend||(_.filterBackend=_.initFilterBackend()),_.filterBackend.applyFilters(t,this._originalElement,i,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){_.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){_.util.setImageSmoothing(t,this.imageSmoothing),_.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var i=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,s=Math.min,a=Math.max,A=a(this.cropX,0),c=a(this.cropY,0),l=e.naturalWidth||e.width,h=e.naturalHeight||e.height,u=A*i,d=c*n,f=s(r*i,l-u),g=s(o*n,h-d),p=-r/2,m=-o/2,v=s(r,l/i-A),y=s(o,h/n-c);e&&t.drawImage(e,u,d,f,g,p,m,v,y)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(_.util.getById(t),e),_.util.addClass(this.getElement(),_.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?_.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=_.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,n=this._element.height,r=1,o=1,s=0,a=0,A=0,c=0,l=this.width,h=this.height,u={width:l,height:h};return!e||"none"===e.alignX&&"none"===e.alignY?(r=l/i,o=h/n):("meet"===e.meetOrSlice&&(t=(l-i*(r=o=_.util.findScaleToFit(this._element,u)))/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(h-n*o)/2,"Min"===e.alignY&&(a=-t),"Max"===e.alignY&&(a=t)),"slice"===e.meetOrSlice&&(t=i-l/(r=o=_.util.findScaleToCover(this._element,u)),"Mid"===e.alignX&&(A=t/2),"Max"===e.alignX&&(A=t),t=n-h/o,"Mid"===e.alignY&&(c=t/2),"Max"===e.alignY&&(c=t),i=l/r,n=h/o)),{width:i,height:n,scaleX:r,scaleY:o,offsetLeft:s,offsetTop:a,cropX:A,cropY:c}}}),_.Image.CSS_CANVAS="canvas-img",_.Image.prototype.getSvgSrc=_.Image.prototype.getSrc,_.Image.fromObject=function(t,e){var i=_.util.object.clone(t);_.util.loadImage(i.src,(function(t,n){n?e&&e(null,!0):_.Image.prototype._initFilters.call(i,i.filters,(function(n){i.filters=n||[],_.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(n){i.resizeFilter=n[0],_.util.enlivenObjects([i.clipPath],(function(n){i.clipPath=n[0];var r=new _.Image(t,i);e(r,!1)}))}))}))}),null,i.crossOrigin)},_.Image.fromURL=function(t,e,i){_.util.loadImage(t,(function(t,n){e&&e(new _.Image(t,i),n)}),null,i&&i.crossOrigin)},_.Image.ATTRIBUTE_NAMES=_.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),_.Image.fromElement=function(t,i,n){var r=_.parseAttributes(t,_.Image.ATTRIBUTE_NAMES);_.Image.fromURL(r["xlink:href"],i,e(n?_.util.object.clone(n):{},r))})}(e),_.util.object.extend(_.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,n=t.onChange||e,r=this;return _.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.rotate(t),n()},onComplete:function(){r.setCoords(),i()}}),this}}),_.util.object.extend(_.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var i="precision "+e+" float;\nvoid main(){}",n=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,i),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}_.isWebglSupported=function(e){if(_.isLikelyNode)return!1;e=e||_.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),n=i.getContext("webgl")||i.getContext("experimental-webgl"),r=!1;if(n){_.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),r=_.maxTextureSize>=e;for(var o=["highp","mediump","lowp"],s=0;s<3;s++)if(t(n,o[s])){_.webGlPrecision=o[s];break}}return this.isSupported=r,r},_.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i,n=void 0!==window.performance;try{new ImageData(1,1),i=!0}catch(t){i=!1}var r="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof Uint8ClampedArray;if(n&&i&&r&&o){var s=_.util.createCanvasElement(),a=new ArrayBuffer(t*e*4);if(_.forceGLPutImageData)return this.imageBuffer=a,void(this.copyGLTo2D=M);var A,c,l={imageBuffer:a,destinationWidth:t,destinationHeight:e,targetCanvas:s};s.width=t,s.height=e,A=window.performance.now(),I.call(l,this.gl,l),c=window.performance.now()-A,A=window.performance.now(),M.call(l,this.gl,l),c>window.performance.now()-A?(this.imageBuffer=a,this.copyGLTo2D=M):this.copyGLTo2D=I}},createWebGLCanvas:function(t,e){var i=_.util.createCanvasElement();i.width=t,i.height=e;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=i.getContext("webgl",n);r||(r=i.getContext("experimental-webgl",n)),r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)},applyFilters:function(t,e,i,n,r,o){var s,a=this.gl;o&&(s=this.getCachedTexture(o,e));var A={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:a,sourceTexture:this.createTexture(a,i,n,!s&&e),targetTexture:this.createTexture(a,i,n),originalTexture:s||this.createTexture(a,i,n,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),t.forEach((function(t){t&&t.applyTo(A)})),function(t){var e=t.targetCanvas,i=e.width,n=e.height,r=t.destinationWidth,o=t.destinationHeight;i===r&&n===o||(e.width=r,e.height=o)}(A),this.copyGLTo2D(a,A),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(A.sourceTexture),a.deleteTexture(A.targetTexture),a.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),A},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,n){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i,i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:I,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var i=t.getExtension("WEBGL_debug_renderer_info");if(i){var n=t.getParameter(i.UNMASKED_RENDERER_WEBGL),r=t.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}_.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,n,r){var o=r.getContext("2d");o.drawImage(e,0,0,i,n);var s={sourceWidth:i,sourceHeight:n,imageData:o.getImageData(0,0,i,n),originalEl:e,originalImageData:o.getImageData(0,0,i,n),canvasEl:r,ctx:o,filterBackend:this};return t.forEach((function(t){t.applyTo(s)})),s.imageData.width===i&&s.imageData.height===n||(r.width=s.imageData.width,r.height=s.imageData.height),o.putImageData(s.imageData,0,0),s}}}(),_.Image=_.Image||{},_.Image.filters=_.Image.filters||{},_.Image.filters.BaseFilter=_.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==_.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+_.webGlPrecision+" float"));var n=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(n));var r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(o));var s=this.getAttributeLocations(t,o),a=this.getUniformLocations(t,o)||{};return a.uStepW=t.getUniformLocation(o,"uStepW"),a.uStepH=t.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:s,uniformLocations:a}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var n=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,n=t.context;t.passes>1?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(n.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(n,e,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=_.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),_.Image.filters.BaseFilter.fromObject=function(t,e){var i=new _.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.ColorMatrix=n(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,n,r,o,s=t.imageData.data,a=s.length,A=this.matrix,c=this.colorsOnly;for(o=0;o<a;o+=4)e=s[o],i=s[o+1],n=s[o+2],c?(s[o]=e*A[0]+i*A[1]+n*A[2]+255*A[4],s[o+1]=e*A[5]+i*A[6]+n*A[7]+255*A[9],s[o+2]=e*A[10]+i*A[11]+n*A[12]+255*A[14]):(r=s[o+3],s[o]=e*A[0]+i*A[1]+n*A[2]+r*A[3]+255*A[4],s[o+1]=e*A[5]+i*A[6]+n*A[7]+r*A[8]+255*A[9],s[o+2]=e*A[10]+i*A[11]+n*A[12]+r*A[13]+255*A[14],s[o+3]=e*A[15]+i*A[16]+n*A[17]+r*A[18]+255*A[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Brightness=n(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,n=i.length,r=Math.round(255*this.brightness);for(e=0;e<n;e+=4)i[e]=i[e]+r,i[e+1]=i[e+1]+r,i[e+2]=i[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Convolute=r(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),i=this.type+"_"+e+"_"+(this.opaque?1:0),n=this.fragmentSource[i];return t.programCache.hasOwnProperty(i)||(t.programCache[i]=this.createProgram(t.context,n)),t.programCache[i]},applyTo2d:function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f=t.imageData,g=f.data,p=this.matrix,m=Math.round(Math.sqrt(p.length)),v=Math.floor(m/2),y=f.width,w=f.height,C=t.ctx.createImageData(y,w),b=C.data,B=this.opaque?1:0;for(h=0;h<w;h++)for(l=0;l<y;l++){for(o=4*(h*y+l),e=0,i=0,n=0,r=0,d=0;d<m;d++)for(u=0;u<m;u++)s=l+u-v,(a=h+d-v)<0||a>=w||s<0||s>=y||(A=4*(a*y+s),c=p[d*m+u],e+=g[A]*c,i+=g[A+1]*c,n+=g[A+2]*c,B||(r+=g[A+3]*c));b[o]=e,b[o+1]=i,b[o+2]=n,b[o+3]=B?g[o+3]:r}t.imageData=C},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,n=t.imageData.data,r=n.length,o=this.mode;for(e=0;e<r;e+=4)"average"===o?i=(n[e]+n[e+1]+n[e+2])/3:"lightness"===o?i=(Math.min(n[e],n[e+1],n[e+2])+Math.max(n[e],n[e+1],n[e+2]))/2:"luminosity"===o&&(i=.21*n[e]+.72*n[e+1]+.07*n[e+2]),n[e]=i,n[e+1]=i,n[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData.data,n=i.length;for(e=0;e<n;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Noise=r(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,i,n=t.imageData.data,r=n.length,o=this.noise;for(e=0,r=n.length;e<r;e+=4)i=(.5-Math.random())*o,n[e]+=i,n[e+1]+=i,n[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Pixelate=n(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,n,r,o,s,a,A,c,l,h,u=t.imageData,d=u.data,f=u.height,g=u.width;for(i=0;i<f;i+=this.blocksize)for(n=0;n<g;n+=this.blocksize)for(r=d[e=4*i*g+4*n],o=d[e+1],s=d[e+2],a=d[e+3],l=Math.min(i+this.blocksize,f),h=Math.min(n+this.blocksize,g),A=i;A<l;A++)for(c=n;c<h;c++)d[e=4*A*g+4*c]=r,d[e+1]=o,d[e+2]=s,d[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.RemoveColor=r(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var i,n,r,o,s=t.imageData.data,a=255*this.distance,A=new e.Color(this.color).getSource(),c=[A[0]-a,A[1]-a,A[2]-a],l=[A[0]+a,A[1]+a,A[2]+a];for(i=0;i<s.length;i+=4)n=s[i],r=s[i+1],o=s[i+2],n>c[0]&&r>c[1]&&o>c[2]&&n<l[0]&&r<l[1]&&o<l[2]&&(s[i+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],s=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];t.uniform4fv(i.uLow,o),t.uniform4fv(i.uHigh,s)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)i[o]=n(i.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendColor=n(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var i,n,r,o,s,a,A,c=t.imageData.data,l=c.length,h=1-this.alpha;i=(A=new e.Color(this.color).getSource())[0]*this.alpha,n=A[1]*this.alpha,r=A[2]*this.alpha;for(var u=0;u<l;u+=4)switch(o=c[u],s=c[u+1],a=c[u+2],this.mode){case"multiply":c[u]=o*i/255,c[u+1]=s*n/255,c[u+2]=a*r/255;break;case"screen":c[u]=255-(255-o)*(255-i)/255,c[u+1]=255-(255-s)*(255-n)/255,c[u+2]=255-(255-a)*(255-r)/255;break;case"add":c[u]=o+i,c[u+1]=s+n,c[u+2]=a+r;break;case"diff":case"difference":c[u]=Math.abs(o-i),c[u+1]=Math.abs(s-n),c[u+2]=Math.abs(a-r);break;case"subtract":c[u]=o-i,c[u+1]=s-n,c[u+2]=a-r;break;case"darken":c[u]=Math.min(o,i),c[u+1]=Math.min(s,n),c[u+2]=Math.min(a,r);break;case"lighten":c[u]=Math.max(o,i),c[u+1]=Math.max(s,n),c[u+2]=Math.max(a,r);break;case"overlay":c[u]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[u+1]=n<128?2*s*n/255:255-2*(255-s)*(255-n)/255,c[u+2]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255;break;case"exclusion":c[u]=i+o-2*i*o/255,c[u+1]=n+s-2*n*s/255,c[u+2]=r+a-2*r*a/255;break;case"tint":c[u]=i+o*h,c[u+1]=n+s*h,c[u+2]=r+a*h}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(i.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendImage=n(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var i,n,r,o,s,a,A,c,l,h,u,d=t.imageData,f=t.filterBackend.resources,g=d.data,p=g.length,m=d.width,v=d.height,y=this.image;f.blendImage||(f.blendImage=e.util.createCanvasElement()),h=(l=f.blendImage).getContext("2d"),l.width!==m||l.height!==v?(l.width=m,l.height=v):h.clearRect(0,0,m,v),h.setTransform(y.scaleX,0,0,y.scaleY,y.left,y.top),h.drawImage(y._element,0,0,m,v),u=h.getImageData(0,0,m,v).data;for(var w=0;w<p;w+=4)switch(s=g[w],a=g[w+1],A=g[w+2],c=g[w+3],i=u[w],n=u[w+1],r=u[w+2],o=u[w+3],this.mode){case"multiply":g[w]=s*i/255,g[w+1]=a*n/255,g[w+2]=A*r/255,g[w+3]=c*o/255;break;case"mask":g[w+3]=o}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,i){e.Image.fromObject(t.image,(function(n){var r=e.util.object.clone(t);r.image=n,i(new e.Image.filters.BlendImage(r))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.round,a=Math.sin,A=Math.ceil,c=e.Image.filters,l=e.util.createClass;c.Resize=l(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+"_"+e;if(!t.programCache.hasOwnProperty(i)){var n=this.generateShader(e);t.programCache[i]=this.createProgram(t.context,n)}return t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),n=new Array(i),r=1;r<=i;r++)n[r-1]=t(r*e);return n},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,n=1;n<=t;n++)e[n-1]=n+".0 * uDelta";return i+="uniform float uTaps["+t+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",e.forEach((function(t,e){i+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",i+="  sum += 2.0 * uTaps["+e+"];\n"})),i+="  gl_FragColor = color / sum;\n",i+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var i=(e*=Math.PI)/t;return a(e)/e*a(i)/i}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;var r,o=e.width,a=e.height,A=s(o*i),c=s(a*n);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,o,a,A,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,o,a,A,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,o,a,A,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,o,a,A,c)),t.imageData=r},sliceByTwo:function(t,i,r,o,s){var a,A,c=t.imageData,l=.5,h=!1,u=!1,d=i*l,f=r*l,g=e.filterBackend.resources,p=0,m=0,v=i,y=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((a=g.sliceByTwo).width<1.5*i||a.height<r)&&(a.width=1.5*i,a.height=r),(A=a.getContext("2d")).clearRect(0,0,1.5*i,r),A.putImageData(c,0,0),o=n(o),s=n(s);!h||!u;)i=d,r=f,o<n(d*l)?d=n(d*l):(d=o,h=!0),s<n(f*l)?f=n(f*l):(f=s,u=!0),A.drawImage(a,p,m,i,r,v,y,d,f),p=v,m=y,y+=f;return A.getImageData(p,m,o,s)},lanczosResize:function(t,e,s,a,c){var l=t.imageData.data,h=t.ctx.createImageData(a,c),u=h.data,d=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,m=2/this.rcpScaleY,v=A(f*this.lanczosLobes/2),y=A(g*this.lanczosLobes/2),w={},C={},b={};return function t(A){var B,x,_,S,I,M,T,E,k,F,D;for(C.x=(A+.5)*f,b.x=n(C.x),B=0;B<c;B++){for(C.y=(B+.5)*g,b.y=n(C.y),I=0,M=0,T=0,E=0,k=0,x=b.x-v;x<=b.x+v;x++)if(!(x<0||x>=e)){F=n(1e3*o(x-C.x)),w[F]||(w[F]={});for(var O=b.y-y;O<=b.y+y;O++)O<0||O>=s||(D=n(1e3*o(O-C.y)),w[F][D]||(w[F][D]=d(r(i(F*p,2)+i(D*m,2))/1e3)),(_=w[F][D])>0&&(I+=_,M+=_*l[S=4*(O*e+x)],T+=_*l[S+1],E+=_*l[S+2],k+=_*l[S+3]))}u[S=4*(B*a+A)]=M/I,u[S+1]=T/I,u[S+2]=E/I,u[S+3]=k/I}return++A<a?t(A):h}(0)},bilinearFiltering:function(t,e,i,r,o){var s,a,A,c,l,h,u,d,f,g=0,p=this.rcpScaleX,m=this.rcpScaleY,v=4*(e-1),y=t.imageData.data,w=t.ctx.createImageData(r,o),C=w.data;for(A=0;A<o;A++)for(c=0;c<r;c++)for(l=p*c-(s=n(p*c)),h=m*A-(a=n(m*A)),f=4*(a*e+s),u=0;u<4;u++)d=y[f+u]*(1-l)*(1-h)+y[f+4+u]*l*(1-h)+y[f+v+u]*h*(1-l)+y[f+v+4+u]*l*h,C[g++]=d;return w},hermiteFastResize:function(t,e,i,s,a){for(var c=this.rcpScaleX,l=this.rcpScaleY,h=A(c/2),u=A(l/2),d=t.imageData.data,f=t.ctx.createImageData(s,a),g=f.data,p=0;p<a;p++)for(var m=0;m<s;m++){for(var v=4*(m+p*s),y=0,w=0,C=0,b=0,B=0,x=0,_=0,S=(p+.5)*l,I=n(p*l);I<(p+1)*l;I++)for(var M=o(S-(I+.5))/u,T=(m+.5)*c,E=M*M,k=n(m*c);k<(m+1)*c;k++){var F=o(T-(k+.5))/h,D=r(E+F*F);D>1&&D<-1||(y=2*D*D*D-3*D*D+1)>0&&(_+=y*d[3+(F=4*(k+I*e))],C+=y,d[F+3]<255&&(y=y*d[F+3]/250),b+=y*d[F],B+=y*d[F+1],x+=y*d[F+2],w+=y)}g[v]=b/w,g[v+1]=B/w,g[v+2]=x/w,g[v+3]=_/C}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Contrast=n(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,n=i.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<n;e+=4)i[e]=o*(i[e]-128)+128,i[e+1]=o*(i[e+1]-128)+128,i[e+2]=o*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Saturation=n(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,n=t.imageData.data,r=n.length,o=-this.saturation;for(e=0;e<r;e+=4)i=Math.max(n[e],n[e+1],n[e+2]),n[e]+=i!==n[e]?(i-n[e])*o:0,n[e+1]+=i!==n[e+1]?(i-n[e+1])*o:0,n[e+2]+=i!==n[e+2]?(i-n[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Vibrance=n(i.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,n,r,o=t.imageData.data,s=o.length,a=-this.vibrance;for(e=0;e<s;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),n=(o[e]+o[e+1]+o[e+2])/3,r=2*Math.abs(i-n)/255*a,o[e]+=i!==o[e]?(i-o[e])*r:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*r:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Blur=n(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var i,n,r=t.filterBackend.resources,o=t.imageData.width,s=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),i=r.blurLayer1,n=r.blurLayer2,i.width===o&&i.height===s||(n.width=i.width=o,n.height=i.height=s);var a,A,c,l,h=i.getContext("2d"),u=n.getContext("2d"),d=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),u.clearRect(0,0,o,s),l=-15;l<=15;l++)c=d*(A=l/15)*o+(a=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(A),u.drawImage(i,c,a),h.drawImage(n,0,0),u.globalAlpha=1,u.clearRect(0,0,n.width,n.height);for(l=-15;l<=15;l++)c=d*(A=l/15)*s+(a=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(A),u.drawImage(i,a,c),h.drawImage(n,0,0),u.globalAlpha=1,u.clearRect(0,0,n.width,n.height);t.ctx.drawImage(i,0,0);var f=t.ctx.getImageData(0,0,i.width,i.height);return h.globalAlpha=1,h.clearRect(0,0,i.width,i.height),f},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Gamma=n(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,n=this.gamma,r=i.length,o=1/n[0],s=1/n[1],a=1/n[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,r=i.length;e<r;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Composed=n(i.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,i){var n=(t.subFilters||[]).map((function(t){return new e.Image.filters[t.type](t)})),r=new e.Image.filters.Composed({subFilters:n});return i&&i(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.HueRotation=n(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,i=e.util.cos(t),n=e.util.sin(t),r=1/3,o=Math.sqrt(r)*n,s=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+s/3,this.matrix[1]=r*s-o,this.matrix[2]=r*s+o,this.matrix[5]=r*s+o,this.matrix[6]=i+r*s,this.matrix[7]=r*s-o,this.matrix[10]=r*s-o,this.matrix[11]=r*s+o,this.matrix[12]=i+r*s},isNeutralState:function(t){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(n),cacheProperties:e.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,n,r,o,s,a=0,A=this._textLines.length;a<A;a++)if(("justify"===this.textAlign||a!==A-1&&!this.isEndOfWrapping(a))&&(n=0,r=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){i=s.length,t=(this.width-e)/i;for(var c=0,l=r.length;c<=l;c++)o=this.__charBounds[a][c],this._reSpaceAndTab.test(r[c])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var n=this.getLineWidth(e);n>t&&(t=n)}return t},_renderTextLine:function(t,e,i,n,r,o){this._renderChars(t,e,i,n,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,n,r,o,s,a,A=t.fillStyle,c=this._getLeftOffset(),l=this._getTopOffset(),h=0,u=0,d=this.path,f=0,g=this._textLines.length;f<g;f++)if(e=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){n=this._textLines[f],i=this._getLineLeftOffset(f),u=0,h=0,r=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var p=0,m=n.length;p<m;p++)o=this.__charBounds[f][p],s=this.getValueOfPropertyAt(f,p,"textBackgroundColor"),d?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=s,s&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):s!==r?(a=c+i+h,"rtl"===this.direction&&(a=this.width-a-u),t.fillStyle=r,r&&t.fillRect(a,l,u,e/this.lineHeight),h=o.left,u=o.width,r=s):u+=o.kernedWidth;s&&!d&&(a=c+i+h,"rtl"===this.direction&&(a=this.width-a-u),t.fillStyle=s,t.fillRect(a,l,u,e/this.lineHeight)),l+=e}else l+=e;t.fillStyle=A,this._removeShadow(t)}},getFontCache:function(t){var i=t.fontFamily.toLowerCase();e.charWidthsCache[i]||(e.charWidthsCache[i]={});var n=e.charWidthsCache[i],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return n[r]||(n[r]={}),n[r]},_measureChar:function(t,e,i,n){var r,o,s,a,A=this.getFontCache(e),c=i+t,l=this._getFontDeclaration(e)===this._getFontDeclaration(n),h=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==A[i]&&(s=A[i]),void 0!==A[t]&&(a=r=A[t]),l&&void 0!==A[c]&&(a=(o=A[c])-s),void 0===r||void 0===s||void 0===o){var u=this.getMeasuringContext();this._setTextStyles(u,e,!0)}return void 0===r&&(a=r=u.measureText(t).width,A[t]=r),void 0===s&&l&&i&&(s=u.measureText(i).width,A[i]=s),l&&void 0===o&&(o=u.measureText(c).width,A[c]=o,a=o-s),{width:r*h,kernedWidth:a*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var i,n,r,o,s,a,A=0,c=this._textLines[t],l=new Array(c.length),h=0,u=this.path,d="right"===this.pathSide;for(this.__charBounds[t]=l,i=0;i<c.length;i++)n=c[i],o=this._getGraphemeBox(n,t,i,r),l[i]=o,A+=o.kernedWidth,r=n;if(l[i]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},u){switch(a=u.segmentsInfo[u.segmentsInfo.length-1].length,(s=e.util.getPointOnPath(u.path,0,u.segmentsInfo)).x+=u.pathOffset.x,s.y+=u.pathOffset.y,this.textAlign){case"left":h=d?a-A:0;break;case"center":h=(a-A)/2;break;case"right":h=d?0:a-A}for(h+=this.pathStartOffset*(d?-1:1),i=d?c.length-1:0;d?i>=0:i<c.length;d?i--:i++)o=l[i],h>a?h%=a:h<0&&(h+=a),this._setGraphemeOnPath(h,o,s),h+=o.kernedWidth}return{width:A,numOfSpaces:0}},_setGraphemeOnPath:function(t,i,n){var r=t+i.kernedWidth/2,o=this.path,s=e.util.getPointOnPath(o.path,r,o.segmentsInfo);i.renderLeft=s.x-n.x,i.renderTop=s.y-n.y,i.angle=s.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,n,r){var o,s=this.getCompleteStyleDeclaration(e,i),a=n?this.getCompleteStyleDeclaration(e,i-1):{},A=this._measureChar(t,s,n,a),c=A.kernedWidth,l=A.width;0!==this.charSpacing&&(l+=o=this._getWidthOfCharSpacing(),c+=o);var h={width:l,left:0,height:s.fontSize,kernedWidth:c,deltaY:s.deltaY};if(i>0&&!r){var u=this.__charBounds[e][i-1];h.left=u.left+u.width+A.kernedWidth-A.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),n=1,r=e.length;n<r;n++)i=Math.max(this.getHeightOfChar(t,n),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,n=this._textLines.length;i<n;i++)t=this.getHeightOfLine(i),e+=i===n-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,n=this._getLeftOffset(),r=this._getTopOffset(),o=0,s=this._textLines.length;o<s;o++){var a=this.getHeightOfLine(o),A=a/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],n+c,r+i+A,o),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,n,r,o){var s,a,A,c,l,h=this.getHeightOfLine(o),u=-1!==this.textAlign.indexOf("justify"),d="",f=0,g=this.path,p=!u&&0===this.charSpacing&&this.isEmptyStyles(o)&&!g,m="ltr"===this.direction,v="ltr"===this.direction?1:-1;if(e.save(),r-=h*this._fontSizeFraction/this.lineHeight,p)return e.canvas.setAttribute("dir",m?"ltr":"rtl"),e.direction=m?"ltr":"rtl",e.textAlign=m?"left":"right",this._renderChar(t,e,o,0,i.join(""),n,r,h),void e.restore();for(var y=0,w=i.length-1;y<=w;y++)c=y===w||this.charSpacing||g,d+=i[y],A=this.__charBounds[o][y],0===f?(n+=v*(A.kernedWidth-A.width),f+=A.width):f+=A.kernedWidth,u&&!c&&this._reSpaceAndTab.test(i[y])&&(c=!0),c||(s=s||this.getCompleteStyleDeclaration(o,y),a=this.getCompleteStyleDeclaration(o,y+1),c=this._hasStyleChanged(s,a)),c&&(g?(e.save(),e.translate(A.renderLeft,A.renderTop),e.rotate(A.angle),this._renderChar(t,e,o,y,d,-f/2,0,h),e.restore()):(l=n,e.canvas.setAttribute("dir",m?"ltr":"rtl"),e.direction=m?"ltr":"rtl",e.textAlign=m?"left":"right",this._renderChar(t,e,o,y,d,l,r,h)),d="",s=a,n+=v*f,f=0);e.restore()},_applyPatternGradientTransformText:function(t){var i,n=e.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return n.width=r,n.height=o,(i=n.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,o),i.lineTo(0,o),i.closePath(),i.translate(r/2,o/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(n,"no-repeat")},handleFiller:function(t,e,i){var n,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(n=-this.width/2,r=-this.height/2,t.translate(n,r),t[e]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:r}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,n,r,o,s){var a,A,c=this._getStyleDeclaration(i,n),l=this.getCompleteStyleDeclaration(i,n),h="fillText"===t&&l.fill,u="strokeText"===t&&l.stroke&&l.strokeWidth;(u||h)&&(e.save(),h&&(a=this._setFillStyles(e,l)),u&&(A=this._setStrokeStyles(e,l)),e.font=this._getFontDeclaration(l),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(s+=c.deltaY),h&&e.fillText(r,o-a.offsetX,s-a.offsetY),u&&e.strokeText(r,o-A.offsetX,s-A.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var n=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),s={fontSize:r*i.size,deltaY:o+r*i.baseline};return this.setSelectionStyles(s,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,n=this.textAlign,r=this.direction,o=0,s=this.isEndOfWrapping(t);return"justify"===n||"justify-center"===n&&!s||"justify-right"===n&&!s||"justify-left"===n&&!s?0:("center"===n&&(o=i/2),"right"===n&&(o=i),"justify-center"===n&&(o=i/2),"justify-right"===n&&(o=i),"rtl"===r&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return this.__lineWidths[t]?this.__lineWidths[t]:(e=""===this._textLines[t]?0:this.measureLine(t).width,this.__lineWidths[t]=e,e);var e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var n=this._getStyleDeclaration(t,e);return n&&void 0!==n[i]?n[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v=this._getLeftOffset(),y=this._getTopOffset(),w=this.path,C=this._getWidthOfCharSpacing(),b=this.offsets[e],B=0,x=this._textLines.length;B<x;B++)if(i=this.getHeightOfLine(B),this[e]||this.styleHas(e,B)){A=this._textLines[B],g=i/this.lineHeight,o=this._getLineLeftOffset(B),h=0,u=0,c=this.getValueOfPropertyAt(B,0,e),m=this.getValueOfPropertyAt(B,0,"fill"),l=y+g*(1-this._fontSizeFraction),n=this.getHeightOfChar(B,0),s=this.getValueOfPropertyAt(B,0,"deltaY");for(var _=0,S=A.length;_<S;_++)if(d=this.__charBounds[B][_],f=this.getValueOfPropertyAt(B,_,e),p=this.getValueOfPropertyAt(B,_,"fill"),r=this.getHeightOfChar(B,_),a=this.getValueOfPropertyAt(B,_,"deltaY"),w&&f&&p)t.save(),t.fillStyle=m,t.translate(d.renderLeft,d.renderTop),t.rotate(d.angle),t.fillRect(-d.kernedWidth/2,b*r+a,d.kernedWidth,this.fontSize/15),t.restore();else if((f!==c||p!==m||r!==n||a!==s)&&u>0){var I=v+o+h;"rtl"===this.direction&&(I=this.width-I-u),c&&m&&(t.fillStyle=m,t.fillRect(I,l+b*n+s,u,this.fontSize/15)),h=d.left,u=d.width,c=f,m=p,n=r,s=a}else u+=d.kernedWidth;I=v+o+h,"rtl"===this.direction&&(I=this.width-I-u),t.fillStyle=p,f&&p&&t.fillRect(I,l+b*n+s,u-C,this.fontSize/15),y+=i}else y+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,i){var n=t||this,r=this.fontFamily,o=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,s=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?n.fontFamily:'"'+n.fontFamily+'"';return[e.isLikelyNode?n.fontWeight:n.fontStyle,e.isLikelyNode?n.fontStyle:n.fontWeight,i?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",s].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var i=t.split(this._reNewline),n=new Array(i.length),r=["\n"],o=[],s=0;s<i.length;s++)n[s]=e.util.string.graphemeSplit(i[s]),o=o.concat(n[s],r);return o.pop(),{_unwrappedLines:n,lines:i,graphemeText:o,graphemeLines:n}},toObject:function(t){var e=n.concat(t),r=this.callSuper("toObject",e);return r.styles=i(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper("set",t,e);var i=!1,n=!1;if("object"==typeof t)for(var r in t)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),n=n||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(t),n="path"===t;return n&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,n,r){if(!t)return n(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),s=o.textAnchor||"left";if((r=e.util.object.extend(r?i(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(r.underline=!0),-1!==a.indexOf("overline")&&(r.overline=!0),-1!==a.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var A="";"textContent"in t?A=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(A=t.firstChild.data),A=A.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var l=new e.Text(A,r),h=l.getScaledHeight()/l.height,u=((l.height+l.strokeWidth)*l.lineHeight-l.height)*h,d=l.getScaledHeight()+u,f=0;"center"===s&&(f=l.getScaledWidth()/2),"right"===s&&(f=l.getScaledWidth()),l.set({left:l.left-f,top:l.top-(d-l.fontSize*(.07+l._fontSizeFraction))/l.lineHeight,strokeWidth:void 0!==c?c:1}),n(l)},e.Text.fromObject=function(t,n){var r=i(t),o=t.path;return delete r.path,e.Object._fromObject("Text",r,(function(t){o?e.Object._fromObject("Path",o,(function(e){t.set("path",e),n(t)}),"path"):n(t)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),_.util.object.extend(_.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var i in e)for(var n in e[i])for(var r in e[i][n])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var i=void 0===e?this.styles:{0:this.styles[e]};for(var n in i)for(var r in i[n])if(void 0!==i[n][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,i,n=this.styles,r=0,o=!0,s=0;for(var a in n){for(var A in e=0,n[a]){var c;r++,(c=n[a][A]).hasOwnProperty(t)?(i?c[t]!==i&&(o=!1):i=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete n[a][A]}0===e&&delete n[a]}for(var l=0;l<this._textLines.length;l++)s+=this._textLines[l].length;o&&r===s&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,i,n,r=this.styles;for(i in r){for(n in e=r[i])delete e[n][t],0===Object.keys(e[n]).length&&delete e[n];0===Object.keys(e).length&&delete r[i]}}},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),_.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,n=i.length,r=0;r<n;r++){if(t<=i[r].length)return{lineIndex:r,charIndex:t};t-=i[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:i[r-1].length<t?i[r-1].length:t}},getSelectionStyles:function(t,e,i){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var n=[],r=t;r<e;r++)n.push(this.getStyleAtPosition(r,i));return n},getStyleAtPosition:function(t,e){var i=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex))||{}},setSelectionStyles:function(t,e,i){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var n=e;n<i;n++)this._extendStyles(n,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var i=this.styles&&this.styles[t];return i?i[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,n=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)r[i=this._styleProperties[o]]=void 0===n[i]?this[i]:n[i];return r},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}_.IText=_.util.createClass(_.Text,_.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),n=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,i,n,r,o=0,s=0,a=this.get2DCursorLocation(t);n=a.charIndex,i=a.lineIndex;for(var A=0;A<i;A++)o+=this.getHeightOfLine(A);e=this._getLineLeftOffset(i);var c=this.__charBounds[i][n];return c&&(s=c.left),0!==this.charSpacing&&n===this._textLines[i].length&&(s-=this._getWidthOfCharSpacing()),r={top:o,left:e+(s>0?s:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex>0?i.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),s=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/s,A=t.topOffset,c=this.getValueOfPropertyAt(n,r,"deltaY");A+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,A+t.top+c,a,o)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(i),s=this.get2DCursorLocation(n),a=o.lineIndex,A=s.lineIndex,c=o.charIndex<0?0:o.charIndex,l=s.charIndex<0?0:s.charIndex,h=a;h<=A;h++){var u,d=this._getLineLeftOffset(h)||0,f=this.getHeightOfLine(h),g=0,p=0;if(h===a&&(g=this.__charBounds[a][c].left),h>=a&&h<A)p=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===A)if(0===l)p=this.__charBounds[A][l].left;else{var m=this._getWidthOfCharSpacing();p=this.__charBounds[A][l-1].left+this.__charBounds[A][l-1].width-m}u=f,(this.lineHeight<1||h===A&&this.lineHeight>1)&&(f/=this.lineHeight);var v=t.left+d+g,y=p-g,w=f,C=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",w=1,C=f):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(v=this.width-v-y),e.fillRect(v,t.top+t.topOffset+C,y,w),t.topOffset+=u}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),_.IText.fromObject=function(e,i){if(t(e),e.styles)for(var n in e.styles)for(var r in e.styles[n])t(e.styles[n][r]);_.Object._fromObject("IText",e,i,"text")}}(),b=_.util.object.clone,_.util.object.extend(_.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],_.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){r.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},searchWordBoundary:function(t,e){for(var i=this._text,n=this._reSpace.test(i[t])?t-1:t,r=i[n],o=_.reNonWord;!o.test(r)&&n>0&&n<i.length;)r=i[n+=e];return o.test(r)&&(n+=1===e?0:1),n},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var n=i.slice(0,t),r=_.util.string.graphemeSplit(n).length;if(t===e)return{selectionStart:r,selectionEnd:r};var o=i.slice(t,e);return{selectionStart:r,selectionEnd:r+_.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,i){var n=i.slice(0,t).join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+i.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),n=i.lineIndex,r=i.charIndex,o=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,s=e.leftOffset,a=this.calcTransformMatrix(),A={x:e.left+s,y:e.top+e.topOffset+o},c=this.canvas.getRetinaScaling(),l=this.canvas.upperCanvasEl,h=l.width/c,u=l.height/c,d=h-o,f=u-o,g=l.clientWidth/h,p=l.clientHeight/u;return A=_.util.transformPoint(A,a),(A=_.util.transformPoint(A,this.canvas.viewportTransform)).x*=g,A.y*=p,A.x<0&&(A.x=0),A.x>d&&(A.x=d),A.y<0&&(A.y=0),A.y>f&&(A.y=f),A.x+=this.canvas._offset.left,A.y+=this.canvas._offset.top,{left:A.x+"px",top:A.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,n,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),s=r.lineIndex,a=r.charIndex,A=o.lineIndex,c=o.charIndex;if(s!==A){if(this.styles[s])for(i=a;i<this._unwrappedTextLines[s].length;i++)delete this.styles[s][i];if(this.styles[A])for(i=c;i<this._unwrappedTextLines[A].length;i++)(n=this.styles[A][i])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][a+i-c]=n);for(i=s+1;i<=A;i++)delete this.styles[i];this.shiftLineStyles(A,s-A)}else if(this.styles[s]){n=this.styles[s];var l,h,u=c-a;for(i=a;i<c;i++)delete n[i];for(h in this.styles[s])(l=parseInt(h,10))>=c&&(n[l-u]=n[h],delete n[h])}},shiftLineStyles:function(t,e){var i=b(this.styles);for(var n in this.styles){var r=parseInt(n,10);r>t&&(this.styles[r+e]=i[r],i[r-e]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i,n){var r,o={},s=!1,a=this._unwrappedTextLines[t].length===e;for(var A in i||(i=1),this.shiftLineStyles(t,i),this.styles[t]&&(r=this.styles[t][0===e?e:e-1]),this.styles[t]){var c=parseInt(A,10);c>=e&&(s=!0,o[c-e]=this.styles[t][A],a&&0===e||delete this.styles[t][A])}var l=!1;for(s&&!a&&(this.styles[t+i]=o,l=!0),l&&i--;i>0;)n&&n[i-1]?this.styles[t+i]={0:b(n[i-1])}:r?this.styles[t+i]={0:b(r)}:delete this.styles[t+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(t,e,i,n){this.styles||(this.styles={});var r=this.styles[t],o=r?b(r):{};for(var s in i||(i=1),o){var a=parseInt(s,10);a>=e&&(r[a+i]=o[a],o[a-i]||delete r[a])}if(this._forceClearCache=!0,n)for(;i--;)Object.keys(n[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=b(n[i]));else if(r)for(var A=r[e?e-1:1];A&&i--;)this.styles[t][e+i]=b(A)},insertNewStyleBlock:function(t,e,i){for(var n=this.get2DCursorLocation(e,!0),r=[0],o=0,s=0;s<t.length;s++)"\n"===t[s]?r[++o]=0:r[o]++;for(r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),o&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],o),s=1;s<o;s++)r[s]>0?this.insertCharStyleObject(n.lineIndex+s,0,r[s],i):i&&(this.styles[n.lineIndex+s][0]=i[0]),i=i&&i.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(n.lineIndex+s,0,r[s],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),_.util.object.extend(_.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i=this.getLocalPointer(t),n=0,r=0,o=0,s=0,a=0,A=0,c=this._textLines.length;A<c&&o<=i.y;A++)o+=this.getHeightOfLine(A)*this.scaleY,a=A,A>0&&(s+=this._textLines[A-1].length+this.missingNewlineOffset(A-1));r=this._getLineLeftOffset(a)*this.scaleX,e=this._textLines[a],"rtl"===this.direction&&(i.x=this.width*this.scaleX-i.x+r);for(var l=0,h=e.length;l<h&&(n=r,(r+=this.__charBounds[a][l].kernedWidth*this.scaleX)<=i.x);l++)s++;return this._getNewSelectionStartFromOffset(i,n,r,s,h)},_getNewSelectionStartFromOffset:function(t,e,i,n,r){var o=t.x-e,s=i-t.x,a=n+(s>o||s<0?0:1);return this.flipX&&(a=r-a),a>this._text.length&&(a=this._text.length),a}}),_.util.object.extend(_.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=_.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):_.document.body.appendChild(this.hiddenTextarea),_.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),_.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),_.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),_.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),_.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),_.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(_.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,n,r,o,s,a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,A=this._text.length,c=a.length,l=c-A,h=this.selectionStart,u=this.selectionEnd,d=h!==u;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=h>f.selectionStart;d?(i=this._text.slice(h,u),l+=u-h):c<A&&(i=g?this._text.slice(u+l,u):this._text.slice(h,h-l)),n=a.slice(f.selectionEnd-l,f.selectionEnd),i&&i.length&&(n.length&&(r=this.getSelectionStyles(h,h+1,!1),r=n.map((function(){return r[0]}))),d?(o=h,s=u):g?(o=u-i.length,s=u):(o=u,s=u+i.length),this.removeStyleFromTo(o,s)),n.length&&(e&&n.join("")===_.copiedText&&!_.disableStyleCopyPaste&&(r=_.copiedTextStyle),this.insertNewStyleBlock(n,h,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(_.copiedText=this.getSelectedText(),_.disableStyleCopyPaste?_.copiedTextStyle=null:_.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||_.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i,n=this._getLineLeftOffset(t);return e>0&&(n+=(i=this.__charBounds[t][e-1]).left+i.width),n},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,s);return this._textLines[r].slice(o).length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-i;var o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,s),A=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-A.length+(1-c)},_getIndexOnLine:function(t,e){for(var i,n,r=this._textLines[t],o=this._getLineLeftOffset(t),s=0,a=0,A=r.length;a<A;a++)if((o+=i=this.__charBounds[t][a].width)>e){n=!0;var c=o-i,l=o,h=Math.abs(c-e);s=Math.abs(l-e)<h?a:a-1;break}return n||(s=r.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,n){void 0===n&&(n=i),n>i&&this.removeStyleFromTo(i,n);var r=_.util.string.graphemeSplit(t);this.insertNewStyleBlock(r,i,e),this._text=[].concat(this._text.slice(0,i),r,this._text.slice(n)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),B=_.util.toFixed,x=/  +/g,_.util.object.extend(_.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var i,n=[],r=[],o=t;this._setSVGBg(r);for(var s=0,a=this._textLines.length;s<a;s++)i=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(r,s,e+i,o),this._setSVGTextLineText(n,s,e+i,o),o+=this.getHeightOfLine(s);return{textSpans:n,textBgRects:r}},_createTextCharSpan:function(t,e,i,n){var r=t!==t.trim()||t.match(x),o=this.getSvgSpanStyles(e,r),s=o?'style="'+o+'"':"",a=e.deltaY,A="",c=_.Object.NUM_FRACTION_DIGITS;return a&&(A=' dy="'+B(a,c)+'" '),['<tspan x="',B(i,c),'" y="',B(n,c),'" ',A,s,">",_.util.string.escapeXml(t),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,i,n){var r,o,s,a,A,c=this.getHeightOfLine(e),l=-1!==this.textAlign.indexOf("justify"),h="",u=0,d=this._textLines[e];n+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var f=0,g=d.length-1;f<=g;f++)A=f===g||this.charSpacing,h+=d[f],s=this.__charBounds[e][f],0===u?(i+=s.kernedWidth-s.width,u+=s.width):u+=s.kernedWidth,l&&!A&&this._reSpaceAndTab.test(d[f])&&(A=!0),A||(r=r||this.getCompleteStyleDeclaration(e,f),o=this.getCompleteStyleDeclaration(e,f+1),A=this._hasStyleChangedForSvg(r,o)),A&&(a=this._getStyleDeclaration(e,f)||{},t.push(this._createTextCharSpan(h,a,i,n)),h="",r=o,i+=u,u=0)},_pushTextBgRect:function(t,e,i,n,r,o){var s=_.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(e),' x="',B(i,s),'" y="',B(n,s),'" width="',B(r,s),'" height="',B(o,s),'"></rect>\n')},_setSVGTextLineBg:function(t,e,i,n){for(var r,o,s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,A=0,c=0,l=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,u=s.length;h<u;h++)r=this.__charBounds[e][h],(o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"))!==l?(l&&this._pushTextBgRect(t,l,i+c,n,A,a),c=r.left,A=r.width,l=o):A+=r.kernedWidth;o&&this._pushTextBgRect(t,o,i+c,n,A,a)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new _.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,i=0,n=0;n<t;n++)i+=this.getHeightOfLine(n);return e=this.getHeightOfLine(n),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return _.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}}),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,n=0,r={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[n]&&o>0?(i=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(i++,n++),r[o]={line:e,offset:i},n+=t.graphemeLines[o].length,i+=t.graphemeLines[o].length;return r},styleHas:function(t,i){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[i];n&&(i=n.line)}return e.Text.prototype.styleHas.call(this,t,i)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,n=0,r=!1,o=this._styleMap[t],s=this._styleMap[t+1];for(var a in o&&(t=o.line,n=o.offset),s&&(r=s.line===t,e=s.offset),i=void 0===t?this.styles:{line:this.styles[t]})for(var A in i[a])if(A>=n&&(!r||A<e))for(var c in i[a][A])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var i,n=[];for(this.isWrapping=!0,i=0;i<t.length;i++)n=n.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,n},_measureWord:function(t,e,i){var n,r=0;i=i||0;for(var o=0,s=t.length;o<s;o++)r+=this._getGraphemeBox(t[o],e,o+i,n,!0).kernedWidth,n=t[o];return r},_wrapLine:function(t,i,n,r){var o=0,s=this.splitByGrapheme,a=[],A=[],c=s?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),l="",h=0,u=s?"":" ",d=0,f=0,g=0,p=!0,m=this._getWidthOfCharSpacing();r=r||0,0===c.length&&c.push([]),n-=r;for(var v=0;v<c.length;v++)l=s?c[v]:e.util.string.graphemeSplit(c[v]),d=this._measureWord(l,i,h),h+=l.length,(o+=f+d-m)>n&&!p?(a.push(A),A=[],o=d,p=!0):o+=m,p||s||A.push(u),A=A.concat(l),f=s?0:this._measureWord([u],i,h),h++,p=!1,d>g&&(g=d);return v&&a.push(A),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var i=e.Text.prototype._splitTextIntoLines.call(this,t),n=this._wrapText(i.lines,this.width),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n[o].join("");return i.lines=r,i.graphemeLines=n,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,i){return e.Object._fromObject("Textbox",t,i,"text")}}(e),function(){var t=_.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,n=t.scalingEqually,r=t.scalingYOrSkewingX,o=t.scalingXOrSkewingY,s=t.scaleOrSkewActionName,a=_.Object.prototype.controls;if(a.ml=new _.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:o,getActionName:s}),a.mr=new _.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:o,getActionName:s}),a.mb=new _.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:r,getActionName:s}),a.mt=new _.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:r,getActionName:s}),a.tl=new _.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),a.tr=new _.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),a.bl=new _.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:n}),a.br=new _.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:n}),a.mtr=new _.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),_.Textbox){var A=_.Textbox.prototype.controls={};A.mtr=a.mtr,A.tr=a.tr,A.br=a.br,A.tl=a.tl,A.bl=a.bl,A.mt=a.mt,A.mb=a.mb,A.mr=new _.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),A.ml=new _.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()},3053:function(t,e,i){"use strict";var n=i(602);t.exports=function(t,e,i){var r,o;if(i=i||0,!n(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);for(o=e.length,r=i;i>=0&&r<o;r+=1)if(e[r]===t)return r;return-1}},8592:function(t,e,i){"use strict";var n=i(602),r=i(6092),o=i(5573);t.exports=function(t,e,i){n(t)?r(t,e,i):o(t,e,i)}},6092:function(t){"use strict";t.exports=function(t,e,i){var n=0,r=t.length;for(i=i||null;n<r&&!1!==e.call(i,t[n],n,t);n+=1);}},5573:function(t){"use strict";t.exports=function(t,e,i){var n;for(n in i=i||null,t)if(t.hasOwnProperty(n)&&!1===e.call(i,t[n],n,t))break}},9052:function(t,e,i){"use strict";var n=i(961),r=i(9886),o=i(2560),s=i(5393),a=i(602),A=i(5183),c=i(8592),l=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){n(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var i={handler:t};return e&&(i.context=e),i},h.prototype._safeEvent=function(t){var e,i=this.events;return i||(i=this.events={}),t&&((e=i[t])||(e=[],i[t]=e),i=e),i},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){for(var e=this._safeContext(),i=0;e[i];){if(t===e[i][0])return i;i+=1}return-1},h.prototype._memorizeContext=function(t){var e,i;r(t)&&(e=this._safeContext(),(i=this._indexOfContext(t))>-1?e[i][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,i;r(t)&&(e=this._safeContext(),(i=this._indexOfContext(t))>-1&&(e[i][1]-=1,e[i][1]<=0&&e.splice(i,1)))},h.prototype._bindEvent=function(t,e,i){var n=this._safeEvent(t);this._memorizeContext(i),n.push(this._getHandlerItem(e,i))},h.prototype.on=function(t,e,i){var n=this;o(t)?(t=t.split(l),c(t,(function(t){n._bindEvent(t,e,i)}))):s(t)&&(i=e,c(t,(function(t,e){n.on(e,t,i)})))},h.prototype.once=function(t,e,i){var n=this;if(s(t))return i=e,void c(t,(function(t,e){n.once(e,t,i)}));this.on(t,(function r(){e.apply(i,arguments),n.off(t,r,i)}),i)},h.prototype._spliceMatches=function(t,e){var i,n=0;if(a(t))for(i=t.length;n<i;n+=1)!0===e(t[n])&&(t.splice(n,1),i-=1,n-=1)},h.prototype._matchHandler=function(t){var e=this;return function(i){var n=t===i.handler;return n&&e._forgetContext(i.context),n}},h.prototype._matchContext=function(t){var e=this;return function(i){var n=t===i.context;return n&&e._forgetContext(i.context),n}},h.prototype._matchHandlerAndContext=function(t,e){var i=this;return function(n){var r=t===n.handler,o=e===n.context,s=r&&o;return s&&i._forgetContext(n.context),s}},h.prototype._offByEventName=function(t,e){var i=this,n=A(e),r=i._matchHandler(e);t=t.split(l),c(t,(function(t){var e=i._safeEvent(t);n?i._spliceMatches(e,r):(c(e,(function(t){i._forgetContext(t.context)})),i.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,i=this._matchHandler(t);c(this._safeEvent(),(function(t){e._spliceMatches(t,i)}))},h.prototype._offByObject=function(t,e){var i,n=this;this._indexOfContext(t)<0?c(t,(function(t,e){n.off(e,t)})):o(e)?(i=this._matchContext(t),n._spliceMatches(this._safeEvent(e),i)):A(e)?(i=this._matchHandlerAndContext(e,t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)}))):(i=this._matchContext(t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)})))},h.prototype.off=function(t,e){o(t)?this._offByEventName(t,e):arguments.length?A(t)?this._offByHandler(t):s(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,i,n,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),i=Array.prototype.slice.call(arguments,1),n=0;e[n];){if(!1===(r=e[n]).handler.apply(r.context,i))return!1;n+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=h},961:function(t){"use strict";t.exports=function(t,e){var i,n,r,o,s=Object.prototype.hasOwnProperty;for(r=1,o=arguments.length;r<o;r+=1)for(n in i=arguments[r])s.call(i,n)&&(t[n]=i[n]);return t}},1610:function(t,e,i){"use strict";var n=i(5695),r=i(3778);t.exports=function(t,e){for(var i=arguments,o=i[0],s=1,a=i.length;s<a;s+=1){if(n(o)||r(o))return;o=o[i[s]]}return o}},4564:function(t,e,i){"use strict";var n=i(5573);t.exports=function(t,e){var i=document.createElement("img"),r="";return n(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),i.src=t+"?"+r,i.style.display="none",document.body.appendChild(i),document.body.removeChild(i),i}},4729:function(t,e,i){"use strict";var n=i(5695),r=i(4564);t.exports=function(t,e){var i=location.hostname,o="TOAST UI "+t+" for "+i+": Statistics",s=window.localStorage.getItem(o);(n(window.tui)||!1!==window.tui.usageStatistics)&&(s&&!function(t){return(new Date).getTime()-t>6048e5}(s)||(window.localStorage.setItem(o,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||r("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:i,dp:i,dh:t,el:t,ec:"use"})}),1e3)))}},602:function(t){"use strict";t.exports=function(t){return t instanceof Array}},9886:function(t,e,i){"use strict";var n=i(5695),r=i(3778);t.exports=function(t){return!n(t)&&!r(t)}},5183:function(t){"use strict";t.exports=function(t){return t instanceof Function}},3778:function(t){"use strict";t.exports=function(t){return null===t}},5393:function(t){"use strict";t.exports=function(t){return t===Object(t)}},2560:function(t){"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},5695:function(t){"use strict";t.exports=function(t){return void 0===t}},4426:function(t,e,i){t.exports=i(4486)},9406:function(t,e,i){t.exports=i(4877)},789:function(t,e,i){t.exports=i(7178)},381:function(t,e,i){t.exports=i(5603)},7636:function(t,e,i){t.exports=i(1206)},1899:function(t,e,i){t.exports=i(6174)},899:function(t,e,i){t.exports=i(57)},8005:function(t,e,i){t.exports=i(4741)},6562:function(t,e,i){t.exports=i(8368)},9131:function(t,e,i){t.exports=i(3739)},4383:function(t,e,i){t.exports=i(172)},6065:function(t,e,i){t.exports=i(4963)},1734:function(t,e,i){t.exports=i(7820)},2461:function(t,e,i){t.exports=i(5636)},5214:function(t,e,i){t.exports=i(5059)},6397:function(t,e,i){t.exports=i(3969)},8189:function(t,e,i){t.exports=i(6618)},9146:function(t,e,i){t.exports=i(5279)},4496:function(t,e,i){t.exports=i(9562)},3972:function(t,e,i){t.exports=i(652)},7172:function(t,e,i){t.exports=i(2813)},1845:function(t,e,i){t.exports=i(8664)},662:function(t,e,i){t.exports=i(1457)},711:function(t,e,i){t.exports=i(2937)},6623:function(t,e,i){t.exports=i(9297)},7077:function(t,e,i){t.exports=i(8026)},9856:function(t,e,i){t.exports=i(2044)},4230:function(t,e,i){t.exports=i(2214)},184:function(t,e,i){t.exports=i(9256)},3742:function(t,e,i){t.exports=i(5659)},1801:function(t){var e={rect:1,circle:2,triangle:1},i={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function n(t,e,i){var n=t.x,r=t.y,o=e.x,s=e.y,a=i*Math.PI/180;return{originX:n>(o-n)*Math.cos(a)-(s-r)*Math.sin(a)+n?"right":"left",originY:r>(o-n)*Math.sin(a)+(s-r)*Math.cos(a)+r?"bottom":"top"}}t.exports={setOrigins:function(t){var e=t.getPointByOrigin("left","top"),i=t.getPointByOrigin("right","top"),n=t.getPointByOrigin("right","bottom"),r=t.getPointByOrigin("left","bottom");t.origins={lt:e,rt:i,rb:n,lb:r}},resize:function(t,r,o){(function(t){return"center"===t.originX&&"center"===t.originY})(t)&&(function(t,e){var i=e.getPointByOrigin("center","center"),r=n(i,t,-e.angle),o=r.originX,s=r.originY,a=e.getPointByOrigin(o,s),A=e.left-(i.x-a.x),c=e.top-(i.y-a.y);e.set({originX:o,originY:s,left:A,top:c}),e.setCoords()}(r,t),function(t){var e=t.originX,i=t.originY,n=e.substring(0,1)+i.substring(0,1);t.startPoint=t.origins[n]}(t)),o?function(t){var e=t.type,n=t.scaleX,r=t.scaleY,o=i[e],s=t[o.w]*n,a=t[o.h]*r;if(t.isRegular){var A=Math.max(n,r);s=t[o.w]*A,a=t[o.h]*A}var c={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};c[o.w]=s,c[o.h]=a,t.set(c)}(t):function(t,n){var r=n.type,o=n.strokeWidth,s=n.startPoint,a=e[r],A=i[r],c=!("triangle"!==n.type),l={},h=Math.abs(s.x-t.x)/a,u=Math.abs(s.y-t.y)/a;h>o&&(h-=o/a),u>o&&(u-=o/a),n.isRegular&&(h=u=Math.max(h,u),c&&(u=Math.sqrt(3)/2*h)),l[A.w]=h,l[A.h]=u,n.set(l)}(r,t),function(t,e){var i=e.startPoint,r=n(i,t,-e.angle),o=r.originX,s=r.originY;e.setPositionByOrigin(i,o,s),e.setCoords()}(r,t)},adjustOriginToCenter:function(t){var e=t.getPointByOrigin("center","center"),i=t.originX,n=t.originY,r=t.getPointByOrigin(i,n),o=t.left+(e.x-r.x),s=t.top+(e.y-r.y);t.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:o,top:s}),t.setCoords()}}},2221:function(t,e,i){i(5454),i(9173);var n=i(7545);t.exports=n.Array.from},5078:function(t,e,i){i(8118);var n=i(7545);t.exports=n.Array.isArray},6135:function(t,e,i){i(9106);var n=i(5607);t.exports=n("Array").concat},9510:function(t,e,i){i(1710);var n=i(5607);t.exports=n("Array").fill},3971:function(t,e,i){i(3436);var n=i(5607);t.exports=n("Array").filter},98:function(t,e,i){i(9823);var n=i(5607);t.exports=n("Array").forEach},2089:function(t,e,i){i(2276);var n=i(5607);t.exports=n("Array").indexOf},6209:function(t,e,i){i(3838);var n=i(5607);t.exports=n("Array").map},2671:function(t,e,i){i(5818);var n=i(5607);t.exports=n("Array").slice},1375:function(t,e,i){i(2178);var n=i(5607);t.exports=n("Array").splice},3528:function(t,e,i){i(665);var n=i(5607);t.exports=n("Function").bind},5739:function(t,e,i){i(8939),i(5454);var n=i(8703);t.exports=n},278:function(t,e,i){var n=i(3528),r=Function.prototype;t.exports=function(t){var e=t.bind;return t===r||t instanceof Function&&e===r.bind?n:e}},1484:function(t,e,i){var n=i(6135),r=Array.prototype;t.exports=function(t){var e=t.concat;return t===r||t instanceof Array&&e===r.concat?n:e}},7731:function(t,e,i){var n=i(9510),r=Array.prototype;t.exports=function(t){var e=t.fill;return t===r||t instanceof Array&&e===r.fill?n:e}},3669:function(t,e,i){var n=i(3971),r=Array.prototype;t.exports=function(t){var e=t.filter;return t===r||t instanceof Array&&e===r.filter?n:e}},2604:function(t,e,i){var n=i(2089),r=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===r||t instanceof Array&&e===r.indexOf?n:e}},263:function(t,e,i){var n=i(6209),r=Array.prototype;t.exports=function(t){var e=t.map;return t===r||t instanceof Array&&e===r.map?n:e}},7663:function(t,e,i){var n=i(2671),r=Array.prototype;t.exports=function(t){var e=t.slice;return t===r||t instanceof Array&&e===r.slice?n:e}},5063:function(t,e,i){var n=i(1375),r=Array.prototype;t.exports=function(t){var e=t.splice;return t===r||t instanceof Array&&e===r.splice?n:e}},6813:function(t,e,i){var n=i(3842),r=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===r||t instanceof String&&e===r.trim?n:e}},6285:function(t,e,i){i(2666);var n=i(7545);t.exports=n.Number.parseInt},3213:function(t,e,i){i(3113);var n=i(7545).Object;t.exports=function(t,e){return n.create(t,e)}},3512:function(t,e,i){i(297);var n=i(7545).Object,r=t.exports=function(t,e,i){return n.defineProperty(t,e,i)};n.defineProperty.sham&&(r.sham=!0)},8168:function(t,e,i){i(9234);var n=i(7545);t.exports=n.Object.getPrototypeOf},8651:function(t,e,i){i(2647);var n=i(7545);t.exports=n.Object.keys},3083:function(t,e,i){i(3222);var n=i(7545);t.exports=n.Object.setPrototypeOf},2987:function(t,e,i){i(4859);var n=i(7545);t.exports=n.parseFloat},2239:function(t,e,i){i(5706);var n=i(7545);t.exports=n.parseInt},3154:function(t,e,i){i(4242),i(8939),i(6663),i(9021),i(7884),i(8885),i(1868),i(5454);var n=i(7545);t.exports=n.Promise},6577:function(t,e,i){i(5397);var n=i(7545);t.exports=n.Reflect.construct},3842:function(t,e,i){i(957);var n=i(5607);t.exports=n("String").trim},5008:function(t,e,i){i(9106),i(6663),i(6187),i(9781),i(492),i(6681),i(9594),i(3665),i(9017),i(1250),i(9786),i(503),i(6565),i(9322),i(3610),i(6886),i(3514),i(8671),i(8556),i(1367);var n=i(7545);t.exports=n.Symbol},994:function(t,e,i){i(8939),i(6663),i(5454),i(3665);var n=i(9207);t.exports=n.f("iterator")},2813:function(t,e,i){var n=i(3822);t.exports=n},8664:function(t,e,i){var n=i(1434);t.exports=n},1457:function(t,e,i){var n=i(7710);t.exports=n},2937:function(t,e,i){var n=i(4741);t.exports=n},9297:function(t,e,i){var n=i(4963);t.exports=n},8026:function(t,e,i){var n=i(7820);t.exports=n},2044:function(t,e,i){var n=i(8980);t.exports=n},2214:function(t,e,i){var n=i(6672);t.exports=n},9256:function(t,e,i){var n=i(2285);i(177),i(9031),i(6658),i(1875),i(8658),i(4592),i(6680),t.exports=n},5659:function(t,e,i){var n=i(8535);t.exports=n},6235:function(t,e,i){var n=i(6447),r=i(9288);t.exports=function(t){if(n(t))return t;throw TypeError(r(t)+" is not a function")}},1404:function(t,e,i){var n=i(2091),r=i(9288);t.exports=function(t){if(n(t))return t;throw TypeError(r(t)+" is not a constructor")}},7757:function(t,e,i){var n=i(6447);t.exports=function(t){if("object"==typeof t||n(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},7423:function(t){t.exports=function(){}},6961:function(t){t.exports=function(t,e,i){if(t instanceof e)return t;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}},1138:function(t,e,i){var n=i(5744);t.exports=function(t){if(n(t))return t;throw TypeError(String(t)+" is not an object")}},2724:function(t,e,i){"use strict";var n=i(1795),r=i(7739),o=i(4104);t.exports=function(t){for(var e=n(this),i=o(e),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),A=s>2?arguments[2]:void 0,c=void 0===A?i:r(A,i);c>a;)e[a++]=t;return e}},7397:function(t,e,i){"use strict";var n=i(454).forEach,r=i(424)("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},841:function(t,e,i){"use strict";var n=i(8043),r=i(1795),o=i(1635),s=i(6109),a=i(2091),A=i(4104),c=i(9361),l=i(1669),h=i(8703);t.exports=function(t){var e=r(t),i=a(this),u=arguments.length,d=u>1?arguments[1]:void 0,f=void 0!==d;f&&(d=n(d,u>2?arguments[2]:void 0,2));var g,p,m,v,y,w,C=h(e),b=0;if(!C||this==Array&&s(C))for(g=A(e),p=i?new this(g):Array(g);g>b;b++)w=f?d(e[b],b):e[b],c(p,b,w);else for(y=(v=l(e,C)).next,p=i?new this:[];!(m=y.call(v)).done;b++)w=f?o(v,d,[m.value,b],!0):m.value,c(p,b,w);return p.length=b,p}},8180:function(t,e,i){var n=i(101),r=i(7739),o=i(4104),s=function(t){return function(e,i,s){var a,A=n(e),c=o(A),l=r(s,c);if(t&&i!=i){for(;c>l;)if((a=A[l++])!=a)return!0}else for(;c>l;l++)if((t||l in A)&&A[l]===i)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},454:function(t,e,i){var n=i(8043),r=i(2202),o=i(1795),s=i(4104),a=i(1321),A=[].push,c=function(t){var e=1==t,i=2==t,c=3==t,l=4==t,h=6==t,u=7==t,d=5==t||h;return function(f,g,p,m){for(var v,y,w=o(f),C=r(w),b=n(g,p,3),B=s(C),x=0,_=m||a,S=e?_(f,B):i||u?_(f,0):void 0;B>x;x++)if((d||x in C)&&(y=b(v=C[x],x,w),t))if(e)S[x]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:A.call(S,v)}else switch(t){case 4:return!1;case 7:A.call(S,v)}return h?-1:c||l?l:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},242:function(t,e,i){var n=i(6192),r=i(8182),o=i(4218),s=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},424:function(t,e,i){"use strict";var n=i(6192);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},3712:function(t,e,i){var n=i(4770),r=i(2091),o=i(5744),s=i(8182)("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,(r(e)&&(e===Array||n(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?Array:e}},1321:function(t,e,i){var n=i(3712);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},1635:function(t,e,i){var n=i(1138),r=i(6639);t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(e){r(t,"throw",e)}}},9770:function(t,e,i){var n=i(8182)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o={};o[n]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i}},9272:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},4696:function(t,e,i){var n=i(3471),r=i(6447),o=i(9272),s=i(8182)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=n?o:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?i:a?o(e):"Object"==(n=o(e))&&r(e.callee)?"Arguments":n}},4635:function(t,e,i){var n=i(6192);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},5148:function(t,e,i){"use strict";var n=i(4413).IteratorPrototype,r=i(2853),o=i(774),s=i(1284),a=i(7771),A=function(){return this};t.exports=function(t,e,i){var c=e+" Iterator";return t.prototype=r(n,{next:o(1,i)}),s(t,c,!1,!0),a[c]=A,t}},8711:function(t,e,i){var n=i(69),r=i(2760),o=i(774);t.exports=n?function(t,e,i){return r.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},774:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9361:function(t,e,i){"use strict";var n=i(77),r=i(2760),o=i(774);t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,o(0,i)):t[s]=i}},7218:function(t,e,i){"use strict";var n=i(3085),r=i(5546),o=i(2282),s=i(6447),a=i(5148),A=i(9341),c=i(4469),l=i(1284),h=i(8711),u=i(9482),d=i(8182),f=i(7771),g=i(4413),p=o.PROPER,m=o.CONFIGURABLE,v=g.IteratorPrototype,y=g.BUGGY_SAFARI_ITERATORS,w=d("iterator"),C="keys",b="values",B="entries",x=function(){return this};t.exports=function(t,e,i,o,d,g,_){a(i,e,o);var S,I,M,T=function(t){if(t===d&&O)return O;if(!y&&t in F)return F[t];switch(t){case C:case b:case B:return function(){return new i(this,t)}}return function(){return new i(this)}},E=e+" Iterator",k=!1,F=t.prototype,D=F[w]||F["@@iterator"]||d&&F[d],O=!y&&D||T(d),U="Array"==e&&F.entries||D;if(U&&(S=A(U.call(new t)))!==Object.prototype&&S.next&&(r||A(S)===v||(c?c(S,v):s(S[w])||u(S,w,x)),l(S,E,!0,!0),r&&(f[E]=x)),p&&d==b&&D&&D.name!==b&&(!r&&m?h(F,"name",b):(k=!0,O=function(){return D.call(this)})),d)if(I={values:T(b),keys:g?O:T(C),entries:T(B)},_)for(M in I)(y||k||!(M in F))&&u(F,M,I[M]);else n({target:e,proto:!0,forced:y||k},I);return r&&!_||F[w]===O||u(F,w,O,{name:d}),f[e]=O,I}},1488:function(t,e,i){var n=i(7545),r=i(4500),o=i(9207),s=i(2760).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},69:function(t,e,i){var n=i(6192);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7449:function(t,e,i){var n=i(8576),r=i(5744),o=n.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7365:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(t){t.exports="object"==typeof window},9347:function(t,e,i){var n=i(8989),r=i(8576);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==r.Pebble},9536:function(t,e,i){var n=i(8989);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},224:function(t,e,i){var n=i(9272),r=i(8576);t.exports="process"==n(r.process)},5914:function(t,e,i){var n=i(8989);t.exports=/web0s(?!.*chrome)/i.test(n)},8989:function(t,e,i){var n=i(150);t.exports=n("navigator","userAgent")||""},4218:function(t,e,i){var n,r,o=i(8576),s=i(8989),a=o.process,A=o.Deno,c=a&&a.versions||A&&A.version,l=c&&c.v8;l?r=(n=l.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(r=n[1]),t.exports=r&&+r},5607:function(t,e,i){var n=i(7545);t.exports=function(t){return n[t+"Prototype"]}},2952:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(t,e,i){"use strict";var n=i(8576),r=i(6447),o=i(5141).f,s=i(9245),a=i(7545),A=i(8043),c=i(8711),l=i(4500),h=function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var i,u,d,f,g,p,m,v,y=t.target,w=t.global,C=t.stat,b=t.proto,B=w?n:C?n[y]:(n[y]||{}).prototype,x=w?a:a[y]||c(a,y,{})[y],_=x.prototype;for(d in e)i=!s(w?d:y+(C?".":"#")+d,t.forced)&&B&&l(B,d),g=x[d],i&&(p=t.noTargetGet?(v=o(B,d))&&v.value:B[d]),f=i&&p?p:e[d],i&&typeof g==typeof f||(m=t.bind&&i?A(f,n):t.wrap&&i?h(f):b&&r(f)?A(Function.call,f):f,(t.sham||f&&f.sham||g&&g.sham)&&c(m,"sham",!0),c(x,d,m),b&&(l(a,u=y+"Prototype")||c(a,u,{}),c(a[u],d,f),t.real&&_&&!_[d]&&c(_,d,f)))}},6192:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},8043:function(t,e,i){var n=i(6235);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},6782:function(t,e,i){"use strict";var n=i(6235),r=i(5744),o=[].slice,s={};t.exports=Function.bind||function(t){var e=n(this),i=o.call(arguments,1),a=function(){var n=i.concat(o.call(arguments));return this instanceof a?function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("C,a","return new C("+n.join(",")+")")}return s[e](t,i)}(e,n.length,n):e.apply(t,n)};return r(e.prototype)&&(a.prototype=e.prototype),a}},2282:function(t,e,i){var n=i(69),r=i(4500),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=r(o,"name"),A=a&&"something"===function(){}.name,c=a&&(!n||n&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:A,CONFIGURABLE:c}},150:function(t,e,i){var n=i(7545),r=i(8576),o=i(6447),s=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t])||s(r[t]):n[t]&&n[t][e]||r[t]&&r[t][e]}},8703:function(t,e,i){var n=i(4696),r=i(5037),o=i(7771),s=i(8182)("iterator");t.exports=function(t){if(null!=t)return r(t,s)||r(t,"@@iterator")||o[n(t)]}},1669:function(t,e,i){var n=i(6235),r=i(1138),o=i(8703);t.exports=function(t,e){var i=arguments.length<2?o(t):e;if(n(i))return r(i.call(t));throw TypeError(String(t)+" is not iterable")}},5037:function(t,e,i){var n=i(6235);t.exports=function(t,e){var i=t[e];return null==i?void 0:n(i)}},8576:function(t,e,i){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},4500:function(t,e,i){var n=i(1795),r={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return r.call(n(t),e)}},4535:function(t){t.exports={}},3681:function(t,e,i){var n=i(8576);t.exports=function(t,e){var i=n.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},7403:function(t,e,i){var n=i(150);t.exports=n("document","documentElement")},188:function(t,e,i){var n=i(69),r=i(6192),o=i(7449);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},2202:function(t,e,i){var n=i(6192),r=i(9272),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},9516:function(t,e,i){var n=i(6447),r=i(6434),o=Function.toString;n(r.inspectSource)||(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},273:function(t,e,i){var n=i(5744),r=i(8711);t.exports=function(t,e){n(e)&&"cause"in e&&r(t,"cause",t.cause)}},3326:function(t,e,i){var n,r,o,s=i(8921),a=i(8576),A=i(5744),c=i(8711),l=i(4500),h=i(6434),u=i(9766),d=i(4535),f="Object already initialized",g=a.WeakMap;if(s||h.state){var p=h.state||(h.state=new g),m=p.get,v=p.has,y=p.set;n=function(t,e){if(v.call(p,t))throw new TypeError(f);return e.facade=t,y.call(p,t,e),e},r=function(t){return m.call(p,t)||{}},o=function(t){return v.call(p,t)}}else{var w=u("state");d[w]=!0,n=function(t,e){if(l(t,w))throw new TypeError(f);return e.facade=t,c(t,w,e),e},r=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:n,get:r,has:o,enforce:function(t){return o(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!A(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},6109:function(t,e,i){var n=i(8182),r=i(7771),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},4770:function(t,e,i){var n=i(9272);t.exports=Array.isArray||function(t){return"Array"==n(t)}},6447:function(t){t.exports=function(t){return"function"==typeof t}},2091:function(t,e,i){var n=i(6192),r=i(6447),o=i(4696),s=i(150),a=i(9516),A=[],c=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,u=!l.exec((function(){})),d=function(t){if(!r(t))return!1;try{return c(Object,A,t),!0}catch(t){return!1}};t.exports=!c||n((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?function(t){if(!r(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return u||!!h.call(l,a(t))}:d},9245:function(t,e,i){var n=i(6192),r=i(6447),o=/#|\.prototype\./,s=function(t,e){var i=A[a(t)];return i==l||i!=c&&(r(e)?n(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},A=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},5744:function(t,e,i){var n=i(6447);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},5546:function(t){t.exports=!0},3236:function(t,e,i){var n=i(6447),r=i(150),o=i(615);t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return n(e)&&Object(t)instanceof e}},3442:function(t,e,i){var n=i(1138),r=i(6109),o=i(4104),s=i(8043),a=i(1669),A=i(8703),c=i(6639),l=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,i){var h,u,d,f,g,p,m,v=i&&i.that,y=!(!i||!i.AS_ENTRIES),w=!(!i||!i.IS_ITERATOR),C=!(!i||!i.INTERRUPTED),b=s(e,v,1+y+C),B=function(t){return h&&c(h,"normal",t),new l(!0,t)},x=function(t){return y?(n(t),C?b(t[0],t[1],B):b(t[0],t[1])):C?b(t,B):b(t)};if(w)h=t;else{if(!(u=A(t)))throw TypeError(String(t)+" is not iterable");if(r(u)){for(d=0,f=o(t);f>d;d++)if((g=x(t[d]))&&g instanceof l)return g;return new l(!1)}h=a(t,u)}for(p=h.next;!(m=p.call(h)).done;){try{g=x(m.value)}catch(t){c(h,"throw",t)}if("object"==typeof g&&g&&g instanceof l)return g}return new l(!1)}},6639:function(t,e,i){var n=i(1138),r=i(5037);t.exports=function(t,e,i){var o,s;n(t);try{if(!(o=r(t,"return"))){if("throw"===e)throw i;return i}o=o.call(t)}catch(t){s=!0,o=t}if("throw"===e)throw i;if(s)throw o;return n(o),i}},4413:function(t,e,i){"use strict";var n,r,o,s=i(6192),a=i(6447),A=i(2853),c=i(9341),l=i(9482),h=i(8182),u=i(5546),d=h("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(r=c(c(o)))!==Object.prototype&&(n=r):f=!0),null==n||s((function(){var t={};return n[d].call(t)!==t}))?n={}:u&&(n=A(n)),a(n[d])||l(n,d,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},7771:function(t){t.exports={}},4104:function(t,e,i){var n=i(8445);t.exports=function(t){return n(t.length)}},2950:function(t,e,i){var n,r,o,s,a,A,c,l,h=i(8576),u=i(5141).f,d=i(7160).set,f=i(9536),g=i(9347),p=i(5914),m=i(224),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,w=h.process,C=h.Promise,b=u(h,"queueMicrotask"),B=b&&b.value;B||(n=function(){var t,e;for(m&&(t=w.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():o=void 0,t}}o=void 0,t&&t.enter()},f||m||p||!v||!y?!g&&C&&C.resolve?((c=C.resolve(void 0)).constructor=C,l=c.then,s=function(){l.call(c,n)}):s=m?function(){w.nextTick(n)}:function(){d.call(h,n)}:(a=!0,A=y.createTextNode(""),new v(n).observe(A,{characterData:!0}),s=function(){A.data=a=!a})),t.exports=B||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,s()),o=e}},4471:function(t,e,i){var n=i(8576);t.exports=n.Promise},3045:function(t,e,i){var n=i(4218),r=i(6192);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},4551:function(t,e,i){var n=i(6192),r=i(8182),o=i(5546),s=r("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,i="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),i+=n+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},8921:function(t,e,i){var n=i(8576),r=i(6447),o=i(9516),s=n.WeakMap;t.exports=r(s)&&/native code/.test(o(s))},9438:function(t,e,i){"use strict";var n=i(6235),r=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},15:function(t,e,i){var n=i(8576),r=i(6192),o=i(4845),s=i(4277).trim,a=i(1450),A=n.parseFloat,c=n.Symbol,l=c&&c.iterator,h=1/A(a+"-0")!=-1/0||l&&!r((function(){A(Object(l))}));t.exports=h?function(t){var e=s(o(t)),i=A(e);return 0===i&&"-"==e.charAt(0)?-0:i}:A},2558:function(t,e,i){var n=i(8576),r=i(6192),o=i(4845),s=i(4277).trim,a=i(1450),A=n.parseInt,c=n.Symbol,l=c&&c.iterator,h=/^[+-]?0[Xx]/,u=8!==A(a+"08")||22!==A(a+"0x16")||l&&!r((function(){A(Object(l))}));t.exports=u?function(t,e){var i=s(o(t));return A(i,e>>>0||(h.test(i)?16:10))}:A},2503:function(t,e,i){"use strict";var n=i(69),r=i(6192),o=i(7653),s=i(4750),a=i(6007),A=i(1795),c=i(2202),l=Object.assign,h=Object.defineProperty;t.exports=!l||r((function(){if(n&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[i]||o(l({},e)).join("")!=r}))?function(t,e){for(var i=A(t),r=arguments.length,l=1,h=s.f,u=a.f;r>l;)for(var d,f=c(arguments[l++]),g=h?o(f).concat(h(f)):o(f),p=g.length,m=0;p>m;)d=g[m++],n&&!u.call(f,d)||(i[d]=f[d]);return i}:l},2853:function(t,e,i){var n,r=i(1138),o=i(1187),s=i(2952),a=i(4535),A=i(7403),c=i(7449),l=i(9766),h="prototype",u="script",d=l("IE_PROTO"),f=function(){},g=function(t){return"<"+u+">"+t+"</"+u+">"},p=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;m="undefined"!=typeof document?document.domain&&n?p(n):(e=c("iframe"),i="java"+u+":",e.style.display="none",A.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):p(n);for(var r=s.length;r--;)delete m[h][s[r]];return m()};a[d]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(f[h]=r(t),i=new f,f[h]=null,i[d]=t):i=m(),void 0===e?i:o(i,e)}},1187:function(t,e,i){var n=i(69),r=i(2760),o=i(1138),s=i(7653);t.exports=n?Object.defineProperties:function(t,e){o(t);for(var i,n=s(e),a=n.length,A=0;a>A;)r.f(t,i=n[A++],e[i]);return t}},2760:function(t,e,i){var n=i(69),r=i(188),o=i(1138),s=i(77),a=Object.defineProperty;e.f=n?a:function(t,e,i){if(o(t),e=s(e),o(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},5141:function(t,e,i){var n=i(69),r=i(6007),o=i(774),s=i(101),a=i(77),A=i(4500),c=i(188),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=s(t),e=a(e),c)try{return l(t,e)}catch(t){}if(A(t,e))return o(!r.f.call(t,e),t[e])}},4052:function(t,e,i){var n=i(101),r=i(2092).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},2092:function(t,e,i){var n=i(7934),r=i(2952).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},4750:function(t,e){e.f=Object.getOwnPropertySymbols},9341:function(t,e,i){var n=i(4500),r=i(6447),o=i(1795),s=i(9766),a=i(4635),A=s("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){var e=o(t);if(n(e,A))return e[A];var i=e.constructor;return r(i)&&e instanceof i?i.prototype:e instanceof Object?c:null}},7934:function(t,e,i){var n=i(4500),r=i(101),o=i(8180).indexOf,s=i(4535);t.exports=function(t,e){var i,a=r(t),A=0,c=[];for(i in a)!n(s,i)&&n(a,i)&&c.push(i);for(;e.length>A;)n(a,i=e[A++])&&(~o(c,i)||c.push(i));return c}},7653:function(t,e,i){var n=i(7934),r=i(2952);t.exports=Object.keys||function(t){return n(t,r)}},6007:function(t,e){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);e.f=r?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},4469:function(t,e,i){var n=i(1138),r=i(7757);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,o){return n(i),r(o),e?t.call(i,o):i.__proto__=o,i}}():void 0)},158:function(t,e,i){"use strict";var n=i(3471),r=i(4696);t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},380:function(t,e,i){var n=i(6447),r=i(5744);t.exports=function(t,e){var i,o;if("string"===e&&n(i=t.toString)&&!r(o=i.call(t)))return o;if(n(i=t.valueOf)&&!r(o=i.call(t)))return o;if("string"!==e&&n(i=t.toString)&&!r(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},7545:function(t){t.exports={}},892:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9126:function(t,e,i){var n=i(1138),r=i(5744),o=i(9438);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},533:function(t,e,i){var n=i(9482);t.exports=function(t,e,i){for(var r in e)i&&i.unsafe&&t[r]?t[r]=e[r]:n(t,r,e[r],i);return t}},9482:function(t,e,i){var n=i(8711);t.exports=function(t,e,i,r){r&&r.enumerable?t[e]=i:n(t,e,i)}},3209:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},7613:function(t,e,i){var n=i(8576);t.exports=function(t,e){try{Object.defineProperty(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},3656:function(t,e,i){"use strict";var n=i(150),r=i(2760),o=i(8182),s=i(69),a=o("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},1284:function(t,e,i){var n=i(3471),r=i(2760).f,o=i(8711),s=i(4500),a=i(158),A=i(8182)("toStringTag");t.exports=function(t,e,i,c){if(t){var l=i?t:t.prototype;s(l,A)||r(l,A,{configurable:!0,value:e}),c&&!n&&o(l,"toString",a)}}},9766:function(t,e,i){var n=i(8717),r=i(2759),o=n("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},6434:function(t,e,i){var n=i(8576),r=i(7613),o="__core-js_shared__",s=n[o]||r(o,{});t.exports=s},8717:function(t,e,i){var n=i(5546),r=i(6434);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.2",mode:n?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(t,e,i){var n=i(1138),r=i(1404),o=i(8182)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[o])?e:r(i)}},863:function(t,e,i){var n=i(1941),r=i(4845),o=i(3209),s=function(t){return function(e,i){var s,a,A=r(o(e)),c=n(i),l=A.length;return c<0||c>=l?t?"":void 0:(s=A.charCodeAt(c))<55296||s>56319||c+1===l||(a=A.charCodeAt(c+1))<56320||a>57343?t?A.charAt(c):s:t?A.slice(c,c+2):a-56320+(s-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},7977:function(t){"use strict";var e=2147483647,i=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,a=function(t){return t+22+75*(t<26)},A=function(t,e,i){var n=0;for(t=i?o(t/700):t>>1,t+=o(t/e);t>455;n+=36)t=o(t/35);return o(n+36*t/(t+38))},c=function(t){var i=[];t=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),i--)}else e.push(r)}return e}(t);var n,c,l=t.length,h=128,u=0,d=72;for(n=0;n<t.length;n++)(c=t[n])<128&&i.push(s(c));var f=i.length,g=f;for(f&&i.push("-");g<l;){var p=e;for(n=0;n<t.length;n++)(c=t[n])>=h&&c<p&&(p=c);var m=g+1;if(p-h>o((e-u)/m))throw RangeError(r);for(u+=(p-h)*m,h=p,n=0;n<t.length;n++){if((c=t[n])<h&&++u>e)throw RangeError(r);if(c==h){for(var v=u,y=36;;y+=36){var w=y<=d?1:y>=d+26?26:y-d;if(v<w)break;var C=v-w,b=36-w;i.push(s(a(w+C%b))),v=o(C/b)}i.push(s(a(v))),d=A(u,m,g==f),u=0,++g}}++u,++h}return i.join("")};t.exports=function(t){var e,r,o=[],s=t.toLowerCase().replace(n,".").split(".");for(e=0;e<s.length;e++)r=s[e],o.push(i.test(r)?"xn--"+c(r):r);return o.join(".")}},6815:function(t,e,i){var n=i(2282).PROPER,r=i(6192),o=i(1450);t.exports=function(t){return r((function(){return!!o[t]()||""!==""[t]()||n&&o[t].name!==t}))}},4277:function(t,e,i){var n=i(3209),r=i(4845),o="["+i(1450)+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),A=function(t){return function(e){var i=r(n(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(a,"")),i}};t.exports={start:A(1),end:A(2),trim:A(3)}},7160:function(t,e,i){var n,r,o,s,a=i(8576),A=i(6447),c=i(6192),l=i(8043),h=i(7403),u=i(7449),d=i(9536),f=i(224),g=a.setImmediate,p=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,w=0,C={},b="onreadystatechange";try{n=a.location}catch(t){}var B=function(t){if(C.hasOwnProperty(t)){var e=C[t];delete C[t],e()}},x=function(t){return function(){B(t)}},_=function(t){B(t.data)},S=function(t){a.postMessage(String(t),n.protocol+"//"+n.host)};g&&p||(g=function(t){for(var e=[],i=arguments.length,n=1;i>n;)e.push(arguments[n++]);return C[++w]=function(){(A(t)?t:Function(t)).apply(void 0,e)},r(w),w},p=function(t){delete C[t]},f?r=function(t){m.nextTick(x(t))}:y&&y.now?r=function(t){y.now(x(t))}:v&&!d?(s=(o=new v).port2,o.port1.onmessage=_,r=l(s.postMessage,s,1)):a.addEventListener&&A(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!c(S)?(r=S,a.addEventListener("message",_,!1)):r=b in u("script")?function(t){h.appendChild(u("script"))[b]=function(){h.removeChild(this),B(t)}}:function(t){setTimeout(x(t),0)}),t.exports={set:g,clear:p}},7739:function(t,e,i){var n=i(1941),r=Math.max,o=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):o(i,e)}},101:function(t,e,i){var n=i(2202),r=i(3209);t.exports=function(t){return n(r(t))}},1941:function(t){var e=Math.ceil,i=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?i:e)(n)}},8445:function(t,e,i){var n=i(1941),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},1795:function(t,e,i){var n=i(3209);t.exports=function(t){return Object(n(t))}},7888:function(t,e,i){var n=i(5744),r=i(3236),o=i(5037),s=i(380),a=i(8182)("toPrimitive");t.exports=function(t,e){if(!n(t)||r(t))return t;var i,A=o(t,a);if(A){if(void 0===e&&(e="default"),i=A.call(t,e),!n(i)||r(i))return i;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},77:function(t,e,i){var n=i(7888),r=i(3236);t.exports=function(t){var e=n(t,"string");return r(e)?e:String(e)}},3471:function(t,e,i){var n={};n[i(8182)("toStringTag")]="z",t.exports="[object z]"===String(n)},4845:function(t,e,i){var n=i(4696);t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},9288:function(t){t.exports=function(t){try{return String(t)}catch(t){return"Object"}}},2759:function(t){var e=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+i).toString(36)}},615:function(t,e,i){var n=i(3045);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},9207:function(t,e,i){var n=i(8182);e.f=n},8182:function(t,e,i){var n=i(8576),r=i(8717),o=i(4500),s=i(2759),a=i(3045),A=i(615),c=r("wks"),l=n.Symbol,h=A?l:l&&l.withoutSetter||s;t.exports=function(t){return o(c,t)&&(a||"string"==typeof c[t])||(a&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},1450:function(t){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},4242:function(t,e,i){"use strict";var n=i(3085),r=i(9341),o=i(4469),s=i(2853),a=i(8711),A=i(774),c=i(273),l=i(3442),h=i(4845),u=function(t,e){var i=this,n=arguments.length>2?arguments[2]:void 0;if(!(i instanceof u))return new u(t,e,n);o&&(i=o(new Error(void 0),r(i))),void 0!==e&&a(i,"message",h(e)),c(i,n);var s=[];return l(t,s.push,{that:s}),a(i,"errors",s),i};u.prototype=s(Error.prototype,{constructor:A(5,u),message:A(5,""),name:A(5,"AggregateError")}),n({global:!0},{AggregateError:u})},9106:function(t,e,i){"use strict";var n=i(3085),r=i(6192),o=i(4770),s=i(5744),a=i(1795),A=i(4104),c=i(9361),l=i(1321),h=i(242),u=i(8182),d=i(4218),f=u("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",m=d>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=h("concat"),y=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)};n({target:"Array",proto:!0,forced:!m||!v},{concat:function(t){var e,i,n,r,o,s=a(this),h=l(s,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(y(o=-1===e?s:arguments[e])){if(u+(r=A(o))>g)throw TypeError(p);for(i=0;i<r;i++,u++)i in o&&c(h,u,o[i])}else{if(u>=g)throw TypeError(p);c(h,u++,o)}return h.length=u,h}})},1710:function(t,e,i){var n=i(3085),r=i(2724),o=i(7423);n({target:"Array",proto:!0},{fill:r}),o("fill")},3436:function(t,e,i){"use strict";var n=i(3085),r=i(454).filter;n({target:"Array",proto:!0,forced:!i(242)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},9823:function(t,e,i){"use strict";var n=i(3085),r=i(7397);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},9173:function(t,e,i){var n=i(3085),r=i(841);n({target:"Array",stat:!0,forced:!i(9770)((function(t){Array.from(t)}))},{from:r})},2276:function(t,e,i){"use strict";var n=i(3085),r=i(8180).indexOf,o=i(424),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,A=o("indexOf");n({target:"Array",proto:!0,forced:a||!A},{indexOf:function(t){return a?s.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},8118:function(t,e,i){i(3085)({target:"Array",stat:!0},{isArray:i(4770)})},8939:function(t,e,i){"use strict";var n=i(101),r=i(7423),o=i(7771),s=i(3326),a=i(7218),A="Array Iterator",c=s.set,l=s.getterFor(A);t.exports=a(Array,"Array",(function(t,e){c(this,{type:A,target:n(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},3838:function(t,e,i){"use strict";var n=i(3085),r=i(454).map;n({target:"Array",proto:!0,forced:!i(242)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5818:function(t,e,i){"use strict";var n=i(3085),r=i(4770),o=i(2091),s=i(5744),a=i(7739),A=i(4104),c=i(101),l=i(9361),h=i(8182),u=i(242)("slice"),d=h("species"),f=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!u},{slice:function(t,e){var i,n,h,u=c(this),p=A(u),m=a(t,p),v=a(void 0===e?p:e,p);if(r(u)&&(i=u.constructor,(o(i)&&(i===Array||r(i.prototype))||s(i)&&null===(i=i[d]))&&(i=void 0),i===Array||void 0===i))return f.call(u,m,v);for(n=new(void 0===i?Array:i)(g(v-m,0)),h=0;m<v;m++,h++)m in u&&l(n,h,u[m]);return n.length=h,n}})},2178:function(t,e,i){"use strict";var n=i(3085),r=i(7739),o=i(1941),s=i(4104),a=i(1795),A=i(1321),c=i(9361),l=i(242)("splice"),h=Math.max,u=Math.min;n({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var i,n,l,d,f,g,p=a(this),m=s(p),v=r(t,m),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=m-v):(i=y-2,n=u(h(o(e),0),m-v)),m+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=A(p,n),d=0;d<n;d++)(f=v+d)in p&&c(l,d,p[f]);if(l.length=n,i<n){for(d=v;d<m-n;d++)g=d+i,(f=d+n)in p?p[g]=p[f]:delete p[g];for(d=m;d>m-n+i;d--)delete p[d-1]}else if(i>n)for(d=m-n;d>v;d--)g=d+i-1,(f=d+n-1)in p?p[g]=p[f]:delete p[g];for(d=0;d<i;d++)p[d+v]=arguments[d+2];return p.length=m-n+i,l}})},665:function(t,e,i){i(3085)({target:"Function",proto:!0},{bind:i(6782)})},8671:function(t,e,i){var n=i(8576);i(1284)(n.JSON,"JSON",!0)},8556:function(){},2666:function(t,e,i){var n=i(3085),r=i(2558);n({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},3113:function(t,e,i){i(3085)({target:"Object",stat:!0,sham:!i(69)},{create:i(2853)})},297:function(t,e,i){var n=i(3085),r=i(69);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:i(2760).f})},9234:function(t,e,i){var n=i(3085),r=i(6192),o=i(1795),s=i(9341),a=i(4635);n({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!a},{getPrototypeOf:function(t){return s(o(t))}})},2647:function(t,e,i){var n=i(3085),r=i(1795),o=i(7653);n({target:"Object",stat:!0,forced:i(6192)((function(){o(1)}))},{keys:function(t){return o(r(t))}})},3222:function(t,e,i){i(3085)({target:"Object",stat:!0},{setPrototypeOf:i(4469)})},6663:function(){},4859:function(t,e,i){var n=i(3085),r=i(15);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},5706:function(t,e,i){var n=i(3085),r=i(2558);n({global:!0,forced:parseInt!=r},{parseInt:r})},7884:function(t,e,i){"use strict";var n=i(3085),r=i(6235),o=i(9438),s=i(892),a=i(3442);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,i=o.f(e),n=i.resolve,A=i.reject,c=s((function(){var i=r(e.resolve),o=[],s=0,A=1;a(t,(function(t){var r=s++,a=!1;o.push(void 0),A++,i.call(e,t).then((function(t){a||(a=!0,o[r]={status:"fulfilled",value:t},--A||n(o))}),(function(t){a||(a=!0,o[r]={status:"rejected",reason:t},--A||n(o))}))})),--A||n(o)}));return c.error&&A(c.value),i.promise}})},8885:function(t,e,i){"use strict";var n=i(3085),r=i(6235),o=i(150),s=i(9438),a=i(892),A=i(3442),c="No one promise resolved";n({target:"Promise",stat:!0},{any:function(t){var e=this,i=s.f(e),n=i.resolve,l=i.reject,h=a((function(){var i=r(e.resolve),s=[],a=0,h=1,u=!1;A(t,(function(t){var r=a++,A=!1;s.push(void 0),h++,i.call(e,t).then((function(t){A||u||(u=!0,n(t))}),(function(t){A||u||(A=!0,s[r]=t,--h||l(new(o("AggregateError"))(s,c)))}))})),--h||l(new(o("AggregateError"))(s,c))}));return h.error&&l(h.value),i.promise}})},1868:function(t,e,i){"use strict";var n=i(3085),r=i(5546),o=i(4471),s=i(6192),a=i(150),A=i(6447),c=i(4743),l=i(9126),h=i(9482);if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,a("Promise")),i=A(t);return this.then(i?function(i){return l(e,t()).then((function(){return i}))}:t,i?function(i){return l(e,t()).then((function(){throw i}))}:t)}}),!r&&A(o)){var u=a("Promise").prototype.finally;o.prototype.finally!==u&&h(o.prototype,"finally",u,{unsafe:!0})}},9021:function(t,e,i){"use strict";var n,r,o,s,a=i(3085),A=i(5546),c=i(8576),l=i(150),h=i(4471),u=i(9482),d=i(533),f=i(4469),g=i(1284),p=i(3656),m=i(6235),v=i(6447),y=i(5744),w=i(6961),C=i(9516),b=i(3442),B=i(9770),x=i(4743),_=i(7160).set,S=i(2950),I=i(9126),M=i(3681),T=i(9438),E=i(892),k=i(3326),F=i(9245),D=i(8182),O=i(2957),U=i(224),Q=i(4218),L=D("species"),j="Promise",P=k.get,H=k.set,N=k.getterFor(j),R=h&&h.prototype,z=h,G=R,W=c.TypeError,Y=c.document,X=c.process,K=T.f,V=K,Z=!!(Y&&Y.createEvent&&c.dispatchEvent),J=v(c.PromiseRejectionEvent),q="unhandledrejection",$=!1,tt=F(j,(function(){var t=C(z),e=t!==String(z);if(!e&&66===Q)return!0;if(A&&!G.finally)return!0;if(Q>=51&&/native code/.test(t))return!1;var i=new z((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(i.constructor={})[L]=n,!($=i.then((function(){}))instanceof n)||!e&&O&&!J})),et=tt||!B((function(t){z.all(t).catch((function(){}))})),it=function(t){var e;return!(!y(t)||!v(e=t.then))&&e},nt=function(t,e){if(!t.notified){t.notified=!0;var i=t.reactions;S((function(){for(var n=t.value,r=1==t.state,o=0;i.length>o;){var s,a,A,c=i[o++],l=r?c.ok:c.fail,h=c.resolve,u=c.reject,d=c.domain;try{l?(r||(2===t.rejection&&at(t),t.rejection=1),!0===l?s=n:(d&&d.enter(),s=l(n),d&&(d.exit(),A=!0)),s===c.promise?u(W("Promise-chain cycle")):(a=it(s))?a.call(s,h,u):h(s)):u(n)}catch(t){d&&!A&&d.exit(),u(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ot(t)}))}},rt=function(t,e,i){var n,r;Z?((n=Y.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:e,reason:i},!J&&(r=c["on"+t])?r(n):t===q&&M("Unhandled promise rejection",i)},ot=function(t){_.call(c,(function(){var e,i=t.facade,n=t.value;if(st(t)&&(e=E((function(){U?X.emit("unhandledRejection",n,i):rt(q,i,n)})),t.rejection=U||st(t)?2:1,e.error))throw e.value}))},st=function(t){return 1!==t.rejection&&!t.parent},at=function(t){_.call(c,(function(){var e=t.facade;U?X.emit("rejectionHandled",e):rt("rejectionhandled",e,t.value)}))},At=function(t,e,i){return function(n){t(e,n,i)}},ct=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,nt(t,!0))},lt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw W("Promise can't be resolved itself");var n=it(e);n?S((function(){var i={done:!1};try{n.call(e,At(lt,i,t),At(ct,i,t))}catch(e){ct(i,e,t)}})):(t.value=e,t.state=1,nt(t,!1))}catch(e){ct({done:!1},e,t)}}};if(tt&&(G=(z=function(t){w(this,z,j),m(t),n.call(this);var e=P(this);try{t(At(lt,e),At(ct,e))}catch(t){ct(e,t)}}).prototype,(n=function(t){H(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(G,{then:function(t,e){var i=N(this),n=K(x(this,z));return n.ok=!v(t)||t,n.fail=v(e)&&e,n.domain=U?X.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&nt(i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n,e=P(t);this.promise=t,this.resolve=At(lt,e),this.reject=At(ct,e)},T.f=K=function(t){return t===z||t===o?new r(t):V(t)},!A&&v(h)&&R!==Object.prototype)){s=R.then,$||(u(R,"then",(function(t,e){var i=this;return new z((function(t,e){s.call(i,t,e)})).then(t,e)}),{unsafe:!0}),u(R,"catch",G.catch,{unsafe:!0}));try{delete R.constructor}catch(t){}f&&f(R,G)}a({global:!0,wrap:!0,forced:tt},{Promise:z}),g(z,j,!1,!0),p(j),o=l(j),a({target:j,stat:!0,forced:tt},{reject:function(t){var e=K(this);return e.reject.call(void 0,t),e.promise}}),a({target:j,stat:!0,forced:A||tt},{resolve:function(t){return I(A&&this===o?z:this,t)}}),a({target:j,stat:!0,forced:et},{all:function(t){var e=this,i=K(e),n=i.resolve,r=i.reject,o=E((function(){var i=m(e.resolve),o=[],s=0,a=1;b(t,(function(t){var A=s++,c=!1;o.push(void 0),a++,i.call(e,t).then((function(t){c||(c=!0,o[A]=t,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise},race:function(t){var e=this,i=K(e),n=i.reject,r=E((function(){var r=m(e.resolve);b(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},5397:function(t,e,i){var n=i(3085),r=i(150),o=i(1404),s=i(1138),a=i(5744),A=i(2853),c=i(6782),l=i(6192),h=r("Reflect","construct"),u=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),d=!l((function(){h((function(){}))})),f=u||d;n({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(t,e){o(t),s(e);var i=arguments.length<3?t:o(arguments[2]);if(d&&!u)return h(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var r=i.prototype,l=A(a(r)?r:Object.prototype),f=Function.apply.call(t,l,e);return a(f)?f:l}})},1367:function(){},5454:function(t,e,i){"use strict";var n=i(863).charAt,r=i(4845),o=i(3326),s=i(7218),a="String Iterator",A=o.set,c=o.getterFor(a);s(String,"String",(function(t){A(this,{type:a,string:r(t),index:0})}),(function(){var t,e=c(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=n(i,r),e.index+=t.length,{value:t,done:!1})}))},957:function(t,e,i){"use strict";var n=i(3085),r=i(4277).trim;n({target:"String",proto:!0,forced:i(6815)("trim")},{trim:function(){return r(this)}})},9781:function(t,e,i){i(1488)("asyncIterator")},492:function(){},6681:function(t,e,i){i(1488)("hasInstance")},9594:function(t,e,i){i(1488)("isConcatSpreadable")},3665:function(t,e,i){i(1488)("iterator")},6187:function(t,e,i){"use strict";var n=i(3085),r=i(8576),o=i(150),s=i(5546),a=i(69),A=i(3045),c=i(6192),l=i(4500),h=i(4770),u=i(6447),d=i(5744),f=i(3236),g=i(1138),p=i(1795),m=i(101),v=i(77),y=i(4845),w=i(774),C=i(2853),b=i(7653),B=i(2092),x=i(4052),_=i(4750),S=i(5141),I=i(2760),M=i(6007),T=i(9482),E=i(8717),k=i(9766),F=i(4535),D=i(2759),O=i(8182),U=i(9207),Q=i(1488),L=i(1284),j=i(3326),P=i(454).forEach,H=k("hidden"),N="Symbol",R="prototype",z=O("toPrimitive"),G=j.set,W=j.getterFor(N),Y=Object[R],X=r.Symbol,K=o("JSON","stringify"),V=S.f,Z=I.f,J=x.f,q=M.f,$=E("symbols"),tt=E("op-symbols"),et=E("string-to-symbol-registry"),it=E("symbol-to-string-registry"),nt=E("wks"),rt=r.QObject,ot=!rt||!rt[R]||!rt[R].findChild,st=a&&c((function(){return 7!=C(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=V(Y,e);n&&delete Y[e],Z(t,e,i),n&&t!==Y&&Z(Y,e,n)}:Z,at=function(t,e){var i=$[t]=C(X[R]);return G(i,{type:N,tag:t,description:e}),a||(i.description=e),i},At=function(t,e,i){t===Y&&At(tt,e,i),g(t);var n=v(e);return g(i),l($,n)?(i.enumerable?(l(t,H)&&t[H][n]&&(t[H][n]=!1),i=C(i,{enumerable:w(0,!1)})):(l(t,H)||Z(t,H,w(1,{})),t[H][n]=!0),st(t,n,i)):Z(t,n,i)},ct=function(t,e){g(t);var i=m(e),n=b(i).concat(dt(i));return P(n,(function(e){a&&!lt.call(i,e)||At(t,e,i[e])})),t},lt=function(t){var e=v(t),i=q.call(this,e);return!(this===Y&&l($,e)&&!l(tt,e))&&(!(i||!l(this,e)||!l($,e)||l(this,H)&&this[H][e])||i)},ht=function(t,e){var i=m(t),n=v(e);if(i!==Y||!l($,n)||l(tt,n)){var r=V(i,n);return!r||!l($,n)||l(i,H)&&i[H][n]||(r.enumerable=!0),r}},ut=function(t){var e=J(m(t)),i=[];return P(e,(function(t){l($,t)||l(F,t)||i.push(t)})),i},dt=function(t){var e=t===Y,i=J(e?tt:m(t)),n=[];return P(i,(function(t){!l($,t)||e&&!l(Y,t)||n.push($[t])})),n};if(A||(X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=D(t),i=function(t){this===Y&&i.call(tt,t),l(this,H)&&l(this[H],e)&&(this[H][e]=!1),st(this,e,w(1,t))};return a&&ot&&st(Y,e,{configurable:!0,set:i}),at(e,t)},T(X[R],"toString",(function(){return W(this).tag})),T(X,"withoutSetter",(function(t){return at(D(t),t)})),M.f=lt,I.f=At,S.f=ht,B.f=x.f=ut,_.f=dt,U.f=function(t){return at(O(t),t)},a&&(Z(X[R],"description",{configurable:!0,get:function(){return W(this).description}}),s||T(Y,"propertyIsEnumerable",lt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:X}),P(b(nt),(function(t){Q(t)})),n({target:N,stat:!0,forced:!A},{for:function(t){var e=y(t);if(l(et,e))return et[e];var i=X(e);return et[e]=i,it[i]=e,i},keyFor:function(t){if(!f(t))throw TypeError(t+" is not a symbol");if(l(it,t))return it[t]},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),n({target:"Object",stat:!0,forced:!A,sham:!a},{create:function(t,e){return void 0===e?C(t):ct(C(t),e)},defineProperty:At,defineProperties:ct,getOwnPropertyDescriptor:ht}),n({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:ut,getOwnPropertySymbols:dt}),n({target:"Object",stat:!0,forced:c((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(p(t))}}),K&&n({target:"JSON",stat:!0,forced:!A||c((function(){var t=X();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}))},{stringify:function(t,e,i){for(var n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e,(d(e)||void 0!==t)&&!f(t))return h(e)||(e=function(t,e){if(u(n)&&(e=n.call(this,t,e)),!f(e))return e}),r[1]=e,K.apply(null,r)}}),!X[R][z]){var ft=X[R].valueOf;T(X[R],z,(function(){return ft.apply(this,arguments)}))}L(X,N),F[H]=!0},1250:function(t,e,i){i(1488)("matchAll")},9017:function(t,e,i){i(1488)("match")},9786:function(t,e,i){i(1488)("replace")},503:function(t,e,i){i(1488)("search")},6565:function(t,e,i){i(1488)("species")},9322:function(t,e,i){i(1488)("split")},3610:function(t,e,i){i(1488)("toPrimitive")},6886:function(t,e,i){i(1488)("toStringTag")},3514:function(t,e,i){i(1488)("unscopables")},177:function(t,e,i){i(1488)("asyncDispose")},9031:function(t,e,i){i(1488)("dispose")},6658:function(t,e,i){i(1488)("matcher")},1875:function(t,e,i){i(1488)("metadata")},8658:function(t,e,i){i(1488)("observable")},4592:function(t,e,i){i(1488)("patternMatch")},6680:function(t,e,i){i(1488)("replaceAll")},162:function(t,e,i){i(8939);var n=i(7365),r=i(8576),o=i(4696),s=i(8711),a=i(7771),A=i(8182)("toStringTag");for(var c in n){var l=r[c],h=l&&l.prototype;h&&o(h)!==A&&s(h,A,c),a[c]=a.Array}},2906:function(t,e,i){var n=i(3085),r=i(8576),o=i(6447),s=i(8989),a=[].slice,A=function(t){return function(e,i){var n=arguments.length>2,r=n?a.call(arguments,2):void 0;return t(n?function(){(o(e)?e:Function(e)).apply(this,r)}:e,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:A(r.setTimeout),setInterval:A(r.setInterval)})},9336:function(t,e,i){"use strict";i(8939);var n=i(3085),r=i(150),o=i(4551),s=i(9482),a=i(533),A=i(1284),c=i(5148),l=i(3326),h=i(6961),u=i(6447),d=i(4500),f=i(8043),g=i(4696),p=i(1138),m=i(5744),v=i(4845),y=i(2853),w=i(774),C=i(1669),b=i(8703),B=i(8182),x=r("fetch"),_=r("Request"),S=_&&_.prototype,I=r("Headers"),M=B("iterator"),T="URLSearchParams",E=T+"Iterator",k=l.set,F=l.getterFor(T),D=l.getterFor(E),O=/\+/g,U=Array(4),Q=function(t){return U[t-1]||(U[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},L=function(t){try{return decodeURIComponent(t)}catch(e){return t}},j=function(t){var e=t.replace(O," "),i=4;try{return decodeURIComponent(e)}catch(t){for(;i;)e=e.replace(Q(i--),L);return e}},P=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(t){return H[t]},R=function(t){return encodeURIComponent(t).replace(P,N)},z=function(t,e){if(e)for(var i,n,r=e.split("&"),o=0;o<r.length;)(i=r[o++]).length&&(n=i.split("="),t.push({key:j(n.shift()),value:j(n.join("="))}))},G=function(t){this.entries.length=0,z(this.entries,t)},W=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Y=c((function(t,e){k(this,{type:E,iterator:C(F(t).entries),kind:e})}),"Iterator",(function(){var t=D(this),e=t.kind,i=t.iterator.next(),n=i.value;return i.done||(i.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),i})),X=function(){h(this,X,T);var t,e,i,n,r,o,s,a,A,c=arguments.length>0?arguments[0]:void 0,l=[];if(k(this,{type:T,entries:l,updateURL:function(){},updateSearchParams:G}),void 0!==c)if(m(c))if(t=b(c))for(i=(e=C(c,t)).next;!(n=i.call(e)).done;){if((s=(o=(r=C(p(n.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");l.push({key:v(s.value),value:v(a.value)})}else for(A in c)d(c,A)&&l.push({key:A,value:v(c[A])});else z(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:v(c))},K=X.prototype;if(a(K,{append:function(t,e){W(arguments.length,2);var i=F(this);i.entries.push({key:v(t),value:v(e)}),i.updateURL()},delete:function(t){W(arguments.length,1);for(var e=F(this),i=e.entries,n=v(t),r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;e.updateURL()},get:function(t){W(arguments.length,1);for(var e=F(this).entries,i=v(t),n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){W(arguments.length,1);for(var e=F(this).entries,i=v(t),n=[],r=0;r<e.length;r++)e[r].key===i&&n.push(e[r].value);return n},has:function(t){W(arguments.length,1);for(var e=F(this).entries,i=v(t),n=0;n<e.length;)if(e[n++].key===i)return!0;return!1},set:function(t,e){W(arguments.length,1);for(var i,n=F(this),r=n.entries,o=!1,s=v(t),a=v(e),A=0;A<r.length;A++)(i=r[A]).key===s&&(o?r.splice(A--,1):(o=!0,i.value=a));o||r.push({key:s,value:a}),n.updateURL()},sort:function(){var t,e,i,n=F(this),r=n.entries,o=r.slice();for(r.length=0,i=0;i<o.length;i++){for(t=o[i],e=0;e<i;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===i&&r.push(t)}n.updateURL()},forEach:function(t){for(var e,i=F(this).entries,n=f(t,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)n((e=i[r++]).value,e.key,this)},keys:function(){return new Y(this,"keys")},values:function(){return new Y(this,"values")},entries:function(){return new Y(this,"entries")}},{enumerable:!0}),s(K,M,K.entries,{name:"entries"}),s(K,"toString",(function(){for(var t,e=F(this).entries,i=[],n=0;n<e.length;)t=e[n++],i.push(R(t.key)+"="+R(t.value));return i.join("&")}),{enumerable:!0}),A(X,T),n({global:!0,forced:!o},{URLSearchParams:X}),!o&&u(I)){var V=function(t){if(m(t)){var e,i=t.body;if(g(i)===T)return(e=t.headers?new I(t.headers):new I).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(t,{body:w(0,String(i)),headers:w(0,e)})}return t};if(u(x)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return x(t,arguments.length>1?V(arguments[1]):{})}}),u(_)){var Z=function(t){return h(this,Z,"Request"),new _(t,arguments.length>1?V(arguments[1]):{})};S.constructor=Z,Z.prototype=S,n({global:!0,forced:!0},{Request:Z})}}t.exports={URLSearchParams:X,getState:F}},4948:function(t,e,i){"use strict";i(5454);var n,r=i(3085),o=i(69),s=i(4551),a=i(8576),A=i(1187),c=i(9482),l=i(6961),h=i(4500),u=i(2503),d=i(841),f=i(863).codeAt,g=i(7977),p=i(4845),m=i(1284),v=i(9336),y=i(3326),w=a.URL,C=v.URLSearchParams,b=v.getState,B=y.set,x=y.getterFor("URL"),_=Math.floor,S=Math.pow,I="Invalid scheme",M="Invalid host",T="Invalid port",E=/[A-Za-z]/,k=/[\d+-.A-Za-z]/,F=/\d/,D=/^0x/i,O=/^[0-7]+$/,U=/^\d+$/,Q=/^[\dA-Fa-f]+$/,L=/[\0\t\n\r #%/:<>?@[\\\]^|]/,j=/[\0\t\n\r #/:<>?@[\\\]^|]/,P=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,H=/[\t\n\r]/g,N=function(t,e){var i,n,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return M;if(!(i=z(e.slice(1,-1))))return M;t.host=i}else if(J(t)){if(e=g(e),L.test(e))return M;if(null===(i=R(e)))return M;t.host=i}else{if(j.test(e))return M;for(i="",n=d(e),r=0;r<n.length;r++)i+=V(n[r],W);t.host=i}},R=function(t){var e,i,n,r,o,s,a,A=t.split(".");if(A.length&&""==A[A.length-1]&&A.pop(),(e=A.length)>4)return t;for(i=[],n=0;n<e;n++){if(""==(r=A[n]))return t;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=D.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?U:8==o?O:Q).test(r))return t;s=parseInt(r,o)}i.push(s)}for(n=0;n<e;n++)if(s=i[n],n==e-1){if(s>=S(256,5-e))return null}else if(s>255)return null;for(a=i.pop(),n=0;n<i.length;n++)a+=i[n]*S(256,3-n);return a},z=function(t){var e,i,n,r,o,s,a,A=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,u=function(){return t.charAt(h)};if(":"==u()){if(":"!=t.charAt(1))return;h+=2,l=++c}for(;u();){if(8==c)return;if(":"!=u()){for(e=i=0;i<4&&Q.test(u());)e=16*e+parseInt(u(),16),h++,i++;if("."==u()){if(0==i)return;if(h-=i,c>6)return;for(n=0;u();){if(r=null,n>0){if(!("."==u()&&n<4))return;h++}if(!F.test(u()))return;for(;F.test(u());){if(o=parseInt(u(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}A[c]=256*A[c]+r,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==u()){if(h++,!u())return}else if(u())return;A[c++]=e}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)a=A[c],A[c--]=A[l+s-1],A[l+--s]=a;else if(8!=c)return;return A},G=function(t){var e,i,n,r;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=_(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,i=1,n=null,r=0,o=0;o<8;o++)0!==t[o]?(r>i&&(e=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(e=n,i=r),e}(t),i=0;i<8;i++)r&&0===t[i]||(r&&(r=!1),n===i?(e+=i?":":"::",r=!0):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},W={},Y=u({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),X=u({},Y,{"#":1,"?":1,"{":1,"}":1}),K=u({},X,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),V=function(t,e){var i=f(t,0);return i>32&&i<127&&!h(e,t)?t:encodeURIComponent(t)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},J=function(t){return h(Z,t.scheme)},q=function(t){return""!=t.username||""!=t.password},$=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},tt=function(t,e){var i;return 2==t.length&&E.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},et=function(t){var e;return t.length>1&&tt(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},it=function(t){var e=t.path,i=e.length;!i||"file"==t.scheme&&1==i&&tt(e[0],!0)||e.pop()},nt=function(t){return"."===t||"%2e"===t.toLowerCase()},rt={},ot={},st={},at={},At={},ct={},lt={},ht={},ut={},dt={},ft={},gt={},pt={},mt={},vt={},yt={},wt={},Ct={},bt={},Bt={},xt={},_t=function(t,e,i,r){var o,s,a,A,c,l=i||rt,u=0,f="",g=!1,p=!1,m=!1;for(i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(P,"")),e=e.replace(H,""),o=d(e);u<=o.length;){switch(s=o[u],l){case rt:if(!s||!E.test(s)){if(i)return I;l=st;continue}f+=s.toLowerCase(),l=ot;break;case ot:if(s&&(k.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(i)return I;f="",l=st,u=0;continue}if(i&&(J(t)!=h(Z,f)||"file"==f&&(q(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,i)return void(J(t)&&Z[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?l=mt:J(t)&&r&&r.scheme==t.scheme?l=at:J(t)?l=ht:"/"==o[u+1]?(l=At,u++):(t.cannotBeABaseURL=!0,t.path.push(""),l=bt)}break;case st:if(!r||r.cannotBeABaseURL&&"#"!=s)return I;if(r.cannotBeABaseURL&&"#"==s){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,l=xt;break}l="file"==r.scheme?mt:ct;continue;case at:if("/"!=s||"/"!=o[u+1]){l=ct;continue}l=ut,u++;break;case At:if("/"==s){l=dt;break}l=Ct;continue;case ct:if(t.scheme=r.scheme,s==n)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==s||"\\"==s&&J(t))l=lt;else if("?"==s)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",l=Bt;else{if("#"!=s){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),l=Ct;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",l=xt}break;case lt:if(!J(t)||"/"!=s&&"\\"!=s){if("/"!=s){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,l=Ct;continue}l=dt}else l=ut;break;case ht:if(l=ut,"/"!=s||"/"!=f.charAt(u+1))continue;u++;break;case ut:if("/"!=s&&"\\"!=s){l=dt;continue}break;case dt:if("@"==s){g&&(f="%40"+f),g=!0,a=d(f);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||m){var w=V(y,K);m?t.password+=w:t.username+=w}else m=!0}f=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)){if(g&&""==f)return"Invalid authority";u-=d(f).length+1,f="",l=ft}else f+=s;break;case ft:case gt:if(i&&"file"==t.scheme){l=yt;continue}if(":"!=s||p){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)){if(J(t)&&""==f)return M;if(i&&""==f&&(q(t)||null!==t.port))return;if(A=N(t,f))return A;if(f="",l=wt,i)return;continue}"["==s?p=!0:"]"==s&&(p=!1),f+=s}else{if(""==f)return M;if(A=N(t,f))return A;if(f="",l=pt,i==gt)return}break;case pt:if(!F.test(s)){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&J(t)||i){if(""!=f){var C=parseInt(f,10);if(C>65535)return T;t.port=J(t)&&C===Z[t.scheme]?null:C,f=""}if(i)return;l=wt;continue}return T}f+=s;break;case mt:if(t.scheme="file","/"==s||"\\"==s)l=vt;else{if(!r||"file"!=r.scheme){l=Ct;continue}if(s==n)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==s)t.host=r.host,t.path=r.path.slice(),t.query="",l=Bt;else{if("#"!=s){et(o.slice(u).join(""))||(t.host=r.host,t.path=r.path.slice(),it(t)),l=Ct;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",l=xt}}break;case vt:if("/"==s||"\\"==s){l=yt;break}r&&"file"==r.scheme&&!et(o.slice(u).join(""))&&(tt(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),l=Ct;continue;case yt:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!i&&tt(f))l=Ct;else if(""==f){if(t.host="",i)return;l=wt}else{if(A=N(t,f))return A;if("localhost"==t.host&&(t.host=""),i)return;f="",l=wt}continue}f+=s;break;case wt:if(J(t)){if(l=Ct,"/"!=s&&"\\"!=s)continue}else if(i||"?"!=s)if(i||"#"!=s){if(s!=n&&(l=Ct,"/"!=s))continue}else t.fragment="",l=xt;else t.query="",l=Bt;break;case Ct:if(s==n||"/"==s||"\\"==s&&J(t)||!i&&("?"==s||"#"==s)){if(".."===(c=(c=f).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(it(t),"/"==s||"\\"==s&&J(t)||t.path.push("")):nt(f)?"/"==s||"\\"==s&&J(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&tt(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(s==n||"?"==s||"#"==s))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==s?(t.query="",l=Bt):"#"==s&&(t.fragment="",l=xt)}else f+=V(s,X);break;case bt:"?"==s?(t.query="",l=Bt):"#"==s?(t.fragment="",l=xt):s!=n&&(t.path[0]+=V(s,W));break;case Bt:i||"#"!=s?s!=n&&("'"==s&&J(t)?t.query+="%27":t.query+="#"==s?"%23":V(s,W)):(t.fragment="",l=xt);break;case xt:s!=n&&(t.fragment+=V(s,Y))}u++}},St=function(t){var e,i,n=l(this,St,"URL"),r=arguments.length>1?arguments[1]:void 0,s=p(t),a=B(n,{type:"URL"});if(void 0!==r)if(r instanceof St)e=x(r);else if(i=_t(e={},p(r)))throw TypeError(i);if(i=_t(a,s,null,e))throw TypeError(i);var A=a.searchParams=new C,c=b(A);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(A)||null},o||(n.href=Mt.call(n),n.origin=Tt.call(n),n.protocol=Et.call(n),n.username=kt.call(n),n.password=Ft.call(n),n.host=Dt.call(n),n.hostname=Ot.call(n),n.port=Ut.call(n),n.pathname=Qt.call(n),n.search=Lt.call(n),n.searchParams=jt.call(n),n.hash=Pt.call(n))},It=St.prototype,Mt=function(){var t=x(this),e=t.scheme,i=t.username,n=t.password,r=t.host,o=t.port,s=t.path,a=t.query,A=t.fragment,c=e+":";return null!==r?(c+="//",q(t)&&(c+=i+(n?":"+n:"")+"@"),c+=G(r),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==A&&(c+="#"+A),c},Tt=function(){var t=x(this),e=t.scheme,i=t.port;if("blob"==e)try{return new St(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&J(t)?e+"://"+G(t.host)+(null!==i?":"+i:""):"null"},Et=function(){return x(this).scheme+":"},kt=function(){return x(this).username},Ft=function(){return x(this).password},Dt=function(){var t=x(this),e=t.host,i=t.port;return null===e?"":null===i?G(e):G(e)+":"+i},Ot=function(){var t=x(this).host;return null===t?"":G(t)},Ut=function(){var t=x(this).port;return null===t?"":String(t)},Qt=function(){var t=x(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Lt=function(){var t=x(this).query;return t?"?"+t:""},jt=function(){return x(this).searchParams},Pt=function(){var t=x(this).fragment;return t?"#"+t:""},Ht=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&A(It,{href:Ht(Mt,(function(t){var e=x(this),i=p(t),n=_t(e,i);if(n)throw TypeError(n);b(e.searchParams).updateSearchParams(e.query)})),origin:Ht(Tt),protocol:Ht(Et,(function(t){var e=x(this);_t(e,p(t)+":",rt)})),username:Ht(kt,(function(t){var e=x(this),i=d(p(t));if(!$(e)){e.username="";for(var n=0;n<i.length;n++)e.username+=V(i[n],K)}})),password:Ht(Ft,(function(t){var e=x(this),i=d(p(t));if(!$(e)){e.password="";for(var n=0;n<i.length;n++)e.password+=V(i[n],K)}})),host:Ht(Dt,(function(t){var e=x(this);e.cannotBeABaseURL||_t(e,p(t),ft)})),hostname:Ht(Ot,(function(t){var e=x(this);e.cannotBeABaseURL||_t(e,p(t),gt)})),port:Ht(Ut,(function(t){var e=x(this);$(e)||(""==(t=p(t))?e.port=null:_t(e,t,pt))})),pathname:Ht(Qt,(function(t){var e=x(this);e.cannotBeABaseURL||(e.path=[],_t(e,p(t),wt))})),search:Ht(Lt,(function(t){var e=x(this);""==(t=p(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",_t(e,t,Bt)),b(e.searchParams).updateSearchParams(e.query)})),searchParams:Ht(jt),hash:Ht(Pt,(function(t){var e=x(this);""!=(t=p(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",_t(e,t,xt)):e.fragment=null}))}),c(It,"toJSON",(function(){return Mt.call(this)}),{enumerable:!0}),c(It,"toString",(function(){return Mt.call(this)}),{enumerable:!0}),w){var Nt=w.createObjectURL,Rt=w.revokeObjectURL;Nt&&c(St,"createObjectURL",(function(t){return Nt.apply(w,arguments)})),Rt&&c(St,"revokeObjectURL",(function(t){return Rt.apply(w,arguments)}))}m(St,"URL"),r({global:!0,forced:!s,sham:!o},{URL:St})},9801:function(){},3822:function(t,e,i){var n=i(2221);t.exports=n},1434:function(t,e,i){var n=i(5078);t.exports=n},6899:function(t,e,i){var n=i(98);t.exports=n},7710:function(t,e,i){var n=i(5739);i(162),t.exports=n},4486:function(t,e,i){var n=i(278);t.exports=n},4877:function(t,e,i){var n=i(1484);t.exports=n},7178:function(t,e,i){var n=i(7731);t.exports=n},5603:function(t,e,i){var n=i(3669);t.exports=n},1206:function(t,e,i){i(162);var n=i(6899),r=i(4696),o=Array.prototype,s={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===o||t instanceof Array&&e===o.forEach||s.hasOwnProperty(r(t))?n:e}},6174:function(t,e,i){var n=i(2604);t.exports=n},57:function(t,e,i){var n=i(263);t.exports=n},4741:function(t,e,i){var n=i(7663);t.exports=n},8368:function(t,e,i){var n=i(5063);t.exports=n},3739:function(t,e,i){var n=i(6813);t.exports=n},172:function(t,e,i){var n=i(6285);t.exports=n},4963:function(t,e,i){var n=i(3213);t.exports=n},7820:function(t,e,i){var n=i(3512);t.exports=n},8980:function(t,e,i){var n=i(8168);t.exports=n},5636:function(t,e,i){var n=i(8651);t.exports=n},6672:function(t,e,i){var n=i(3083);t.exports=n},5059:function(t,e,i){var n=i(2987);t.exports=n},3969:function(t,e,i){var n=i(2239);t.exports=n},6618:function(t,e,i){var n=i(3154);i(162),t.exports=n},5279:function(t,e,i){var n=i(6577);t.exports=n},9562:function(t,e,i){i(2906);var n=i(7545);t.exports=n.setTimeout},2285:function(t,e,i){var n=i(5008);i(162),t.exports=n},8535:function(t,e,i){var n=i(994);i(162),t.exports=n},652:function(t,e,i){var n=i(5668);t.exports=n},5668:function(t,e,i){i(4948),i(9801),i(9336);var n=i(7545);t.exports=n.URL},2534:function(t){"use strict";t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(e){"use strict";e.exports=t},4960:function(){},6759:function(){},6272:function(){}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={};return function(){"use strict";n.d(r,{default:function(){return Ws}});var t=n(9131),e=n.n(t),i=n(1899),o=n.n(i),s=n(6562),a=n.n(s),A=n(1734),c=n.n(A),l=n(8005),h=n.n(l),u=n(6065),d=n.n(u),f=n(4496),g=n.n(f);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var i="classList",n="prototype",r=t.Element[n],s=Object,A=e()(String[n])||function(){return this.replace(/^\s+|\s+$/g,"")},l=o()(Array[n])||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},h=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new h("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new h("INVALID_CHARACTER_ERR","The token must not contain space characters.");return l.call(t,e)},d=function(t){for(var e=A.call(t.getAttribute("class")||""),i=e?e.split(/\s+/):[],n=0,r=i.length;n<r;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},f=d[n]=[],g=function(){return new d(this)};if(h[n]=Error[n],f.item=function(t){return this[t]||null},f.contains=function(t){return~u(this,t+"")},f.add=function(){var t,e=arguments,i=0,n=e.length,r=!1;do{~u(this,t=e[i]+"")||(this.push(t),r=!0)}while(++i<n);r&&this._updateClassName()},f.remove=function(){var t,e,i=arguments,n=0,r=i.length,o=!1;do{for(e=u(this,t=i[n]+"");~e;)a()(this).call(this,e,1),o=!0,e=u(this,t)}while(++n<r);o&&this._updateClassName()},f.toggle=function(t,e){var i=this.contains(t),n=i?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!i},f.replace=function(t,e){var i=u(t+"");~i&&(a()(this).call(this,i,1,e),this._updateClassName())},f.toString=function(){return this.join(" ")},c()){var p={get:g,enumerable:!0,configurable:!0};try{c()(r,i,p)}catch(t){void 0!==t.number&&-2146823252!==t.number||(p.enumerable=!1,c()(r,i,p))}}else s[n].__defineGetter__&&r.__defineGetter__(i,g)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var i,n=arguments.length;for(i=0;i<n;i++)t=arguments[i],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:i.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var i=this.toString().split(" "),n=o()(i).call(i,t+"");~n&&(i=h()(i).call(i,n),this.remove.apply(this,i),this.add(e),this.add.apply(this,h()(i).call(i,1)))}),t=null}()),function(){if("undefined"!=typeof window&&window.addEventListener){var t,e,i,n=d()(null),r=function(){clearTimeout(e),e=g()(t,100)},o=function(){},s=function(t){function e(t){var e;return void 0!==t.protocol?e=t:(e=document.createElement("a")).href=t,e.protocol.replace(/:/g,"")+e.host}var i,n,r;return window.XMLHttpRequest&&(i=new XMLHttpRequest,n=e(location),r=e(t),i=void 0===i.withCredentials&&""!==r&&r!==n?XDomainRequest||void 0:XMLHttpRequest),i},a="http://www.w3.org/1999/xlink";t=function(){var t,e,i,A,c,l,h,u,d,f,p=0;function m(){var t;0==(p-=1)&&(o(),window.addEventListener("resize",r,!1),window.addEventListener("orientationchange",r,!1),window.MutationObserver?((t=new MutationObserver(r)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),o=function(){try{t.disconnect(),window.removeEventListener("resize",r,!1),window.removeEventListener("orientationchange",r,!1)}catch(t){}}):(document.documentElement.addEventListener("DOMSubtreeModified",r,!1),o=function(){document.documentElement.removeEventListener("DOMSubtreeModified",r,!1),window.removeEventListener("resize",r,!1),window.removeEventListener("orientationchange",r,!1)}))}function v(t){return function(){!0!==n[t.base]&&(t.useEl.setAttributeNS(a,"xlink:href","#"+t.hash),t.useEl.hasAttribute("href")&&t.useEl.setAttribute("href","#"+t.hash))}}function y(t){return function(){var e,i=document.body,n=document.createElement("x");t.onload=null,n.innerHTML=t.responseText,(e=n.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",i.insertBefore(e,i.firstChild)),m()}}function w(t){return function(){t.onerror=null,t.ontimeout=null,m()}}for(o(),d=document.getElementsByTagName("use"),c=0;c<d.length;c+=1){try{e=d[c].getBoundingClientRect()}catch(t){e=!1}t=(u=(A=d[c].getAttribute("href")||d[c].getAttributeNS(a,"href")||d[c].getAttribute("xlink:href"))&&A.split?A.split("#"):["",""])[0],i=u[1],l=e&&0===e.left&&0===e.right&&0===e.top&&0===e.bottom,e&&0===e.width&&0===e.height&&!l?(d[c].hasAttribute("href")&&d[c].setAttributeNS(a,"xlink:href",A),t.length&&(!0!==(f=n[t])&&g()(v({useEl:d[c],base:t,hash:i}),0),void 0===f&&void 0!==(h=s(t))&&(f=new h,n[t]=f,f.onload=y(f),f.onerror=w(f),f.ontimeout=w(f),f.open("GET",t),f.send(),p+=1))):l?t.length&&n[t]&&g()(v({useEl:d[c],base:t,hash:i}),0):void 0===n[t]?n[t]=!0:n[t].onload&&(n[t].abort(),delete n[t].onload,n[t]=!0)}d="",p+=1,m()},i=function(){window.removeEventListener("load",i,!1),e=g()(t,0)},"complete"!==document.readyState?window.addEventListener("load",i,!1):i()}}();var p=n(1845);function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=n(184),y=n(662),w=n(7172),C=n(711);function b(t,e){var i;if(t){if("string"==typeof t)return m(t,e);var n=C(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?w(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function B(t){return function(t){if(p(t))return m(t)}(t)||function(t){if(void 0!==v&&null!=y(t)||null!=t["@@iterator"])return w(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=n(7077);function _(t,e,i){return e in t?x(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),x(t,n.key,n)}}function M(t,e,i){return e&&I(t.prototype,e),i&&I(t,i),t}var T=n(4426),E=n.n(T),k=n(9406),F=n.n(k),D=n(8189),O=n.n(D),U=n(3972),Q=n.n(U),L=n(2777),j=n(961),P=n.n(j),H=n(5695),N=n.n(H),R=n(8592),z=n.n(R),G=n(9052),W=n.n(G),Y=n(2560),X=n.n(Y),K=n(2461),V=n.n(K);function Z(t,e){return function(t){if(p(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==v&&y(t)||t["@@iterator"];if(null!=i){var n,r,o=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J,q=n(6397),$=n.n(q),tt=n(7636),et=n.n(tt),it=n(789),nt=n.n(it),rt=n(4729),ot=n.n(rt),st=n(1610),at=n.n(st),At=n(3053),ct=n.n(At),lt=["zoomIn","zoomOut","hand"],ht=["history","undo","redo","reset"],ut=["delete","deleteAll"],dt=F()(J=[]).call(J,lt,ht,ut),ft="filter",gt="color",pt=["rect","circle","triangle"],mt=He("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),vt={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},yt="clearObjects",wt="loadImage",Ct="flip",bt="rotate",Bt="addObject",xt="removeObject",_t="applyFilter",St="removeFilter",It="addIcon",Mt="changeIconColor",Tt="addShape",Et="changeShape",kt="addText",Ft="changeText",Dt="changeTextStyle",Ot="addImageObject",Ut="resizeCanvasDimension",Qt="setObjectProperties",Lt="setObjectPosition",jt="changeSelection",Pt="resize",Ht="objectActivated",Nt="objectMoved",Rt="objectScaled",zt="objectRotated",Gt="objectAdded",Wt="objectModified",Yt="textEditing",Xt="textChanged",Kt="iconCreateResize",Vt="iconCreateEnd",Zt="addText",Jt="addObject",qt="mousedown",$t="redoStackChanged",te="undoStackChanged",ee="selectionCleared",ie="selectionCreated",ne="executeCommand",re="afterUndo",oe="afterRedo",se="handStarted",ae="handStopped",Ae="inputBoxEditingStarted",ce="inputBoxEditingStopped",le="focus",he="blur",ue=".tui-colorpicker-palette-hex",de="Load",fe="Mask",ge=He("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),pe="normal",me="zoom",ve="hand",ye=16,we={borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1},Ce="Invalid parameters.",be="The executing command state is locked.",Be="The object is not in canvas.",xe="The promise of redo command is reject.",_e={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},Se={realTimeEvent:!0,min:-360,max:360,value:0},Ie={min:5,max:30,value:12},Me={realTimeEvent:!0,min:2,max:300,value:3},Te={realTimeEvent:!0,min:10,max:100,value:50},Ee={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},ke={realTimeEvent:!0,min:32,max:4088,value:800},Fe="tui-image-editor-",De=Math.min,Oe=Math.max,Ue=!1,Qe=0;function Le(t){return t.__fe_id||(Qe+=1,t.__fe_id=Qe),t.__fe_id}function je(t){return"function"==typeof t}function Pe(t,e,i){if(e>i){var n=[i,e];e=n[0],i=n[1]}return Oe(e,De(t,i))}function He(){for(var t={},e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return z()(i,(function(e){t[e]=e})),t}function Ne(t,e){var i,n={},r=e.length,o=0;for(o=0;o<r;o+=1)n[i=e[o]]=t[i];return n}function Re(t){return $()(t,10)}function ze(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))}function Ge(){return!!(window.File&&window.FileList&&window.FileReader)}function We(t,e){var i,n,r,o;4===t.length&&(t=F()(o="".concat(t)).call(o,h()(t).call(t,1,4)));var s=$()(h()(t).call(t,1,3),16),a=$()(h()(t).call(t,3,5),16),A=$()(h()(t).call(t,5,7),16),c=e||1;return F()(i=F()(n=F()(r="rgba(".concat(s,", ")).call(r,a,", ")).call(n,A,", ")).call(i,c,")")}function Ye(t){z()(t,(function(e,i){t[i]=null}))}function Xe(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"."===i.charAt(0)?F()(e=".".concat(Fe).concat(n)).call(e,h()(i).call(i,1)):F()(t="".concat(Fe).concat(n)).call(t,i)}function Ke(t,e){t.customProps=t.customProps||{},P()(t.customProps,e)}function Ve(t,e){var i={};return X()(e)&&(e=[e]),z()(e,(function(e){i[e]=t.customProps[e]})),i}function Ze(t,e){return o()(t).call(t,e)>=0}function Je(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return at()(t,"type")||gt}function qe(t){var e=nt()(t);return(void 0===e?{}:e).source?ft:gt}function $e(t){return ct()(t.get("type"),pt)>=0}function ti(t){if(Ze(pt,t))return"Shape";switch(t){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return ii(t)}}function ei(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useAlpha,r=void 0===n||n,o=i.mode;switch(t){case"vintage":e="sepia2";break;case"removeColor":e=r?"colorFilter":"removeWhite";break;case"blendColor":e="add"===o?"blend":o;break;default:e=t}return ii(e)}function ii(t){return t.replace(/[a-z]/,(function(t){return t.toUpperCase()}))}var ni=He("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),ri={UN_IMPLEMENTATION:function(t){return"Should implement a method: "+t},NO_COMPONENT_NAME:function(){return"Should set a component name"}},oi={types:P()({},ni),create:function(t){t=t.toLowerCase();for(var e=ri[t],i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},si=oi.create,ai=oi.types,Ai=function(){function t(e,i){S(this,t),this.name=e.name,this.args=i,this.execute=e.execute,this.undo=e.undo,this.executeCallback=e.executeCallback||null,this.undoCallback=e.undoCallback||null,this.undoData={}}return M(t,[{key:"execute",value:function(){throw new Error(si(ai.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(si(ai.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return V()(this.undoData).length>0}},{key:"setUndoData",value:function(t,e,i){return e&&(t=e),i?e||(e=t):(P()(this.undoData,t),e=null),e}},{key:"setExecuteCallback",value:function(t){return this.executeCallback=t,this}},{key:"setUndoCallback",value:function(t){return this.undoCallback=t,this}}]),t}(),ci=Ai,li={},hi={create:function(t){var e=li[t];if(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return new ci(e,n)}return null},register:function(t){li[t.name]=t}},ui=function(){function t(){S(this,t),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return M(t,[{key:"_invokeExecution",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.lock();var n=t.args;return n||(n=[]),t.execute.apply(t,B(n)).then((function(n){return e._isSilent||(e.pushUndoStack(t),e.fire(i?oe:ne,t)),e.unlock(),je(t.executeCallback)&&t.executeCallback(n),n})).catch((function(t){return e.unlock(),O().reject(t)}))}},{key:"_invokeUndo",value:function(t){var e=this;this.lock();var i=t.args;return i||(i=[]),t.undo.apply(t,B(i)).then((function(i){return e.pushRedoStack(t),e.fire(re,t),e.unlock(),je(t.undoCallback)&&t.undoCallback(i),i})).catch((function(t){return e.unlock(),O().reject(t)}))}},{key:"_fireRedoStackChanged",value:function(){this.fire($t,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(te,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var t=this;this._isSilent=!0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.execute.apply(this,F()(i).call(i,[this._isSilent])).then((function(){t._isSilent=!1}))}},{key:"execute",value:function(){var t=this;if(this._isLocked)return O().reject(be);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i[0];return X()(r)&&(r=hi.create.apply(hi,i)),this._invokeExecution(r).then((function(e){return t.clearRedoStack(),e}))}},{key:"undo",value:function(){var t,e,i=this._undoStack.pop(),n="";return i&&this._isLocked&&(this.pushUndoStack(i,!0),i=null),i?(this.isEmptyUndoStack()&&this._fireUndoStackChanged(),t=this._invokeUndo(i)):(n="The promise of undo command is reject.",this._isLocked&&(n=F()(e="".concat(n," Because ")).call(e,be)),t=O().reject(n)),t}},{key:"redo",value:function(){var t,e,i=this._redoStack.pop(),n="";return i&&this._isLocked&&(this.pushRedoStack(i,!0),i=null),i?(this.isEmptyRedoStack()&&this._fireRedoStackChanged(),t=this._invokeExecution(i,!0)):(n=xe,this._isLocked&&(n=F()(e="".concat(n," Because ")).call(e,be)),t=O().reject(n)),t}},{key:"pushUndoStack",value:function(t,e){this._undoStack.push(t),e||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(t,e){this._redoStack.push(t),e||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return 0===this._redoStack.length}},{key:"isEmptyUndoStack",value:function(){return 0===this._undoStack.length}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),t}();W().mixin(ui);var di=ui,fi=n(5214),gi=n.n(fi),pi=n(899),mi=n.n(pi),vi={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},yi=n(2534),wi=function(){function t(e){var i,n,r,o;S(this,t),this.styles=this._changeToObject(P()({},vi,e)),i=this._styleMaker(),n=Z(document.getElementsByTagName("head"),1)[0],r=document.createElement("link"),o=encodeURIComponent(i),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","data:text/css;charset=UTF-8,".concat(o)),n.appendChild(r),this._loadDefaultSvgIcon()}return M(t,[{key:"getStyle",value:function(t){var e=null,i=t.replace(/\..+$/,""),n=this.styles[t];switch(t){case"common.bi":e=this.styles[t].image;break;case"menu.icon":e={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")],hover:this.styles["".concat(i,".hoverIcon")],disabled:this.styles["".concat(i,".disabledIcon")]};break;case"submenu.icon":e={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")]};break;case"submenu.label":e={active:this._makeCssText(this.styles["".concat(i,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(i,".normalLabel")])};break;case"submenu.partition":e={vertical:this._makeCssText(P()({},n,{borderLeft:"1px solid ".concat(n.color)})),horizontal:this._makeCssText(P()({},n,{borderBottom:"1px solid ".concat(n.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":n.backgroundColor=n.color,e=this._makeCssText(n);break;default:e=this._makeCssText(n)}return e}},{key:"_styleMaker",value:function(){var t=this.getStyle("submenu.label"),e=this.getStyle("submenu.partition");return function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C,b,B,x,_,S,I,M,T,E=t.subMenuLabelActive,k=t.subMenuLabelNormal,D=t.subMenuRangeTitle,O=t.submenuPartitionVertical,U=t.submenuPartitionHorizontal,Q=t.submenuCheckbox,L=t.submenuRangePointer,j=t.submenuRangeValue,P=t.submenuColorpickerTitle,H=t.submenuColorpickerButton,N=t.submenuRangeBar,R=t.submenuRangeSubbar,z=t.submenuDisabledRangePointer,G=t.submenuDisabledRangeBar,W=t.submenuDisabledRangeSubbar,Y=t.submenuIconSize,X=t.menuIconSize,K=t.biSize,V=t.menuIconStyle,Z=t.submenuIconStyle;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A=F()(c=F()(l=F()(h=F()(u=F()(d=F()(f=F()(g=F()(p=F()(m=F()(v=F()(y=F()(w=F()(C=F()(b=F()(B=F()(x=F()(_=F()(S=F()(I=F()(M=F()(T='\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,\n    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,\n    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,\n    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,\n    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,\n    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,\n    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,\n    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-draw-line-select-button.line .tui-image-editor-button.line label,\n    .tie-draw-line-select-button.free .tui-image-editor-button.free label,\n    .tie-flip-button.flipX .tui-image-editor-button.flipX label,\n    .tie-flip-button.flipY .tui-image-editor-button.flipY label,\n    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\n    .tie-crop-button .tui-image-editor-button.apply.active label,\n    .tie-crop-preset-button .tui-image-editor-button.preset.active label,\n    .tie-resize-button .tui-image-editor-button.apply.active label,\n    .tie-resize-preset-button .tui-image-editor-button.preset.active label,\n    .tie-shape-button.rect .tui-image-editor-button.rect label,\n    .tie-shape-button.circle .tui-image-editor-button.circle label,\n    .tie-shape-button.triangle .tui-image-editor-button.triangle label,\n    .tie-text-effect-button .tui-image-editor-button.active label,\n    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,\n    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,\n    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,\n    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\n    .tui-image-editor-container .tui-image-editor-checkbox label > span {\n        '.concat(E,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {\n        ")).call(T,k,"\n    }\n    .tui-image-editor-container .tui-image-editor-range-wrap label > span {\n        ")).call(M,D,"\n    }\n    .tui-image-editor-container .tui-image-editor-partition > div {\n        ")).call(I,O,"\n    }\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n        ")).call(S,U,"\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {\n        ")).call(_,Q,"\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {\n        border: 0;\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n        ")).call(x,L,"\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\n        ")).call(B,N,"\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n        ")).call(b,R,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\n        ")).call(C,z,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\n        ")).call(w,W,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\n        ")).call(y,G,"\n    }\n    .tui-image-editor-container .tui-image-editor-range-value {\n        ")).call(v,j,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\n        ")).call(m,P,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\n        ")).call(p,H,"\n    }\n    .tui-image-editor-container .svg_ic-menu {\n        ")).call(g,X,"\n    }\n    .tui-image-editor-container .svg_ic-submenu {\n        ")).call(f,Y,"\n    }\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\n        ")).call(d,K,"\n    }\n    .tui-image-editor-menu use.normal.use-default,\n    .tui-image-editor-help-menu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(u,V.normal.color,";\n        stroke: ")).call(h,V.normal.color,";\n    }\n    .tui-image-editor-menu use.active.use-default,\n    .tui-image-editor-help-menu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(l,V.active.color,";\n        stroke: ")).call(c,V.active.color,";\n    }\n    .tui-image-editor-menu use.hover.use-default,\n    .tui-image-editor-help-menu use.hover.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(A,V.hover.color,";\n        stroke: ")).call(a,V.hover.color,";\n    }\n    .tui-image-editor-menu use.disabled.use-default,\n    .tui-image-editor-help-menu use.disabled.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(s,V.disabled.color,";\n        stroke: ")).call(o,V.disabled.color,";\n    }\n    .tui-image-editor-submenu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(r,Z.normal.color,";\n        stroke: ")).call(n,Z.normal.color,";\n    }\n    .tui-image-editor-submenu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(i,Z.active.color,";\n        stroke: ")).call(e,Z.active.color,";\n    }\n")}({subMenuLabelActive:t.active,subMenuLabelNormal:t.normal,submenuPartitionVertical:e.vertical,submenuPartitionHorizontal:e.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(t){var e={};return z()(t,(function(t,i){var n=Z(i.match(/^(.+)\.([a-z]+)$/i),3),r=n[1],o=n[2];e[r]||(e[r]={}),e[r][o]=t})),e}},{key:"_makeCssText",value:function(t){var e=this,i=[];return z()(t,(function(t,n){var r,s;o()(r=["backgroundImage"]).call(r,n)>-1&&"none"!==t&&(t="url(".concat(t,")")),i.push(F()(s="".concat(e._toUnderScore(n),": ")).call(s,t))})),i.join(";")}},{key:"_toUnderScore",value:function(t){return t.replace(/([A-Z])/g,(function(t,e){return"-".concat(e.toLowerCase())}))}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var t=new DOMParser,e=yi.replace(/data:image\/svg\+xml;base64,/,""),i=t.parseFromString(atob(e),"text/xml");document.body.appendChild(i.documentElement)}}},{key:"_makeIconClassName",value:function(t,e){var i=(e?this.getStyle("submenu.icon"):this.getStyle("menu.icon"))[t],n=i.path,r=i.name;return n&&r?t:"".concat(t," use-default")}},{key:"_makeSvgIconPrefix",value:function(t,e){var i,n=(e?this.getStyle("submenu.icon"):this.getStyle("menu.icon"))[t],r=n.path,o=n.name;return r&&o?F()(i="".concat(r,"#")).call(i,o,"-"):"#"}},{key:"_makeSvgItem",value:function(t,e,i){var n=this;return mi()(t).call(t,(function(t){var r,o,s=n._makeSvgIconPrefix(t,i),a=n._toUnderScore(e),A=n._makeIconClassName(t,i);return F()(r=F()(o='<use xlink:href="'.concat(s,"ic-")).call(o,a,'" class="')).call(r,A,'"/>')})).join("")}},{key:"makeMenSvgIconSet",value:function(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return F()(i='<svg class="svg_ic-'.concat(n?"submenu":"menu",'">')).call(i,this._makeSvgItem(t,e,n),"</svg>")}}]),t}(),Ci=wi,bi=n(9146),Bi=n.n(bi),xi=n(6623),_i=n(4230);function Si(t,e){return Si=_i||function(t,e){return t.__proto__=e,t},Si(t,e)}function Ii(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=xi(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Si(t,e)}var Mi=n(3742);function Ti(t){return Ti="function"==typeof v&&"symbol"==typeof Mi?function(t){return typeof t}:function(t){return t&&"function"==typeof v&&t.constructor===v&&t!==v.prototype?"symbol":typeof t},Ti(t)}function Ei(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ki(t,e){if(e&&("object"===Ti(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ei(t)}var Fi=n(9856);function Di(t){return Di=_i?Fi:function(t){return t.__proto__||Fi(t)},Di(t)}var Oi=n(6092),Ui=n.n(Oi),Qi=n(4858),Li=n.n(Qi),ji=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Pi=function(){function t(e,i){var n=i.defaultColor,r=void 0===n?"#7e7e7e":n,o=i.toggleDirection,s=void 0===o?"up":o,a=i.usageStatistics;S(this,t),this.colorpickerElement=e,this.usageStatistics=a,this._show=!1,this._colorpickerElement=e,this._toggleDirection=s,this._makePickerButtonElement(r),this._makePickerLayerElement(e,e.getAttribute("title")),this._color=r,this.picker=Li().create({container:this.pickerElement,preset:ji,color:r,usageStatistics:this.usageStatistics}),this._addEvent()}return M(t,[{key:"destroy",value:function(){var t=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",z()(this,(function(e,i){t[i]=null}))}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._changeColorElement(t)}},{key:"_changeColorElement",value:function(t){t?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=t):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(t){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",t?this.colorElement.style.backgroundColor=t:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(t,e){var i=document.createElement("label"),n=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",i.innerHTML=e,n.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(n),t.appendChild(this.pickerControl),t.appendChild(this.colorElement),t.appendChild(i)}},{key:"_addEvent",value:function(){var t,e=this;this.picker.on("selectColor",(function(t){e._changeColorElement(t.color),e._color=t.color,e.fire("change",t.color)})),this.eventHandler={pickerToggle:E()(t=this._pickerToggleEventHandler).call(t,this),pickerHide:function(){return e.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(t){var e=t.target,i=e&&this._isElementInColorPickerControl(e);(!i||i&&this._isPaletteButton(e))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),t.stopPropagation()}},{key:"_isPaletteButton",value:function(t){return"tui-colorpicker-palette-button"===t.className}},{key:"_isElementInColorPickerControl",value:function(t){for(var e=t;e!==document.body&&e;){if(e===this.pickerControl)return!0;e=e.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var t=this.pickerControl.style,e=this._colorpickerElement.clientWidth/2+2,i=this.pickerControl.offsetWidth/2-e,n=-1*(this.pickerControl.offsetHeight+10);"down"===this._toggleDirection&&(n=30),t.top="".concat(n,"px"),t.left="-".concat(i,"px")}}]),t}();W().mixin(Pi);var Hi=Pi,Ni=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,Ri=function(){function t(e){var i,n,r,o,s,a,A,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(this,t),this._value=c.value||0,this.rangeElement=e.slider,this.rangeInputElement=e.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=c.min||0,this._max=c.max||100,this._useDecimal=c.useDecimal,this._absMax=-1*this._min+this._max,this.realTimeEvent=c.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:E()(i=this._startChangingSlide).call(i,this),stopChangingSlide:E()(n=this._stopChangingSlide).call(n,this),changeSlide:E()(r=this._changeSlide).call(r,this),changeSlideFinally:E()(o=this._changeSlideFinally).call(o,this),changeInput:E()(s=this._changeInput).call(s,this),changeInputFinally:E()(a=this._changeValueWithInput).call(a,this,!0),changeInputWithArrow:E()(A=this._changeValueWithInputKeyEvent).call(A,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=c.value,this.trigger("change")}return M(t,[{key:"destroy",value:function(){var t=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",z()(this,(function(e,i){t[i]=null}))}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this._absMax=-1*this._min+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(t){this._min=t,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(t){var e=((t=this._useDecimal?t:Re(t))-this._min)*this.rangeWidth/this._absMax;this.rangeWidth<e&&(e=this.rangeWidth),this.pointer.style.left="".concat(e,"px"),this.subbar.style.right="".concat(this.rangeWidth-e,"px"),this._value=t,this.rangeInputElement&&(this.rangeInputElement.value=t)}},{key:"trigger",value:function(t){this.fire(t,this._value)}},{key:"_getRangeWidth",value:function(){var t=function(t){return Re(window.getComputedStyle(t,null).width)};return t(this.rangeElement)-t(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(t){var e,i=t.keyCode,n=t.target;if(!(o()(e=[38,40]).call(e,i)<0)){var r=Number(n.value);if(!((r=this._valueUpDownForKeyEvent(r,i))<this._min||r>this._max)){var s=Pe(r,this._min,this.max);this.value=s,this.fire("change",s,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(t,e){var i=this._useDecimal?.1:1;return 38===e?t+=i:40===e&&(t-=i),t}},{key:"_changeInput",value:function(t){var e=this;clearTimeout(this._userInputTimer);var i=t.keyCode;i<48||i>57?t.preventDefault():this._userInputTimer=g()((function(){e._inputSetValue(t.target.value)}),350)}},{key:"_inputSetValue",value:function(t){var e=this._useDecimal?Number(t):Re(t);e=Pe(e,this._min,this.max),this.value=e,this.fire("change",e,!0)}},{key:"_changeValueWithInput",value:function(t,e){var i,n=e.keyCode,r=e.target;if(!(o()(i=[38,40]).call(i,n)>=0)){var s=this._filterForInputText(r.value),a=!s||isNaN(s);r.value=s,a||this._inputSetValue(s)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(t){var e=t.screenX-this.firstPosition,i=this.firstLeft+e;i=(i=i>this.rangeWidth?this.rangeWidth:i)<0?0:i,this.pointer.style.left="".concat(i,"px"),this.subbar.style.right="".concat(this.rangeWidth-i,"px");var n=i/this.rangeWidth,r=this._absMax*n+this._min,o=this._useDecimal?r:Re(r);this.value!==o&&(this.value=o,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(t){if(t.stopPropagation(),"tui-image-editor-range"===t.target.className){var e=t.offsetX/this.rangeWidth,i=this._absMax*e+this._min;this.pointer.style.left="".concat(e*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-e)*this.rangeWidth,"px"),this.value=i,this.fire("change",i,!0)}}},{key:"_startChangingSlide",value:function(t){this.firstPosition=t.screenX,this.firstLeft=Re(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(t){return t.replace(Ni,"$1$2$3")}}]),t}();W().mixin(Ri);var zi=Ri,Gi=function(){function t(e,i){var n=i.locale,r=i.name,o=i.makeSvgIcon,s=i.menuBarPosition,a=i.templateHtml,A=i.usageStatistics;S(this,t),this.subMenuElement=e,this.menuBarPosition=s,this.toggleDirection="top"===s?"down":"up",this.colorPickerControls=[],this.usageStatistics=A,this.eventHandler={},this._makeSubMenuElement({locale:n,name:r,makeSvgIcon:o,templateHtml:a})}return M(t,[{key:"selector",value:function(t){return this.subMenuElement.querySelector(t)}},{key:"colorPickerChangeShow",value:function(t){var e;et()(e=this.colorPickerControls).call(e,(function(e){t!==e&&e.hide()}))}},{key:"getButtonType",value:function(t,e){return t.className.match(RegExp("(".concat(e.join("|"),")")))[0]}},{key:"changeClass",value:function(t,e,i){t.classList.remove(e),t.classList.add(i)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(t){var e=t.locale,i=t.name,n=t.iconStyle,r=t.makeSvgIcon,o=t.templateHtml,s=document.createElement("div");s.className="tui-image-editor-menu-".concat(i),s.innerHTML=o({locale:e,iconStyle:n,makeSvgIcon:r}),this.subMenuElement.appendChild(s)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Ae)}},{key:"_onStopEditingInputBox",value:function(){this.fire(ce)}}]),t}();W().mixin(Gi);var Wi=Gi,Yi=function(t){var e,i,n,r,o,s,a,A,c=t.locale,l=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-shape-button">\n            <div class="tui-image-editor-button rect">\n                <div>\n                    '.concat(l(["normal","active"],"shape-rectangle",!0),"\n                </div>\n                <label> ")).call(A,c.localize("Rectangle"),' </label>\n            </div>\n            <div class="tui-image-editor-button circle">\n                <div>\n                    ')).call(a,l(["normal","active"],"shape-circle",!0),"\n                </div>\n                <label> ")).call(s,c.localize("Circle"),' </label>\n            </div>\n            <div class="tui-image-editor-button triangle">\n                <div>\n                    ')).call(o,l(["normal","active"],"shape-triangle",!0),"\n                </div>\n                <label> ")).call(r,c.localize("Triangle"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-shape-color-button">\n            <div class="tie-color-fill" title="')).call(n,c.localize("Fill"),'"></div>\n            <div class="tie-color-stroke" title="')).call(i,c.localize("Stroke"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,c.localize("Stroke"),'</label>\n            <div class="tie-stroke-range"></div>\n            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};var Xi={stroke:"#ffbb3b",fill:"",strokeWidth:3},Ki=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"shape",makeSvgIcon:s,menuBarPosition:a,templateHtml:Yi,usageStatistics:A})).type=null,i.options=Xi,i._els={shapeSelectButton:i.selector(".tie-shape-button"),shapeColorButton:i.selector(".tie-shape-color-button"),strokeRange:new zi({slider:i.selector(".tie-stroke-range"),input:i.selector(".tie-stroke-range-value")},Me),fillColorpicker:new Hi(i.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:i.toggleDirection,usageStatistics:i.usageStatistics}),strokeColorpicker:new Hi(i.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:i.toggleDirection,usageStatistics:i.usageStatistics})},i.colorPickerControls.push(i._els.fillColorpicker),i.colorPickerControls.push(i._els.strokeColorpicker),i.colorPickerInputBoxes=[],i.colorPickerInputBoxes.push(i._els.fillColorpicker.colorpickerElement.querySelector(ue)),i.colorPickerInputBoxes.push(i._els.strokeColorpicker.colorpickerElement.querySelector(ue)),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r,o,s,a=this;this.eventHandler.shapeTypeSelected=E()(e=this._changeShapeHandler).call(e,this),this.actions=t,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",E()(i=this._changeStrokeRangeHandler).call(i,this)),this._els.fillColorpicker.on("change",E()(n=this._changeFillColorHandler).call(n,this)),this._els.strokeColorpicker.on("change",E()(r=this._changeStrokeColorHandler).call(r,this)),this._els.fillColorpicker.on("changeShow",E()(o=this.colorPickerChangeShow).call(o,this)),this._els.strokeColorpicker.on("changeShow",E()(s=this.colorPickerChangeShow).call(s,this)),Ui()(this.colorPickerInputBoxes,(function(t){var e,i;t.addEventListener(le,E()(e=a._onStartEditingInputBox).call(e,a)),t.addEventListener(he,E()(i=a._onStopEditingInputBox).call(i,a))}),this)}},{key:"_removeEvent",value:function(){var t=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),Ui()(this.colorPickerInputBoxes,(function(e){var i,n;e.removeEventListener(le,E()(i=t._onStartEditingInputBox).call(i,t)),e.removeEventListener(he,E()(n=t._onStopEditingInputBox).call(n,t))}),this)}},{key:"setShapeStatus",value:function(t){var e=t.strokeWidth,i=t.strokeColor,n=t.fillColor;this._els.strokeRange.value=e,this._els.strokeColorpicker.color=i,this._els.fillColorpicker.color=n,this.options.stroke=i,this.options.fill=n,this.options.strokeWidth=e,this.actions.setDrawingShape(this.type,{strokeWidth:e})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(t){var e=t;e<=0&&(e=Me.max),this._els.strokeRange.max=e}},{key:"setStrokeValue",value:function(t){this._els.strokeRange.value=t,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){this.actions.stopDrawingMode(),this.actions.discardSelection();var i=this.getButtonType(e,["circle","triangle","rect"]);if(this.type===i)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=i,t.currentTarget.classList.add(i),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(t,e){this.options.strokeWidth=Re(t),this.actions.changeShape({strokeWidth:t},!e),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(t){t=t||"transparent",this.options.fill=t,this.actions.changeShape({fill:t})}},{key:"_changeStrokeColorHandler",value:function(t){t=t||"transparent",this.options.stroke=t,this.actions.changeShape({stroke:t})}}]),r}(Wi),Vi=Ki,Zi=function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v=t.locale,y=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A=F()(c=F()(l=F()(h=F()(u=F()(d=F()(f=F()(g=F()(p=F()(m='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-crop-preset-button">\n            <div class="tui-image-editor-button preset preset-none active">\n                <div>\n                    '.concat(y(["normal","active"],"shape-rectangle",!0),"\n                </div>\n                <label> ")).call(m,v.localize("Custom"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-square">\n                <div>\n                    ')).call(p,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(g,v.localize("Square"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-3-2">\n                <div>\n                    ')).call(f,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(d,v.localize("3:2"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-4-3">\n                <div>\n                    ')).call(u,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(h,v.localize("4:3"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-5-4">\n                <div>\n                    ')).call(l,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(c,v.localize("5:4"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-7-5">\n                <div>\n                    ')).call(A,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(a,v.localize("7:5"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-16-9">\n                <div>\n                    ')).call(s,y(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(o,v.localize("16:9"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline">\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-crop-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(r,y(["normal","active"],"apply"),"\n                <label>\n                    ")).call(n,v.localize("Apply"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(i,y(["normal","active"],"cancel"),"\n                <label>\n                    ")).call(e,v.localize("Cancel"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};var Ji=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"crop",makeSvgIcon:s,menuBarPosition:a,templateHtml:Zi,usageStatistics:A})).status="active",i._els={apply:i.selector(".tie-crop-button .apply"),cancel:i.selector(".tie-crop-button .cancel"),preset:i.selector(".tie-crop-preset-button")},i.defaultPresetButton=i._els.preset.querySelector(".preset-none"),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r=E()(e=this._applyEventHandler).call(e,this),o=E()(i=this._cancelEventHandler).call(i,this),s=E()(n=this._cropzonePresetEventHandler).call(n,this);this.eventHandler={apply:r,cancel:o,cropzonePreset:s},this.actions=t,this._els.apply.addEventListener("click",r),this._els.cancel.addEventListener("click",o),this._els.preset.addEventListener("click",s)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button.preset");if(e){var i=Z(e.className.match(/preset-[^\s]+/),1)[0];this._setPresetButtonActive(e),this.actions.preset(i)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPresetButton;z()(this._els.preset.querySelectorAll(".preset"),(function(t){t.classList.remove("active")})),t&&t.classList.add("active")}}]),r}(Wi),qi=Ji,$i=function(t){var e,i,n,r,o,s,a=t.locale,A=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-range-wrap tui-image-editor-newline">\n                <label class="range">'.concat(a.localize("Width"),'&nbsp;</label>\n                <div class="tie-width-range"></div>\n                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n                <div class="tui-image-editor-partition tui-image-editor-newline"></div>\n                <label class="range">')).call(s,a.localize("Height"),'</label>\n                <div class="tie-height-range"></div>\n                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-lock-aspect-ratio">\n                        <span>')).call(o,a.localize("Lock Aspect Ratio"),'</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tie-resize-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(r,A(["normal","active"],"apply"),"\n                <label>\n                    ")).call(n,a.localize("Apply"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(i,A(["normal","active"],"cancel"),"\n                <label>\n                    ")).call(e,a.localize("Cancel"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};var tn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"resize",makeSvgIcon:s,menuBarPosition:a,templateHtml:$i,usageStatistics:A})).status="active",i._lockState=!1,i._originalDimensions=null,i._els={widthRange:new zi({slider:i.selector(".tie-width-range"),input:i.selector(".tie-width-range-value")},ke),heightRange:new zi({slider:i.selector(".tie-height-range"),input:i.selector(".tie-height-range-value")},ke),lockAspectRatio:i.selector(".tie-lock-aspect-ratio"),apply:i.selector(".tie-resize-button .apply"),cancel:i.selector(".tie-resize-button .cancel")},i}return M(r,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var t=this.actions.getCurrentDimensions();this._originalDimensions=t,this.setWidthValue(t.width),this.setHeightValue(t.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(t){this._els.widthRange.min=this.calcMinValue(t.minWidth),this._els.heightRange.min=this.calcMinValue(t.minHeight),this._els.widthRange.max=this.calcMaxValue(t.maxWidth),this._els.heightRange.max=this.calcMaxValue(t.maxHeight)}},{key:"calcMaxValue",value:function(t){return t<=0&&(t=ke.max),t}},{key:"calcMinValue",value:function(t){return t<=0&&(t=ke.min),t}},{key:"setWidthValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._els.widthRange.value=t,e&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._els.heightRange.value=t,e&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r,o;this._els.widthRange.on("change",E()(e=this._changeWidthRangeHandler).call(e,this)),this._els.heightRange.on("change",E()(i=this._changeHeightRangeHandler).call(i,this)),this._els.lockAspectRatio.addEventListener("change",E()(n=this._changeLockAspectRatio).call(n,this));var s=E()(r=this._applyEventHandler).call(r,this),a=E()(o=this._cancelEventHandler).call(o,this);this.eventHandler={apply:s,cancel:a},this.actions=t,this._els.apply.addEventListener("click",s),this._els.cancel.addEventListener("click",a)}},{key:"_changeWidthRangeHandler",value:function(t){this.actions.preview("width",Re(t),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(t){this.actions.preview("height",Re(t),this._lockState)}},{key:"_changeLockAspectRatio",value:function(t){this._lockState=t.target.checked,this.actions.lockAspectRatio(this._lockState,ke.min,ke.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),r}(Wi),en=tn,nn=function(t){var e,i,n,r,o,s=t.locale,a=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o='\n    <ul class="tie-flip-button tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button flipX">\n                <div>\n                    '.concat(a(["normal","active"],"flip-x",!0),"\n                </div>\n                <label>\n                    ")).call(o,s.localize("Flip X"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button flipY">\n                <div>\n                    ')).call(r,a(["normal","active"],"flip-y",!0),"\n                </div>\n                <label>\n                    ")).call(n,s.localize("Flip Y"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tui-image-editor-button resetFlip">\n                <div>\n                    ')).call(i,a(["normal","active"],"flip-reset",!0),"\n                </div>\n                <label>\n                    ")).call(e,s.localize("Reset"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};var rn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"flip",makeSvgIcon:s,menuBarPosition:a,templateHtml:nn,usageStatistics:A})).flipStatus=!1,i._els={flipButton:i.selector(".tie-flip-button")},i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),Ye(this)}},{key:"addEvent",value:function(t){var e;this.eventHandler.changeFlip=E()(e=this._changeFlip).call(e,this),this._actions=t,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(t){var e=this,i=t.target.closest(".tui-image-editor-button");if(i){var n=this.getButtonType(i,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&"resetFlip"===n)return;this._actions.flip(n).then((function(t){var i=e._els.flipButton.classList;e.flipStatus=!1,i.remove("resetFlip"),z()(["flipX","flipY"],(function(n){i.remove(n),t[n]&&(i.add(n),i.add("resetFlip"),e.flipStatus=!0)}))}))}}}]),r}(Wi),on=rn,sn=function(t){var e,i,n=t.locale,r=t.makeSvgIcon;return F()(e=F()(i='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-rotate-button">\n            <div class="tui-image-editor-button clockwise">\n                <div>\n                    '.concat(r(["normal","active"],"rotate-clockwise",!0),'\n                </div>\n                <label> 30 </label>\n            </div>\n            <div class="tui-image-editor-button counterclockwise">\n                <div>\n                    ')).call(i,r(["normal","active"],"rotate-counterclockwise",!0),'\n                </div>\n                <label> -30 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,n.localize("Range"),'</label>\n            <div class="tie-rotate-range"></div>\n            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};var an=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"rotate",makeSvgIcon:s,menuBarPosition:a,templateHtml:sn,usageStatistics:A}))._value=0,i._els={rotateButton:i.selector(".tie-rotate-button"),rotateRange:new zi({slider:i.selector(".tie-rotate-range"),input:i.selector(".tie-rotate-range-value")},Se)},i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),Ye(this)}},{key:"setRangeBarAngle",value:function(t,e){var i=e;"rotate"===t&&(i=$()(this._els.rotateRange.value,10)+e),this._setRangeBarRatio(i)}},{key:"_setRangeBarRatio",value:function(t){this._els.rotateRange.value=t}},{key:"addEvent",value:function(t){var e,i;this.eventHandler.rotationAngleChanged=E()(e=this._changeRotateForButton).call(e,this),this.actions=t,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",E()(i=this._changeRotateForRange).call(i,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(t,e){var i=Re(t);this.actions.setAngle(i,!e),this._value=i}},{key:"_changeRotateForButton",value:function(t){var e=t.target.closest(".tui-image-editor-button"),i=this._els.rotateRange.value;if(e){var n={clockwise:30,counterclockwise:-30}[this.getButtonType(e,["counterclockwise","clockwise"])],r=$()(i,10)+n;r>=-360&&r<=360&&this.actions.rotate(n)}}}]),r}(Wi),An=an,cn=function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f=t.locale,g=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A=F()(c=F()(l=F()(h=F()(u=F()(d='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-text-effect-button">\n            <div class="tui-image-editor-button bold">\n                <div>\n                    '.concat(g(["normal","active"],"text-bold",!0),"\n                </div>\n                <label> ")).call(d,f.localize("Bold"),' </label>\n            </div>\n            <div class="tui-image-editor-button italic">\n                <div>\n                    ')).call(u,g(["normal","active"],"text-italic",!0),"\n                </div>\n                <label> ")).call(h,f.localize("Italic"),' </label>\n            </div>\n            <div class="tui-image-editor-button underline">\n                <div>\n                    ')).call(l,g(["normal","active"],"text-underline",!0),"\n                </div>\n                <label> ")).call(c,f.localize("Underline"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-text-align-button">\n            <div class="tui-image-editor-button left">\n                <div>\n                    ')).call(A,g(["normal","active"],"text-align-left",!0),"\n                </div>\n                <label> ")).call(a,f.localize("Left"),' </label>\n            </div>\n            <div class="tui-image-editor-button center">\n                <div>\n                    ')).call(s,g(["normal","active"],"text-align-center",!0),"\n                </div>\n                <label> ")).call(o,f.localize("Center"),' </label>\n            </div>\n            <div class="tui-image-editor-button right">\n                <div>\n                    ')).call(r,g(["normal","active"],"text-align-right",!0),"\n                </div>\n                <label> ")).call(n,f.localize("Right"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-text-color" title="')).call(i,f.localize("Color"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,f.localize("Text size"),'</label>\n            <div class="tie-text-range"></div>\n            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};var ln=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"text",makeSvgIcon:s,menuBarPosition:a,templateHtml:cn,usageStatistics:A})).effect={bold:!1,italic:!1,underline:!1},i.align="tie-text-align-left",i._els={textEffectButton:i.selector(".tie-text-effect-button"),textAlignButton:i.selector(".tie-text-align-button"),textColorpicker:new Hi(i.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:i.toggleDirection,usageStatistics:i.usageStatistics}),textRange:new zi({slider:i.selector(".tie-text-range"),input:i.selector(".tie-text-range-value")},Te)},i.colorPickerInputBox=i._els.textColorpicker.colorpickerElement.querySelector(ue),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r,o,s,a=E()(e=this._setTextEffectHandler).call(e,this),A=E()(i=this._setTextAlignHandler).call(i,this);this.eventHandler={setTextEffect:a,setTextAlign:A},this.actions=t,this._els.textEffectButton.addEventListener("click",a),this._els.textAlignButton.addEventListener("click",A),this._els.textRange.on("change",E()(n=this._changeTextRnageHandler).call(n,this)),this._els.textColorpicker.on("change",E()(r=this._changeColorHandler).call(r,this)),this.colorPickerInputBox.addEventListener(le,E()(o=this._onStartEditingInputBox).call(o,this)),this.colorPickerInputBox.addEventListener(he,E()(s=this._onStopEditingInputBox).call(s,this))}},{key:"_removeEvent",value:function(){var t,e,i=this.eventHandler,n=i.setTextEffect,r=i.setTextAlign;this._els.textEffectButton.removeEventListener("click",n),this._els.textAlignButton.removeEventListener("click",r),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(le,E()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(he,E()(e=this._onStopEditingInputBox).call(e,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(t){this._els.textColorpicker.color=t}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(t){this._els.textRange.value=t}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=nt()(t),i=t.fontSize,n=t.fontStyle,r=t.fontWeight,o=t.textDecoration,s=t.textAlign;this.textColor=e,this.fontSize=i,this.setEffectState("italic",n),this.setEffectState("bold",r),this.setEffectState("underline",o),this.setAlignState("tie-text-align-".concat(s))}},{key:"setEffectState",value:function(t,e){var i="italic"===e||"bold"===e||"underline"===e,n=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(t));this.effect[t]=i,n.classList[i?"add":"remove"]("active")}},{key:"setAlignState",value:function(t){var e=this._els.textAlignButton;e.classList.remove(this.align),e.classList.add(t),this.align=t}},{key:"_setTextEffectHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=Z(e.className.match(/(bold|italic|underline)/),1)[0],n={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[i];this.effect[i]=!this.effect[i],e.classList.toggle("active"),this.actions.changeTextStyle(n)}}},{key:"_setTextAlignHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=this.getButtonType(e,["left","center","right"]),n="tie-text-align-".concat(i);t.currentTarget.classList.remove(this.align),this.align!==n&&t.currentTarget.classList.add(n),this.actions.changeTextStyle({textAlign:i}),this.align=n}}},{key:"_changeTextRnageHandler",value:function(t,e){this.actions.changeTextStyle({fontSize:t},!e)}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeTextStyle({fill:t})}}]),r}(Wi),hn=ln,un=function(t){var e,i,n,r=t.locale,o=t.makeSvgIcon;return F()(e=F()(i=F()(n='\n    <ul class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button">\n                <div>\n                    <input type="file" accept="image/*" class="tie-mask-image-file">\n                    '.concat(o(["normal","active"],"mask-load",!0),"\n                </div>\n                <label> ")).call(n,r.localize("Load Mask Image"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">\n            <div class="tui-image-editor-button apply">\n                ')).call(i,o(["normal","active"],"apply"),"\n                <label>\n                    ")).call(e,r.localize("Apply"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};var dn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"mask",makeSvgIcon:s,menuBarPosition:a,templateHtml:un,usageStatistics:A}))._els={applyButton:i.selector(".tie-mask-apply"),maskImageButton:i.selector(".tie-mask-image-file")},i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n=E()(e=this._loadMaskFile).call(e,this),r=E()(i=this._applyMask).call(i,this);this.eventHandler={loadMaskFile:n,applyMask:r},this.actions=t,this._els.maskImageButton.addEventListener("change",n),this._els.applyButton.addEventListener("click",r)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(t){var e;Ge()||alert("This browser does not support file-api");var i=Z(t.target.files,1)[0];i&&(e=Q().createObjectURL(i),this.actions.loadImageFromURL(e,i),this._els.applyButton.classList.add("active"))}}]),r}(Wi),fn=dn,gn=function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C=t.locale,b=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A=F()(c=F()(l=F()(h=F()(u=F()(d=F()(f=F()(g=F()(p=F()(m=F()(v=F()(y=F()(w='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" data-icontype="icon-arrow">\n                <div>\n                    '.concat(b(["normal","active"],"icon-arrow",!0),"\n                </div>\n                <label>\n                    ")).call(w,C.localize("Arrow"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">\n                <div>\n                    ')).call(y,b(["normal","active"],"icon-arrow-2",!0),"\n                </div>\n                <label>\n                    ")).call(v,C.localize("Arrow-2"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">\n                <div>\n                    ')).call(m,b(["normal","active"],"icon-arrow-3",!0),"\n                </div>\n                <label>\n                    ")).call(p,C.localize("Arrow-3"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star">\n                <div>\n                    ')).call(g,b(["normal","active"],"icon-star",!0),"\n                </div>\n                <label>\n                    ")).call(f,C.localize("Star-1"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star-2">\n                <div>\n                    ')).call(d,b(["normal","active"],"icon-star-2",!0),"\n                </div>\n                <label>\n                    ")).call(u,C.localize("Star-2"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-polygon">\n                <div>\n                    ')).call(h,b(["normal","active"],"icon-polygon",!0),"\n                </div>\n                <label>\n                    ")).call(l,C.localize("Polygon"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-location">\n                <div>\n                    ')).call(c,b(["normal","active"],"icon-location",!0),"\n                </div>\n                <label>\n                    ")).call(A,C.localize("Location"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-heart">\n                <div>\n                    ')).call(a,b(["normal","active"],"icon-heart",!0),"\n                </div>\n                <label>\n                    ")).call(s,C.localize("Heart"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-bubble">\n                <div>\n                    ')).call(o,b(["normal","active"],"icon-bubble",!0),"\n                </div>\n                <label>\n                    ")).call(r,C.localize("Bubble"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" style="margin:0">\n                <div>\n                    <input type="file" accept="image/*" class="tie-icon-image-file">\n                    ')).call(n,b(["normal","active"],"icon-load",!0),"\n                </div>\n                <label>\n                    ")).call(i,C.localize("Custom icon"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-icon-color" title="')).call(e,C.localize("Color"),'"></div>\n        </li>\n    </ul>\n')};var pn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"icon",makeSvgIcon:s,menuBarPosition:a,templateHtml:gn,usageStatistics:A})).iconType=null,i._iconMap={},i._els={registerIconButton:i.selector(".tie-icon-image-file"),addIconButton:i.selector(".tie-icon-add-button"),iconColorpicker:new Hi(i.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:i.toggleDirection,usageStatistics:i.usageStatistics})},i.colorPickerInputBox=i._els.iconColorpicker.colorpickerElement.querySelector(ue),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r,o,s=E()(e=this._registerIconHandler).call(e,this),a=E()(i=this._addIconHandler).call(i,this);this.eventHandler={registerIcon:s,addIcon:a},this.actions=t,this._els.iconColorpicker.on("change",E()(n=this._changeColorHandler).call(n,this)),this._els.registerIconButton.addEventListener("change",s),this._els.addIconButton.addEventListener("click",a),this.colorPickerInputBox.addEventListener(le,E()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.addEventListener(he,E()(o=this._onStopEditingInputBox).call(o,this))}},{key:"_removeEvent",value:function(){var t,e;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(le,E()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(he,E()(e=this._onStopEditingInputBox).call(e,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var t=this;z()(_e,(function(e,i){t.actions.registerDefaultIcons(i,e)}))}},{key:"setIconPickerColor",value:function(t){this._els.iconColorpicker.color=t}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeColor(t)}},{key:"_addIconHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=e.getAttribute("data-icontype"),n=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(i),this.iconType===i?this.changeStandbyMode():(this.actions.addIcon(i,n),this.iconType=i)}}},{key:"_registerIconHandler",value:function(t){var e;Ge||alert("This browser does not support file-api");var i=Z(t.target.files,1)[0];i&&(e=Q().createObjectURL(i),this.actions.registerCustomIcon(e,i))}}]),r}(Wi),mn=pn,vn=function(t){var e,i,n,r,o,s=t.locale,a=t.makeSvgIcon;return F()(e=F()(i=F()(n=F()(r=F()(o='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-draw-line-select-button">\n            <div class="tui-image-editor-button free">\n                <div>\n                    '.concat(a(["normal","active"],"draw-free",!0),"\n                </div>\n                <label>\n                    ")).call(o,s.localize("Free"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button line">\n                <div>\n                    ')).call(r,a(["normal","active"],"draw-line",!0),"\n                </div>\n                <label>\n                    ")).call(n,s.localize("Straight"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-draw-color" title="')).call(i,s.localize("Color"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,s.localize("Range"),'</label>\n            <div class="tie-draw-range"></div>\n            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};var yn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon,a=e.menuBarPosition,A=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"draw",makeSvgIcon:s,menuBarPosition:a,templateHtml:vn,usageStatistics:A}))._els={lineSelectButton:i.selector(".tie-draw-line-select-button"),drawColorPicker:new Hi(i.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:i.toggleDirection,usageStatistics:i.usageStatistics}),drawRange:new zi({slider:i.selector(".tie-draw-range"),input:i.selector(".tie-draw-range-value")},Ie)},i.type=null,i.color=i._els.drawColorPicker.color,i.width=i._els.drawRange.value,i.colorPickerInputBox=i._els.drawColorPicker.colorpickerElement.querySelector(ue),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),Ye(this)}},{key:"addEvent",value:function(t){var e,i,n,r,o;this.eventHandler.changeDrawType=E()(e=this._changeDrawType).call(e,this),this.actions=t,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",E()(i=this._changeDrawColor).call(i,this)),this._els.drawRange.on("change",E()(n=this._changeDrawRange).call(n,this)),this.colorPickerInputBox.addEventListener(le,E()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.addEventListener(he,E()(o=this._onStopEditingInputBox).call(o,this))}},{key:"_removeEvent",value:function(){var t,e;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(le,E()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(he,E()(e=this._onStopEditingInputBox).call(e,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:We(this.color,.7)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=this.getButtonType(e,["free","line"]);if(this.actions.discardSelection(),this.type===i)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=i,this._els.lineSelectButton.classList.add(i),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(t){this.color=t||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(t){this.width=t,this.type?this.setDrawMode():this.changeStartMode()}}]),r}(Wi),wn=yn,Cn=n(9886),bn=n.n(Cn),Bn=function(t){var e,i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m=t.locale;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A=F()(c=F()(l=F()(h=F()(u=F()(d=F()(f=F()(g=F()(p='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap fixed-width">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-grayscale">\n                        <span>'.concat(m.localize("Grayscale"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-invert">\n                        <span>')).call(p,m.localize("Invert"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sepia">\n                        <span>')).call(g,m.localize("Sepia"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-vintage">\n                        <span>')).call(f,m.localize("Sepia2"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blur">\n                        <span>')).call(d,m.localize("Blur"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sharpen">\n                        <span>')).call(u,m.localize("Sharpen"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-emboss">\n                        <span>')).call(h,m.localize("Emboss"),'</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">\n                <div class="tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-remove-white">\n                            <span>')).call(l,m.localize("Remove White"),'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(c,m.localize("Distance"),'</label>\n                    <div class="tie-removewhite-distance-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-brightness">\n                        <span>')).call(A,m.localize("Brightness"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-brightness-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-noise">\n                        <span>')).call(a,m.localize("Noise"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-noise-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-pixelate">\n                        <span>')).call(s,m.localize("Pixelate"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-pixelate-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-color-filter">\n                            <span>')).call(o,m.localize("Color Filter"),'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(r,m.localize("Threshold"),'</label>\n                    <div class="tie-colorfilter-threshold-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="filter-color-item">\n                <div class="tie-filter-tint-color" title="')).call(n,m.localize("Tint"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-tint">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-multiply-color" title="')).call(i,m.localize("Multiply"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-multiply">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-blend-color" title="')).call(e,m.localize("Blend"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blend">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n        </li>\n    </ul>\n')};var xn="130px",_n=["add","diff","subtract","multiply","screen","lighten","darken"],Sn=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],In={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},Mn=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],Tn=["filterBlendColor","filterMultiplyColor","filterTintColor"],En=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.menuBarPosition,a=e.usageStatistics;return S(this,r),(i=n.call(this,t,{locale:o,name:"filter",menuBarPosition:s,templateHtml:Bn,usageStatistics:a})).selectBoxShow=!1,i.checkedMap={},i._makeControlElement(),i}return M(r,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),Ye(this)}},{key:"_removeEvent",value:function(){var t,e=this;z()(Sn,(function(t){var i=e.selector(".tie-".concat(t)),n=ze(t);i.removeEventListener("change",e.eventHandler[n])})),z()(F()(t=[]).call(t,Mn,Tn),(function(t){e._els[t].off()})),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),Ui()(this.colorPickerInputBoxes,(function(t){var i,n;t.removeEventListener(le,E()(i=e._onStartEditingInputBox).call(i,e)),t.removeEventListener(he,E()(n=e._onStopEditingInputBox).call(n,e))}),this)}},{key:"_destroyToolInstance",value:function(){var t,e=this;z()(F()(t=[]).call(t,Mn,Tn),(function(t){e._els[t].destroy()}))}},{key:"addEvent",value:function(t){var e,i,n,r=this,o=t.applyFilter,s=function(t){var e;return E()(e=r._changeFilterState).call(e,r,o,t)},a=function(t){return function(e,i){return r._changeFilterState(o,t,i)}};this.eventHandler={changeBlendFilter:s("blend"),blandTypeClick:function(t){return t.stopPropagation()}},z()(Sn,(function(t){var e=r.selector(".tie-".concat(t)),i=ze(t);r.checkedMap[i]=e,r.eventHandler[i]=s(i),e.addEventListener("change",r.eventHandler[i])})),this._els.removewhiteDistanceRange.on("change",a("removeWhite")),this._els.colorfilterThresholdRange.on("change",a("colorFilter")),this._els.pixelateRange.on("change",a("pixelate")),this._els.noiseRange.on("change",a("noise")),this._els.brightnessRange.on("change",a("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",s("multiply")),this._els.filterTintColor.on("change",s("tint")),this._els.tintOpacity.on("change",a("tint")),this._els.filterMultiplyColor.on("changeShow",E()(e=this.colorPickerChangeShow).call(e,this)),this._els.filterTintColor.on("changeShow",E()(i=this.colorPickerChangeShow).call(i,this)),this._els.filterBlendColor.on("changeShow",E()(n=this.colorPickerChangeShow).call(n,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),Ui()(this.colorPickerInputBoxes,(function(t){var e,i;t.addEventListener(le,E()(e=r._onStartEditingInputBox).call(e,r)),t.addEventListener(he,E()(i=r._onStopEditingInputBox).call(i,r))}),this)}},{key:"setFilterState",value:function(t){var e=t.type,i=t.options,n=t.action,r=this._getFilterNameFromOptions(e,i),o="remove"===n;o||this._setFilterState(r,i),this.checkedMap[r].checked=!o}},{key:"initFilterCheckBoxState",value:function(){z()(this.checkedMap,(function(t){t.checked=!1}),this)}},{key:"_setFilterState",value:function(t,e){"colorFilter"===t?this._els.colorfilterThresholdRange.value=e.distance:"removeWhite"===t?this._els.removewhiteDistanceRange.value=e.distance:"pixelate"===t?this._els.pixelateRange.value=e.blocksize:"brightness"===t?this._els.brightnessRange.value=e.brightness:"noise"===t?this._els.noiseRange.value=e.noise:"tint"===t?(this._els.tintOpacity.value=e.alpha,this._els.filterTintColor.color=e.color):"blend"===t?this._els.filterBlendColor.color=e.color:"multiply"===t&&(this._els.filterMultiplyColor.color=e.color)}},{key:"_getFilterNameFromOptions",value:function(t,e){var i=t;return"removeColor"===t?i=bn()(e.useAlpha)?"removeWhite":"colorFilter":"blendColor"===t&&(i={add:"blend",multiply:"multiply",tint:"tint"}[e.mode]),i}},{key:"_changeFilterState",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.checkedMap[e].checked,r=In[e],o=this.checkedMap[e].closest(".tui-image-editor-checkbox-group");o&&(n?o.classList.remove("tui-image-editor-disabled"):o.classList.add("tui-image-editor-disabled")),t(n,r,this._getFilterOption(e),!i)}},{key:"_getFilterOption",value:function(t){var e={};switch(t){case"removeWhite":e.color="#FFFFFF",e.useAlpha=!1,e.distance=gi()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":e.color="#FFFFFF",e.distance=gi()(this._els.colorfilterThresholdRange.value);break;case"pixelate":e.blocksize=Re(this._els.pixelateRange.value);break;case"noise":e.noise=Re(this._els.noiseRange.value);break;case"brightness":e.brightness=gi()(this._els.brightnessRange.value);break;case"blend":e.mode="add",e.color=this._els.filterBlendColor.color,e.mode=this._els.blendType.value;break;case"multiply":e.mode="multiply",e.color=this._els.filterMultiplyColor.color;break;case"tint":e.mode="tint",e.color=this._els.filterTintColor.color,e.alpha=this._els.tintOpacity.value;break;case"blur":e.blur=this._els.blurRange.value}return e}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new zi({slider:this.selector(".tie-removewhite-distance-range")},Ee.removewhiteDistanceRange),brightnessRange:new zi({slider:this.selector(".tie-brightness-range")},Ee.brightnessRange),noiseRange:new zi({slider:this.selector(".tie-noise-range")},Ee.noiseRange),pixelateRange:new zi({slider:this.selector(".tie-pixelate-range")},Ee.pixelateRange),colorfilterThresholdRange:new zi({slider:this.selector(".tie-colorfilter-threshold-range")},Ee.colorfilterThresholdRange),filterTintColor:new Hi(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Hi(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Hi(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Ee.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(ue)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(ue)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(ue))}},{key:"_pickerWithRange",value:function(t){var e=document.createElement("div"),i=document.createElement("label"),n=document.createElement("div");return n.id="tie-filter-tint-opacity",i.innerHTML="Opacity",e.appendChild(i),e.appendChild(n),t.appendChild(e),t.style.height=xn,new zi({slider:n},Ee.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(t){var e=document.createElement("div"),i=document.createElement("select"),n=document.createElement("ul");return e.className="tui-image-editor-selectlist-wrap",n.className="tui-image-editor-selectlist",e.appendChild(i),e.appendChild(n),this._makeSelectOptionList(i),t.appendChild(e),t.style.height=xn,this._drawSelectOptionList(i,n),this._pickerWithSelectboxForAddEvent(i,n),i}},{key:"_drawSelectOptionList",value:function(t,e){var i=t.querySelectorAll("option");z()(i,(function(t){var i=document.createElement("li");i.innerHTML=t.innerHTML,i.setAttribute("data-item",t.value),e.appendChild(i)}))}},{key:"_pickerWithSelectboxForAddEvent",value:function(t,e){var i=this;e.addEventListener("click",(function(n){var r=n.target.getAttribute("data-item"),o=document.createEvent("HTMLEvents");t.querySelector('[value="'.concat(r,'"]')).selected=!0,o.initEvent("change",!0,!0),t.dispatchEvent(o),i.selectBoxShow=!1,e.style.display="none"})),t.addEventListener("mousedown",(function(n){n.preventDefault(),i.selectBoxShow=!i.selectBoxShow,e.style.display=i.selectBoxShow?"block":"none",e.setAttribute("data-selectitem",t.value),e.querySelector("[data-item='".concat(t.value,"']")).classList.add("active")}))}},{key:"_makeSelectOptionList",value:function(t){z()(_n,(function(e){var i=document.createElement("option");i.setAttribute("value",e),i.innerHTML=e.replace(/^[a-z]/,(function(t){return t.toUpperCase()})),t.appendChild(i)}))}}]),r}(Wi),kn=En,Fn=n(4383),Dn=n.n(Fn);var On="selected-item",Un="disabled-item",Qn=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t,e){var i,o=e.locale,s=e.makeSvgIcon;return S(this,r),i=n.call(this,t,{name:"history"}),t.classList.add("enabled"),i.locale=o,i.makeSvgIcon=s,i._eventHandler={},i._historyIndex=i.getListLength(),i}return M(r,[{key:"add",value:function(t){var e=t.name,i=t.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var n=function(t){var e,i,n,r=t.locale,o=t.makeSvgIcon,s=t.name,a=t.detail;return F()(e=F()(i=F()(n='\n    <div class="tui-image-editor-history-item history">\n        <div class="history-item-icon">\n            '.concat(o(["normal","active"],"history-".concat(s.toLowerCase()),!0),"\n        </div>\n        <span>\n            ")).call(n,r.localize(s),"\n            ")).call(i,a?"(".concat(r.localize(a),")"):"",'\n        </span>\n        <div class="history-item-checkbox">\n            ')).call(e,o(["normal"],"history-check",!0),"\n        </div>\n    </div>\n")}({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:e,detail:i}),r=this.makeListItemElement(n);this.pushListItemElement(r),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var t=this;this._eventHandler.history=function(e){return t._clickHistoryItem(e)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(t){var e=t.target.closest(".".concat("history-item"));if(e){var i=Dn()(e.getAttribute("data-index"),10);if(i!==this._historyIndex){var n=Math.abs(i-this._historyIndex);i<this._historyIndex?this._actions.undo(n):this._actions.redo(n)}}}},{key:"_selectItem",value:function(t){for(var e=0;e<this.getListLength();e+=1)this.removeClass(e,On),this.removeClass(e,Un),e>t&&this.addClass(e,Un);this.addClass(t,On)}},{key:"destroy",value:function(){this.removeEvent(),Ye(this)}},{key:"addEvent",value:function(t){this._actions=t,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),r}(function(){function t(e,i){var n=i.name;S(this,t),this.name=n,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),e.appendChild(this.panelElement)}return M(t,[{key:"_makePanelElement",value:function(){var t=document.createElement("div");return t.className="tie-panel-".concat(this.name),t}},{key:"_makeListElement",value:function(){var t=document.createElement("ol");return t.className="".concat(this.name,"-list"),t}},{key:"makeListItemElement",value:function(t){var e=document.createElement("li");return e.innerHTML=t,e.className="".concat(this.name,"-item"),e.setAttribute("data-index",this.items.length),e}},{key:"pushListItemElement",value:function(t){this.listElement.appendChild(t),this.listElement.scrollTop+=t.offsetHeight,this.items.push(t)}},{key:"deleteListItemElement",value:function(t,e){for(var i=this.items,n=t;n<e;n+=1)this.listElement.removeChild(i[n]);a()(i).call(i,t,e-t+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(t,e){this.items[t]&&this.items[t].classList.add(e)}},{key:"removeClass",value:function(t,e){this.items[t]&&this.items[t].classList.remove(e)}},{key:"toggleClass",value:function(t,e){this.items[t]&&this.items[t].classList.toggle(e)}}]),t}()),Ln=Qn,jn=function(){function t(e){S(this,t),this._locale=e}return M(t,[{key:"localize",value:function(t){return this._locale[t]||t}}]),t}(),Pn=jn,Hn={Shape:Vi,Crop:qi,Resize:en,Flip:on,Rotate:An,Text:hn,Mask:fn,Icon:mn,Draw:wn,Filter:kn},Nn="history",Rn="on",zn="zoomIn",Gn="hand",Wn=function(){function t(e,i,n){S(this,t),this.options=this._initializeOption(i),this._actions=n,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new Pn(this.options.locale),this.theme=new Ci(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(e),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return M(t,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",Ye(this)}},{key:"setUiDefaultSelectionStyle",value:function(t){return P()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},t)}},{key:"resizeEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uiSize,i=t.imageSize,n=void 0===i?this.imageSize:i;n!==this.imageSize&&(this.imageSize=n),e&&this._setUiSize(e);var r=this._getCanvasMaxDimension(),o=r.width,s=r.height,a=this._editorElement.style,A=this.options.menuBarPosition;a.height="".concat(s,"px"),a.width="".concat(o,"px"),this._setEditorPosition(A),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var c=this._selectedElement.classList;"top"===A&&this._selectedElement.offsetWidth<"1300"?c.add("tui-image-editor-top-optimization"):c.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(t){this._buttonElements[t].classList.toggle(Rn),t===zn?this._buttonElements[Gn].classList.remove(Rn):this._buttonElements[zn].classList.remove(Rn)}},{key:"offZoomInButtonStatus",value:function(){this._buttonElements[zn].classList.remove(Rn)}},{key:"changeHandButtonStatus",value:function(t){this._buttonElements[Gn].classList[t?"add":"remove"](Rn)}},{key:"changeHelpButtonEnabled",value:function(t,e){this._buttonElements[t].classList[e?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(t){return P()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},t)}},{key:"_setUiSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.uiSize,e=this._selectedElement.style;e.width=t.width,e.height=t.height}},{key:"_makeSubMenu",value:function(){var t=this;z()(this.options.menu,(function(e){var i,n=Hn[e.replace(/^[a-z]/,(function(t){return t.toUpperCase()}))];t._makeMenuElement(e),t._buttonElements[e]=t._menuBarElement.querySelector(".tie-btn-".concat(e)),t[e]=new n(t._subMenuElement,{locale:t._locale,makeSvgIcon:E()(i=t.theme.makeMenSvgIconSet).call(i,t.theme),menuBarPosition:t.options.menuBarPosition,usageStatistics:t.options.usageStatistics})}))}},{key:"_attachHistoryEvent",value:function(){var t,e,i;this.on(ne,E()(t=this._addHistory).call(t,this)),this.on(re,E()(e=this._selectPrevHistory).call(e,this)),this.on(oe,E()(i=this._selectNextHistory).call(i,this))}},{key:"_attachZoomEvent",value:function(){var t=this;this.on(se,(function(){t.offZoomInButtonStatus(),t.changeHandButtonStatus(!0)})),this.on(ae,(function(){return t.changeHandButtonStatus(!1)}))}},{key:"_makeUiElement",value:function(t){var e,i;i=t.nodeType?t:document.querySelector(t);var n,r=(n=i,function(t){return n.querySelector(t)});i.classList.add("tui-image-editor-container"),i.innerHTML=function(t){var e,i,n,r,o,s,a=t.locale,A=t.biImage,c=t.loadButtonStyle,l=t.downloadButtonStyle,h=t.menuBarPosition;return F()(e=F()(i=F()(n=F()(r=F()(o='\n    <ul class="tui-image-editor-help-menu '.concat((s=h,"top"===s?"bottom":"left"===s?"right":"right"===s?"left":"top"),'"></ul>\n    <div class="tui-image-editor-controls">\n        <div class="tui-image-editor-controls-logo">\n            <img src="')).call(o,A,'" />\n        </div>\n        <ul class="tui-image-editor-menu"></ul>\n\n        <div class="tui-image-editor-controls-buttons">\n            <div style="')).call(r,c,'">\n                ')).call(n,a.localize("Load"),'\n                <input type="file" class="tui-image-editor-load-btn" />\n            </div>\n            <button class="tui-image-editor-download-btn" style="')).call(i,l,'">\n                ')).call(e,a.localize("Download"),"\n            </button>\n        </div>\n    </div>\n")}({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+function(t){var e,i,n,r,o,s,a,A=t.locale,c=t.biImage,l=t.commonStyle,h=t.headerStyle,u=t.loadButtonStyle,d=t.downloadButtonStyle,f=t.submenuStyle;return F()(e=F()(i=F()(n=F()(r=F()(o=F()(s=F()(a='\n    <div class="tui-image-editor-main-container" style="'.concat(l,'">\n        <div class="tui-image-editor-header" style="')).call(a,h,'">\n            <div class="tui-image-editor-header-logo">\n                <img src="')).call(s,c,'" />\n            </div>\n            <div class="tui-image-editor-header-buttons">\n                <div style="')).call(o,u,'">\n                    ')).call(r,A.localize("Load"),'\n                    <input type="file" class="tui-image-editor-load-btn" />\n                </div>\n                <button class="tui-image-editor-download-btn" style="')).call(n,d,'">\n                    ')).call(i,A.localize("Download"),'\n                </button>\n            </div>\n        </div>\n        <div class="tui-image-editor-main">\n            <div class="tui-image-editor-submenu">\n                <div class="tui-image-editor-submenu-style" style="')).call(e,f,'"></div>\n            </div>\n            <div class="tui-image-editor-wrap">\n                <div class="tui-image-editor-size-wrap">\n                    <div class="tui-image-editor-align-wrap">\n                        <div class="tui-image-editor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n')}({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=i,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=r(".tui-image-editor-main"),this._editorElementWrap=r(".tui-image-editor-wrap"),this._editorElement=r(".tui-image-editor"),this._helpMenuBarElement=r(".tui-image-editor-help-menu"),this._menuBarElement=r(".tui-image-editor-menu"),this._subMenuElement=r(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new Ln(this._buttonElements[Nn],{locale:this._locale,makeSvgIcon:E()(e=this.theme.makeMenSvgIconSet).call(e,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var t=this;z()(lt,(function(e){t.changeHelpButtonEnabled(e,!0)}))}},{key:"_makeHelpMenuWithPartition",value:function(){var t;return F()(t=[]).call(t,B(lt),[""],B(ht),[""],B(ut))}},{key:"_addHelpMenus",value:function(){var t=this,e=this._makeHelpMenuWithPartition();z()(e,(function(e){e?(t._makeMenuElement(e,["normal","disabled","hover"],"help"),t._buttonElements[e]=t._helpMenuBarElement.querySelector(".tie-btn-".concat(e))):t._makeMenuPartitionElement()}))}},{key:"_makeMenuPartitionElement",value:function(){var t=document.createElement("li"),e=document.createElement("div");t.className=Xe("item"),e.className=Xe("icpartition"),t.appendChild(e),this._helpMenuBarElement.appendChild(t)}},{key:"_makeMenuElement",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["normal","active","hover"],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",o=document.createElement("li"),s=this.theme.makeMenSvgIconSet(n,t);this._addTooltipAttribute(o,t),o.className=F()(e=F()(i="tie-btn-".concat(t," ")).call(i,Xe("item")," ")).call(e,r),o.innerHTML=s,"normal"===r?this._menuBarElement.appendChild(o):this._helpMenuBarElement.appendChild(o)}},{key:"_addHelpActionEvent",value:function(){var t=this;z()(dt,(function(e){t.eventHandler[e]=function(i){return t._actions.main[e](i)},t._buttonElements[e].addEventListener("click",t.eventHandler[e])}))}},{key:"_removeHelpActionEvent",value:function(){var t=this;z()(dt,(function(e){t._buttonElements[e].removeEventListener("click",t.eventHandler[e])}))}},{key:"_addHistory",value:function(t){if(!function(t){return"string"==typeof t?wt===t:wt===t.name}(t)){var e="string"==typeof t?{name:t}:function(t){var e,i,n,r=Ct,o=bt,s=kt,a=_t,A=St,c=Et,l=Mt,u=Dt,d=yt,f=Ot,g=xt,p=Pt,m=t.name,v=t.args;switch(m){case r:n={name:m,detail:"reset"===v[1]?v[1]:h()(e=v[1]).call(e,4)};break;case o:n={name:m,detail:v[2]};break;case a:n={name:"Filter",detail:ei(v[1],v[2])};break;case A:n={name:"Filter",detail:"Remove"};break;case c:n={name:"Shape",detail:"Change"};break;case l:n={name:"Icon",detail:"Change"};break;case u:n={name:"Text",detail:"Change"};break;case g:n={name:"Delete",detail:v[2]};break;case d:n={name:"Delete",detail:"All"};break;case f:n={name:"Mask",detail:"Add"};break;case s:n={name:"Text"};break;case p:n={name:"Resize",detail:F()(i="".concat(~~v[1].width,"x")).call(i,~~v[1].height)};break;default:n={name:m}}return"mask"===v[1]&&(n={name:fe,detail:"Apply"}),n}(t);this._historyMenu.add(e)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(t){t.target.closest(".".concat("tie-panel-history"))||this._buttonElements[Nn].classList.toggle("opened")}},{key:"_addTooltipAttribute",value:function(t,e){t.setAttribute("tooltip-content",this._locale.localize(e.replace(/^[a-z]/g,(function(t){return t.toUpperCase()}))))}},{key:"_addDownloadEvent",value:function(){var t=this;this.eventHandler.download=function(){return t._actions.main.download()},z()(this._buttonElements.download,(function(e){e.addEventListener("click",t.eventHandler.download)}))}},{key:"_removeDownloadEvent",value:function(){var t=this;z()(this._buttonElements.download,(function(e){e.removeEventListener("click",t.eventHandler.download)}))}},{key:"_addLoadEvent",value:function(){var t=this;this.eventHandler.loadImage=function(e){return t._actions.main.load(e.target.files[0])},z()(this._buttonElements.load,(function(e){e.addEventListener("change",t.eventHandler.loadImage)}))}},{key:"_removeLoadEvent",value:function(){var t=this;z()(this._buttonElements.load,(function(e){e.removeEventListener("change",t.eventHandler.loadImage)}))}},{key:"_addMainMenuEvent",value:function(t){var e=this;this.eventHandler[t]=function(){return e.changeMenu(t)},this._buttonElements[t].addEventListener("click",this.eventHandler[t])}},{key:"_addSubMenuEvent",value:function(t){var e=this;this[t].addEvent(this._actions[t]),this[t].on(Ae,(function(){return e.fire(Ae)})),this[t].on(ce,(function(){return e.fire(ce)}))}},{key:"_addMenuEvent",value:function(){var t=this;z()(this.options.menu,(function(e){t._addMainMenuEvent(e),t._addSubMenuEvent(e)}))}},{key:"_removeMainMenuEvent",value:function(){var t=this;z()(this.options.menu,(function(e){t._buttonElements[e].removeEventListener("click",t.eventHandler[e]),t[e].off(Ae),t[e].off(ce)}))}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var t=this;z()(this.options.menu,(function(e){t[e].destroy()})),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var t=this,e=this._getLoadImage();e.path&&this._actions.main.initLoadImage(e.path,e.name).then((function(){t.activeMenuEvent()})),this._addLoadEvent();var i=document.createElement("div");i.className=Xe("grid-visual"),i.innerHTML='<table>\n           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>\n           <tr><td></td><td></td><td></td></tr>\n           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>\n         </table>',this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(i)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(t,e,i),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(t,e,i){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),i&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===t&&e?this.submenu=null:(this._buttonElements[t].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(t)),this.submenu=t,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(t)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var t=this._editorContainerElement.style,e=t.maxWidth,i=t.maxHeight;return{width:gi()(e),height:gi()(i)}}},{key:"_setEditorPosition",value:function(t){var e=this._getCanvasMaxDimension(),i=e.width,n=e.height,r=this._editorElement.style,o=0,s=0;this.submenu&&("bottom"===t?o=n>this._editorElementWrap.scrollHeight-150?(n-this._editorElementWrap.scrollHeight)/2:-75:"top"===t?o=n>this._editorElementWrap.offsetHeight-150?75-(n-(this._editorElementWrap.offsetHeight-150))/2:75:"left"===t?s=i>this._editorElementWrap.offsetWidth-248?124-(i-(this._editorElementWrap.offsetWidth-248))/2:124:"right"===t&&(s=i>this._editorElementWrap.scrollWidth-248?(i-this._editorElementWrap.scrollWidth)/2:-124)),r.top="".concat(o,"px"),r.left="".concat(s,"px")}}]),t}();W().mixin(Wn);var Yn=Wn,Xn=n(381),Kn=n.n(Xn),Vn=function(){function t(){S(this,t),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return M(t,[{key:"imageToSVG",value:function(t,e,i){var n=this;i=this.checkoptions(i),this.loadImage(t,(function(t){e(n.imagedataToSVG(n.getImgdata(t),i))}),i)}},{key:"imagedataToSVG",value:function(t,e){e=this.checkoptions(e);var i=this.imagedataToTracedata(t,e);return this.getsvgstring(i,e)}},{key:"imageToTracedata",value:function(t,e,i){var n=this;i=this.checkoptions(i),this.loadImage(t,(function(t){e(n.imagedataToTracedata(n.getImgdata(t),i))}),i)}},{key:"imagedataToTracedata",value:function(t,e){e=this.checkoptions(e);var i,n=this.colorquantization(t,e);if(0===e.layering){i={layers:[],palette:n.palette,width:n.array[0].length-2,height:n.array.length-2};for(var r=0;r<n.palette.length;r+=1){var o=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(n,r),e.pathomit),e),e.ltres,e.qtres);i.layers.push(o)}}else{var s=this.layering(n);e.layercontainerid&&this.drawLayers(s,this.specpalette,e.scale,e.layercontainerid);var a=this.batchpathscan(s,e.pathomit),A=this.batchinternodes(a,e);i={layers:this.batchtracelayers(A,e.ltres,e.qtres),palette:n.palette,width:t.width,height:t.height}}return i}},{key:"checkoptions",value:function(t){"string"==typeof(t=t||{})&&(t=t.toLowerCase(),t=this.optionpresets[t]?this.optionpresets[t]:{});for(var e=V()(this.optionpresets.default),i=0;i<e.length;i+=1)t.hasOwnProperty(e[i])||(t[e[i]]=this.optionpresets.default[e[i]]);return t}},{key:"colorquantization",value:function(t,e){var i,n,r,o,s,a,A,c,l=[],h=0,u=[],d=t.width*t.height;for(s=0;s<t.height+2;s+=1)for(l[s]=[],o=0;o<t.width+2;o+=1)l[s][o]=-1;for(c=e.pal?e.pal:0===e.colorsampling?this.generatepalette(e.numberofcolors):1===e.colorsampling?this.samplepalette(e.numberofcolors,t):this.samplepalette2(e.numberofcolors,t),e.blurradius>0&&(t=this.blur(t,e.blurradius,e.blurdelta)),A=0;A<e.colorquantcycles;A+=1){if(A>0)for(a=0;a<c.length;a+=1)u[a].n>0&&(c[a]={r:Math.floor(u[a].r/u[a].n),g:Math.floor(u[a].g/u[a].n),b:Math.floor(u[a].b/u[a].n),a:Math.floor(u[a].a/u[a].n)}),u[a].n/d<e.mincolorratio&&A<e.colorquantcycles-1&&(c[a]={r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())});for(o=0;o<c.length;o+=1)u[o]={r:0,g:0,b:0,a:0,n:0};for(s=0;s<t.height;s+=1)for(o=0;o<t.width;o+=1){for(h=4*(s*t.width+o),r=0,n=1024,a=0;a<c.length;a+=1)(i=Math.abs(c[a].r-t.data[h])+Math.abs(c[a].g-t.data[h+1])+Math.abs(c[a].b-t.data[h+2])+Math.abs(c[a].a-t.data[h+3]))<n&&(n=i,r=a);u[r].r+=t.data[h],u[r].g+=t.data[h+1],u[r].b+=t.data[h+2],u[r].a+=t.data[h+3],u[r].n+=1,l[s+1][o+1]=r}}return{array:l,palette:c}}},{key:"samplepalette",value:function(t,e){for(var i,n=[],r=0;r<t;r+=1)i=4*Math.floor(Math.random()*e.data.length/4),n.push({r:e.data[i],g:e.data[i+1],b:e.data[i+2],a:e.data[i+3]});return n}},{key:"samplepalette2",value:function(t,e){for(var i,n=[],r=Math.ceil(Math.sqrt(t)),o=Math.ceil(t/r),s=e.width/(r+1),a=e.height/(o+1),A=0;A<o;A+=1)for(var c=0;c<r&&n.length!==t;c+=1)i=4*Math.floor((A+1)*a*e.width+(c+1)*s),n.push({r:e.data[i],g:e.data[i+1],b:e.data[i+2],a:e.data[i+3]});return n}},{key:"generatepalette",value:function(t){var e,i,n,r=[];if(t<8)for(var o=Math.floor(255/(t-1)),s=0;s<t;s+=1)r.push({r:s*o,g:s*o,b:s*o,a:255});else{var a=Math.floor(Math.pow(t,1/3)),A=Math.floor(255/(a-1)),c=t-a*a*a;for(e=0;e<a;e+=1)for(i=0;i<a;i+=1)for(n=0;n<a;n+=1)r.push({r:e*A,g:i*A,b:n*A,a:255});for(e=0;e<c;e+=1)r.push({r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())})}return r}},{key:"layering",value:function(t){var e,i,n,r,o,s,a,A,c,l,h,u=[],d=0,f=t.array.length,g=t.array[0].length;for(h=0;h<t.palette.length;h+=1)for(u[h]=[],l=0;l<f;l+=1)for(u[h][l]=[],c=0;c<g;c+=1)u[h][l][c]=0;for(l=1;l<f-1;l+=1)for(c=1;c<g-1;c+=1)d=t.array[l][c],e=t.array[l-1][c-1]===d?1:0,i=t.array[l-1][c]===d?1:0,n=t.array[l-1][c+1]===d?1:0,r=t.array[l][c-1]===d?1:0,o=t.array[l][c+1]===d?1:0,s=t.array[l+1][c-1]===d?1:0,a=t.array[l+1][c]===d?1:0,A=t.array[l+1][c+1]===d?1:0,u[d][l+1][c+1]=1+2*o+4*A+8*a,r||(u[d][l+1][c]=2+4*a+8*s),i||(u[d][l][c+1]=0+2*n+4*o+8),e||(u[d][l][c]=0+2*i+4+8*r);return u}},{key:"layeringstep",value:function(t,e){var i,n,r=[],o=t.array.length,s=t.array[0].length;for(n=0;n<o;n+=1)for(r[n]=[],i=0;i<s;i+=1)r[n][i]=0;for(n=1;n<o;n+=1)for(i=1;i<s;i+=1)r[n][i]=(t.array[n-1][i-1]===e?1:0)+(t.array[n-1][i]===e?2:0)+(t.array[n][i-1]===e?8:0)+(t.array[n][i]===e?4:0);return r}},{key:"pathscan",value:function(t,e){for(var i,n=[],r=0,o=0,s=0,a=0,A=t[0].length,c=t.length,l=0,h=!0,u=!1,d=0;d<c;d+=1)for(var f=0;f<A;f+=1)if(4===t[d][f]||11===t[d][f])for(s=f,a=d,n[r]={},n[r].points=[],n[r].boundingbox=[s,a,s,a],n[r].holechildren=[],h=!1,o=0,u=11===t[d][f],l=1;!h;){if(n[r].points[o]={},n[r].points[o].x=s-1,n[r].points[o].y=a-1,n[r].points[o].t=t[a][s],s-1<n[r].boundingbox[0]&&(n[r].boundingbox[0]=s-1),s-1>n[r].boundingbox[2]&&(n[r].boundingbox[2]=s-1),a-1<n[r].boundingbox[1]&&(n[r].boundingbox[1]=a-1),a-1>n[r].boundingbox[3]&&(n[r].boundingbox[3]=a-1),i=this.pathscan_combined_lookup[t[a][s]][l],t[a][s]=i[0],l=i[1],s+=i[2],a+=i[3],s-1===n[r].points[0].x&&a-1===n[r].points[0].y)if(h=!0,n[r].points.length<e)n.pop();else{if(n[r].isholepath=!!u,u){for(var g=0,p=[-1,-1,A+1,c+1],m=0;m<r;m++)!n[m].isholepath&&this.boundingboxincludes(n[m].boundingbox,n[r].boundingbox)&&this.boundingboxincludes(p,n[m].boundingbox)&&(g=m,p=n[m].boundingbox);n[g].holechildren.push(r)}r+=1}o+=1}return n}},{key:"boundingboxincludes",value:function(t,e){return t[0]<e[0]&&t[1]<e[1]&&t[2]>e[2]&&t[3]>e[3]}},{key:"batchpathscan",value:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&(i[n]=this.pathscan(t[n],e));return i}},{key:"internodes",value:function(t,e){var i,n,r=[],o=0,s=0,a=0,A=0,c=0;for(i=0;i<t.length;i+=1)for(r[i]={},r[i].points=[],r[i].boundingbox=t[i].boundingbox,r[i].holechildren=t[i].holechildren,r[i].isholepath=t[i].isholepath,o=t[i].points.length,n=0;n<o;n+=1)s=(n+1)%o,a=(n+2)%o,A=(n-1+o)%o,c=(n-2+o)%o,e.rightangleenhance&&this.testrightangle(t[i],c,A,n,s,a)&&(r[i].points.length>0&&(r[i].points[r[i].points.length-1].linesegment=this.getdirection(r[i].points[r[i].points.length-1].x,r[i].points[r[i].points.length-1].y,t[i].points[n].x,t[i].points[n].y)),r[i].points.push({x:t[i].points[n].x,y:t[i].points[n].y,linesegment:this.getdirection(t[i].points[n].x,t[i].points[n].y,(t[i].points[n].x+t[i].points[s].x)/2,(t[i].points[n].y+t[i].points[s].y)/2)})),r[i].points.push({x:(t[i].points[n].x+t[i].points[s].x)/2,y:(t[i].points[n].y+t[i].points[s].y)/2,linesegment:this.getdirection((t[i].points[n].x+t[i].points[s].x)/2,(t[i].points[n].y+t[i].points[s].y)/2,(t[i].points[s].x+t[i].points[a].x)/2,(t[i].points[s].y+t[i].points[a].y)/2)});return r}},{key:"testrightangle",value:function(t,e,i,n,r,o){return t.points[n].x===t.points[e].x&&t.points[n].x===t.points[i].x&&t.points[n].y===t.points[r].y&&t.points[n].y===t.points[o].y||t.points[n].y===t.points[e].y&&t.points[n].y===t.points[i].y&&t.points[n].x===t.points[r].x&&t.points[n].x===t.points[o].x}},{key:"getdirection",value:function(t,e,i,n){return t<i?e<n?1:e>n?7:0:t>i?e<n?3:e>n?5:4:e<n?2:e>n?6:8}},{key:"batchinternodes",value:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&(i[n]=this.internodes(t[n],e));return i}},{key:"tracepath",value:function(t,e,i){var n,r,o,s=0,a={segments:[]};for(a.boundingbox=t.boundingbox,a.holechildren=t.holechildren,a.isholepath=t.isholepath;s<t.points.length;){var A;for(n=t.points[s].linesegment,r=-1,o=s+1;(t.points[o].linesegment===n||t.points[o].linesegment===r||-1===r)&&o<t.points.length-1;)t.points[o].linesegment!==n&&-1===r&&(r=t.points[o].linesegment),o+=1;o===t.points.length-1&&(o=0),a.segments=F()(A=a.segments).call(A,this.fitseq(t,e,i,s,o)),s=o>0?o:t.points.length}return a}},{key:"fitseq",value:function(t,e,i,n,r){var o;if(r>t.points.length||r<0)return[];var s,a,A,c=n,l=0,h=!0,u=r-n;u<0&&(u+=t.points.length);for(var d,f=(t.points[r].x-t.points[n].x)/u,g=(t.points[r].y-t.points[n].y)/u,p=(n+1)%t.points.length;p!=r;)(d=p-n)<0&&(d+=t.points.length),s=t.points[n].x+f*d,a=t.points[n].y+g*d,(A=(t.points[p].x-s)*(t.points[p].x-s)+(t.points[p].y-a)*(t.points[p].y-a))>e&&(h=!1),A>l&&(c=p,l=A),p=(p+1)%t.points.length;if(h)return[{type:"L",x1:t.points[n].x,y1:t.points[n].y,x2:t.points[r].x,y2:t.points[r].y}];var m=c;h=!0,l=0;var v=(m-n)/u,y=(1-v)*(1-v),w=2*(1-v)*v,C=v*v,b=(y*t.points[n].x+C*t.points[r].x-t.points[m].x)/-w,B=(y*t.points[n].y+C*t.points[r].y-t.points[m].y)/-w;for(p=n+1;p!=r;)w=2*(1-(v=(p-n)/u))*v,C=v*v,s=(y=(1-v)*(1-v))*t.points[n].x+w*b+C*t.points[r].x,a=y*t.points[n].y+w*B+C*t.points[r].y,(A=(t.points[p].x-s)*(t.points[p].x-s)+(t.points[p].y-a)*(t.points[p].y-a))>i&&(h=!1),A>l&&(c=p,l=A),p=(p+1)%t.points.length;if(h)return[{type:"Q",x1:t.points[n].x,y1:t.points[n].y,x2:b,y2:B,x3:t.points[r].x,y3:t.points[r].y}];var x=m;return F()(o=this.fitseq(t,e,i,n,x)).call(o,this.fitseq(t,e,i,x,r))}},{key:"batchtracepaths",value:function(t,e,i){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(this.tracepath(t[r],e,i));return n}},{key:"batchtracelayers",value:function(t,e,i){var n=[];for(var r in t)t.hasOwnProperty(r)&&(n[r]=this.batchtracepaths(t[r],e,i));return n}},{key:"roundtodec",value:function(t,e){return Number(t.toFixed(e))}},{key:"svgpathstring",value:function(t,e,i,n){var r,o,s,a=t.layers[e],A=a[i],c="";if(n.linefilter&&A.segments.length<3)return c;if(c=F()(r="<path ".concat(n.desc?F()(o='desc="l '.concat(e," p ")).call(o,i,'" '):"")).call(r,this.tosvgcolorstr(t.palette[e],n),'d="'),-1===n.roundcoords){var l;for(c+=F()(l="M ".concat(A.segments[0].x1*n.scale," ")).call(l,A.segments[0].y1*n.scale," "),s=0;s<A.segments.length;s++){var h,u,d;c+=F()(h=F()(u="".concat(A.segments[s].type," ")).call(u,A.segments[s].x2*n.scale," ")).call(h,A.segments[s].y2*n.scale," "),A.segments[s].hasOwnProperty("x3")&&(c+=F()(d="".concat(A.segments[s].x3*n.scale," ")).call(d,A.segments[s].y3*n.scale," "))}c+="Z "}else{var f;for(c+=F()(f="M ".concat(this.roundtodec(A.segments[0].x1*n.scale,n.roundcoords)," ")).call(f,this.roundtodec(A.segments[0].y1*n.scale,n.roundcoords)," "),s=0;s<A.segments.length;s++){var g,p,m;c+=F()(g=F()(p="".concat(A.segments[s].type," ")).call(p,this.roundtodec(A.segments[s].x2*n.scale,n.roundcoords)," ")).call(g,this.roundtodec(A.segments[s].y2*n.scale,n.roundcoords)," "),A.segments[s].hasOwnProperty("x3")&&(c+=F()(m="".concat(this.roundtodec(A.segments[s].x3*n.scale,n.roundcoords)," ")).call(m,this.roundtodec(A.segments[s].y3*n.scale,n.roundcoords)," "))}c+="Z "}for(var v=0;v<A.holechildren.length;v++){var y,w,C,b,B=a[A.holechildren[v]];if(-1===n.roundcoords)for(B.segments[B.segments.length-1].hasOwnProperty("x3")?c+=F()(y="M ".concat(B.segments[B.segments.length-1].x3*n.scale," ")).call(y,B.segments[B.segments.length-1].y3*n.scale," "):c+=F()(w="M ".concat(B.segments[B.segments.length-1].x2*n.scale," ")).call(w,B.segments[B.segments.length-1].y2*n.scale," "),s=B.segments.length-1;s>=0;s--){var x,_;c+="".concat(B.segments[s].type," "),B.segments[s].hasOwnProperty("x3")&&(c+=F()(_="".concat(B.segments[s].x2*n.scale," ")).call(_,B.segments[s].y2*n.scale," ")),c+=F()(x="".concat(B.segments[s].x1*n.scale," ")).call(x,B.segments[s].y1*n.scale," ")}else for(B.segments[B.segments.length-1].hasOwnProperty("x3")?c+=F()(C="M ".concat(this.roundtodec(B.segments[B.segments.length-1].x3*n.scale)," ")).call(C,this.roundtodec(B.segments[B.segments.length-1].y3*n.scale)," "):c+=F()(b="M ".concat(this.roundtodec(B.segments[B.segments.length-1].x2*n.scale)," ")).call(b,this.roundtodec(B.segments[B.segments.length-1].y2*n.scale)," "),s=B.segments.length-1;s>=0;s--){var S,I;c+="".concat(B.segments[s].type," "),B.segments[s].hasOwnProperty("x3")&&(c+=F()(I="".concat(this.roundtodec(B.segments[s].x2*n.scale)," ")).call(I,this.roundtodec(B.segments[s].y2*n.scale)," ")),c+=F()(S="".concat(this.roundtodec(B.segments[s].x1*n.scale)," ")).call(S,this.roundtodec(B.segments[s].y1*n.scale)," ")}c+="Z "}if(c+='" />',n.lcpr||n.qcpr){for(s=0;s<A.segments.length;s++){var M,T,E,k,D,O,U,Q,L,j,P,H,N,R,z,G,W;A.segments[s].hasOwnProperty("x3")&&n.qcpr&&(c+=F()(M=F()(T=F()(E='<circle cx="'.concat(A.segments[s].x2*n.scale,'" cy="')).call(E,A.segments[s].y2*n.scale,'" r="')).call(T,n.qcpr,'" fill="cyan" stroke-width="')).call(M,.2*n.qcpr,'" stroke="black" />'),c+=F()(k=F()(D=F()(O='<circle cx="'.concat(A.segments[s].x3*n.scale,'" cy="')).call(O,A.segments[s].y3*n.scale,'" r="')).call(D,n.qcpr,'" fill="white" stroke-width="')).call(k,.2*n.qcpr,'" stroke="black" />'),c+=F()(U=F()(Q=F()(L=F()(j='<line x1="'.concat(A.segments[s].x1*n.scale,'" y1="')).call(j,A.segments[s].y1*n.scale,'" x2="')).call(L,A.segments[s].x2*n.scale,'" y2="')).call(Q,A.segments[s].y2*n.scale,'" stroke-width="')).call(U,.2*n.qcpr,'" stroke="cyan" />'),c+=F()(P=F()(H=F()(N=F()(R='<line x1="'.concat(A.segments[s].x2*n.scale,'" y1="')).call(R,A.segments[s].y2*n.scale,'" x2="')).call(N,A.segments[s].x3*n.scale,'" y2="')).call(H,A.segments[s].y3*n.scale,'" stroke-width="')).call(P,.2*n.qcpr,'" stroke="cyan" />')),!A.segments[s].hasOwnProperty("x3")&&n.lcpr&&(c+=F()(z=F()(G=F()(W='<circle cx="'.concat(A.segments[s].x2*n.scale,'" cy="')).call(W,A.segments[s].y2*n.scale,'" r="')).call(G,n.lcpr,'" fill="white" stroke-width="')).call(z,.2*n.lcpr,'" stroke="black" />'))}for(v=0;v<A.holechildren.length;v++)for(B=a[A.holechildren[v]],s=0;s<B.segments.length;s++){var Y,X,K,V,Z,J,q,$,tt,et,it,nt,rt,ot,st,at,At;B.segments[s].hasOwnProperty("x3")&&n.qcpr&&(c+=F()(Y=F()(X=F()(K='<circle cx="'.concat(B.segments[s].x2*n.scale,'" cy="')).call(K,B.segments[s].y2*n.scale,'" r="')).call(X,n.qcpr,'" fill="cyan" stroke-width="')).call(Y,.2*n.qcpr,'" stroke="black" />'),c+=F()(V=F()(Z=F()(J='<circle cx="'.concat(B.segments[s].x3*n.scale,'" cy="')).call(J,B.segments[s].y3*n.scale,'" r="')).call(Z,n.qcpr,'" fill="white" stroke-width="')).call(V,.2*n.qcpr,'" stroke="black" />'),c+=F()(q=F()($=F()(tt=F()(et='<line x1="'.concat(B.segments[s].x1*n.scale,'" y1="')).call(et,B.segments[s].y1*n.scale,'" x2="')).call(tt,B.segments[s].x2*n.scale,'" y2="')).call($,B.segments[s].y2*n.scale,'" stroke-width="')).call(q,.2*n.qcpr,'" stroke="cyan" />'),c+=F()(it=F()(nt=F()(rt=F()(ot='<line x1="'.concat(B.segments[s].x2*n.scale,'" y1="')).call(ot,B.segments[s].y2*n.scale,'" x2="')).call(rt,B.segments[s].x3*n.scale,'" y2="')).call(nt,B.segments[s].y3*n.scale,'" stroke-width="')).call(it,.2*n.qcpr,'" stroke="cyan" />')),!B.segments[s].hasOwnProperty("x3")&&n.lcpr&&(c+=F()(st=F()(at=F()(At='<circle cx="'.concat(B.segments[s].x2*n.scale,'" cy="')).call(At,B.segments[s].y2*n.scale,'" r="')).call(at,n.lcpr,'" fill="white" stroke-width="')).call(st,.2*n.lcpr,'" stroke="black" />'))}}return c}},{key:"getsvgstring",value:function(t,e){var i,n,r;e=this.checkoptions(e);for(var o=t.width*e.scale,s=t.height*e.scale,a=F()(i="<svg ".concat(e.viewbox?F()(n='viewBox="0 0 '.concat(o," ")).call(n,s,'" '):F()(r='width="'.concat(o,'" height="')).call(r,s,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(i,this.versionnumber,'" >'),A=0;A<t.layers.length;A+=1)for(var c=0;c<t.layers[A].length;c+=1)t.layers[A][c].isholepath||(a+=this.svgpathstring(t,A,c,e));return a+"</svg>"}},{key:"compareNumbers",value:function(t,e){return t-e}},{key:"torgbastr",value:function(t){var e,i,n;return F()(e=F()(i=F()(n="rgba(".concat(t.r,",")).call(n,t.g,",")).call(i,t.b,",")).call(e,t.a,")")}},{key:"tosvgcolorstr",value:function(t,e){var i,n,r,o,s,a,A;return F()(i=F()(n=F()(r=F()(o=F()(s=F()(a=F()(A='fill="rgb('.concat(t.r,",")).call(A,t.g,",")).call(a,t.b,')" stroke="rgb(')).call(s,t.r,",")).call(o,t.g,",")).call(r,t.b,')" stroke-width="')).call(n,e.strokewidth,'" opacity="')).call(i,t.a/255,'" ')}},{key:"appendSVGString",value:function(t,e){var i;e?(i=document.getElementById(e))||((i=document.createElement("div")).id=e,document.body.appendChild(i)):(i=document.createElement("div"),document.body.appendChild(i)),i.innerHTML+=t}},{key:"blur",value:function(t,e,i){var n,r,o,s,a,A,c,l,h,u={width:t.width,height:t.height,data:[]};if((e=Math.floor(e))<1)return t;e>5&&(e=5),(i=Math.abs(i))>1024&&(i=1024);var d=this.gks[e-1];for(r=0;r<t.height;r++)for(n=0;n<t.width;n++){for(a=0,A=0,c=0,l=0,h=0,o=-e;o<e+1;o++)n+o>0&&n+o<t.width&&(s=4*(r*t.width+n+o),a+=t.data[s]*d[o+e],A+=t.data[s+1]*d[o+e],c+=t.data[s+2]*d[o+e],l+=t.data[s+3]*d[o+e],h+=d[o+e]);s=4*(r*t.width+n),u.data[s]=Math.floor(a/h),u.data[s+1]=Math.floor(A/h),u.data[s+2]=Math.floor(c/h),u.data[s+3]=Math.floor(l/h)}var f=new Uint8ClampedArray(u.data);for(r=0;r<t.height;r++)for(n=0;n<t.width;n++){for(a=0,A=0,c=0,l=0,h=0,o=-e;o<e+1;o++)r+o>0&&r+o<t.height&&(a+=f[s=4*((r+o)*t.width+n)]*d[o+e],A+=f[s+1]*d[o+e],c+=f[s+2]*d[o+e],l+=f[s+3]*d[o+e],h+=d[o+e]);s=4*(r*t.width+n),u.data[s]=Math.floor(a/h),u.data[s+1]=Math.floor(A/h),u.data[s+2]=Math.floor(c/h),u.data[s+3]=Math.floor(l/h)}for(r=0;r<t.height;r++)for(n=0;n<t.width;n++)s=4*(r*t.width+n),Math.abs(u.data[s]-t.data[s])+Math.abs(u.data[s+1]-t.data[s+1])+Math.abs(u.data[s+2]-t.data[s+2])+Math.abs(u.data[s+3]-t.data[s+3])>i&&(u.data[s]=t.data[s],u.data[s+1]=t.data[s+1],u.data[s+2]=t.data[s+2],u.data[s+3]=t.data[s+3]);return u}},{key:"loadImage",value:function(t,e,i){var n=new Image;i&&i.corsenabled&&(n.crossOrigin="Anonymous"),n.src=t,n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),e(t)}}},{key:"getImgdata",value:function(t){return t.getContext("2d").getImageData(0,0,t.width,t.height)}},{key:"drawLayers",value:function(t,e,i,n){var r,o,s,a,A,c;for(A in i=i||1,n?(c=document.getElementById(n))||((c=document.createElement("div")).id=n,document.body.appendChild(c)):(c=document.createElement("div"),document.body.appendChild(c)),t)if(t.hasOwnProperty(A)){r=t[A][0].length,o=t[A].length;var l=document.createElement("canvas");l.width=r*i,l.height=o*i;var h=l.getContext("2d");for(a=0;a<o;a+=1)for(s=0;s<r;s+=1)h.fillStyle=this.torgbastr(e[t[A][a][s]%e.length]),h.fillRect(s*i,a*i,i,i);c.appendChild(l)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),t}(),Zn={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var t=this,e=function(){"crop"===t.ui.submenu&&(t.stopDrawingMode(),t.ui.changeMenu("crop"))},i=function(e){var i,n;return i=e,"rotate"===t.ui.submenu&&t.ui.rotate.setRangeBarAngle("setAngle",i),n=e,"filter"===t.ui.submenu&&Kn()(t.ui).setFilterState(n),e},n=function(){Kn()(t.ui)&&Kn()(t.ui).initFilterCheckBoxState()};return P()({initLoadImage:function(i,n){return t.loadImageFromURL(i,n).then((function(n){e(),t.ui.initializeImgUrl=i,t.ui.resizeEditor({imageSize:n}),t.clearUndoStack(),t._invoker.fire(ne,de)}))},undo:function(){t.isEmptyUndoStack()||(e(),t.deactivateAll(),t.undo().then(i))},redo:function(){t.isEmptyRedoStack()||(e(),t.deactivateAll(),t.redo().then(i))},reset:function(){e(),t.loadImageFromURL(t.ui.initializeImgUrl,"resetImage").then((function(i){e(),n(),t.ui.resizeEditor({imageSize:i}),t.clearUndoStack(),t._initHistory()}))},delete:function(){t.ui.changeHelpButtonEnabled("delete",!1),e(),t.removeActiveObject(),t.activeObjectId=null},deleteAll:function(){e(),t.clearObjects(),t.ui.changeHelpButtonEnabled("delete",!1),t.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(i){Ge()||alert("This browser does not support file-api"),t.ui.initializeImgUrl=Q().createObjectURL(i),t.loadImageFromFile(i).then((function(i){e(),n(),t.clearUndoStack(),t.ui.activeMenuEvent(),t.ui.resizeEditor({imageSize:i}),t._clearHistory(),t._invoker.fire(ne,de)})).catch((function(t){return O().reject(t)}))},download:function(){var e,i,n=t.toDataURL(),r=t.getImageName();Ge()&&window.saveAs?(i=(e=function(t){var e,i,n,r="";e=t.replace(/data:(image\/.+);base64,/,(function(t,e){return r=e,""}));var o=(e=atob(e)).length;for(i=new Uint8Array(o),n=0;n<o;n+=1)i[n]=e.charCodeAt(n);return new Blob([i],{type:r})}(n)).type.split("/")[1],r.split(".").pop()!==i&&(r+=".".concat(i)),saveAs(e,r)):window.open().document.body.innerHTML="<img src='".concat(n,"'>")},history:function(e){t.ui.toggleHistoryMenu(e)},zoomIn:function(){var e;t.ui.toggleZoomButtonStatus("zoomIn"),t.deactivateAll(),e=t._graphics.getZoomMode(),t.stopDrawingMode(),e!==me?(t.startDrawingMode(ge.ZOOM),t._graphics.startZoomInMode()):t._graphics.endZoomInMode()},zoomOut:function(){t._graphics.zoomOut()},hand:function(){var e;t.ui.offZoomInButtonStatus(),t.ui.toggleZoomButtonStatus("hand"),t.deactivateAll(),e=t._graphics.getZoomMode(),t.stopDrawingMode(),e!==ve?(t.startDrawingMode(ge.ZOOM),t._graphics.startHandMode()):t._graphics.endHandMode()}},this._commonAction())},_iconAction:function(){var t=this;return P()({changeColor:function(e){t.activeObjectId&&t.changeIconColor(t.activeObjectId,e)},addIcon:function(e,i){t.startDrawingMode("ICON"),t.setDrawingIcon(e,i)},cancelAddIcon:function(){t.ui.icon.clearIconType(),t.changeSelectableAll(!0),t.changeCursor("default"),t.stopDrawingMode()},registerDefaultIcons:function(e,i){var n={};n[e]=i,t.registerIcons(n)},registerCustomIcon:function(e,i){(new Vn).imageToSVG(e,(function(e){var n=Z(e.match(/path[^>]*d="([^"]*)"/),2)[1],r={};r[i.name]=n,t.registerIcons(r),t.addIcon(i.name,{left:100,top:100})}),Vn.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var t=this;return P()({setDrawMode:function(e,i){t.stopDrawingMode(),"free"===e?t.startDrawingMode("FREE_DRAWING",i):t.startDrawingMode("LINE_DRAWING",i)},setColor:function(e){t.setBrush({color:e})}},this._commonAction())},_maskAction:function(){var t=this;return P()({loadImageFromURL:function(e,i){return t.loadImageFromURL(t.toDataURL(),"FilterImage").then((function(){t.addImageObject(e).then((function(){Q().revokeObjectURL(i)})),t._invoker.fire(ne,fe)}))},applyFilter:function(){t.applyFilter("mask",{maskObjId:t.activeObjectId})}},this._commonAction())},_textAction:function(){var t=this;return P()({changeTextStyle:function(e,i){t.activeObjectId&&t.changeTextStyle(t.activeObjectId,e,i)}},this._commonAction())},_rotateAction:function(){var t=this;return P()({rotate:function(e,i){t.rotate(e,i),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle("rotate",e)},setAngle:function(e,i){t.setAngle(e,i),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle("setAngle",e)}},this._commonAction())},_shapeAction:function(){var t=this;return P()({changeShape:function(e,i){t.activeObjectId&&t.changeShape(t.activeObjectId,e,i)},setDrawingShape:function(e){t.setDrawingShape(e)}},this._commonAction())},_cropAction:function(){var t=this;return P()({crop:function(){var e=t.getCropzoneRect();e&&!function(t){var e=t.left,i=t.top,n=t.width,r=t.height;return 0===e&&0===i&&.5===n&&.5===r}(e)&&t.crop(e).then((function(){t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("crop"),t._invoker.fire(ne,"Crop")})).catch((function(t){return O().reject(t)}))},cancel:function(){t.stopDrawingMode(),t.ui.changeMenu("crop")},preset:function(e){switch(e){case"preset-square":t.setCropzoneRect(1);break;case"preset-3-2":t.setCropzoneRect(1.5);break;case"preset-4-3":t.setCropzoneRect(4/3);break;case"preset-5-4":t.setCropzoneRect(5/4);break;case"preset-7-5":t.setCropzoneRect(1.4);break;case"preset-16-9":t.setCropzoneRect(16/9);break;default:t.setCropzoneRect(),t.ui.crop.changeApplyButtonStatus(!1)}}},this._commonAction())},_resizeAction:function(){var t=this;return P()({getCurrentDimensions:function(){return t._graphics.getCurrentDimensions()},preview:function(e,i,n){var r=t._graphics.getCurrentDimensions(),o=function(){return r.width/r.height},s={};switch(e){case"width":s.width=i,s.height=n?i/o():r.height;break;case"height":s.height=i,s.width=n?i*o():r.width;break;default:s=r}t._graphics.resize(s).then((function(){t.ui.resizeEditor()})),n&&(t.ui.resize.setWidthValue(s.width),t.ui.resize.setHeightValue(s.height))},lockAspectRatio:function(e,i,n){var r=t._graphics.getCurrentDimensions(),o=r.width,s=r.height,a=o/s;if(e)if(o>s){var A=n/a,c=i*a;t.ui.resize.setLimit({minWidth:c>i?c:i,minHeight:i,maxWidth:n,maxHeight:A<n?A:n})}else{var l=n*a,h=i/a;t.ui.resize.setLimit({minWidth:i,minHeight:h>i?h:i,maxWidth:l<n?l:n,maxHeight:n})}else t.ui.resize.setLimit({minWidth:i,minHeight:i,maxWidth:n,maxHeight:n})},resize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=t._graphics.getCurrentDimensions()),t.resize(e).then((function(){t._graphics.setOriginalDimensions(e),t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("resize")})).catch((function(t){return O().reject(t)}))},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=t._graphics.getOriginalDimensions();t.ui.resize.setWidthValue(i.width,!0),t.ui.resize.setHeightValue(i.height,!0),t._graphics.resize(i).then((function(){e||(t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("resize"))}))}},this._commonAction())},_flipAction:function(){var t=this;return P()({flip:function(e){return t[e]()}},this._commonAction())},_filterAction:function(){var t=this;return P()({applyFilter:function(e,i,n,r){e?t.applyFilter(i,n,r):t.hasFilter(i)&&t.removeFilter(i)}},this._commonAction())},setReAction:function(){var t=this;this.on({undoStackChanged:function(e){e?(t.ui.changeHelpButtonEnabled("undo",!0),t.ui.changeHelpButtonEnabled("reset",!0)):(t.ui.changeHelpButtonEnabled("undo",!1),t.ui.changeHelpButtonEnabled("reset",!1)),t.ui.resizeEditor()},redoStackChanged:function(e){e?t.ui.changeHelpButtonEnabled("redo",!0):t.ui.changeHelpButtonEnabled("redo",!1),t.ui.resizeEditor()},objectActivated:function(e){var i,n;t.activeObjectId=e.id,t.ui.changeHelpButtonEnabled("delete",!0),t.ui.changeHelpButtonEnabled("deleteAll",!0),"cropzone"===e.type?t.ui.crop.changeApplyButtonStatus(!0):o()(i=["rect","circle","triangle"]).call(i,e.type)>-1?(t.stopDrawingMode(),"shape"!==t.ui.submenu&&t.ui.changeMenu("shape",!1,!1),t.ui.shape.setShapeStatus({strokeColor:e.stroke,strokeWidth:e.strokeWidth,fillColor:nt()(e)}),t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height))):"path"===e.type||"line"===e.type?"draw"!==t.ui.submenu&&(t.ui.changeMenu("draw",!1,!1),t.ui.draw.changeStandbyMode()):o()(n=["i-text","text"]).call(n,e.type)>-1?("text"!==t.ui.submenu&&t.ui.changeMenu("text",!1,!1),t.ui.text.setTextStyleStateOnAction(e)):"icon"===e.type&&(t.stopDrawingMode(),"icon"!==t.ui.submenu&&t.ui.changeMenu("icon",!1,!1),t.ui.icon.setIconPickerColor(nt()(e)))},addText:function(e){var i=t.ui.text,n=i.textColor,r=i.fontSize,o=i.fontStyle,s=i.fontWeight,a=i.underline;t.addText("Double Click",{position:e.originPosition,styles:{fill:n,fontSize:r,fontFamily:"Noto Sans",fontStyle:o,fontWeight:s,underline:a}}).then((function(){t.changeCursor("default")}))},addObjectAfter:function(e){var i;"icon"===e.type?t.ui.icon.changeStandbyMode():o()(i=["rect","circle","triangle"]).call(i,e.type)>-1&&(t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height)),t.ui.shape.changeStandbyMode())},objectScaled:function(e){var i,n;if(o()(i=["i-text","text"]).call(i,e.type)>-1)t.ui.text.fontSize=Re(e.fontSize);else if(o()(n=["rect","circle","triangle"]).call(n,e.type)>=0){var r=e.width,s=e.height,a=t.ui.shape.getStrokeValue();r<a&&t.ui.shape.setStrokeValue(r),s<a&&t.ui.shape.setStrokeValue(s)}},selectionCleared:function(){t.activeObjectId=null,"text"===t.ui.submenu?t.changeCursor("text"):Ze(["draw","crop","resize"],t.ui.submenu)||t.stopDrawingMode()}})},_historyAction:function(){var t=this;return{undo:function(e){return t.undo(e)},redo:function(e){return t.redo(e)}}},_commonAction:function(){var t,e,i,n,r=this,o=ge.TEXT,s=ge.CROPPER,a=ge.SHAPE,A=ge.ZOOM,c=ge.RESIZE;return{modeChange:function(t){switch(t){case"text":r._changeActivateMode(o);break;case"crop":r.startDrawingMode(s);break;case"shape":r._changeActivateMode(a),r.setDrawingShape(r.ui.shape.type,r.ui.shape.options);break;case"zoom":r.startDrawingMode(A);break;case"resize":r.startDrawingMode(c)}},deactivateAll:E()(t=this.deactivateAll).call(t,this),changeSelectableAll:E()(e=this.changeSelectableAll).call(e,this),discardSelection:E()(i=this.discardSelection).call(i,this),stopDrawingMode:E()(n=this.stopDrawingMode).call(n,this)}},mixin:function(t){P()(t.prototype,this)}},Jn=n(602),qn=n.n(Jn),$n=n(5573),tr=n.n($n),er=function(){function t(e,i){S(this,t),this.name=e,this.graphics=i}return M(t,[{key:"fire",value:function(){for(var t=this.graphics,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.graphics.fire.apply(t,i)}},{key:"setCanvasImage",value:function(t,e){this.graphics.setCanvasImage(t,e)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(t,e){this.graphics.setImageProperties(t,e)}},{key:"setCanvasCssDimension",value:function(t){this.graphics.setCanvasCssDimension(t)}},{key:"setCanvasBackstoreDimension",value:function(t){this.graphics.setCanvasBackstoreDimension(t)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),t}(),ir=er;var nr={padding:0,crossOrigin:"Anonymous"},rr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){return S(this,r),n.call(this,mt.IMAGE_LOADER,t)}return M(r,[{key:"load",value:function(t,e){var i,n=this;if(t||e)i=this._setBackgroundImage(e).then((function(e){return n.setCanvasImage(t,e),n.adjustCanvasDimension(),e}));else{var r=this.getCanvas();r.backgroundImage=null,r.renderAll(),i=new(O())((function(t){n.setCanvasImage("",null),t()}))}return i}},{key:"_setBackgroundImage",value:function(t){var e=this;return t?new(O())((function(i,n){var r=e.getCanvas();r.setBackgroundImage(t,(function(){var t=r.backgroundImage;t&&t.getElement()?i(t):n("Invalid image loaded.")}),nr)})):O().reject("The background image is empty.")}}]),r}(ir),or=rr,sr=["tl","tr","mt","ml","mr","mb","bl","br"],ar=function(){};function Ar(t,e){return t>e?"width":"height"}var cr=L.fabric.util.createClass(L.fabric.Rect,{initialize:function(t,e,i){(e=P()(e,i)).type="cropzone",this.callSuper("initialize",e),this._addEventHandler(),this.canvas=t,this.options=e},canvasEventDelegation:function(t){var e,i="unregistered";return this.canvasEventTrigger[t]!==ar?i="registered":o()(e=[Nt,Rt]).call(e,t)<0&&(i="none"),i},canvasEventRegister:function(t,e){this.canvasEventTrigger[t]=e},_addEventHandler:function(){var t,e,i,n,r;this.canvasEventTrigger=(_(t={},Nt,ar),_(t,Rt,ar),t),this.on({moving:E()(e=this._onMoving).call(e,this),scaling:E()(i=this._onScaling).call(i,this)}),L.fabric.util.addListener(document,"keydown",E()(n=this._onKeyDown).call(n,this)),L.fabric.util.addListener(document,"keyup",E()(r=this._onKeyUp).call(r,this))},_renderCropzone:function(t){var e=this.flipX?-1:1,i=this.flipY?-1:1,n=e/this.scaleX,r=i/this.scaleY;t.scale(n,r),this._fillOuterRect(t,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(t),this._strokeBorder(t,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(t,"rgb(0, 0, 0)",{lineDashWidth:7}),this._strokeBorder(t,"rgb(255, 255, 255)",{lineDashWidth:7,lineDashOffset:7})),t.scale(1/n,1/r)},_render:function(t){this.callSuper("_render",t),this._renderCropzone(t)},_fillOuterRect:function(t,e){var i=this._getCoordinates(),n=i.x,r=i.y;t.save(),t.fillStyle=e,t.beginPath(),t.moveTo(n[0]-1,r[0]-1),t.lineTo(n[3]+1,r[0]-1),t.lineTo(n[3]+1,r[3]+1),t.lineTo(n[0]-1,r[3]+1),t.lineTo(n[0]-1,r[0]-1),t.closePath(),t.moveTo(n[1],r[1]),t.lineTo(n[1],r[2]),t.lineTo(n[2],r[2]),t.lineTo(n[2],r[1]),t.lineTo(n[1],r[1]),t.closePath(),nt()(t).call(t),t.restore()},_fillInnerRect:function(t){var e=this._getCoordinates(),i=e.x,n=e.y,r=this._caculateInnerPosition(i,(i[2]-i[1])/3),o=this._caculateInnerPosition(n,(n[2]-n[1])/3);t.save(),t.strokeStyle="rgba(255, 255, 255, 0.7)",t.lineWidth=this.options.lineWidth,t.beginPath(),t.moveTo(r[0],o[1]),t.lineTo(r[3],o[1]),t.moveTo(r[0],o[2]),t.lineTo(r[3],o[2]),t.moveTo(r[1],o[0]),t.lineTo(r[1],o[3]),t.moveTo(r[2],o[0]),t.lineTo(r[2],o[3]),t.stroke(),t.closePath(),t.restore()},_caculateInnerPosition:function(t,e){var i=[];return i[0]=t[1],i[1]=t[1]+e,i[2]=t[1]+2*e,i[3]=t[2],i},_getCoordinates:function(){var t,e,i=this.canvas,n=this.width,r=this.height,o=this.left,s=this.top,a=n/2,A=r/2,c=i.getHeight(),l=i.getWidth();return{x:mi()(t=[-(a+o),-a,a,a+(l-o-n)]).call(t,Math.ceil),y:mi()(e=[-(A+s),-A,A,A+(c-s-r)]).call(e,Math.ceil)}},_strokeBorder:function(t,e,i){var n=i.lineDashWidth,r=i.lineDashOffset,o=i.lineWidth,s=this.width/2,a=this.height/2;t.save(),t.strokeStyle=e,t.setLineDash&&t.setLineDash([n,n]),r&&(t.lineDashOffset=r),o&&(t.lineWidth=o),t.beginPath(),t.moveTo(-s,-a),t.lineTo(s,-a),t.lineTo(s,a),t.lineTo(-s,a),t.lineTo(-s,-a),t.stroke(),t.restore()},_onMoving:function(){var t=this.height,e=this.width,i=this.left,n=this.top,r=this.canvas.getWidth()-e,o=this.canvas.getHeight()-t;this.left=Pe(i,0,r),this.top=Pe(n,0,o),this.canvasEventTrigger[Nt](this)},_onScaling:function(t){var e=t.transform.corner,i=this.canvas.getPointer(t.e),n=this._calcScalingSizeFromPointer(i,e);this.scale(1).set(n),this.canvasEventTrigger[Rt](this)},_calcScalingSizeFromPointer:function(t,e){var i=function(t){return o()(sr).call(sr,t)>=0}(e);return i&&this._resizeCropZone(t,e)},adjustRatioCropzoneSize:function(t){var e=t.width,i=t.height,n=t.leftMaker,r=t.topMaker,o=t.maxWidth,s=t.maxHeight,a=t.scaleTo;if(e=o?Pe(e,1,o):e,i=s?Pe(i,1,s):i,!this.presetRatio)return this._withShiftKey&&(e>i?i=e:i>e&&(e=i)),{width:e,height:i,left:n(e),top:r(i)};"width"===a?i=e/this.presetRatio:e=i*this.presetRatio;var A=Math.min(o/e,s/i);if(A<=1){var c,l=Z(mi()(c=[e,i]).call(c,(function(t){return t*A})),2);e=l[0],i=l[1]}return{width:e,height:i,left:n(e),top:r(i)}},_getCropzoneRectInfo:function(){var t=this.canvas,e=t.width,i=t.height,n=this.getBoundingRect(!1,!0),r=n.top,o=n.left,s=n.width,a=n.height;return{rectTop:r,rectLeft:o,rectWidth:s,rectHeight:a,rectRight:o+s,rectBottom:r+a,canvasWidth:e,canvasHeight:i}},_resizeCropZone:function(t,e){var i=t.x,n=t.y,r=this._getCropzoneRectInfo(),o=r.rectWidth,s=r.rectHeight,a=r.rectTop,A=r.rectLeft,c=r.rectBottom,l=r.rectRight,h=r.canvasWidth,u=r.canvasHeight,d={tl:{width:l-i,height:c-n,leftMaker:function(t){return l-t},topMaker:function(t){return c-t},maxWidth:l,maxHeight:c,scaleTo:Ar(A-i,a-n)},tr:{width:i-A,height:c-n,leftMaker:function(){return A},topMaker:function(t){return c-t},maxWidth:h-A,maxHeight:c,scaleTo:Ar(i-l,a-n)},mt:{width:o,height:c-n,leftMaker:function(){return A},topMaker:function(t){return c-t},maxWidth:h-A,maxHeight:c,scaleTo:"height"},ml:{width:l-i,height:s,leftMaker:function(t){return l-t},topMaker:function(){return a},maxWidth:l,maxHeight:u-a,scaleTo:"width"},mr:{width:i-A,height:s,leftMaker:function(){return A},topMaker:function(){return a},maxWidth:h-A,maxHeight:u-a,scaleTo:"width"},mb:{width:o,height:n-a,leftMaker:function(){return A},topMaker:function(){return a},maxWidth:h-A,maxHeight:u-a,scaleTo:"height"},bl:{width:l-i,height:n-a,leftMaker:function(t){return l-t},topMaker:function(){return a},maxWidth:l,maxHeight:u-a,scaleTo:Ar(A-i,n-c)},br:{width:i-A,height:n-a,leftMaker:function(){return A},topMaker:function(){return a},maxWidth:h-A,maxHeight:u-a,scaleTo:Ar(i-l,n-c)}};return this.adjustRatioCropzoneSize(d[e])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(t){t.keyCode===ye&&(this._withShiftKey=!0)},_onKeyUp:function(t){t.keyCode===ye&&(this._withShiftKey=!1)}}),lr=cr;var hr={presetRatio:null,top:-10,left:-10,height:1,width:1},ur=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s,a,A;return S(this,r),(A=n.call(this,mt.CROPPER,t))._cropzone=null,A._startX=null,A._startY=null,A._withShiftKey=!1,A._listeners={keydown:E()(e=A._onKeyDown).call(e,Ei(A)),keyup:E()(i=A._onKeyUp).call(i,Ei(A)),mousedown:E()(o=A._onFabricMouseDown).call(o,Ei(A)),mousemove:E()(s=A._onFabricMouseMove).call(s,Ei(A)),mouseup:E()(a=A._onFabricMouseUp).call(a,Ei(A))},A}return M(r,[{key:"start",value:function(){if(!this._cropzone){var t=this.getCanvas();t.forEachObject((function(t){t.evented=!1})),this._cropzone=new lr(t,P()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},vt,this.graphics.cropSelectionStyle)),t.discardActiveObject(),t.add(this._cropzone),t.on("mouse:down",this._listeners.mousedown),t.selection=!1,t.defaultCursor="crosshair",L.fabric.util.addListener(document,"keydown",this._listeners.keydown),L.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var t=this.getCanvas(),e=this._cropzone;e&&(t.remove(e),t.selection=!0,t.defaultCursor="default",t.off("mouse:down",this._listeners.mousedown),t.forEachObject((function(t){t.evented=!0})),this._cropzone=null,L.fabric.util.removeListener(document,"keydown",this._listeners.keydown),L.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(t){this._cropzone&&this._cropzone.set({visible:t})}},{key:"_onFabricMouseDown",value:function(t){var e=this.getCanvas();if(!t.target){e.selection=!1;var i=e.getPointer(t.e);this._startX=i.x,this._startY=i.y,e.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e),n=i.x,r=i.y,o=this._cropzone;Math.abs(n-this._startX)+Math.abs(r-this._startY)>10&&(e.remove(o),o.set(this._calcRectDimensionFromPoint(n,r,o.presetRatio)),e.add(o),e.setActiveObject(o))}},{key:"_calcRectDimensionFromPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.getCanvas(),r=n.getWidth(),o=n.getHeight(),s=this._startX,a=this._startY,A=Pe(t,0,s),c=Pe(e,0,a),l=Pe(t,s,r)-A,h=Pe(e,a,o)-c;return this._withShiftKey&&!i?(l>h?h=l:h>l&&(l=h),s>=t&&(A=s-l),a>=e&&(c=a-h)):i&&(h=l/i,s>=t&&(A=Pe(s-l,0,r)),a>=e&&(c=Pe(a-h,0,o)),c+h>o&&(l=(h=o-c)*i,s>=t&&(A=Pe(s-l,0,r)),a>=e&&(c=Pe(a-h,0,o)))),{left:A,top:c,width:l,height:h}}},{key:"_onFabricMouseUp",value:function(){var t=this._cropzone,e=this._listeners,i=this.getCanvas();i.setActiveObject(t),i.off({"mouse:move":e.mousemove,"mouse:up":e.mouseup})}},{key:"getCroppedImageData",value:function(t){var e=this.getCanvas(),i=e.contains(this._cropzone);if(!t)return null;i&&e.remove(this._cropzone);var n={imageName:this.getImageName(),url:e.toDataURL(t)};return i&&e.add(this._cropzone),n}},{key:"getCropzoneRect",value:function(){var t=this._cropzone;return t.isValid()?{left:t.left,top:t.top,width:t.width,height:t.height}:null}},{key:"setCropzoneRect",value:function(t){var e=this.getCanvas(),i=this._cropzone;e.discardActiveObject(),e.selection=!1,e.remove(i),i.set(t?this._getPresetPropertiesForCropSize(t):hr),e.add(i),e.selection=!0,t&&e.setActiveObject(i)}},{key:"_getPresetPropertiesForCropSize",value:function(t){var e,i,n=this.getCanvas(),r=n.getWidth(),o=n.getHeight(),s=r>=o?r:o,a=function(t,e){return t>e?e/t:1},A=s*t,c=s,l=a(A,r),h=Z(mi()(e=[A,c]).call(e,(function(t){return t*l})),2);A=h[0];var u=a(c=h[1],o),d=Z(mi()(i=[A,c]).call(i,(function(t){return Number((t*u).toFixed(2))})),2);return A=d[0],{presetRatio:t,top:(o-(c=d[1]))/2,left:(r-A)/2,width:A,height:c}}},{key:"_onKeyDown",value:function(t){t.keyCode===ye&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(t){t.keyCode===ye&&(this._withShiftKey=!1)}}]),r}(ir),dr=ur;var fr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){return S(this,r),n.call(this,mt.FLIP,t)}return M(r,[{key:"getCurrentSetting",value:function(){var t=this.getCanvasImage();return{flipX:t.flipX,flipY:t.flipY}}},{key:"set",value:function(t){var e=this.getCurrentSetting(),i=e.flipX!==t.flipX,n=e.flipY!==t.flipY;return i||n?(P()(e,t),this.setImageProperties(e,!0),this._invertAngle(i,n),this._flipObjects(i,n),O().resolve({flipX:e.flipX,flipY:e.flipY,angle:this.getCanvasImage().angle})):O().reject("The flipX and flipY setting values are not changed.")}},{key:"_invertAngle",value:function(t,e){var i=this.getCanvasImage(),n=i.angle;t&&(n*=-1),e&&(n*=-1),i.rotate(gi()(n)).setCoords()}},{key:"_flipObjects",value:function(t,e){var i=this.getCanvas();t&&i.forEachObject((function(t){t.set({angle:gi()(-1*t.angle),flipX:!t.flipX,left:i.width-t.left}).setCoords()})),e&&i.forEachObject((function(t){t.set({angle:gi()(-1*t.angle),flipY:!t.flipY,top:i.height-t.top}).setCoords()})),i.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var t=this.getCurrentSetting();return this.set({flipX:!t.flipX,flipY:t.flipY})}},{key:"flipY",value:function(){var t=this.getCurrentSetting();return this.set({flipX:t.flipX,flipY:!t.flipY})}}]),r}(ir),gr=fr;var pr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){return S(this,r),n.call(this,mt.ROTATION,t)}return M(r,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(t){var e=this.getCurrentAngle()%360;t%=360;var i=this.getCanvasImage(),n=i.getCenterPoint();i.set({angle:t}).setCoords(),this.adjustCanvasDimension();var r=i.getCenterPoint();return this._rotateForEachObject(n,r,t-e),O().resolve(t)}},{key:"_rotateForEachObject",value:function(t,e,i){var n=this.getCanvas(),r=t.x-e.x,o=t.y-e.y;n.forEachObject((function(e){var n=e.getCenterPoint(),s=L.fabric.util.degreesToRadians(i),a=L.fabric.util.rotatePoint(n,t,s);e.set({left:a.x-r,top:a.y-o,angle:(e.angle+i)%360}),e.setCoords()})),n.renderAll()}},{key:"rotate",value:function(t){var e=this.getCurrentAngle();return this.setAngle(e+t)}}]),r}(ir),mr=pr;var vr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e;return S(this,r),(e=n.call(this,mt.FREE_DRAWING,t)).width=12,e.oColor=new L.fabric.Color("rgba(0, 0, 0, 0.5)"),e}return M(r,[{key:"start",value:function(t){this.getCanvas().isDrawingMode=!0,this.setBrush(t)}},{key:"setBrush",value:function(t){var e=this.getCanvas().freeDrawingBrush;t=t||{},this.width=t.width||this.width,t.color&&(this.oColor=new L.fabric.Color(t.color)),e.width=this.width,e.color=this.oColor.toRgba()}},{key:"end",value:function(){this.getCanvas().isDrawingMode=!1}}]),r}(ir),yr=vr,wr=L.fabric.util.createClass(L.fabric.Line,{type:"line",initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callSuper("initialize",t,e),this.arrowType=e.arrowType},_render:function(t){var e=this.calcLinePoints(),i={fromX:e.x1,fromY:e.y1,toX:e.x2,toY:e.y2};this.ctx=t,t.lineWidth=this.strokeWidth,this._renderBasicLinePath(i),this._drawDecoratorPath(i),this._renderStroke(t)},_renderBasicLinePath:function(t){var e=t.fromX,i=t.fromY,n=t.toX,r=t.toY;this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(n,r)},_drawDecoratorPath:function(t){this._drawDecoratorPathType("head",t),this._drawDecoratorPathType("tail",t)},_drawDecoratorPathType:function(t,e){switch(this.arrowType[t]){case"triangle":this._drawTrianglePath(t,e);break;case"chevron":this._drawChevronPath(t,e)}},_drawTrianglePath:function(t,e){var i=1.7*this.ctx.lineWidth;this._drawChevronPath(t,e,i),this.ctx.closePath()},_drawChevronPath:function(t,e,i){var n=this,r=e.fromX,o=e.fromY,s=e.toX,a=e.toY,A=this.ctx;i||(i=2.7*this.ctx.lineWidth);var c=Z("head"===t?[r,o]:[s,a],2),l=c[0],h=c[1],u=Z("head"===t?[s,a]:[r,o],2),d=u[0],f=u[1],g=180*Math.atan2(f-h,d-l)/Math.PI,p=function(t){return n.getRotatePosition(i,t,{x:l,y:h})};A.moveTo.apply(A,B(p(g+30))),A.lineTo(l,h),A.lineTo.apply(A,B(p(g-30)))},getRotatePosition:function(t,e,i){var n=e*Math.PI/180,r=i.x,o=i.y;return[t*Math.cos(n)+r,t*Math.sin(n)+o]}}),Cr=wr;var br=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s;return S(this,r),(s=n.call(this,mt.LINE,t))._width=12,s._oColor=new L.fabric.Color("rgba(0, 0, 0, 0.5)"),s._listeners={mousedown:E()(e=s._onFabricMouseDown).call(e,Ei(s)),mousemove:E()(i=s._onFabricMouseMove).call(i,Ei(s)),mouseup:E()(o=s._onFabricMouseUp).call(o,Ei(s))},s}return M(r,[{key:"setHeadOption",value:function(t){var e=t.arrowType,i=void 0===e?{head:null,tail:null}:e;this._arrowType=i}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getCanvas();e.defaultCursor="crosshair",e.selection=!1,this.setHeadOption(t),this.setBrush(t),e.forEachObject((function(t){t.set({evented:!1})})),e.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(t){var e=this.getCanvas().freeDrawingBrush;t=t||{},this._width=t.width||this._width,t.color&&(this._oColor=new L.fabric.Color(t.color)),e.width=this._width,e.color=this._oColor.toRgba()}},{key:"end",value:function(){var t=this.getCanvas();t.defaultCursor="default",t.selection=!0,t.forEachObject((function(t){t.set({evented:!0})})),t.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e),n=i.x,r=i.y,o=[n,r,n,r];this._line=new Cr(o,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(we),e.add(this._line),e.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Jt,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e);this._line.set({x2:i.x,y2:i.y}),this._line.setCoords(),e.renderAll()}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(Gt,this._createLineEventObjectProperties()),this._line=null,t.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var t=this.graphics.createObjectProperties(this._line),e=this._line,i=e.x1,n=e.x2,r=e.y1,o=e.y2;return P()({},t,{startPosition:{x:i,y:r},endPosition:{x:n,y:o}})}}]),r}(ir),Br=br;var xr={fill:"#000000",left:0,top:0},_r={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Sr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s,a,A;return S(this,r),(A=n.call(this,mt.TEXT,t))._defaultStyles=xr,A._isSelected=!1,A._selectedObj={},A._editingObj={},A._listeners={mousedown:E()(e=A._onFabricMouseDown).call(e,Ei(A)),select:E()(i=A._onFabricSelect).call(i,Ei(A)),selectClear:E()(o=A._onFabricSelectClear).call(o,Ei(A)),scaling:E()(s=A._onFabricScaling).call(s,Ei(A)),textChanged:E()(a=A._onFabricTextChanged).call(a,Ei(A))},A._textarea=null,A._ratio=1,A._lastClickTime=(new Date).getTime(),A._editingObjInfos={},A.isPrevEditing=!1,A}return M(r,[{key:"start",value:function(){var t=this,e=this.getCanvas();e.selection=!1,e.defaultCursor="text",e.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),e.forEachObject((function(e){"i-text"===e.type&&t.adjustOriginPosition(e,"start")})),this.setCanvasRatio()}},{key:"end",value:function(){var t=this,e=this.getCanvas();e.selection=!0,e.defaultCursor="default",e.forEachObject((function(i){"i-text"===i.type&&(""===i.text?e.remove(i):t.adjustOriginPosition(i,"end"))})),e.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(t,e){var i="center",n="center";"start"===e&&(i="left",n="top");var r=t.getPointByOrigin(i,n),o=r.x,s=r.y;t.set({left:o,top:s,originX:i,originY:n}),t.setCoords()}},{key:"add",value:function(t,e){var i=this;return new(O())((function(n){var r,o=i.getCanvas(),s=null,a=we,A=i._defaultStyles;i._setInitPos(e.position),e.styles&&(A=P()(A,e.styles)),bn()(e.autofocus)||(e.autofocus=!0),s=new L.fabric.IText(t,A),a=P()({},a,{originX:"left",originY:"top"}),s.set(a),s.on({mouseup:E()(r=i._onFabricMouseUp).call(r,i)}),o.add(s),e.autofocus&&(s.enterEditing(),s.selectAll()),o.getActiveObject()||o.setActiveObject(s),i.isPrevEditing=!0,n(i.graphics.createObjectProperties(s))}))}},{key:"change",value:function(t,e){var i=this;return new(O())((function(n){t.set("text",e),i.getCanvas().renderAll(),n()}))}},{key:"setStyle",value:function(t,e){var i=this;return new(O())((function(n){z()(e,(function(i,n){t[n]===i&&"fontSize"!==n&&(e[n]=_r[n]||"")}),i),"textDecoration"in e&&P()(e,i._getTextDecorationAdaptObject(e.textDecoration)),t.set(e),i.getCanvas().renderAll(),n()}))}},{key:"getText",value:function(t){return t.text}},{key:"setSelectedInfo",value:function(t,e){this._selectedObj=t,this._isSelected=e}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var t=this.getCanvasElement(),e=$()(t.style.maxWidth,10),i=t.width;this._ratio=i/e}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(t){return{underline:"underline"===t,linethrough:"line-through"===t,overline:"overline"===t}}},{key:"_setInitPos",value:function(t){t=t||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=t.x,this._defaultStyles.top=t.y}},{key:"_onInput",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,i=this._textarea.style;i.width="".concat(Math.ceil(e.width/t),"px"),i.height="".concat(Math.ceil(e.height/t),"px")}},{key:"_onKeyDown",value:function(){var t=this,e=this.getCanvasRatio(),i=this._editingObj,n=this._textarea.style;g()((function(){i.text(t._textarea.value),n.width="".concat(Math.ceil(i.width/e),"px"),n.height="".concat(Math.ceil(i.height/e),"px")}),0)}},{key:"_onBlur",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,i=this._editingObjInfos,n=this._textarea.value,r=e.width/t-i.width/t,o=e.height/t-i.height/t;if(1===t&&(r/=2,o/=2),this._textarea.style.display="none",e.set({left:i.left+r,top:i.top+o}),n.length){this.getCanvas().add(e);var s={id:Le(e),type:e.type,text:n};this.fire(Xt,s)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(t){var e=t.target;e.fontSize=e.fontSize*e.scaleY,e.scaleX=1,e.scaleY=1}},{key:"_onFabricTextChanged",value:function(t){this.fire(Xt,t.target)}},{key:"_onFabricSelectClear",value:function(t){var e=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(t.target,!1),e&&""===e.text&&this.getCanvas().remove(e)}},{key:"_onFabricSelect",value:function(t){this.isPrevEditing=!0,this.setSelectedInfo(t.target,!0)}},{key:"_onFabricMouseDown",value:function(t){var e=t.target;e&&!e.isType("text")||(this.isPrevEditing?this.isPrevEditing=!1:this._fireAddText(t))}},{key:"_fireAddText",value:function(t){var e=t.target,i=t.e||{},n=this.getCanvas().getPointer(i);e||this.fire(Zt,{originPosition:{x:n.x,y:n.y},clientPosition:{x:i.clientX||0,y:i.clientY||0}})}},{key:"_onFabricMouseUp",value:function(t){var e=t.target,i=(new Date).getTime();this._isDoubleClick(i)&&!e.isEditing&&e.enterEditing(),e.isEditing&&this.fire(Yt),this._lastClickTime=i}},{key:"_isDoubleClick",value:function(t){return t-this._lastClickTime<500}}]),r}(ir),Ir=Sr;var Mr={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Tr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s;return S(this,r),(s=n.call(this,mt.ICON,t))._oColor="#000000",s._pathMap=Mr,s._type=null,s._iconColor=null,s._handlers={mousedown:E()(e=s._onFabricMouseDown).call(e,Ei(s)),mousemove:E()(i=s._onFabricMouseMove).call(i,Ei(s)),mouseup:E()(o=s._onFabricMouseUp).call(o,Ei(s))},s}return M(r,[{key:"setStates",value:function(t,e){this._type=t,this._iconColor=e}},{key:"start",value:function(){var t=this.getCanvas();t.selection=!1,t.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var t=this.getCanvas();t.selection=!0,t.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(t,e){var i=this;return new(O())((function(n,r){var o=i.getCanvas(),s=i._pathMap[t],a=we,A=s?i._createIcon(s):null;i._icon=A,A||r(Ce),A.set(P()({type:"icon",fill:i._oColor},a,e,i.graphics.controlStyle)),o.add(A).setActiveObject(A),n(i.graphics.createObjectProperties(A))}))}},{key:"registerPaths",value:function(t){var e=this;z()(t,(function(t,i){e._pathMap[i]=t}),this)}},{key:"setColor",value:function(t,e){this._oColor=t,e&&"icon"===e.get("type")&&(e.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(t){return nt()(t)}},{key:"_createIcon",value:function(t){return new L.fabric.Path(t)}},{key:"_onFabricMouseDown",value:function(t){var e=this,i=this.getCanvas();this._startPoint=i.getPointer(t.e);var n=this._startPoint,r=n.x,o=n.y;this.add(this._type,{left:r,top:o,fill:this._iconColor}).then((function(){e.fire(Jt,e.graphics.createObjectProperties(e._icon)),i.on("mouse:move",e._handlers.mousemove),i.on("mouse:up",e._handlers.mouseup)}))}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas();if(this._icon){var i=e.getPointer(t.e),n=(i.x-this._startPoint.x)/this._icon.width,r=(i.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(2*n),scaleY:Math.abs(2*r)}),this._icon.setCoords(),e.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(Gt,this.graphics.createObjectProperties(this._icon)),this._icon=null,t.off("mouse:down",this._handlers.mousedown),t.off("mouse:move",this._handlers.mousemove),t.off("mouse:up",this._handlers.mouseup)}}]),r}(ir),Er=Tr,kr=L.fabric.util.createClass(L.fabric.Image.filters.BlendImage,{applyTo:function(t){if(this.mask){var e=t.canvasEl,i=e.width,n=e.height,r=this._createCanvasOfMask(i,n),o=e.getContext("2d"),s=r.getContext("2d"),a=o.getImageData(0,0,i,n);this._drawMask(s,e,o),this._mapData(s,a,i,n),t.imageData=a}},_createCanvasOfMask:function(t,e){var i=L.fabric.util.createCanvasElement();return i.width=t,i.height=e,i},_drawMask:function(t){var e=this.mask,i=e.getElement(),n=e.angle,r=e.left,o=e.scaleX,s=e.scaleY,a=e.top;t.save(),t.translate(r,a),t.rotate(n*Math.PI/180),t.scale(o,s),t.drawImage(i,-i.width/2,-i.height/2),t.restore()},_mapData:function(t,e,i,n){for(var r=e.data,o=e.height,s=r,a=e.width*o*4,A=t.getImageData(0,0,i,n).data,c=0;c<a;c+=4)s[c+3]=A[c]}}),Fr=kr,Dr=L.fabric.util.createClass(L.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Or=L.fabric.util.createClass(L.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Ur=L.fabric.util.createClass(L.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(t){t||(t={}),this.color=t.color||"#FFFFFF",this.threshold=t.threshold||45,this.x=t.x||null,this.y=t.y||null},applyTo:function(t){var e,i,n=t.canvasEl,r=n.getContext("2d"),o=r.getImageData(0,0,n.width,n.height),s=o.data,a=this.threshold,A=L.fabric.Color.sourceFromHex(this.color);for(this.x&&this.y&&(A=this._getColor(o,this.x,this.y)),e=0,i=s.length;e<i;e+=4)this._isOutsideThreshold(s[e],A[0],a)||this._isOutsideThreshold(s[e+1],A[1],a)||this._isOutsideThreshold(s[e+2],A[2],a)||(s[e]=s[e+1]=s[e+2]=s[e+3]=0);r.putImageData(o,0,0)},_isOutsideThreshold:function(t,e,i){var n=t-e;return Math.abs(n)>i},_getColor:function(t,e,i){var n=[0,0,0,0],r=t.data,o=4*(t.width*i+e);return n[0]=r[o],n[1]=r[o+1],n[2]=r[o+2],n[3]=r[o+3],n}});var Qr=L.fabric.Image.filters;Qr.Mask=Fr,Qr.Sharpen=Dr,Qr.Emboss=Or,Qr.ColorFilter=Ur;var Lr,jr,Pr,Hr=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){return S(this,r),n.call(this,mt.FILTER,t)}return M(r,[{key:"add",value:function(t,e){var i=this;return new(O())((function(n,r){var o=i._getSourceImage(),s=i.getCanvas(),a=i._getFilter(o,t);a||(a=i._createFilter(o,t,e)),a||r(Ce),i._changeFilterValues(a,e),i._apply(o,(function(){s.renderAll(),n({type:t,action:"add",options:e})}))}))}},{key:"remove",value:function(t){var e=this;return new(O())((function(i,n){var r=e._getSourceImage(),o=e.getCanvas(),s=e.getOptions(t);r.filters.length||n("Unsupported operation."),e._removeFilter(r,t),e._apply(r,(function(){o.renderAll(),i({type:t,action:"remove",options:s})}))}))}},{key:"hasFilter",value:function(t){return!!this._getFilter(this._getSourceImage(),t)}},{key:"getOptions",value:function(t){var e=this._getSourceImage(),i=this._getFilter(e,t);return i?P()({},i.options):null}},{key:"_changeFilterValues",value:function(t,e){z()(e,(function(e,i){N()(t[i])||(t[i]=e)})),z()(t.options,(function(i,n){N()(e[n])||(t.options[n]=e[n])}))}},{key:"_apply",value:function(t,e){t.filters.push(),t.applyFilters()&&e()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(t,e,i){var n,r=this._getFabricFilterType(e),o=L.fabric.Image.filters[r];return o&&((n=new o(i)).options=i,t.filters.push(n)),n}},{key:"_getFilter",value:function(t,e){var i=null;if(t){var n,r,o=this._getFabricFilterType(e),s=t.filters.length;for(r=0;r<s;r+=1)if((n=t.filters[r]).type===o){i=n;break}}return i}},{key:"_removeFilter",value:function(t,e){var i,n=this._getFabricFilterType(e);t.filters=Kn()(i=t.filters).call(i,(function(t){return t.type!==n}))}},{key:"_getFabricFilterType",value:function(t){return t.charAt(0).toUpperCase()+h()(t).call(t,1)}}]),r}(ir),Nr=Hr,Rr=n(1801),zr=n.n(Rr),Gr={pixelate:"blocksize",blur:"blur"},Wr={x:"width",y:"height"},Yr=(Lr=Gr,Pr={},et()(jr=V()(Lr)).call(jr,(function(t){Pr[Lr[t]]=t})),Pr),Xr=null;function Kr(t){return Z(Ve(t,"patternSourceCanvas").patternSourceCanvas.getObjects(),1)[0]}function Vr(t){var e;return mi()(e=t.filters).call(e,(function(t){var e=Z(V()(t),1)[0];return _({},Yr[e],t[e])}))}function Zr(t,e,i){var n=$r(Jr(t),t.angle,e);i.add(n);var r={fill:new L.fabric.Pattern({source:i.getElement(),repeat:"no-repeat"})};return Ke(r,{patternSourceCanvas:i}),r}function Jr(t){return Xr&&!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||(Xr=t.toCanvasElement()),Xr}function qr(t){return[t.getPointByOrigin("left","top"),t.getPointByOrigin("right","top"),t.getPointByOrigin("left","bottom"),t.getPointByOrigin("right","bottom")]}function $r(t,e,i){var n,r=new L.fabric.Image(t);return z()(P().apply(void 0,F()(n=[{}]).call(n,B(i))),(function(t,e){var i,n=(i=e).charAt(0).toUpperCase()+h()(i).call(i,1),o=new L.fabric.Image.filters[n](_({},Gr[e],t));r.filters.push(o)})),r.applyFilters(),Ke(r,{originalAngle:e,fillImageMaxSize:Math.max(r.width,r.height)}),zr().adjustOriginToCenter(r),r}var to=P()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},{lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1});function eo(t,e,i){var n=nt()(t),r=Je(nt()(t)),o=n;n.color&&(o=n.color);var s=null;if("filter"===r){var a=i();s=Zr(e,Kn()(n),a)}else s={fill:o};return P()({},t,s)}var io=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s,a,A;return S(this,r),(A=n.call(this,mt.SHAPE,t))._shapeObj=null,A._type="rect",A._options=P()({},to),A._isSelected=!1,A._startPoint={},A._withShiftKey=!1,A._handlers={mousedown:E()(e=A._onFabricMouseDown).call(e,Ei(A)),mousemove:E()(i=A._onFabricMouseMove).call(i,Ei(A)),mouseup:E()(o=A._onFabricMouseUp).call(o,Ei(A)),keydown:E()(s=A._onKeyDown).call(s,Ei(A)),keyup:E()(a=A._onKeyUp).call(a,Ei(A))},A}return M(r,[{key:"start",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="crosshair",t.selection=!1,t.uniformScaling=!0,t.on({"mouse:down":this._handlers.mousedown}),L.fabric.util.addListener(document,"keydown",this._handlers.keydown),L.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="default",t.selection=!0,t.uniformScaling=!1,t.off({"mouse:down":this._handlers.mousedown}),L.fabric.util.removeListener(document,"keydown",this._handlers.keydown),L.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(t,e){this._type=t,e&&(this._options=P()(this._options,e))}},{key:"add",value:function(t,e){var i=this;return new(O())((function(n){var r=i.getCanvas(),o=i._extendOptions(e),s=i._createInstance(t,o),a=i.graphics.createObjectProperties(s);i._bindEventOnShape(s),r.add(s).setActiveObject(s),i._resetPositionFillFilter(s),n(a)}))}},{key:"change",value:function(t,e){var i=this;return new(O())((function(n,r){$e(t)||r("Unsupported object type.");var o="filter"===Je(nt()(e)),s=i.graphics,a=s.canvasImage,A=s.createStaticCanvas;t.set(o?eo(e,a,A):e),o&&i._resetPositionFillFilter(t),i.getCanvas().renderAll(),n()}))}},{key:"makeFillPropertyForUserEvent",value:function(t){var e=qe(t),i={};if(e===ft){var n=Vr(Kr(t));i.type=e,i.filter=n}else i.type=gt,i.color=nt()(t)||"transparent";return i}},{key:"processForCopiedObject",value:function(t,e){if(this._bindEventOnShape(t),"filter"===qe(t)){var i=Vr(Kr(e)),n=this.graphics.createStaticCanvas();t.set(Zr(this.graphics.canvasImage,i,n)),this._resetPositionFillFilter(t)}}},{key:"_createInstance",value:function(t,e){var i;switch(t){case"rect":i=new L.fabric.Rect(e);break;case"circle":i=new L.fabric.Ellipse(P()({type:"circle"},e));break;case"triangle":i=new L.fabric.Triangle(e);break;default:i={}}return i}},{key:"_extendOptions",value:function(t){var e=we,i=this.graphics,n=i.canvasImage,r=i.createStaticCanvas;return eo(t=P()({},to,this._options,e,t),n,r)}},{key:"_bindEventOnShape",value:function(t){var e=this,i=this.getCanvas();t.on({added:function(){e._shapeObj=this,zr().setOrigins(e._shapeObj)},selected:function(){e._isSelected=!0,e._shapeObj=this,i.uniformScaling=!0,i.defaultCursor="default",zr().setOrigins(e._shapeObj)},deselected:function(){e._isSelected=!1,e._shapeObj=null,i.defaultCursor="crosshair",i.uniformScaling=!1},modified:function(){var t=e._shapeObj;zr().adjustOriginToCenter(t),zr().setOrigins(t)},modifiedInGroup:function(i){e._fillFilterRePositionInGroupSelection(t,i)},moving:function(){e._resetPositionFillFilter(this)},rotating:function(){e._resetPositionFillFilter(this)},scaling:function(t){var n=i.getPointer(t.e),r=e._shapeObj;i.setCursor("crosshair"),zr().resize(r,n,!0),e._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(t){if(t.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var e=this.getCanvas();this._startPoint=e.getPointer(t.e),e.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var e=this,i=this.getCanvas(),n=i.getPointer(t.e),r=this._startPoint.x,o=this._startPoint.y,s=r-n.x,a=o-n.y,A=this._shapeObj;A?(this._shapeObj.set({isRegular:this._withShiftKey}),zr().resize(A,n),i.renderAll(),this._resetPositionFillFilter(A)):this.add(this._type,{left:r,top:o,width:s,height:a}).then((function(t){e.fire(Jt,t)}))}},{key:"_onFabricMouseUp",value:function(){var t=this,e=this.getCanvas(),i=this._startPoint.x,n=this._startPoint.y,r=this._shapeObj;r?r&&(zr().adjustOriginToCenter(r),this.fire(Gt,this.graphics.createObjectProperties(r))):this.add(this._type,{left:i,top:n,width:20,height:20}).then((function(e){t.fire(Jt,e)})),e.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(t){t.keyCode===ye&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(t){t.keyCode===ye&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(t){if("filter"===qe(t)){var e=Ve(t,"patternSourceCanvas").patternSourceCanvas,i=Ve(Kr(t),"originalAngle").originalAngle;this.graphics.canvasImage.angle!==i&&function(t,e){var i=Ve(t,"patternSourceCanvas").patternSourceCanvas,n=Z(i.getObjects(),1)[0],r=Vr(n);i.remove(n);var o=$r(Jr(e,!0),e.angle,r);i.add(o)}(t,this.graphics.canvasImage);var n=t.originX,r=t.originY;zr().adjustOriginToCenter(t),t.width*=t.scaleX,t.height*=t.scaleY,t.rx*=t.scaleX,t.ry*=t.scaleY,t.scaleX=1,t.scaleY=1,function(t){var e=t.angle,i=t.flipX,n=t.flipY,r=Kr(t),o=function(t){var e=Z(qr(t),4),i=e[0],n=i.x,r=i.y,o=e[1],s=o.x,a=o.y,A=e[2],c=A.x,l=A.y,h=e[3],u=h.x,d=h.y,f=Math.min(n,s,c,u),g=Math.min(r,a,l,d),p=Math.max(n,s,c,u),m=Math.max(r,a,l,d);return{left:f,top:g,right:p,bottom:m,width:p-f,height:m-g}}(t),s=o.right,a=o.bottom,A=o.width,c=o.height,l=(A-t.width)/2,h=(c-t.height)/2,u=t.left-t.width/2-l,d=t.top-t.height/2-h,f=A/2-l,g=c/2-h,p=Math.max(A,c)+Math.max(l,h),m=function(t){var e=t.shapeObj,i=t.left,n=t.top,r=t.width,o=t.height,s=t.cropX,a=t.cropY,A=t.flipX,c=t.flipY,l=t.right,h=t.bottom,u=function(t,i,n,r){return function(t){var e=t.type,i=t.outDistance,n=t.left,r=t.top,o=t.flipX,s=t.flipY,a=qr(t.shapeObj),A=function(t,e){var i=0,n=0;z()(e,(function(e,r){e[t]<i&&(i=e[t],n=r)}));var r=Z([[1,2],[0,3],[0,3],[1,2]][n],2),o=r[0],s=r[1];return{startPointIndex:n,endPointIndex1:o,endPointIndex2:s}}(e,a),c=function(t,e,i){var n,r=i.startPointIndex,o=i.endPointIndex1,s=i.endPointIndex2,a="x"===t?180:270;return mi()(n=[o,s]).call(n,(function(t){var i=e[r],n=e[t],o=i.y-n.y,s=i.x-n.x;return 180*Math.atan2(o,s)/Math.PI-a}))}(e,a,A),l=function(t){var e=t.outDistance,i=t.startPointIndex,n=t.flipX,r=t.flipY,o=t.reatAngles,s=e*Math.cos(o[0]*Math.PI/180),a=e*Math.cos(o[1]*Math.PI/180),A=2===i||3===i,c={top:A?s:a,left:A?a:s};return function(t,e,i){return(!e&&i||!e&&!i)&&0===t||(e&&i||e&&!i)&&1===t||(!e&&!i||!e&&i)&&2===t||(e&&!i||e&&i)&&3===t}(i,n,r)&&(c.left=-1*c.left),function(t,e,i){return(e&&!i||!e&&!i)&&0===t||(!e&&!i||e&&!i)&&1===t||(e&&i||!e&&i)&&2===t||(!e&&i||e&&i)&&3===t}(i,n,r)&&(c.top=-1*c.top),c}({outDistance:i,startPointIndex:A.startPointIndex,flipX:o,flipY:s,reatAngles:c});return[n+l.left,r+l.top]}({type:t,outDistance:i,shapeObj:e,flipX:A,flipY:c,left:n,top:r})},d=r,f=o,g=function(t,e){var i=e.left,n=e.top,r=e.cropX,o=e.cropY,s={width:e.width,height:e.height};return z()(["x","y"],(function(e){var a="x"===e?r:o,A=s[Wr[e]],c=Xr[Wr[e]];if(A>c){var l=(A-c)/2;s[Wr[e]]=c;var h=Z(t(e,l,i,n),2);i=h[0],n=h[1]}if(a<0){var u=Z(t(e,a,i,n),2);i=u[0],n=u[1]}})),[i,n,s.width,s.height]}(u,{left:i,top:n,width:r,height:o,cropX:s,cropY:a}),p=Z(g,4),m=function(t,e){var i=e.left,n=e.top,r=e.insideCanvasRealImageWidth,o=e.insideCanvasRealImageHeight,s=e.right,a=e.bottom,A=e.cropX,c=e.cropY,l=e.originalWidth,h=e.originalHeight,u=r,d=o,f=Xr,g=f.width,p=f.height;s>g&&A>0&&(u=l-Math.abs(s-g)),a>p&&c>0&&(d=h-Math.abs(a-p));var m={x:(r-u)/2,y:(o-d)/2};return z()(["x","y"],(function(e){var r=m[e];if(r>0){var o=Z(t(e,r,i,n),2);i=o[0],n=o[1]}})),[i,n,u,d]}(u,{left:i=p[0],top:n=p[1],insideCanvasRealImageWidth:r=p[2],insideCanvasRealImageHeight:o=p[3],right:l,bottom:h,cropX:s,cropY:a,originalWidth:d,originalHeight:f}),v=Z(m,4);return[i=v[0],n=v[1],r=v[2],o=v[3]]}({shapeObj:t,left:f,top:g,width:A,height:c,cropX:u,cropY:d,flipX:i,flipY:n,right:s,bottom:a}),v=Z(m,4);f=v[0],g=v[1],A=v[2],c=v[3],r.set({angle:i===n?-e:e,left:f,top:g,width:A,height:c,cropX:u,cropY:d,flipX:i,flipY:n}),Ke(r,{fillImageMaxSize:p})}(t),function(t,e){var i=e.originX,n=e.originY,r=t.getPointByOrigin(i,n),o=r.x,s=r.y;t.set({left:o,top:s,originX:i,originY:n}),t.setCoords()}(t,{originX:n,originY:r}),function(t){var e=Ve(Z(t.getObjects(),1)[0],"fillImageMaxSize").fillImageMaxSize;e=Math.max(1,e),t.setDimensions({width:e,height:e}),t.renderAll()}(e)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(t,e){1===e.scaleX&&1===e.scaleY||e.addWithUpdate();var i=t.angle,n=t.left,r=t.top;L.fabric.util.addTransformToObject(t,e.calcTransformMatrix()),this._resetPositionFillFilter(t),t.set({angle:i,left:n,top:r})}}]),r}(ir);var no={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},ro="zoomChanged",oo=Zt,so=Yt,ao=Wt,Ao="keydown",co="keyup",lo=se,ho=ae,uo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e,i,o,s,a,A,c,l,h,u,d,f,g;S(this,r),(g=n.call(this,mt.ZOOM,t)).zoomArea=null,g._startPoint=null,g._centerPoints=[],g.zoomLevel=1,g.zoomMode=pe,g._listeners={startZoom:E()(e=g._onMouseDownWithZoomMode).call(e,Ei(g)),moveZoom:E()(i=g._onMouseMoveWithZoomMode).call(i,Ei(g)),stopZoom:E()(o=g._onMouseUpWithZoomMode).call(o,Ei(g)),startHand:E()(s=g._onMouseDownWithHandMode).call(s,Ei(g)),moveHand:E()(a=g._onMouseMoveWithHandMode).call(a,Ei(g)),stopHand:E()(A=g._onMouseUpWithHandMode).call(A,Ei(g)),zoomChanged:E()(c=g._changeScrollState).call(c,Ei(g)),keydown:E()(l=g._startHandModeWithSpaceBar).call(l,Ei(g)),keyup:E()(h=g._endHandModeWithSpaceBar).call(h,Ei(g))};var p=g.getCanvas();return g.aspectRatio=p.width/p.height,g._verticalScroll=new L.fabric.Rect(no),g._horizontalScroll=new L.fabric.Rect(no),p.on(ro,g._listeners.zoomChanged),g.graphics.on(oo,E()(u=g._startTextEditingHandler).call(u,Ei(g))),g.graphics.on(so,E()(d=g._startTextEditingHandler).call(d,Ei(g))),g.graphics.on(ao,E()(f=g._stopTextEditingHandler).call(f,Ei(g))),g}return M(r,[{key:"attachKeyboardZoomEvents",value:function(){L.fabric.util.addListener(document,Ao,this._listeners.keydown),L.fabric.util.addListener(document,co,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){L.fabric.util.removeListener(document,Ao,this._listeners.keydown),L.fabric.util.removeListener(document,co,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(t){this.withSpace||this.isTextEditing||32===t.keyCode&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(t){32===t.keyCode&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=me;var t=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new L.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),t.discardActiveObject(),t.add(this.zoomArea),t.on("mouse:down",this._listeners.startZoom),t.selection=!1,t.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=pe;var t=this.getCanvas(),e=this._listeners,i=e.startZoom,n=e.moveZoom,r=e.stopZoom;t.selection=!0,t.defaultCursor="auto",t.off({"mouse:down":i,"mouse:move":n,"mouse:up":r}),this._changeObjectsEventedState(!0),t.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=ve;var t=this.getCanvas();this._changeObjectsEventedState(!1),t.discardActiveObject(),t.off("mouse:down",this._listeners.startHand),t.on("mouse:down",this._listeners.startHand),t.selection=!1,t.defaultCursor="grab",t.fire(lo)}},{key:"endHandMode",value:function(){this.zoomMode=pe;var t=this.getCanvas();this._changeObjectsEventedState(!0),t.off("mouse:down",this._listeners.startHand),t.selection=!0,t.defaultCursor="auto",this._startHandPoint=null,t.fire(ho)}},{key:"_onMouseDownWithZoomMode",value:function(t){var e=t.target,i=t.e;if(!e){var n=this.getCanvas();n.selection=!1,this._startPoint=n.getPointer(i),this.zoomArea.set({width:0,height:0});var r=this._listeners,o=r.moveZoom,s=r.stopZoom;n.on({"mouse:move":o,"mouse:up":s})}}},{key:"_onMouseMoveWithZoomMode",value:function(t){var e=t.e,i=this.getCanvas(),n=i.getPointer(e),r=n.x,o=n.y,s=this.zoomArea,a=this._startPoint;Math.abs(r-a.x)+Math.abs(o-a.y)>10&&(i.remove(s),s.set(this._calcRectDimensionFromPoint(r,o)),i.add(s))}},{key:"_calcRectDimensionFromPoint",value:function(t,e){var i=this.getCanvas(),n=i.getWidth(),r=i.getHeight(),o=this._startPoint,s=o.x,a=o.y,A=Math.min,c=A(s,t),l=A(a,e);return{left:c,top:l,width:Pe(t,s,n)-c,height:Pe(e,a,r)-l}}},{key:"_onMouseUpWithZoomMode",value:function(){var t=this.zoomLevel,e=this.zoomArea,i=this._listeners,n=i.moveZoom,r=i.stopZoom,o=this.getCanvas(),s=this._getCenterPoint(),a=s.x,A=s.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:a,y:A,prevZoomLevel:t,zoomLevel:t+1}),t+=1,o.zoomToPoint({x:a,y:A},t),this._fireZoomChanged(o,t),this.zoomLevel=t),o.off({"mouse:move":n,"mouse:up":r}),o.remove(e),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var t=this.zoomArea,e=t.left,i=t.top,n=t.width,r=t.height,o=this._startPoint,s=o.x,a=o.y,A=this.aspectRatio;return n<10&&r<10?{x:s,y:a}:n>r?{x:e+A*r/2,y:i+r/2}:{x:e+n/2,y:i+n/A/2}}},{key:"zoom",value:function(t){for(var e=t.x,i=t.y,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoomLevel,r=this.getCanvas(),o=this._centerPoints,s=o.length-1;s>=0&&!(o[s].zoomLevel<n);s-=1){var a=o.pop(),A=a.x,c=a.y,l=a.prevZoomLevel;r.zoomToPoint({x:A,y:c},l),this.zoomLevel=l}r.zoomToPoint({x:e,y:i},n),this._isDefaultZoomLevel(n)||this._centerPoints.push({x:e,y:i,zoomLevel:n,prevZoomLevel:this.zoomLevel}),this.zoomLevel=n,this._fireZoomChanged(r,n)}},{key:"zoomOut",value:function(){var t=this._centerPoints;if(t.length){var e=this.getCanvas(),i=t.pop(),n=i.x,r=i.y,o=i.prevZoomLevel;this._isDefaultZoomLevel(o)?e.setViewportTransform([1,0,0,1,0,0]):e.zoomToPoint({x:n,y:r},o),this.zoomLevel=o,this._fireZoomChanged(e,this.zoomLevel)}}},{key:"resetZoom",value:function(){var t=this.getCanvas();t.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=1,this._centerPoints=[],this._fireZoomChanged(t,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(t){var e=t.x,i=t.y,n=this._centerPoints;if(n.length){var r=this.getCanvas(),o=this.zoomLevel,s=n.pop(),a=s.x,A=s.y,c=s.prevZoomLevel,l=a-e,h=A-i;r.zoomToPoint({x:a,y:A},c),r.zoomToPoint({x:l,y:h},o),n.push({x:l,y:h,prevZoomLevel:c,zoomLevel:o}),this._fireZoomChanged(r,o)}}},{key:"_onMouseDownWithHandMode",value:function(t){var e=t.target,i=t.e;if(!e){var n=this.getCanvas();if(!(this.zoomLevel<=1)){n.selection=!1,this._startHandPoint=n.getPointer(i);var r=this._listeners,o=r.moveHand,s=r.stopHand;n.on({"mouse:move":o,"mouse:up":s})}}}},{key:"_onMouseMoveWithHandMode",value:function(t){var e=t.e,i=this.getCanvas().getPointer(e),n=i.x,r=i.y,o=n-this._startHandPoint.x,s=r-this._startHandPoint.y;this._movePointOfZoom({x:o,y:s})}},{key:"_onMouseUpWithHandMode",value:function(){var t=this.getCanvas(),e=this._listeners,i=e.moveHand,n=e.stopHand;t.off({"mouse:move":i,"mouse:up":n}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(t){var e=t.viewport,i=t.zoomLevel,n=this.getCanvas();if(n.remove(this._verticalScroll),n.remove(this._horizontalScroll),!this._isDefaultZoomLevel(i)){var r=n.width,o=n.height,s=e.tl,a=e.tr,A=e.bl,c=a.x-s.x,l=A.y-s.y,h=c*c/r,u=.0066*l,d=Pe(s.x+s.x/r*c,s.x,a.x-h),f=.0044*l,g=.003*l;this._horizontalScroll.set({left:d,top:A.y-u-f,width:h,height:u,rx:g,ry:g});var p=.0045*c,m=l*l/o,v=Pe(s.y+s.y/o*l,a.y,A.y-m),y=.003*c,w=.003*c;this._verticalScroll.set({left:a.x-p-y,top:v,width:p,height:m,rx:w,ry:w}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getCanvas().forEachObject((function(e){e.evented=t}))}},{key:"_addScrollBar",value:function(){var t=this,e=this.getCanvas();e.add(this._horizontalScroll),e.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=g()((function(){e.remove(t._horizontalScroll),e.remove(t._verticalScroll)}),3e3)}},{key:"_isDefaultZoomLevel",value:function(t){return 1===t}},{key:"_fireZoomChanged",value:function(t,e){t.fire(ro,{viewport:t.calcViewportBoundaries(),zoomLevel:e})}},{key:"mode",get:function(){return this.zoomMode}}]),r}(ir),fo=uo,go=oi.create,po=oi.types,mo=function(){function t(e){S(this,t),this.name=e}return M(t,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(go(po.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(go(po.UN_IMPLEMENTATION,"stop"))}}]),t}();var vo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.CROPPER)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.CROPPER).start()}},{key:"end",value:function(t){t.getComponent(mt.CROPPER).end()}}]),r}(mo),yo=vo;var wo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.FREE_DRAWING)}return M(r,[{key:"start",value:function(t,e){t.getComponent(mt.FREE_DRAWING).start(e)}},{key:"end",value:function(t){t.getComponent(mt.FREE_DRAWING).end()}}]),r}(mo),Co=wo;var bo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.LINE_DRAWING)}return M(r,[{key:"start",value:function(t,e){t.getComponent(mt.LINE).start(e)}},{key:"end",value:function(t){t.getComponent(mt.LINE).end()}}]),r}(mo),Bo=bo;var xo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.SHAPE)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.SHAPE).start()}},{key:"end",value:function(t){t.getComponent(mt.SHAPE).end()}}]),r}(mo),_o=xo;var So=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.TEXT)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.TEXT).start()}},{key:"end",value:function(t){t.getComponent(mt.TEXT).end()}}]),r}(mo),Io=So;var Mo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.ICON)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.ICON).start()}},{key:"end",value:function(t){t.getComponent(mt.ICON).end()}}]),r}(mo),To=Mo;var Eo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.ZOOM)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.ZOOM).start()}},{key:"end",value:function(t){t.getComponent(mt.ZOOM).end()}}]),r}(mo),ko=Eo,Fo=null;function Do(t){Fo=t}function Oo(t,e){var i,n;return i="activeSelection"===t.type?mi()(n=t.getObjects()).call(n,(function(i){var n=i.angle,r=i.left,o=i.top,s=i.scaleX,a=i.scaleY,A=i.width,c=i.height;L.fabric.util.addTransformToObject(i,t.calcTransformMatrix());var l=e(i);return i.set({angle:n,left:r,top:o,width:A,height:c,scaleX:s,scaleY:a}),l})):[e(t)],i}function Uo(t,e,i){return i?{id:t,width:e.width,height:e.height,top:e.top,left:e.left,angle:e.angle,scaleX:e.scaleX,scaleY:e.scaleY}:P()({id:t},e)}var Qo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(t){var e;return S(this,r),(e=n.call(this,mt.RESIZE,t))._dimensions=null,e._originalDimensions=null,e}return M(r,[{key:"getCurrentDimensions",value:function(){var t=this.getCanvasImage();if(!this._dimensions&&t){var e=t.width,i=t.height;this._dimensions={width:e,height:i}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(t){this._originalDimensions=t}},{key:"resize",value:function(t){var e=this.getCanvasImage(),i=e.width,n=e.height,r=e.scaleX,o=e.scaleY,s=t.width,a=t.height,A={scaleX:s?s/i:r,scaleY:a?a/n:o};return r===A.scaleX&&o===A.scaleY||(e.set(A).setCoords(),this._dimensions={width:e.width*e.scaleX,height:e.height*e.scaleY}),this.adjustCanvasDimensionBase(),O().resolve()}},{key:"start",value:function(){var t=this.getCurrentDimensions();this.setOriginalDimensions(t)}},{key:"end",value:function(){}}]),r}(ir),Lo=Qo;var jo=function(t){Ii(r,t);var e,i,n=(e=r,i=function(){if("undefined"==typeof Reflect||!Bi())return!1;if(Bi().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Bi()(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Di(e);if(i){var r=Di(this).constructor;t=Bi()(n,arguments,r)}else t=n.apply(this,arguments);return ki(this,t)});function r(){return S(this,r),n.call(this,ge.RESIZE)}return M(r,[{key:"start",value:function(t){t.getComponent(mt.RESIZE).start()}},{key:"end",value:function(t){t.getComponent(mt.RESIZE).end()}}]),r}(mo),Po=jo,Ho={cssOnly:!0},No={backstoreOnly:!0},Ro=function(){function t(e){var i,n,r,o,s,a,A,c,l,h,u,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=d.cssMaxWidth,g=d.cssMaxHeight;S(this,t),this.canvasImage=null,this.cssMaxWidth=f||1e3,this.cssMaxHeight=g||800,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=ge.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:E()(i=this._onMouseDown).call(i,this),onObjectAdded:E()(n=this._onObjectAdded).call(n,this),onObjectRemoved:E()(r=this._onObjectRemoved).call(r,this),onObjectMoved:E()(o=this._onObjectMoved).call(o,this),onObjectScaled:E()(s=this._onObjectScaled).call(s,this),onObjectModified:E()(a=this._onObjectModified).call(a,this),onObjectRotated:E()(A=this._onObjectRotated).call(A,this),onObjectSelected:E()(c=this._onObjectSelected).call(c,this),onPathCreated:E()(l=this._onPathCreated).call(l,this),onSelectionCleared:E()(h=this._onSelectionCleared).call(h,this),onSelectionCreated:E()(u=this._onSelectionCreated).call(u,this)},this._setObjectCachingToFalse(),this._setCanvasElement(e),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return M(t,[{key:"destroy",value:function(){var t=this._canvas.wrapperEl;this._canvas.clear(),t.parentNode.removeChild(t),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){this.getComponent(mt.ZOOM).attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){this.getComponent(mt.ZOOM).detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(t){var e,i=[];qn()(t)?i=t:i.push(t),(e=this._canvas).add.apply(e,B(i))}},{key:"contains",value:function(t){return this._canvas.contains(t)}},{key:"getObjects",value:function(){var t;return h()(t=this._canvas.getObjects()).call(t)}},{key:"getObject",value:function(t){return this._objects[t]}},{key:"remove",value:function(t){this._canvas.remove(t)}},{key:"removeAll",value:function(t){var e,i=this._canvas,n=h()(e=i.getObjects()).call(e);return i.remove.apply(i,B(this._canvas.getObjects())),t&&i.clear(),n}},{key:"removeObjectById",value:function(t){var e=[],i=this._canvas,n=this.getObject(t);return n&&n.isType("group")&&!n.isEmpty()?(i.discardActiveObject(),n.forEachObject((function(t){e.push(t),i.remove(t)}))):i.contains(n)&&(e.push(n),i.remove(n)),e}},{key:"getObjectId",value:function(t){var e=null;for(e in this._objects)if(this._objects.hasOwnProperty(e)&&t===this._objects[e])return e;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var t=this.getActiveObject(),e=t.type,i=t.left,n=t.top;if("activeSelection"===e){var r=new L.fabric.Group(B(t.getObjects()),{left:i,top:n});return this._addFabricObject(r)}return this.getObjectId(t)}},{key:"isReadyRemoveObject",value:function(){var t=this.getActiveObject();return t&&!t.isEditing}},{key:"getActiveObjects",value:function(){var t=this._canvas._activeObject;return t&&"activeSelection"===t.type?t:null}},{key:"getActiveSelectionFromObjects",value:function(t){var e=this.getCanvas();return new L.fabric.ActiveSelection(t,{canvas:e})}},{key:"setActiveObject",value:function(t){this._canvas.setActiveObject(t)}},{key:"setCropSelectionStyle",value:function(t){this.cropSelectionStyle=t}},{key:"getComponent",value:function(t){return this._componentMap[t]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(t,e){if(this._isSameDrawingMode(t))return!0;this.stopDrawingMode();var i=this._getDrawingModeInstance(t);return i&&i.start&&(i.start(this,e),this._drawingMode=t),!!i}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(ge.NORMAL)){var t=this._getDrawingModeInstance(this.getDrawingMode());t&&t.end&&t.end(this),this._drawingMode=ge.NORMAL}}},{key:"zoom",value:function(t,e){var i=t.x,n=t.y;this.getComponent(mt.ZOOM).zoom({x:i,y:n},e)}},{key:"getZoomMode",value:function(){return this.getComponent(mt.ZOOM).mode}},{key:"startZoomInMode",value:function(){this.getComponent(mt.ZOOM).startZoomInMode()}},{key:"endZoomInMode",value:function(){this.getComponent(mt.ZOOM).endZoomInMode()}},{key:"zoomOut",value:function(){this.getComponent(mt.ZOOM).zoomOut()}},{key:"startHandMode",value:function(){this.getComponent(mt.ZOOM).startHandMode()}},{key:"endHandMode",value:function(){this.getComponent(mt.ZOOM).endHandMode()}},{key:"resetZoom",value:function(){this.getComponent(mt.ZOOM).resetZoom()}},{key:"toDataURL",value:function(t){var e=this.getComponent(mt.CROPPER);e.changeVisibility(!1);var i=this._canvas&&this._canvas.toDataURL(t);return e.changeVisibility(!0),i}},{key:"setCanvasImage",value:function(t,e){e&&Le(e),this.imageName=t,this.canvasImage=e}},{key:"setCssMaxDimension",value:function(t){this.cssMaxWidth=t.width||this.cssMaxWidth,this.cssMaxHeight=t.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.canvasImage);var e=t.getBoundingRect(),i=e.width,n=e.height,r=this._calcMaxDimension(i,n);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(r.width,"px"),"max-height":"".concat(r.height,"px")}),this.setCanvasBackstoreDimension({width:i,height:n}),this._canvas.centerObject(t)}},{key:"setCanvasCssDimension",value:function(t){this._canvas.setDimensions(t,Ho)}},{key:"setCanvasBackstoreDimension",value:function(t){this._canvas.setDimensions(t,No)}},{key:"setImageProperties",value:function(t,e){var i=this.canvasImage;i&&(i.set(t).setCoords(),e&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(t){var e,i=this,n=E()(e=this._callbackAfterLoadingImageObject).call(e,this);return new(O())((function(e){L.fabric.Image.fromURL(t,(function(t){n(t),e(i.createObjectProperties(t))}),{crossOrigin:"Anonymous"})}))}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(mt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(t){this.getComponent(mt.CROPPER).setCropzoneRect(t)}},{key:"getCroppedImageData",value:function(t){return this.getComponent(mt.CROPPER).getCroppedImageData(t)}},{key:"setBrush",value:function(t){var e=this._drawingMode,i=mt.FREE_DRAWING;e===ge.LINE_DRAWING&&(i=mt.LINE),this.getComponent(i).setBrush(t)}},{key:"setDrawingShape",value:function(t,e){this.getComponent(mt.SHAPE).setStates(t,e)}},{key:"setIconStyle",value:function(t,e){this.getComponent(mt.ICON).setStates(t,e)}},{key:"registerPaths",value:function(t){this.getComponent(mt.ICON).registerPaths(t)}},{key:"changeCursor",value:function(t){var e=this.getCanvas();e.defaultCursor=t,e.renderAll()}},{key:"hasFilter",value:function(t){return this.getComponent(mt.FILTER).hasFilter(t)}},{key:"setSelectionStyle",value:function(t){P()(we,t)}},{key:"setObjectProperties",value:function(t,e){var i=this.getObject(t),n=P()({},e);return i.set(n),i.setCoords(),this.getCanvas().renderAll(),n}},{key:"getObjectProperties",value:function(t,e){var i=this.getObject(t),n={};return X()(e)?n[e]=i[e]:qn()(e)?Ui()(e,(function(t){n[t]=i[t]})):tr()(e,(function(t,e){n[e]=i[e]})),n}},{key:"getObjectPosition",value:function(t,e,i){var n=this.getObject(t);return n?n.getPointByOrigin(e,i):null}},{key:"setObjectPosition",value:function(t,e){var i=this.getObject(t),n=e.x,r=e.y,o=e.originX,s=e.originY;if(!i)return!1;var a=i.getPointByOrigin(o,s),A=i.getPointByOrigin("center","center"),c=A.x-a.x,l=A.y-a.y;return i.set({left:n+c,top:r+l}),i.setCoords(),!0}},{key:"getCanvasSize",value:function(){var t=this.getCanvasImage();return{width:t?t.width:0,height:t?t.height:0}}},{key:"createStaticCanvas",value:function(){var t=new L.fabric.StaticCanvas;return t.set({enableRetinaScaling:!1}),t}},{key:"_getDrawingModeInstance",value:function(t){return this._drawingModeMap[t]}},{key:"_setObjectCachingToFalse",value:function(){L.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(t){var e,i;"CANVAS"!==(e=t.nodeType?t:document.querySelector(t)).nodeName.toUpperCase()&&(i=document.createElement("canvas"),e.appendChild(i)),this._canvas=new L.fabric.Canvas(i,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new yo),this._register(this._drawingModeMap,new Co),this._register(this._drawingModeMap,new Bo),this._register(this._drawingModeMap,new _o),this._register(this._drawingModeMap,new Io),this._register(this._drawingModeMap,new To),this._register(this._drawingModeMap,new ko),this._register(this._drawingModeMap,new Po)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new or(this)),this._register(this._componentMap,new dr(this)),this._register(this._componentMap,new gr(this)),this._register(this._componentMap,new mr(this)),this._register(this._componentMap,new yr(this)),this._register(this._componentMap,new Br(this)),this._register(this._componentMap,new Ir(this)),this._register(this._componentMap,new Er(this)),this._register(this._componentMap,new Nr(this)),this._register(this._componentMap,new io(this)),this._register(this._componentMap,new fo(this)),this._register(this._componentMap,new Lo(this))}},{key:"_register",value:function(t,e){t[e.getName()]=e}},{key:"_isSameDrawingMode",value:function(t){return this.getDrawingMode()===t}},{key:"_calcMaxDimension",value:function(t,e){var i=this.cssMaxWidth/t,n=this.cssMaxHeight/e,r=Math.min(t,this.cssMaxWidth),o=Math.min(e,this.cssMaxHeight);return i<1&&i<n?(r=t*i,o=e*i):n<1&&n<i&&(r=t*n,o=e*n),{width:Math.floor(r),height:Math.floor(o)}}},{key:"_callbackAfterLoadingImageObject",value:function(t){var e=this.getCanvasImage().getCenterPoint();t.set(we),t.set({left:e.x,top:e.y,crossOrigin:"Anonymous"}),this.getCanvas().add(t).setActiveObject(t)}},{key:"_attachCanvasEvents",value:function(){var t=this._canvas,e=this._handler;t.on({"mouse:down":e.onMouseDown,"object:added":e.onObjectAdded,"object:removed":e.onObjectRemoved,"object:moving":e.onObjectMoved,"object:scaling":e.onObjectScaled,"object:modified":e.onObjectModified,"object:rotating":e.onObjectRotated,"path:created":e.onPathCreated,"selection:cleared":e.onSelectionCleared,"selection:created":e.onSelectionCreated,"selection:updated":e.onObjectSelected})}},{key:"_onMouseDown",value:function(t){var e=this,i=t.e,n=t.target,r=this._canvas.getPointer(i);if(n){var o=n.type;Do(Oo(n,(function(t){return Uo(e.getObjectId(t),t,"activeSelection"===o)})))}this.fire(qt,i,r)}},{key:"_onObjectAdded",value:function(t){var e=t.target;e.isType("cropzone")||this._addFabricObject(e)}},{key:"_onObjectRemoved",value:function(t){var e=t.target;this._removeFabricObject(Le(e))}},{key:"_onObjectMoved",value:function(t){var e=this;this._lazyFire(Nt,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_onObjectScaled",value:function(t){var e=this;this._lazyFire(Rt,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_onObjectModified",value:function(t){var e=t.target;if("activeSelection"===e.type){var i=e.getObjects();et()(i).call(i,(function(t){return t.fire("modifiedInGroup",e)}))}this.fire(Wt,e,this.getObjectId(e))}},{key:"_onObjectRotated",value:function(t){var e=this;this._lazyFire(zt,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_lazyFire",value:function(t,e,i){var n=this,r=i&&i.canvasEventDelegation?i.canvasEventDelegation(t):"none";"unregistered"===r&&i.canvasEventRegister(t,(function(i){n.fire(t,e(i))})),"none"===r&&this.fire(t,e(i))}},{key:"_onObjectSelected",value:function(t){var e=t.target,i=this.createObjectProperties(e);this.fire(Ht,i)}},{key:"_onPathCreated",value:function(t){var e=t.path.getCenterPoint(),i=e.x,n=e.y;t.path.set(P()({left:i,top:n},we));var r=this.createObjectProperties(t.path);this.fire(Jt,r)}},{key:"_onSelectionCleared",value:function(){this.fire(ee)}},{key:"_onSelectionCreated",value:function(t){var e=t.target,i=this.createObjectProperties(e);this.fire(Ht,i),this.fire(ie,t.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(t){this._canvas.forEachObject((function(e){e.selectable=t,e.hoverCursor=t?"move":"crosshair"}))}},{key:"createObjectProperties",value:function(t){var e={id:Le(t),type:t.type};if(P()(e,Ne(t,["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"])),Ze(["i-text","text"],t.type))P()(e,this._createTextProperties(t,e));else if(Ze(["rect","triangle","circle"],t.type)){var i=this.getComponent(mt.SHAPE);P()(e,{fill:i.makeFillPropertyForUserEvent(t)})}return e}},{key:"_createTextProperties",value:function(t){var e={};return P()(e,Ne(t,["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"])),e}},{key:"_addFabricObject",value:function(t){var e=Le(t);return this._objects[e]=t,e}},{key:"_removeFabricObject",value:function(t){delete this._objects[t]}},{key:"resetTargetObjectForCopyPaste",value:function(){var t=this.getActiveObject();t&&(this.targetObjectForCopyPaste=t)}},{key:"pasteObject",value:function(){var t=this;if(!this.targetObjectForCopyPaste)return O().resolve([]);var e=this.targetObjectForCopyPaste,i="activeSelection"===e.type?e.getObjects():[e],n=null;return this.discardSelection(),this._cloneObject(i).then((function(e){if(e.length>1)n=t.getActiveSelectionFromObjects(e);else{var i=Z(e,1);n=i[0]}t.targetObjectForCopyPaste=n,t.setActiveObject(n)}))}},{key:"_cloneObject",value:function(t){var e=this,i=mi()(t).call(t,(function(t){return e._cloneObjectItem(t)}));return O().all(i)}},{key:"_cloneObjectItem",value:function(t){var e=this;return this._copyFabricObjectForPaste(t).then((function(t){var i=e.createObjectProperties(t);return e.add(t),e.fire(Jt,i),t}))}},{key:"_copyFabricObjectForPaste",value:function(t){var e=this,i=function(t,e){return e?t-10:t+10};return this._copyFabricObject(t).then((function(t){var n=t.left,r=t.top,o=t.width,s=t.height,a=e.getCanvasSize(),A=a.width,c=a.height,l=n+o/2,h=r+s/2;return t.set(P()({left:i(n,l+10>A),top:i(r,h+10>c)},we)),t}))}},{key:"_copyFabricObject",value:function(t){var e=this;return new(O())((function(i){t.clone((function(n){var r=e.getComponent(mt.SHAPE);$e(n)&&r.processForCopiedObject(n,t),i(n)}))}))}},{key:"getCurrentDimensions",value:function(){return this.getComponent(mt.RESIZE).getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){return this.getComponent(mt.RESIZE).getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(t){this.getComponent(mt.RESIZE).setOriginalDimensions(t)}},{key:"resize",value:function(t){return this.getComponent(mt.RESIZE).resize(t)}}]),t}();W().mixin(Ro);var zo=Ro,Go=qt,Wo=Nt,Yo=Rt,Xo=Ht,Ko=zt,Vo=Gt,Zo=Wt,Jo=Zt,qo=Jt,$o=Yt,ts=Xt,es=Kt,is=Vt,ns=ee,rs=ie,os=function(){function t(e,i){var n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v;if(S(this,t),i=P()({includeUI:!1,usageStatistics:!0},i),this.mode=null,this.activeObjectId=null,i.includeUI){var y=i.includeUI;y.usageStatistics=i.usageStatistics,this.ui=new Yn(e,y,this.getActions()),i=this.ui.setUiDefaultSelectionStyle(i)}this._invoker=new di,this._graphics=new zo(this.ui?this.ui.getEditorArea():e,{cssMaxWidth:i.cssMaxWidth,cssMaxHeight:i.cssMaxHeight}),this._handlers={keydown:E()(n=this._onKeyDown).call(n,this),mousedown:E()(r=this._onMouseDown).call(r,this),objectActivated:E()(o=this._onObjectActivated).call(o,this),objectMoved:E()(s=this._onObjectMoved).call(s,this),objectScaled:E()(a=this._onObjectScaled).call(a,this),objectRotated:E()(A=this._onObjectRotated).call(A,this),objectAdded:E()(c=this._onObjectAdded).call(c,this),objectModified:E()(l=this._onObjectModified).call(l,this),createdPath:this._onCreatedPath,addText:E()(h=this._onAddText).call(h,this),addObject:E()(u=this._onAddObject).call(u,this),textEditing:E()(d=this._onTextEditing).call(d,this),textChanged:E()(f=this._onTextChanged).call(f,this),iconCreateResize:E()(g=this._onIconCreateResize).call(g,this),iconCreateEnd:E()(p=this._onIconCreateEnd).call(p,this),selectionCleared:E()(m=this._selectionCleared).call(m,this),selectionCreated:E()(v=this._selectionCreated).call(v,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(i.selectionStyle,{applyCropSelectionStyle:i.applyCropSelectionStyle,applyGroupSelectionStyle:i.applyGroupSelectionStyle}),i.usageStatistics&&(Ue||(Ue=!0,ot()("image-editor","UA-129999381-1"))),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),L.fabric.enableGLFiltering=!1}return M(t,[{key:"_attachColorPickerInputBoxEvents",value:function(){var t=this;this.ui.on(Ae,(function(){t.isColorPickerInputBoxEditing=!0})),this.ui.on(ce,(function(){t.isColorPickerInputBoxEditing=!1}))}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Ae),this.ui.off(ce)}},{key:"_setSelectionStyle",value:function(t,e){var i=e.applyCropSelectionStyle,n=e.applyGroupSelectionStyle;t&&this._graphics.setSelectionStyle(t),i&&this._graphics.setCropSelectionStyle(t),n&&this.on("selectionCreated",(function(e){"activeSelection"===e.type&&e.set(t)}))}},{key:"_attachInvokerEvents",value:function(){var t,e,i=this,n=te,r=$t,o=ne,s=re,a=oe,A=se,c=ae;if(this._invoker.on(n,E()(t=this.fire).call(t,this,n)),this._invoker.on(r,E()(e=this.fire).call(e,this,r)),this.ui){var l=this._graphics.getCanvas();this._invoker.on(o,(function(t){return i.ui.fire(o,t)})),this._invoker.on(s,(function(t){return i.ui.fire(s,t)})),this._invoker.on(a,(function(t){return i.ui.fire(a,t)})),l.on(A,(function(){return i.ui.fire(A)})),l.on(c,(function(){return i.ui.fire(c)}))}}},{key:"_attachGraphicsEvents",value:function(){var t;this._graphics.on((_(t={},Go,this._handlers.mousedown),_(t,Wo,this._handlers.objectMoved),_(t,Yo,this._handlers.objectScaled),_(t,Ko,this._handlers.objectRotated),_(t,Xo,this._handlers.objectActivated),_(t,Vo,this._handlers.objectAdded),_(t,Zo,this._handlers.objectModified),_(t,Jo,this._handlers.addText),_(t,qo,this._handlers.addObject),_(t,$o,this._handlers.textEditing),_(t,ts,this._handlers.textChanged),_(t,es,this._handlers.iconCreateResize),_(t,is,this._handlers.iconCreateEnd),_(t,ns,this._handlers.selectionCleared),_(t,rs,this._handlers.selectionCreated),t))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(t){var e=t.ctrlKey,i=t.keyCode,n=t.metaKey;(e||n)&&(67===i?this._graphics.resetTargetObjectForCopyPaste():86===i?(this._graphics.pasteObject(),this.clearRedoStack()):90===i?this.undo().catch((function(){})):89===i&&this.redo().catch((function(){})));var r=8===i||46===i,o=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&o&&r&&(t.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var t=this._graphics.getActiveObjectIdForRemove();this.removeObject(t)}},{key:"_onMouseDown",value:function(t,e){this.fire(qt,t,e)}},{key:"_pushAddObjectCommand",value:function(t){var e=hi.create(Bt,this._graphics,t);this._invoker.pushUndoStack(e)}},{key:"_pushModifyObjectCommand",value:function(t){var e=this,i=t.type,n=Oo(t,(function(t){return Uo(e._graphics.getObjectId(t),t,"activeSelection"===i)})),r=hi.create(jt,this._graphics,n);r.execute(this._graphics,n),this._invoker.pushUndoStack(r)}},{key:"_onObjectActivated",value:function(t){this.fire(Ht,t)}},{key:"_onObjectMoved",value:function(t){this.fire(Nt,t)}},{key:"_onObjectScaled",value:function(t){this.fire(Rt,t)}},{key:"_onObjectRotated",value:function(t){this.fire(zt,t)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(yt)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(t){this._graphics.changeSelectableAll(t)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(t){for(var e,i,n,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];var a=F()(e=[this._graphics]).call(e,o);return(i=this._invoker).execute.apply(i,F()(n=[t]).call(n,B(a)))}},{key:"executeSilent",value:function(t){for(var e,i,n,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];var a=F()(e=[this._graphics]).call(e,o);return(i=this._invoker).executeSilent.apply(i,F()(n=[t]).call(n,B(a)))}},{key:"undo",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=O().resolve(),n=0;n<e;n+=1)i=i.then((function(){return t._invoker.undo()}));return i}},{key:"redo",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=O().resolve(),n=0;n<e;n+=1)i=i.then((function(){return t._invoker.redo()}));return i}},{key:"zoom",value:function(t){var e=t.x,i=t.y,n=t.zoomLevel;this._graphics.zoom({x:e,y:i},n)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(t,e){if(!t)return O().reject(Ce);var i=Q().createObjectURL(t);return e=e||t.name,this.loadImageFromURL(i,e).then((function(e){return Q().revokeObjectURL(t),e}))}},{key:"loadImageFromURL",value:function(t,e){return e&&t?this.execute(wt,e,t):O().reject(Ce)}},{key:"addImageObject",value:function(t){return t?this.execute(Ot,t):O().reject(Ce)}},{key:"startDrawingMode",value:function(t,e){return this._graphics.startDrawingMode(t,e)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(t){var e=this._graphics.getCroppedImageData(t);return e?this.loadImageFromURL(e.url,e.imageName):O().reject(Ce)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(t){this._graphics.setCropzoneRect(t)}},{key:"_flip",value:function(t){return this.execute(Ct,t)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(t,e,i){return i?this.executeSilent(bt,t,e):this.execute(bt,t,e)}},{key:"rotate",value:function(t,e){return this._rotate("rotate",t,e)}},{key:"setAngle",value:function(t,e){return this._rotate("setAngle",t,e)}},{key:"setBrush",value:function(t){this._graphics.setBrush(t)}},{key:"setDrawingShape",value:function(t,e){this._graphics.setDrawingShape(t,e)}},{key:"setDrawingIcon",value:function(t,e){this._graphics.setIconStyle(t,e)}},{key:"addShape",value:function(t,e){return e=e||{},this._setPositions(e),this.execute(Tt,t,e)}},{key:"changeShape",value:function(t,e,i){return this[i?"executeSilent":"execute"](Et,t,e)}},{key:"addText",value:function(t,e){return t=t||"",e=e||{},this.execute(kt,t,e)}},{key:"changeText",value:function(t,e){return e=e||"",this.execute(Ft,t,e)}},{key:"changeTextStyle",value:function(t,e,i){return this[i?"executeSilent":"execute"](Dt,t,e)}},{key:"_changeActivateMode",value:function(t){"ICON"!==t&&this.getDrawingMode()!==t&&this.startDrawingMode(t)}},{key:"_onTextChanged",value:function(t){this.fire(Xt,t)}},{key:"_onIconCreateResize",value:function(t){this.fire(Kt,t)}},{key:"_onIconCreateEnd",value:function(t){this.fire(Vt,t)}},{key:"_onTextEditing",value:function(){this.fire(Yt)}},{key:"_onAddText",value:function(t){this.fire(Zt,{originPosition:t.originPosition,clientPosition:t.clientPosition})}},{key:"_onAddObject",value:function(t){var e=this._graphics.getObject(t.id);this._invoker.fire(ne,ti(e.type)),this._pushAddObjectCommand(e)}},{key:"_onObjectAdded",value:function(t){this.fire(Vo,t),this.fire("addObjectAfter",t)}},{key:"_onObjectModified",value:function(t){"cropzone"!==t.type&&(this._invoker.fire(ne,ti(t.type)),this._pushModifyObjectCommand(t))}},{key:"_selectionCleared",value:function(){this.fire(ns)}},{key:"_selectionCreated",value:function(t){this.fire(rs,t)}},{key:"registerIcons",value:function(t){this._graphics.registerPaths(t)}},{key:"changeCursor",value:function(t){this._graphics.changeCursor(t)}},{key:"addIcon",value:function(t,e){return e=e||{},this._setPositions(e),this.execute(It,t,e)}},{key:"changeIconColor",value:function(t,e){return this.execute(Mt,t,e)}},{key:"removeObject",value:function(t){var e=this._graphics.getObject(t).type;return this.execute(xt,t,ti(e))}},{key:"hasFilter",value:function(t){return this._graphics.hasFilter(t)}},{key:"removeFilter",value:function(t){return this.execute(St,t)}},{key:"applyFilter",value:function(t,e,i){return this[i?"executeSilent":"execute"](_t,t,e)}},{key:"toDataURL",value:function(t){return this._graphics.toDataURL(t)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(t){return t?this.execute(Ut,t):O().reject(Ce)}},{key:"destroy",value:function(){var t=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),z()(this,(function(e,i){t[i]=null}),this)}},{key:"_setPositions",value:function(t){var e=this._graphics.getCenter();N()(t.left)&&(t.left=e.left),N()(t.top)&&(t.top=e.top)}},{key:"setObjectProperties",value:function(t,e){return this.execute(Qt,t,e)}},{key:"setObjectPropertiesQuietly",value:function(t,e){this._graphics.setObjectProperties(t,e)}},{key:"getObjectProperties",value:function(t,e){return this._graphics.getObject(t)?this._graphics.getObjectProperties(t,e):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(t,e,i){return this._graphics.getObjectPosition(t,e,i)}},{key:"setObjectPosition",value:function(t,e){return this.execute(Lt,t,e)}},{key:"resize",value:function(t){return this.execute(Pt,t)}}]),t}();Zn.mixin(os),W().mixin(os);var ss=os,as=mt.ICON,As={name:It,execute:function(t,e,i){var n=this;return t.getComponent(as).add(e,i).then((function(e){return n.undoData.object=t.getObject(e.id),e}))},undo:function(t){return t.remove(this.undoData.object),O().resolve()}};hi.register(As);var cs={name:Ot,execute:function(t,e){var i=this;return t.addImageObject(e).then((function(e){return i.undoData.object=t.getObject(e.id),e}))},undo:function(t){return t.remove(this.undoData.object),O().resolve()}};hi.register(cs);var ls={name:Bt,execute:function(t,e){return new(O())((function(i,n){t.contains(e)?n("The object is already added."):(t.add(e),i(e))}))},undo:function(t,e){return new(O())((function(i,n){t.contains(e)?(t.remove(e),i(e)):n(Be)}))}};hi.register(ls);var hs=mt.SHAPE,us={name:Tt,execute:function(t,e,i){var n=this;return t.getComponent(hs).add(e,i).then((function(e){var i=e.id;return n.undoData.object=t.getObject(i),e}))},undo:function(t){return t.remove(this.undoData.object),O().resolve()}};hi.register(us);var ds=mt.TEXT,fs={name:kt,execute:function(t,e,i){var n=this,r=t.getComponent(ds);if(this.undoData.object){var o=this.undoData.object;return new(O())((function(e,i){t.contains(o)?i(xe):(t.add(o),e(o))}))}return r.add(e,i).then((function(e){var i=e.id,r=t.getObject(i);return n.undoData.object=r,Do(Oo(r,(function(){return Uo(i,r,!1)}))),e}))},undo:function(t){return t.remove(this.undoData.object),O().resolve()}};hi.register(fs);var gs=mt.FILTER,ps=null,ms={name:_t,execute:function(t,e,i,n){var r=t.getComponent(gs);if("mask"===e){var o=t.getObject(i.maskObjId);if(!o||!o.isType("image"))return O().reject(Ce);P()(i,{mask:o}),t.remove(i.mask)}if(!this.isRedo){var s=function(t,e,i){var n={};return"mask"===t&&(n.object=i.mask),n.options=e,n}(e,r.getOptions(e),i);ps=this.setUndoData(s,ps,n)}return r.add(e,i)},undo:function(t,e){var i=t.getComponent(gs);if("mask"===e){var n=this.undoData.object;return t.add(n),t.setActiveObject(n),i.remove(e)}return this.undoData.options?i.add(e,this.undoData.options):i.remove(e)}};hi.register(ms);var vs=mt.ICON,ys={name:Mt,execute:function(t,e,i){var n=this;return new(O())((function(r,o){var s=t.getComponent(vs),a=t.getObject(e);a||o(Be),n.undoData.object=a,n.undoData.color=s.getColor(a),s.setColor(i,a),r()}))},undo:function(t){var e=t.getComponent(vs),i=this.undoData,n=i.object,r=i.color;return e.setColor(r,n),O().resolve()}};hi.register(ys);var ws=mt.SHAPE,Cs=null,bs={name:Et,execute:function(t,e,i,n){var r=t.getComponent(ws),o=t.getObject(e);if(!o)return O().reject(Be);if(!this.isRedo){var s=function(t,e){var i={object:e,options:{}};return tr()(t,(function(t,n){i.options[n]=e[n]})),i}(i,o);Cs=this.setUndoData(s,Cs,n)}return r.change(o,i)},undo:function(t){var e=t.getComponent(ws),i=this.undoData,n=i.object,r=i.options;return e.change(n,r)}};hi.register(bs);var Bs=mt.TEXT,xs={name:Ft,execute:function(t,e,i){var n=t.getComponent(Bs),r=t.getObject(e);return r?(this.undoData.object=r,this.undoData.text=n.getText(r),n.change(r,i)):O().reject(Be)},undo:function(t){var e=t.getComponent(Bs),i=this.undoData,n=i.object,r=i.text;return e.change(n,r)}};hi.register(xs);var _s=mt.TEXT,Ss=null,Is={name:Dt,execute:function(t,e,i,n){var r=t.getComponent(_s),o=t.getObject(e);if(!o)return O().reject(Be);if(!this.isRedo){var s=function(t,e){var i={object:e,styles:{}};return tr()(t,(function(t,n){var r=e[n];i.styles[n]=r})),i}(i,o);Ss=this.setUndoData(s,Ss,n)}return r.setStyle(o,i)},undo:function(t){var e=t.getComponent(_s),i=this.undoData,n=i.object,r=i.styles;return e.setStyle(n,r)}};hi.register(Is);var Ms={name:yt,execute:function(t){var e=this;return new(O())((function(i){e.undoData.objects=t.removeAll(),i()}))},undo:function(t){return t.add(this.undoData.objects),O().resolve()}};hi.register(Ms);var Ts=mt.FLIP,Es={name:Ct,execute:function(t,e){var i=t.getComponent(Ts);return this.undoData.setting=i.getCurrentSetting(),i[e]()},undo:function(t){return t.getComponent(Ts).set(this.undoData.setting)}};hi.register(Es);var ks=mt.IMAGE_LOADER,Fs={name:wt,execute:function(t,e,i){var n,r=t.getComponent(ks),o=r.getCanvasImage(),s=o?o.width:0,a=o?o.height:0,A=Kn()(n=t.removeAll(!0)).call(n,(function(t){return"cropzone"!==t.type}));return et()(A).call(A,(function(t){t.evented=!0})),this.undoData={name:r.getImageName(),image:o,objects:A},r.load(e,i).then((function(t){return{oldWidth:s,oldHeight:a,newWidth:t.width,newHeight:t.height}}))},undo:function(t){var e=t.getComponent(ks),i=this.undoData,n=i.objects,r=i.name,o=i.image;return t.removeAll(!0),t.add(n),e.load(r,o)}};hi.register(Fs);var Ds=mt.FILTER,Os={name:St,execute:function(t,e){var i=t.getComponent(Ds);return this.undoData.options=i.getOptions(e),i.remove(e)},undo:function(t,e){var i=t.getComponent(Ds),n=this.undoData.options;return i.add(e,n)}};hi.register(Os);var Us={name:xt,execute:function(t,e){var i=this;return new(O())((function(n,r){i.undoData.objects=t.removeObjectById(e),i.undoData.objects.length?n():r(Be)}))},undo:function(t){return t.add(this.undoData.objects),O().resolve()}};hi.register(Us);var Qs={name:Ut,execute:function(t,e){var i=this;return new(O())((function(n){i.undoData.size={width:t.cssMaxWidth,height:t.cssMaxHeight},t.setCssMaxDimension(e),t.adjustCanvasDimension(),n()}))},undo:function(t){return t.setCssMaxDimension(this.undoData.size),t.adjustCanvasDimension(),O().resolve()}};hi.register(Qs);var Ls=mt.ROTATION,js=null,Ps={name:bt,execute:function(t,e,i,n){var r=t.getComponent(Ls);if(!this.isRedo){var o=function(t){return{angle:t.getCurrentAngle()}}(r);js=this.setUndoData(o,js,n)}return r[e](i)},undo:function(t){var e=t.getComponent(Ls),i=Z(this.args,3),n=i[1],r=i[2];return"setAngle"===n?e[n](this.undoData.angle):e.rotate(-r)}};hi.register(Ps);var Hs={name:Qt,execute:function(t,e,i){var n=this,r=t.getObject(e);return r?(this.undoData.props={},tr()(i,(function(t,e){n.undoData.props[e]=r[e]})),t.setObjectProperties(e,i),O().resolve()):O().reject(Be)},undo:function(t,e){var i=this.undoData.props;return t.setObjectProperties(e,i),O().resolve()}};hi.register(Hs);var Ns={name:Lt,execute:function(t,e,i){return t.getObject(e)?(this.undoData.objectId=e,this.undoData.props=t.getObjectProperties(e,["left","top"]),t.setObjectPosition(e,i),t.renderAll(),O().resolve()):O().reject(Be)},undo:function(t){var e=this.undoData,i=e.objectId,n=e.props;return t.setObjectProperties(i,n),t.renderAll(),O().resolve()}};hi.register(Ns);var Rs={name:jt,execute:function(t,e){return this.isRedo?et()(e).call(e,(function(e){t.setObjectProperties(e.id,e)})):this.undoData=Fo,O().resolve()},undo:function(t){var e;return et()(e=this.undoData).call(e,(function(e){t.setObjectProperties(e.id,e)})),O().resolve()}};hi.register(Rs);var zs=mt.RESIZE,Gs={name:Pt,execute:function(t,e){var i=t.getComponent(zs),n=i.getOriginalDimensions();return n||(n=i.getCurrentDimensions()),this.undoData.dimensions=n,i.resize(e)},undo:function(t){return t.getComponent(zs).resize(this.undoData.dimensions)}};hi.register(Gs);var Ws=ss}(),r.default}()},t.exports=n(i(620))},620:t=>{var e;window,e=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist",i(i.s=33)}([function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,o,s=Object.prototype.hasOwnProperty;for(r=1,o=arguments.length;r<o;r+=1)for(n in i=arguments[r])s.call(i,n)&&(t[n]=i[n]);return t}},function(t,e,i){"use strict";t.exports=function(t){return t instanceof Array}},function(t,e,i){"use strict";var n=i(1),r=i(6),o=i(7);t.exports=function(t,e,i){n(t)?r(t,e,i):o(t,e,i)}},function(t,e,i){"use strict";t.exports=function(t){return void 0===t}},function(t,e,i){"use strict";var n=i(22),r=i(2),o=i(6),s=i(7),a=i(37),A=0,c={getLength:function(t){var e=0;return s(t,(function(){e+=1})),e},map:function(t,e,i){var n=[];return r(t,(function(){n.push(e.apply(i||null,arguments))})),n},filter:function(t,e,i){var n=[];return o(t,(function(t){e.apply(i||null,arguments)&&n.push(t)})),n},generateId:function(){return A+=1},isOldBrowser:n.msie&&n.version<9,sendHostName:function(){a("color-picker","UA-129987462-1")}};t.exports=c},function(t,e,i){"use strict";var n=i(1);t.exports=function(t,e,i){var r,o;if(i=i||0,!n(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);for(o=e.length,r=i;i>=0&&r<o;r+=1)if(e[r]===t)return r;return-1}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=0,r=t.length;for(i=i||null;n<r&&!1!==e.call(i,t[n],n,t);n+=1);}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n;for(n in i=i||null,t)if(t.hasOwnProperty(n)&&!1===e.call(i,t[n],n,t))break}},function(t,e,i){"use strict";var n=i(39),r=i(13),o=i(41),s=i(3),a=i(9),A=i(19),c=i(4);function l(t,e){var i=c.generateId();t=t||{},s(e)&&(e=a.appendHTMLElement("div")),n(e,"tui-view-"+i),this.id=i,this.container=e,this.childs=new A((function(t){return t.id})),this.parent=null}l.prototype.addChild=function(t,e){e&&e.call(t,this),t.parent=this,this.childs.add(t)},l.prototype.removeChild=function(t,e){var i=o(t)?this.childs.items[t]:t;e&&e.call(i,this),this.childs.remove(i.id)},l.prototype.render=function(){this.childs.each((function(t){t.render()}))},l.prototype.recursive=function(t,e){r(t)&&(e||t(this),this.childs.each((function(e){e.recursive(t)})))},l.prototype.resize=function(){for(var t=Array.prototype.slice.call(arguments),e=this.parent;e;)r(e._onResize)&&e._onResize.apply(e,t),e=e.parent},l.prototype._beforeDestroy=function(){},l.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},l.prototype.destroy=function(t){this.childs&&(this.childs.each((function(t){t.destroy(!0),t._destroy()})),this.childs.clear()),t||this._destroy()},l.prototype.getViewBound=function(){var t=this.container.getBoundingClientRect();return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},t.exports=l},function(t,e,i){"use strict";var n={appendHTMLElement:function(t,e,i){var n=document.createElement(t);return n.className=i||"",e?e.appendChild(n):document.body.appendChild(n),n}};t.exports=n},function(t,e,i){"use strict";var n=i(0),r=i(20),o=i(11),s=i(21),a=i(1),A=i(13),c=i(2),l=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){n(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var i={handler:t};return e&&(i.context=e),i},h.prototype._safeEvent=function(t){var e,i=this.events;return i||(i=this.events={}),t&&((e=i[t])||(e=[],i[t]=e),i=e),i},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){for(var e=this._safeContext(),i=0;e[i];){if(t===e[i][0])return i;i+=1}return-1},h.prototype._memorizeContext=function(t){var e,i;r(t)&&(e=this._safeContext(),(i=this._indexOfContext(t))>-1?e[i][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,i;r(t)&&(e=this._safeContext(),(i=this._indexOfContext(t))>-1&&(e[i][1]-=1,e[i][1]<=0&&e.splice(i,1)))},h.prototype._bindEvent=function(t,e,i){var n=this._safeEvent(t);this._memorizeContext(i),n.push(this._getHandlerItem(e,i))},h.prototype.on=function(t,e,i){var n=this;o(t)?(t=t.split(l),c(t,(function(t){n._bindEvent(t,e,i)}))):s(t)&&(i=e,c(t,(function(t,e){n.on(e,t,i)})))},h.prototype.once=function(t,e,i){var n=this;if(s(t))return i=e,void c(t,(function(t,e){n.once(e,t,i)}));this.on(t,(function r(){e.apply(i,arguments),n.off(t,r,i)}),i)},h.prototype._spliceMatches=function(t,e){var i,n=0;if(a(t))for(i=t.length;n<i;n+=1)!0===e(t[n])&&(t.splice(n,1),i-=1,n-=1)},h.prototype._matchHandler=function(t){var e=this;return function(i){var n=t===i.handler;return n&&e._forgetContext(i.context),n}},h.prototype._matchContext=function(t){var e=this;return function(i){var n=t===i.context;return n&&e._forgetContext(i.context),n}},h.prototype._matchHandlerAndContext=function(t,e){var i=this;return function(n){var r=t===n.handler,o=e===n.context,s=r&&o;return s&&i._forgetContext(n.context),s}},h.prototype._offByEventName=function(t,e){var i=this,n=A(e),r=i._matchHandler(e);t=t.split(l),c(t,(function(t){var e=i._safeEvent(t);n?i._spliceMatches(e,r):(c(e,(function(t){i._forgetContext(t.context)})),i.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,i=this._matchHandler(t);c(this._safeEvent(),(function(t){e._spliceMatches(t,i)}))},h.prototype._offByObject=function(t,e){var i,n=this;this._indexOfContext(t)<0?c(t,(function(t,e){n.off(e,t)})):o(e)?(i=this._matchContext(t),n._spliceMatches(this._safeEvent(e),i)):A(e)?(i=this._matchHandlerAndContext(e,t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)}))):(i=this._matchContext(t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)})))},h.prototype.off=function(t,e){o(t)?this._offByEventName(t,e):arguments.length?A(t)?this._offByHandler(t):s(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,i,n,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),i=Array.prototype.slice.call(arguments,1),n=0;e[n];){if(!1===(r=e[n]).handler.apply(r.context,i))return!1;n+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=h},function(t,e,i){"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},function(t,e,i){"use strict";var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,r={leadingZero:function(t,e){var i="",n=0;if((t+"").length>e)return t+"";for(;n<e-1;n+=1)i+="0";return(i+t).slice(-1*e)},isValidRGB:function(t){return n.test(t)},hexToRGB:function(t){return!!r.isValidRGB(t)&&(t=t.substring(1),[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)])},rgbToHEX:function(t,e,i){var n="#"+r.leadingZero(t.toString(16),2)+r.leadingZero(e.toString(16),2)+r.leadingZero(i.toString(16),2);return!!r.isValidRGB(n)&&n},rgbToHSV:function(t,e,i){var n,r,o,s,a,A;if(t/=255,e/=255,i/=255,a=n=Math.max(t,e,i),A=n-(r=Math.min(t,e,i)),s=0===n?0:A/n,n===r)o=0;else{switch(n){case t:o=(e-i)/A+(e<i?6:0);break;case e:o=(i-t)/A+2;break;case i:o=(t-e)/A+4}o/=6}return[Math.round(360*o),Math.round(100*s),Math.round(100*a)]},hsvToRGB:function(t,e,i){var n,r,o,s,a,A,c,l;if(t=Math.max(0,Math.min(360,t)),e=Math.max(0,Math.min(100,e)),i=Math.max(0,Math.min(100,i)),i/=100,0==(e/=100))return n=r=o=i,[Math.round(255*n),Math.round(255*r),Math.round(255*o)];switch(A=i*(1-e),c=i*(1-e*(a=(t/=60)-(s=Math.floor(t)))),l=i*(1-e*(1-a)),s){case 0:n=i,r=l,o=A;break;case 1:n=c,r=i,o=A;break;case 2:n=A,r=i,o=l;break;case 3:n=A,r=c,o=i;break;case 4:n=l,r=A,o=i;break;default:n=i,r=A,o=c}return[Math.round(255*n),Math.round(255*r),Math.round(255*o)]}};t.exports=r},function(t,e,i){"use strict";t.exports=function(t){return t instanceof Function}},function(t,e,i){"use strict";var n=i(11),r=i(2),o=i(26);function s(t,e,i,n){function s(e){i.call(n||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,s):"attachEvent"in t&&t.attachEvent("on"+e,s),function(t,e,i,n){var s=o(t,e),a=!1;r(s,(function(t){return t.handler!==i||(a=!0,!1)})),a||s.push({handler:i,wrappedHandler:n})}(t,e,i,s)}t.exports=function(t,e,i,o){n(e)?r(e.split(/\s+/g),(function(e){s(t,e,i,o)})):r(e,(function(e,n){s(t,n,e,i)}))}},function(t,e,i){"use strict";t.exports=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},function(t,e,i){"use strict";t.exports=function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}},function(t,e,i){"use strict";var n=i(11),r=i(2),o=i(26);function s(t,e,i){var n,s=o(t,e);i?(r(s,(function(r,o){return i!==r.handler||(a(t,e,r.wrappedHandler),n=o,!1)})),s.splice(n,1)):(r(s,(function(i){a(t,e,i.wrappedHandler)})),s.splice(0,s.length))}function a(t,e,i){"removeEventListener"in t?t.removeEventListener(e,i):"detachEvent"in t&&t.detachEvent("on"+e,i)}t.exports=function(t,e,i){n(e)?r(e.split(/\s+/g),(function(e){s(t,e,i)})):r(e,(function(e,i){s(t,i,e)}))}},function(t,e,i){"use strict";var n=i(50);t.exports=function(t,e){var i=n(e.prototype);i.constructor=t,t.prototype=i}},function(t,e,i){"use strict";var n=i(6),r=i(7),o=i(0),s=i(1),a=i(20),A=i(13),c=i(21),l=i(4),h=Array.prototype.slice;function u(t){this.items={},this.length=0,A(t)&&(this.getItemID=t)}u.and=function(t){var e;return t=h.call(arguments),e=t.length,function(i){for(var n=0;n<e;n+=1)if(!t[n].call(null,i))return!1;return!0}},u.or=function(t){var e;return t=h.call(arguments),e=t.length,function(i){for(var n=1,r=t[0].call(null,i);n<e;n+=1)r=r||t[n].call(null,i);return r}},u.merge=function(t){var e={},i=new u(t.getItemID);return n(arguments,(function(t){o(e,t.items)})),i.items=e,i.length=l.getLength(i.items),i},u.prototype.getItemID=function(t){return t._id+""},u.prototype.add=function(t){var e,i;arguments.length>1?n(h.call(arguments),(function(t){this.add(t)}),this):(e=this.getItemID(t),(i=this.items)[e]||(this.length+=1),i[e]=t)},u.prototype.remove=function(t){var e,i,n=[];return this.length?arguments.length>1?(n=l.map(h.call(arguments),(function(t){return this.remove(t)}),this),n):(e=this.items,c(t)&&(t=this.getItemID(t)),e[t]?(this.length-=1,i=e[t],delete e[t],i):n):n},u.prototype.clear=function(){this.items={},this.length=0},u.prototype.has=function(t){var e,i;return!!this.length&&(e=A(t),i=!1,e?this.each((function(e){return!0!==t(e)||(i=!0,!1)})):(t=c(t)?this.getItemID(t):t,i=a(this.items[t])),i)},u.prototype.doWhenHas=function(t,e,i){var n=this.items[t];a(n)&&e.call(i||this,n)},u.prototype.find=function(t){var e=new u;return this.hasOwnProperty("getItemID")&&(e.getItemID=this.getItemID),this.each((function(i){!0===t(i)&&e.add(i)})),e},u.prototype.groupBy=function(t,e){var i,r,o={},a=A(t),c=this.getItemID;if(s(t)){if(n(t,(function(t){o[t+""]=new u(c)})),!e)return o;t=e,a=!0}return this.each((function(e){a?r=t(e):(r=e[t],A(r)&&(r=r.apply(e))),(i=o[r])||(i=o[r]=new u(c)),i.add(e)})),o},u.prototype.single=function(){var t;return this.each((function(e){return t=e,!1}),this),t},u.prototype.sort=function(t){var e=[];return this.each((function(t){e.push(t)})),A(t)&&(e=e.sort(t)),e},u.prototype.each=function(t,e){r(this.items,t,e||this)},u.prototype.toArray=function(){return this.length?l.map(this.items,(function(t){return t})):[]},t.exports=u},function(t,e,i){"use strict";var n=i(3),r=i(36);t.exports=function(t){return!n(t)&&!r(t)}},function(t,e,i){"use strict";t.exports=function(t){return t===Object(t)}},function(t,e,i){"use strict";var n,r,o,s,a,A,c,l,h,u,d={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};"undefined"!=typeof window&&window.navigator&&(s=(o=window.navigator).appName.replace(/\s/g,"_"),a=o.userAgent,A=/MSIE\s([0-9]+[.0-9]*)/,c=/Trident.*rv:11\./,l=/Edge\/(\d+)\./,h={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},(u={Microsoft_Internet_Explorer:function(){var t=a.match(A);t?(d.msie=!0,d.version=parseFloat(t[1])):d.others=!0},Netscape:function(){var t=!1;if(c.exec(a))d.msie=!0,d.version=11,t=!0;else if(l.exec(a))d.edge=!0,d.version=a.match(l)[1],t=!0;else for(n in h)if(h.hasOwnProperty(n)&&(r=a.match(h[n]))&&r.length>1){d[n]=t=!0,d.version=parseFloat(r[1]||0);break}t||(d.others=!0)}})[s]&&u[s]()),t.exports=d},function(t,e,i){"use strict";var n=i(3);t.exports=function(t){return t&&t.className?n(t.className.baseVal)?t.className:t.className.baseVal:""}},function(t,e,i){"use strict";(function(e){var n=i(10),r=i(42),o=i(44),s=i(47),a=i(28),A=i(17),c=i(14),l=i(15),h=i(0);function u(t,e){c(e,"mousedown",this._onMouseDown,this),this.options=h({distance:10},t),this.container=e,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}u.prototype.destroy=function(){A(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},u.prototype._toggleDragEvent=function(t){var i=this.container;t?(r(i),c(window,"dragstart",l),c(e.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(o(i),A(window,"dragstart",l),A(e.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},u.prototype._getEventData=function(t){return{target:a(t),originEvent:t}},u.prototype._onMouseDown=function(t){0===s(t)&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(t),this._toggleDragEvent(!0))},u.prototype._onMouseMove=function(t){var e=this.options.distance;l(t),this._isMoved=!0,this._distance<e?this._distance+=1:this._dragStartFired||(this._dragStartFired=!0,this.invoke("dragStart",this._dragStartEventData))?this.fire("drag",this._getEventData(t)):this._toggleDragEvent(!1)},u.prototype._onMouseUp=function(t){if(this._toggleDragEvent(!1),this._isMoved)return this._isMoved=!1,void this.fire("dragEnd",this._getEventData(t));this.fire("click",this._getEventData(t))},n.mixin(u),t.exports=u}).call(this,i(25))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n="_feEventKey";t.exports=function(t,e){var i,r=t[n];return r||(r=t[n]={}),(i=r[e])||(i=r[e]=[]),i}},function(t,e,i){"use strict";t.exports=function(t){var e,i,n=document.documentElement.style;for(e=0,i=t.length;e<i;e+=1)if(t[e]in n)return t[e];return!1}},function(t,e,i){"use strict";t.exports=function(t){return t.target||t.srcElement}},function(t,e,i){"use strict";var n=i(10),r=i(28),o=i(17),s=i(14),a=i(30),A=i(0),c=i(18),l=i(9),h=i(12),u=i(8),d=i(51);function f(t,e){this.options=A({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},t),e=l.appendHTMLElement("div",e,this.options.cssPrefix+"palette-container"),u.call(this,t,e)}c(f,u),f.prototype._onClick=function(t){var e=this.options,i=r(t),n={};if(a(i,e.cssPrefix+"palette-button"))return n.color=i.value,void this.fire("_selectColor",n);a(i,e.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},f.prototype._onChange=function(t){var e=this.options,i=r(t),n={};a(i,e.cssPrefix+"palette-hex")&&(n.color=i.value,this.fire("_selectColor",n))},f.prototype._beforeDestroy=function(){this._toggleEvent(!1)},f.prototype._toggleEvent=function(t){var e,i=this.options,n=this.container,r=t?s:o;r(n,"click",this._onClick,this),(e=n.querySelector("."+i.cssPrefix+"palette-hex",n))&&r(e,"change",this._onChange,this)},f.prototype.render=function(t){var e,i=this.options;this._toggleEvent(!1),e=d({cssPrefix:i.cssPrefix,preset:i.preset,detailTxt:i.detailTxt,color:t,isValidRGB:h.isValidRGB,getItemClass:function(t){return t?"":" "+i.cssPrefix+"color-transparent"},isSelected:function(e){return e===t?" "+i.cssPrefix+"selected":""}}),this.container.innerHTML=e,this._toggleEvent(!0)},n.mixin(f),t.exports=f},function(t,e,i){"use strict";var n=i(5),r=i(23);t.exports=function(t,e){var i;return t.classList?t.classList.contains(e):(i=r(t).split(/\s+/),n(e,i)>-1)}},function(t,e,i){"use strict";var n=i(10),r=i(53),o=i(54),s=i(30),a=i(0),A=i(18),c=i(9),l=i(32),h=i(12),u=i(8),d=i(24),f=i(57),g=359.99;function p(t,e){(e=c.appendHTMLElement("div",e,t.cssPrefix+"slider-container")).style.display="none",u.call(this,t,e),this.options=a({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},t),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new d({distance:0},e),this.colorSliderPosLimitRange=[-7,112],this.huebarPosLimitRange=[-3,115],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}A(p,u),p.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},p.prototype.toggle=function(t){this.container.style.display=t?"block":"none"},p.prototype.isVisible=function(){return"block"===this.container.style.display},p.prototype.render=function(t){var e,i,n=this.container,r=this.options,o=f.layout;h.isValidRGB(t)&&(o=(o=(o=(o=o.replace(/{{slider}}/,f.slider)).replace(/{{huebar}}/,f.huebar)).replace(/{{cssPrefix}}/g,r.cssPrefix)).replace(/{{id}}/g,r.id),this.container.innerHTML=o,this.sliderSvgElement=n.querySelector("."+r.cssPrefix+"svg-slider"),this.huebarSvgElement=n.querySelector("."+r.cssPrefix+"svg-huebar"),this.sliderHandleElement=n.querySelector("."+r.cssPrefix+"slider-handle"),this.huebarHandleElement=n.querySelector("."+r.cssPrefix+"huebar-handle"),this.baseColorElement=n.querySelector("."+r.cssPrefix+"slider-basecolor"),e=h.hexToRGB(t),i=h.rgbToHSV.apply(null,e),this.moveHue(i[0],!0),this.moveSaturationAndValue(i[1],i[2],!0))},p.prototype._setColorSliderPosMax=function(){var t=this.sliderSvgElement.getClientRects()[0];t&&(this.colorSliderPosLimitRange[1]=t.height-10)},p.prototype._moveColorSliderHandle=function(t,e,i){var n,r=this.sliderHandleElement;e=Math.max(this.colorSliderPosLimitRange[0],e),e=Math.min(this.colorSliderPosLimitRange[1],e),t=Math.max(this.colorSliderPosLimitRange[0],t),t=Math.min(this.colorSliderPosLimitRange[1],t),l.setTranslateXY(r,t,e),n=e>50?"white":"black",l.setStrokeColor(r,n),i||this.fire("_selectColor",{color:h.rgbToHEX.apply(null,this.getRGB())})},p.prototype.moveSaturationAndValue=function(t,e,i){var n,r,o,s;t=t||0,e=e||0,n=Math.abs(this.colorSliderPosLimitRange[0]),o=t*(r=this.colorSliderPosLimitRange[1])/100-n,s=r-e*r/100-n,this._moveColorSliderHandle(o,s,i)},p.prototype._moveColorSliderByPosition=function(t,e){var i=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(t+i,e+i)},p.prototype.getSaturationAndValue=function(){var t=Math.abs(this.colorSliderPosLimitRange[0]),e=t+this.colorSliderPosLimitRange[1],i=l.getTranslateXY(this.sliderHandleElement);return[(i[1]+t)/e*100,100-(i[0]+t)/e*100]},p.prototype._setHueBarPosMax=function(){var t=this.huebarSvgElement.getClientRects()[0];t&&(this.huebarPosLimitRange[1]=t.height-7)},p.prototype._moveHueHandle=function(t,e){var i,n,r=this.huebarHandleElement,o=this.baseColorElement;t=Math.max(this.huebarPosLimitRange[0],t),t=Math.min(this.huebarPosLimitRange[1],t),l.setTranslateY(r,t),i=h.hsvToRGB(this.getHue(),100,100),n=h.rgbToHEX.apply(null,i),l.setGradientColorStop(o,n),e||this.fire("_selectColor",{color:h.rgbToHEX.apply(null,this.getRGB())})},p.prototype.moveHue=function(t,e){var i,n;i=((n=Math.abs(this.huebarPosLimitRange[0]))+this.huebarPosLimitRange[1])*(t=t||0)/g-n,this._moveHueHandle(i,e)},p.prototype._moveHueByPosition=function(t){var e=this.huebarPosLimitRange[0];this._moveHueHandle(t+e)},p.prototype.getHue=function(){var t,e,i=this.huebarHandleElement,n=l.getTranslateXY(i);return e=(t=Math.abs(this.huebarPosLimitRange[0]))+this.huebarPosLimitRange[1],(n[0]+t)*g/e},p.prototype.getHSV=function(){var t=this.getSaturationAndValue();return[this.getHue()].concat(t)},p.prototype.getRGB=function(){return h.hsvToRGB.apply(null,this.getHSV())},p.prototype._prepareColorSliderForMouseEvent=function(t){var e=this.options,i=o(t.target,"."+e.cssPrefix+"slider-part");return this._dragDataCache={isColorSlider:s(i,e.cssPrefix+"slider-left"),parentElement:i}},p.prototype._onClick=function(t){var e=this._prepareColorSliderForMouseEvent(t),i=r(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1]),this._dragDataCache=null},p.prototype._onDragStart=function(t){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(t)},p.prototype._onDrag=function(t){var e=this._dragDataCache,i=r(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1])},p.prototype._onDragEnd=function(){this._dragDataCache=null},n.mixin(p),t.exports=p},function(t,e,i){"use strict";var n=i(4).isOldBrowser,r=/[\.\-0-9]+/g,o={getTranslateXY:function(t){var e;return n?(e=t.style,[parseFloat(e.top),parseFloat(e.left)]):(e=t.getAttribute("transform"))?(e=e.match(r),[parseFloat(e[1]),parseFloat(e[0])]):[0,0]},setTranslateXY:function(t,e,i){n?(t.style.left=e+"px",t.style.top=i+"px"):t.setAttribute("transform","translate("+e+","+i+")")},setTranslateY:function(t,e){n?t.style.top=e+"px":t.setAttribute("transform","translate(-6,"+e+")")},setStrokeColor:function(t,e){n?t.strokecolor=e:t.setAttribute("stroke",e)},setGradientColorStop:function(t,e){n?t.color=e:t.setAttribute("stop-color",e)}};t.exports=o},function(t,e,i){i(34),t.exports=i(35)},function(t,e,i){},function(t,e,i){"use strict";var n={Collection:i(19),View:i(8),Drag:i(24),create:i(48),Palette:i(29),Slider:i(31),colorutil:i(12),svgvml:i(32)};t.exports=n},function(t,e,i){"use strict";t.exports=function(t){return null===t}},function(t,e,i){"use strict";var n=i(3),r=i(38);t.exports=function(t,e){var i=location.hostname,o="TOAST UI "+t+" for "+i+": Statistics",s=window.localStorage.getItem(o);(n(window.tui)||!1!==window.tui.usageStatistics)&&(s&&!function(t){return(new Date).getTime()-t>6048e5}(s)||(window.localStorage.setItem(o,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||r("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:i,dp:i,dh:t,el:t,ec:"use"})}),1e3)))}},function(t,e,i){"use strict";var n=i(7);t.exports=function(t,e){var i=document.createElement("img"),r="";return n(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),i.src=t+"?"+r,i.style.display="none",document.body.appendChild(i),document.body.removeChild(i),i}},function(t,e,i){"use strict";var n=i(2),r=i(5),o=i(23),s=i(40);t.exports=function(t){var e,i=Array.prototype.slice.call(arguments,1),a=t.classList,A=[];a?n(i,(function(e){t.classList.add(e)})):((e=o(t))&&(i=[].concat(e.split(/\s+/),i)),n(i,(function(t){r(t,A)<0&&A.push(t)})),s(t,A))}},function(t,e,i){"use strict";var n=i(1),r=i(3);t.exports=function(t,e){e=(e=n(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),r(t.className.baseVal)?t.className=e:t.className.baseVal=e}},function(t,e,i){"use strict";t.exports=function(t){return"number"==typeof t||t instanceof Number}},function(t,e,i){"use strict";var n=i(14),r=i(15),o=i(43),s=i(27),a="onselectstart"in document,A=s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);t.exports=function(t){t||(t=document),a?n(t,"selectstart",r):(t=t===document?document.documentElement:t,o(t,"prevUserSelect",t.style[A]),t.style[A]="none")}},function(t,e,i){"use strict";var n=i(16);t.exports=function(t,e,i){t.dataset?t.dataset[e]=i:t.setAttribute("data-"+n(e),i)}},function(t,e,i){"use strict";var n=i(17),r=i(15),o=i(45),s=i(46),a=i(27),A="onselectstart"in document,c="prevUserSelect",l=a(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);t.exports=function(t){t||(t=document),A?n(t,"selectstart",r):((t=t===document?document.documentElement:t).style[l]=o(t,c)||"auto",s(t,c))}},function(t,e,i){"use strict";var n=i(16);t.exports=function(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+n(e))}},function(t,e,i){"use strict";var n=i(16);t.exports=function(t,e){t.dataset?delete t.dataset[e]:t.removeAttribute("data-"+n(e))}},function(t,e,i){"use strict";var n=i(22),r=i(5),o=["0","1","3","5","7"],s=["2","6"],a=["4"];t.exports=function(t){return n.msie&&n.version<=8?function(t){var e=String(t.button);return r(e,o)>-1?0:r(e,s)>-1?2:r(e,a)>-1?1:null}(t):t.button}},function(t,e,i){"use strict";var n=i(10),r=i(0),o=i(4),s=i(12),a=i(49),A=i(29),c=i(31),l=0;function h(t){var e;if(!(this instanceof h))return new h(t);if(!(t=this.options=r({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:l+=1,usageStatistics:!0},t)).container)throw new Error("ColorPicker(): need container option.");e=this.layout=new a(t,t.container),this.palette=new A(t,e.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new c(t,e.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),e.addChild(this.palette),e.addChild(this.slider),this.render(t.color),t.usageStatistics&&o.sendHostName()}h.prototype._onSelectColorInPalette=function(t){var e=t.color,i=this.options;s.isValidRGB(e)||""===e?(this.fire("selectColor",{color:e,origin:"palette"}),i.color!==e&&(i.color=e,this.render(e))):this.render()},h.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},h.prototype._onSelectColorInSlider=function(t){var e=t.color,i=this.options;this.fire("selectColor",{color:e,origin:"slider"}),i.color!==e&&(i.color=e,this.palette.render(e))},h.prototype.setColor=function(t){if(!s.isValidRGB(t))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=t,this.render(t)},h.prototype.getColor=function(){return this.options.color},h.prototype.toggle=function(t){this.layout.container.style.display=t?"block":"none"},h.prototype.render=function(t){this.layout.render(t||this.options.color)},h.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},n.mixin(h),t.exports=h},function(t,e,i){"use strict";var n=i(0),r=i(18),o=i(9),s=i(8);function a(t,e){this.options=n({cssPrefix:"tui-colorpicker-"},t),e=o.appendHTMLElement("div",e,this.options.cssPrefix+"container"),s.call(this,t,e),this.render()}r(a,s),a.prototype.render=function(t){this.recursive((function(e){e.render(t)}),!0)},t.exports=a},function(t,e,i){"use strict";t.exports=function(t){function e(){}return e.prototype=t,new e}},function(t,e,i){"use strict";var n=i(52);t.exports=function(t){var e=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join("\n");return n(e,t)}},function(t,e,i){"use strict";var n=i(5),r=i(2),o=i(1),s=i(11),a=i(0),A=/{{\s?|\s?}}/g,c=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,l=/\[\s?|\s?\]/,h=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,u=/\./,d=/^["']\w+["']$/,f=/"|'/g,g=/^-?\d+\.?\d*$/,p={if:function(t,e,i){var n=function(t,e){var i=[t],n=[],o=0,s=0;return r(e,(function(t,r){0===t.indexOf("if")?o+=1:"/if"===t?o-=1:o||0!==t.indexOf("elseif")&&"else"!==t||(i.push("else"===t?["true"]:t.split(" ").slice(1)),n.push(e.slice(s,r)),s=r+1)})),n.push(e.slice(s)),{exps:i,sourcesInsideIf:n}}(t,e),o=!1,s="";return r(n.exps,(function(t,e){return(o=w(t,i))&&(s=C(n.sourcesInsideIf[e],i)),!o})),s},each:function(t,e,i){var n=w(t,i),s=o(n)?"@index":"@key",A={},c="";return r(n,(function(t,n){A[s]=n,A["@this"]=t,a(i,A),c+=C(e.slice(),i)})),c},with:function(t,e,i){var r=n("as",t),o=t[r+1],s=w(t.slice(0,r),i),A={};return A[o]=s,C(e,a(i,A))||""}},m=3==="a".split(/a/).length?function(t,e){return t.split(e)}:function(t,e){var i,n,r=[],o=0;for(e.global||(e=new RegExp(e,"g")),i=e.exec(t);null!==i;)n=i.index,r.push(t.slice(o,n)),o=n+i[0].length,i=e.exec(t);return r.push(t.slice(o)),r};function v(t,e){var i,n=e[t];return"true"===t?n=!0:"false"===t?n=!1:d.test(t)?n=t.replace(f,""):c.test(t)?n=v((i=t.split(l))[0],e)[v(i[1],e)]:h.test(t)?n=v((i=t.split(u))[0],e)[i[1]]:g.test(t)&&(n=parseFloat(t)),n}function y(t,e,i){for(var n,r,o,a=p[t],A=1,c=2,l=e[c];A&&s(l);)0===l.indexOf(t)?A+=1:0===l.indexOf("/"+t)&&(A-=1,n=c),l=e[c+=2];if(A)throw Error(t+" needs {{/"+t+"}} expression.");return e[0]=a(e[0].split(" ").slice(1),(r=n,(o=e.splice(1,r-0)).pop(),o),i),e}function w(t,e){var i=v(t[0],e);return i instanceof Function?function(t,e,i){var n=[];return r(e,(function(t){n.push(v(t,i))})),t.apply(null,n)}(i,t.slice(1),e):i}function C(t,e){for(var i,n,r,o=1,a=t[o];s(a);)n=(i=a.split(" "))[0],p[n]?(r=y(n,t.splice(o,t.length-o),e),t=t.concat(r)):t[o]=w(i,e),a=t[o+=2];return t.join("")}t.exports=function(t,e){return C(m(t,A),e)}},function(t,e,i){"use strict";var n=i(1);t.exports=function(t,e){var i,r=n(t),o=r?t[0]:t.clientX,s=r?t[1]:t.clientY;return e?[o-(i=e.getBoundingClientRect()).left-e.clientLeft,s-i.top-e.clientTop]:[o,s]}},function(t,e,i){"use strict";var n=i(55);t.exports=function(t,e){var i=t.parentNode;if(n(t,e))return t;for(;i&&i!==document;){if(n(i,e))return i;i=i.parentNode}return null}},function(t,e,i){"use strict";var n=i(5),r=i(56),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return n(this,r(e.querySelectorAll(t)))>-1};t.exports=function(t,e){return s.call(t,e)}},function(t,e,i){"use strict";var n=i(6);t.exports=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(i){e=[],n(t,(function(t){e.push(t)}))}return e}},function(t,e,i){"use strict";(function(e){var n=i(4).isOldBrowser,r=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join("\n"),o=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join("\n"),s=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join("\n"),a=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join("\n"),A=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join("\n");n&&e.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),t.exports={layout:r,slider:n?s:o,huebar:n?A:a}}).call(this,i(25))}])},t.exports=e()},692:function(t,e){var i;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,A=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,l=o.indexOf,h={},u=h.toString,d=h.hasOwnProperty,f=d.toString,g=f.call(Object),p={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},y=n.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function C(t,e,i){var n,r,o=(i=i||y).createElement("script");if(o.text=t,e)for(n in w)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[u.call(t)]||"object":typeof t}var B="3.7.1",x=/HTML$/i,_=function(t,e){return new _.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!m(t)&&!v(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}_.fn=_.prototype={jquery:B,constructor:_,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=_.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return _.each(this,t)},map:function(t){return this.pushStack(_.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(_.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},_.extend=_.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,A=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===A&&(s=this,a--);a<A;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&s!==n&&(c&&n&&(_.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[e],o=r&&!Array.isArray(i)?[]:r||_.isPlainObject(i)?i:{},r=!1,s[e]=_.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},_.extend({expando:"jQuery"+(B+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==u.call(t)||(e=s(t))&&("function"!=typeof(i=d.call(e,"constructor")&&e.constructor)||f.call(i)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){C(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(S(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},text:function(t){var e,i="",n=0,r=t.nodeType;if(!r)for(;e=t[n++];)i+=_.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:i},makeArray:function(t,e){var i=e||[];return null!=t&&(S(Object(t))?_.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:l.call(e,t,i)},isXMLDoc:function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!x.test(e||i&&i.nodeName||"HTML")},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,s=!i;r<o;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,s=[];if(S(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&s.push(r);return A(s)},guid:1,support:p}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=o[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var M=o.pop,T=o.sort,E=o.splice,k="[\\x20\\t\\r\\n\\f]",F=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");_.contains=function(t,e){var i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(t.contains?t.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}_.escapeSelector=function(t){return(t+"").replace(D,O)};var U=y,Q=c;!function(){var t,e,i,r,s,A,c,h,u,f,g=Q,m=_.expando,v=0,y=0,w=tt(),C=tt(),b=tt(),B=tt(),x=function(t,e){return t===e&&(s=!0),0},S="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",O="\\["+k+"*("+D+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+k+"*\\]",L=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",j=new RegExp(k+"+","g"),P=new RegExp("^"+k+"*,"+k+"*"),H=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),N=new RegExp(k+"|>"),R=new RegExp(L),z=new RegExp("^"+D+"$"),G={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+S+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,V=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},J=function(){At()},q=ut((function(t){return!0===t.disabled&&I(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(o=a.call(U.childNodes),U.childNodes),o[U.childNodes.length].nodeType}catch(t){g={apply:function(t,e){Q.apply(t,a.call(e))},call:function(t){Q.apply(t,a.call(arguments,1))}}}function $(t,e,i,n){var r,o,s,a,c,l,d,f=e&&e.ownerDocument,v=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return i;if(!n&&(At(e),e=e||A,h)){if(11!==v&&(c=X.exec(t)))if(r=c[1]){if(9===v){if(!(s=e.getElementById(r)))return i;if(s.id===r)return g.call(i,s),i}else if(f&&(s=f.getElementById(r))&&$.contains(e,s)&&s.id===r)return g.call(i,s),i}else{if(c[2])return g.apply(i,e.getElementsByTagName(t)),i;if((r=c[3])&&e.getElementsByClassName)return g.apply(i,e.getElementsByClassName(r)),i}if(!(B[t+" "]||u&&u.test(t))){if(d=t,f=e,1===v&&(N.test(t)||H.test(t))){for((f=K.test(t)&&at(e.parentNode)||e)==e&&p.scope||((a=e.getAttribute("id"))?a=_.escapeSelector(a):e.setAttribute("id",a=m)),o=(l=lt(t)).length;o--;)l[o]=(a?"#"+a:":scope")+" "+ht(l[o]);d=l.join(",")}try{return g.apply(i,f.querySelectorAll(d)),i}catch(e){B(t,!0)}finally{a===m&&e.removeAttribute("id")}}}return vt(t.replace(F,"$1"),e,i,n)}function tt(){var t=[];return function i(n,r){return t.push(n+" ")>e.cacheLength&&delete i[t.shift()],i[n+" "]=r}}function et(t){return t[m]=!0,t}function it(t){var e=A.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function nt(t){return function(e){return I(e,"input")&&e.type===t}}function rt(t){return function(e){return(I(e,"input")||I(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&q(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et((function(e){return e=+e,et((function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function At(t){var i,n=t?t.ownerDocument||t:U;return n!=A&&9===n.nodeType&&n.documentElement?(c=(A=n).documentElement,h=!_.isXMLDoc(A),f=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&U!=A&&(i=A.defaultView)&&i.top!==i&&i.addEventListener("unload",J),p.getById=it((function(t){return c.appendChild(t).id=_.expando,!A.getElementsByName||!A.getElementsByName(_.expando).length})),p.disconnectedMatch=it((function(t){return f.call(t,"*")})),p.scope=it((function(){return A.querySelectorAll(":scope")})),p.cssHas=it((function(){try{return A.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),p.getById?(e.filter.ID=function(t){var e=t.replace(V,Z);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var i=e.getElementById(t);return i?[i]:[]}}):(e.filter.ID=function(t){var e=t.replace(V,Z);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},u=[],it((function(t){var e;c.appendChild(t).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||u.push("\\["+k+"*(?:value|"+S+")"),t.querySelectorAll("[id~="+m+"-]").length||u.push("~="),t.querySelectorAll("a#"+m+"+*").length||u.push(".#.+[+~]"),t.querySelectorAll(":checked").length||u.push(":checked"),(e=A.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&u.push(":enabled",":disabled"),(e=A.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||u.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")})),p.cssHas||u.push(":has"),u=u.length&&new RegExp(u.join("|")),x=function(t,e){if(t===e)return s=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===i?t===A||t.ownerDocument==U&&$.contains(U,t)?-1:e===A||e.ownerDocument==U&&$.contains(U,e)?1:r?l.call(r,t)-l.call(r,e):0:4&i?-1:1)},A):A}for(t in $.matches=function(t,e){return $(t,null,null,e)},$.matchesSelector=function(t,e){if(At(t),h&&!B[e+" "]&&(!u||!u.test(e)))try{var i=f.call(t,e);if(i||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){B(e,!0)}return $(e,A,null,[t]).length>0},$.contains=function(t,e){return(t.ownerDocument||t)!=A&&At(t),_.contains(t,e)},$.attr=function(t,i){(t.ownerDocument||t)!=A&&At(t);var n=e.attrHandle[i.toLowerCase()],r=n&&d.call(e.attrHandle,i.toLowerCase())?n(t,i,!h):void 0;return void 0!==r?r:t.getAttribute(i)},$.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},_.uniqueSort=function(t){var e,i=[],n=0,o=0;if(s=!p.sortStable,r=!p.sortStable&&a.call(t,0),T.call(t,x),s){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)E.call(t,i[n],1)}return r=null,t},_.fn.uniqueSort=function(){return this.pushStack(_.uniqueSort(a.apply(this)))},e=_.expr={cacheLength:50,createPseudo:et,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(V,Z),t[3]=(t[3]||t[4]||t[5]||"").replace(V,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||$.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&$.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&R.test(i)&&(e=lt(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(V,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return I(t,e)}},CLASS:function(t){var e=w[t+" "];return e||(e=new RegExp("(^|"+k+")"+t+"("+k+"|$)"))&&w(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=$.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(j," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,A){var c,l,h,u,d,f=o!==s?"nextSibling":"previousSibling",g=e.parentNode,p=a&&e.nodeName.toLowerCase(),y=!A&&!a,w=!1;if(g){if(o){for(;f;){for(h=e;h=h[f];)if(a?I(h,p):1===h.nodeType)return!1;d=f="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&y){for(w=(u=(c=(l=g[m]||(g[m]={}))[t]||[])[0]===v&&c[1])&&c[2],h=u&&g.childNodes[u];h=++u&&h&&h[f]||(w=u=0)||d.pop();)if(1===h.nodeType&&++w&&h===e){l[t]=[v,u,w];break}}else if(y&&(w=u=(c=(l=e[m]||(e[m]={}))[t]||[])[0]===v&&c[1]),!1===w)for(;(h=++u&&h&&h[f]||(w=u=0)||d.pop())&&(!(a?I(h,p):1===h.nodeType)||!++w||(y&&((l=h[m]||(h[m]={}))[t]=[v,w]),h!==e)););return(w-=r)===n||w%n==0&&w/n>=0}}},PSEUDO:function(t,i){var n,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||$.error("unsupported pseudo: "+t);return r[m]?r(i):r.length>1?(n=[t,t,"",i],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var n,o=r(t,i),s=o.length;s--;)t[n=l.call(t,o[s])]=!(e[n]=o[s])})):function(t){return r(t,0,n)}):r}},pseudos:{not:et((function(t){var e=[],i=[],n=mt(t.replace(F,"$1"));return n[m]?et((function(t,e,i,r){for(var o,s=n(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}})),has:et((function(t){return function(e){return $(t,e).length>0}})),contains:et((function(t){return t=t.replace(V,Z),function(e){return(e.textContent||_.text(e)).indexOf(t)>-1}})),lang:et((function(t){return z.test(t||"")||$.error("unsupported lang: "+t),t=t.replace(V,Z).toLowerCase(),function(e){var i;do{if(i=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return A.activeElement}catch(t){}}()&&A.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return I(t,"input")&&!!t.checked||I(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return W.test(t.nodeName)},button:function(t){return I(t,"input")&&"button"===t.type||I(t,"button")},text:function(t){var e;return I(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st((function(){return[0]})),last:st((function(t,e){return[e-1]})),eq:st((function(t,e,i){return[i<0?i+e:i]})),even:st((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:st((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:st((function(t,e,i){var n;for(n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:st((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=nt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function ct(){}function lt(t,i){var n,r,o,s,a,A,c,l=C[t+" "];if(l)return i?0:l.slice(0);for(a=t,A=[],c=e.preFilter;a;){for(s in n&&!(r=P.exec(a))||(r&&(a=a.slice(r[0].length)||a),A.push(o=[])),n=!1,(r=H.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(F," ")}),a=a.slice(n.length)),e.filter)!(r=G[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?$.error(t):C(t,A).slice(0)}function ht(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function ut(t,e,i){var n=e.dir,r=e.next,o=r||n,s=i&&"parentNode"===o,a=y++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,A){var c,l,h=[v,a];if(A){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,A))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(l=e[m]||(e[m]={}),r&&I(e,r))e=e[n]||e;else{if((c=l[o])&&c[0]===v&&c[1]===a)return h[2]=c[2];if(l[o]=h,h[2]=t(e,i,A))return!0}return!1}}function dt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function ft(t,e,i,n,r){for(var o,s=[],a=0,A=t.length,c=null!=e;a<A;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),c&&e.push(a)));return s}function gt(t,e,i,n,r,o){return n&&!n[m]&&(n=gt(n)),r&&!r[m]&&(r=gt(r,o)),et((function(o,s,a,A){var c,h,u,d,f=[],p=[],m=s.length,v=o||function(t,e,i){for(var n=0,r=e.length;n<r;n++)$(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),y=!t||!o&&e?v:ft(v,f,t,a,A);if(i?i(y,d=r||(o?t:m||n)?[]:s,a,A):d=y,n)for(c=ft(d,p),n(c,[],a,A),h=c.length;h--;)(u=c[h])&&(d[p[h]]=!(y[p[h]]=u));if(o){if(r||t){if(r){for(c=[],h=d.length;h--;)(u=d[h])&&c.push(y[h]=u);r(null,d=[],c,A)}for(h=d.length;h--;)(u=d[h])&&(c=r?l.call(o,u):f[h])>-1&&(o[c]=!(s[c]=u))}}else d=ft(d===s?d.splice(m,d.length):d),r?r(null,s,d,A):g.apply(s,d)}))}function pt(t){for(var n,r,o,s=t.length,a=e.relative[t[0].type],A=a||e.relative[" "],c=a?1:0,h=ut((function(t){return t===n}),A,!0),u=ut((function(t){return l.call(n,t)>-1}),A,!0),d=[function(t,e,r){var o=!a&&(r||e!=i)||((n=e).nodeType?h(t,e,r):u(t,e,r));return n=null,o}];c<s;c++)if(r=e.relative[t[c].type])d=[ut(dt(d),r)];else{if((r=e.filter[t[c].type].apply(null,t[c].matches))[m]){for(o=++c;o<s&&!e.relative[t[o].type];o++);return gt(c>1&&dt(d),c>1&&ht(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(F,"$1"),r,c<o&&pt(t.slice(c,o)),o<s&&pt(t=t.slice(o)),o<s&&ht(t))}d.push(r)}return dt(d)}function mt(t,n){var r,o=[],s=[],a=b[t+" "];if(!a){for(n||(n=lt(t)),r=n.length;r--;)(a=pt(n[r]))[m]?o.push(a):s.push(a);a=b(t,function(t,n){var r=n.length>0,o=t.length>0,s=function(s,a,c,l,u){var d,f,p,m=0,y="0",w=s&&[],C=[],b=i,B=s||o&&e.find.TAG("*",u),x=v+=null==b?1:Math.random()||.1,S=B.length;for(u&&(i=a==A||a||u);y!==S&&null!=(d=B[y]);y++){if(o&&d){for(f=0,a||d.ownerDocument==A||(At(d),c=!h);p=t[f++];)if(p(d,a||A,c)){g.call(l,d);break}u&&(v=x)}r&&((d=!p&&d)&&m--,s&&w.push(d))}if(m+=y,r&&y!==m){for(f=0;p=n[f++];)p(w,C,a,c);if(s){if(m>0)for(;y--;)w[y]||C[y]||(C[y]=M.call(l));C=ft(C)}g.apply(l,C),u&&!s&&C.length>0&&m+n.length>1&&_.uniqueSort(l)}return u&&(v=x,i=b),w};return r?et(s):s}(s,o)),a.selector=t}return a}function vt(t,i,n,r){var o,s,a,A,c,l="function"==typeof t&&t,u=!r&&lt(t=l.selector||t);if(n=n||[],1===u.length){if((s=u[0]=u[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===i.nodeType&&h&&e.relative[s[1].type]){if(!(i=(e.find.ID(a.matches[0].replace(V,Z),i)||[])[0]))return n;l&&(i=i.parentNode),t=t.slice(s.shift().value.length)}for(o=G.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[A=a.type]);)if((c=e.find[A])&&(r=c(a.matches[0].replace(V,Z),K.test(s[0].type)&&at(i.parentNode)||i))){if(s.splice(o,1),!(t=r.length&&ht(s)))return g.apply(n,r),n;break}}return(l||mt(t,u))(r,i,!h,n,!i||K.test(t)&&at(i.parentNode)||i),n}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,p.sortStable=m.split("").sort(x).join("")===m,At(),p.sortDetached=it((function(t){return 1&t.compareDocumentPosition(A.createElement("fieldset"))})),_.find=$,_.expr[":"]=_.expr.pseudos,_.unique=_.uniqueSort,$.compile=mt,$.select=vt,$.setDocument=At,$.tokenize=lt,$.escape=_.escapeSelector,$.getText=_.text,$.isXML=_.isXMLDoc,$.selectors=_.expr,$.support=_.support,$.uniqueSort=_.uniqueSort}();var L=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&_(t).is(i))break;n.push(t)}return n},j=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},P=_.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(t,e,i){return m(e)?_.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?_.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?_.grep(t,(function(t){return l.call(e,t)>-1!==i})):_.filter(e,t,i)}_.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?_.find.matchesSelector(n,t)?[n]:[]:_.find.matches(t,_.grep(e,(function(t){return 1===t.nodeType})))},_.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(_(t).filter((function(){for(e=0;e<n;e++)if(_.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)_.find(t,r[e],i);return n>1?_.uniqueSort(i):i},filter:function(t){return this.pushStack(N(this,t||[],!1))},not:function(t){return this.pushStack(N(this,t||[],!0))},is:function(t){return!!N(this,"string"==typeof t&&P.test(t)?_(t):t||[],!1).length}});var R,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||R,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:z.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof _?e[0]:e,_.merge(this,_.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),H.test(n[1])&&_.isPlainObject(e))for(n in e)m(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=y.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(_):_.makeArray(t,this)}).prototype=_.fn,R=_(y);var G=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function Y(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}_.fn.extend({has:function(t){var e=_(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(_.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,r=this.length,o=[],s="string"!=typeof t&&_(t);if(!P.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&_.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?_.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(_(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),_.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return L(t,"parentNode")},parentsUntil:function(t,e,i){return L(t,"parentNode",i)},next:function(t){return Y(t,"nextSibling")},prev:function(t){return Y(t,"previousSibling")},nextAll:function(t){return L(t,"nextSibling")},prevAll:function(t){return L(t,"previousSibling")},nextUntil:function(t,e,i){return L(t,"nextSibling",i)},prevUntil:function(t,e,i){return L(t,"previousSibling",i)},siblings:function(t){return j((t.parentNode||{}).firstChild,t)},children:function(t){return j(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),_.merge([],t.childNodes))}},(function(t,e){_.fn[t]=function(i,n){var r=_.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=_.filter(n,r)),this.length>1&&(W[t]||_.uniqueSort(r),G.test(t)&&r.reverse()),this.pushStack(r)}}));var X=/[^\x20\t\r\n\f]+/g;function K(t){return t}function V(t){throw t}function Z(t,e,i,n){var r;try{t&&m(r=t.promise)?r.call(t).done(e).fail(i):t&&m(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}_.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return _.each(t.match(X)||[],(function(t,i){e[i]=!0})),e}(t):_.extend({},t);var e,i,n,r,o=[],s=[],a=-1,A=function(){for(r=r||t.once,n=e=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(a=o.length-1,s.push(i)),function e(i){_.each(i,(function(i,n){m(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==b(n)&&e(n)}))}(arguments),i&&!e&&A()),this},remove:function(){return _.each(arguments,(function(t,e){for(var i;(i=_.inArray(e,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:function(t){return t?_.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=s=[],i||e||(o=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||A()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},_.extend({Deferred:function(t){var e=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return _.Deferred((function(i){_.each(e,(function(e,n){var r=m(t[n[4]])&&t[n[4]];o[n[1]]((function(){var t=r&&r.apply(this,arguments);t&&m(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,r){var o=0;function s(t,e,i,r){return function(){var a=this,A=arguments,c=function(){var n,c;if(!(t<o)){if((n=i.apply(a,A))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,m(c)?r?c.call(n,s(o,e,K,r),s(o,e,V,r)):(o++,c.call(n,s(o,e,K,r),s(o,e,V,r),s(o,e,K,e.notifyWith))):(i!==K&&(a=void 0,A=[n]),(r||e.resolveWith)(a,A))}},l=r?c:function(){try{c()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,l.error),t+1>=o&&(i!==V&&(a=void 0,A=[n]),e.rejectWith(a,A))}};t?l():(_.Deferred.getErrorHook?l.error=_.Deferred.getErrorHook():_.Deferred.getStackHook&&(l.error=_.Deferred.getStackHook()),n.setTimeout(l))}}return _.Deferred((function(n){e[0][3].add(s(0,n,m(r)?r:K,n.notifyWith)),e[1][3].add(s(0,n,m(t)?t:K)),e[2][3].add(s(0,n,m(i)?i:V))})).promise()},promise:function(t){return null!=t?_.extend(t,r):r}},o={};return _.each(e,(function(t,n){var s=n[2],a=n[5];r[n[1]]=s.add,a&&s.add((function(){i=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=a.call(arguments),o=_.Deferred(),s=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(Z(t,o.done(s(i)).resolve,o.reject,!e),"pending"===o.state()||m(r[i]&&r[i].then)))return o.then();for(;i--;)Z(r[i],s(i),o.reject);return o.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&J.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},_.readyException=function(t){n.setTimeout((function(){throw t}))};var q=_.Deferred();function $(){y.removeEventListener("DOMContentLoaded",$),n.removeEventListener("load",$),_.ready()}_.fn.ready=function(t){return q.then(t).catch((function(t){_.readyException(t)})),this},_.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==t&&--_.readyWait>0||q.resolveWith(y,[_]))}}),_.ready.then=q.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(_.ready):(y.addEventListener("DOMContentLoaded",$),n.addEventListener("load",$));var tt=function(t,e,i,n,r,o,s){var a=0,A=t.length,c=null==i;if("object"===b(i))for(a in r=!0,i)tt(t,e,a,i[a],!0,o,s);else if(void 0!==n&&(r=!0,m(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(_(t),i)})),e))for(;a<A;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):A?e(t[0],i):o},et=/^-ms-/,it=/-([a-z])/g;function nt(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(it,nt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=_.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[rt(e)]=i;else for(n in e)r[rt(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in n?[e]:e.match(X)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||_.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!_.isEmptyObject(e)}};var at=new st,At=new st,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function ht(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(lt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(i)}catch(t){}At.set(t,e,i)}else i=void 0;return i}_.extend({hasData:function(t){return At.hasData(t)||at.hasData(t)},data:function(t,e,i){return At.access(t,e,i)},removeData:function(t,e){At.remove(t,e)},_data:function(t,e,i){return at.access(t,e,i)},_removeData:function(t,e){at.remove(t,e)}}),_.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=At.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=rt(n.slice(5)),ht(o,n,r[n]));at.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){At.set(this,t)})):tt(this,(function(e){var i;if(o&&void 0===e)return void 0!==(i=At.get(o,t))||void 0!==(i=ht(o,t))?i:void 0;this.each((function(){At.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){At.remove(this,t)}))}}),_.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=at.get(t,e),i&&(!n||Array.isArray(i)?n=at.access(t,e,_.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=_.queue(t,e),n=i.length,r=i.shift(),o=_._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,(function(){_.dequeue(t,e)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return at.get(t,i)||at.access(t,i,{empty:_.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",i])}))})}}),_.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?_.queue(this[0],t):void 0===e?this:this.each((function(){var i=_.queue(this,t,e);_._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&_.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){_.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=_.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=at.get(o[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),ft=["Top","Right","Bottom","Left"],gt=y.documentElement,pt=function(t){return _.contains(t.ownerDocument,t)},mt={composed:!0};gt.getRootNode&&(pt=function(t){return _.contains(t.ownerDocument,t)||t.getRootNode(mt)===t.ownerDocument});var vt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&pt(t)&&"none"===_.css(t,"display")};function yt(t,e,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return _.css(t,e,"")},A=a(),c=i&&i[3]||(_.cssNumber[e]?"":"px"),l=t.nodeType&&(_.cssNumber[e]||"px"!==c&&+A)&&dt.exec(_.css(t,e));if(l&&l[3]!==c){for(A/=2,c=c||l[3],l=+A||1;s--;)_.style(t,e,l+c),(1-o)*(1-(o=a()/A||.5))<=0&&(s=0),l/=o;l*=2,_.style(t,e,l+c),i=i||[]}return i&&(l=+l||+A||0,r=i[1]?l+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=l,n.end=r)),r}var wt={};function Ct(t){var e,i=t.ownerDocument,n=t.nodeName,r=wt[n];return r||(e=i.body.appendChild(i.createElement(n)),r=_.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),wt[n]=r,r)}function bt(t,e){for(var i,n,r=[],o=0,s=t.length;o<s;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(r[o]=at.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&vt(n)&&(r[o]=Ct(n))):"none"!==i&&(r[o]="none",at.set(n,"display",i)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}_.fn.extend({show:function(){return bt(this,!0)},hide:function(){return bt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){vt(this)?_(this).show():_(this).hide()}))}});var Bt,xt,_t=/^(?:checkbox|radio)$/i,St=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,It=/^$|^module$|\/(?:java|ecma)script/i;Bt=y.createDocumentFragment().appendChild(y.createElement("div")),(xt=y.createElement("input")).setAttribute("type","radio"),xt.setAttribute("checked","checked"),xt.setAttribute("name","t"),Bt.appendChild(xt),p.checkClone=Bt.cloneNode(!0).cloneNode(!0).lastChild.checked,Bt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!Bt.cloneNode(!0).lastChild.defaultValue,Bt.innerHTML="<option></option>",p.option=!!Bt.lastChild;var Mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Tt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?_.merge([t],i):i}function Et(t,e){for(var i=0,n=t.length;i<n;i++)at.set(t[i],"globalEval",!e||at.get(e[i],"globalEval"))}Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,p.option||(Mt.optgroup=Mt.option=[1,"<select multiple='multiple'>","</select>"]);var kt=/<|&#?\w+;/;function Ft(t,e,i,n,r){for(var o,s,a,A,c,l,h=e.createDocumentFragment(),u=[],d=0,f=t.length;d<f;d++)if((o=t[d])||0===o)if("object"===b(o))_.merge(u,o.nodeType?[o]:o);else if(kt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(St.exec(o)||["",""])[1].toLowerCase(),A=Mt[a]||Mt._default,s.innerHTML=A[1]+_.htmlPrefilter(o)+A[2],l=A[0];l--;)s=s.lastChild;_.merge(u,s.childNodes),(s=h.firstChild).textContent=""}else u.push(e.createTextNode(o));for(h.textContent="",d=0;o=u[d++];)if(n&&_.inArray(o,n)>-1)r&&r.push(o);else if(c=pt(o),s=Tt(h.appendChild(o),"script"),c&&Et(s),i)for(l=0;o=s[l++];)It.test(o.type||"")&&i.push(o);return h}var Dt=/^([^.]*)(?:\.(.+)|)/;function Ot(){return!0}function Ut(){return!1}function Qt(t,e,i,n,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Qt(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Ut;else if(!r)return t;return 1===o&&(s=r,r=function(t){return _().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=_.guid++)),t.each((function(){_.event.add(this,e,r,n,i)}))}function Lt(t,e,i){i?(at.set(t,e,!1),_.event.add(t,e,{namespace:!1,handler:function(t){var i,n=at.get(this,e);if(1&t.isTrigger&&this[e]){if(n)(_.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=a.call(arguments),at.set(this,e,n),this[e](),i=at.get(this,e),at.set(this,e,!1),n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i}else n&&(at.set(this,e,_.event.trigger(n[0],n.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Ot)}})):void 0===at.get(t,e)&&_.event.add(t,e,Ot)}_.event={global:{},add:function(t,e,i,n,r){var o,s,a,A,c,l,h,u,d,f,g,p=at.get(t);if(ot(t))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&_.find.matchesSelector(gt,r),i.guid||(i.guid=_.guid++),(A=p.events)||(A=p.events=Object.create(null)),(s=p.handle)||(s=p.handle=function(e){return void 0!==_&&_.event.triggered!==e.type?_.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(X)||[""]).length;c--;)d=g=(a=Dt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),d&&(h=_.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=_.event.special[d]||{},l=_.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&_.expr.match.needsContext.test(r),namespace:f.join(".")},o),(u=A[d])||((u=A[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,l):u.push(l),_.event.global[d]=!0)},remove:function(t,e,i,n,r){var o,s,a,A,c,l,h,u,d,f,g,p=at.hasData(t)&&at.get(t);if(p&&(A=p.events)){for(c=(e=(e||"").match(X)||[""]).length;c--;)if(d=g=(a=Dt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),d){for(h=_.event.special[d]||{},u=A[d=(n?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=u.length;o--;)l=u[o],!r&&g!==l.origType||i&&i.guid!==l.guid||a&&!a.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(u.splice(o,1),l.selector&&u.delegateCount--,h.remove&&h.remove.call(t,l));s&&!u.length&&(h.teardown&&!1!==h.teardown.call(t,f,p.handle)||_.removeEvent(t,d,p.handle),delete A[d])}else for(d in A)_.event.remove(t,d+e[c],i,n,!0);_.isEmptyObject(A)&&at.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,s,a=new Array(arguments.length),A=_.event.fix(t),c=(at.get(this,"events")||Object.create(null))[A.type]||[],l=_.event.special[A.type]||{};for(a[0]=A,e=1;e<arguments.length;e++)a[e]=arguments[e];if(A.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,A)){for(s=_.event.handlers.call(this,A,c),e=0;(r=s[e++])&&!A.isPropagationStopped();)for(A.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!A.isImmediatePropagationStopped();)A.rnamespace&&!1!==o.namespace&&!A.rnamespace.test(o.namespace)||(A.handleObj=o,A.data=o.data,void 0!==(n=((_.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(A.result=n)&&(A.preventDefault(),A.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,A),A.result}},handlers:function(t,e){var i,n,r,o,s,a=[],A=e.delegateCount,c=t.target;if(A&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},i=0;i<A;i++)void 0===s[r=(n=e[i]).selector+" "]&&(s[r]=n.needsContext?_(r,this).index(c)>-1:_.find(r,this,null,[c]).length),s[r]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,A<e.length&&a.push({elem:c,handlers:e.slice(A)}),a},addProp:function(t,e){Object.defineProperty(_.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[_.expando]?t:new _.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return _t.test(e.type)&&e.click&&I(e,"input")&&Lt(e,"click",!0),!1},trigger:function(t){var e=this||t;return _t.test(e.type)&&e.click&&I(e,"input")&&Lt(e,"click"),!0},_default:function(t){var e=t.target;return _t.test(e.type)&&e.click&&I(e,"input")&&at.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},_.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},_.Event=function(t,e){if(!(this instanceof _.Event))return new _.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ot:Ut,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&_.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ut,isPropagationStopped:Ut,isImmediatePropagationStopped:Ut,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ot,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ot,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ot,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},(function(t,e){function i(t){if(y.documentMode){var i=at.get(this,"handle"),n=_.event.fix(t);n.type="focusin"===t.type?"focus":"blur",n.isSimulated=!0,i(t),n.target===n.currentTarget&&i(n)}else _.event.simulate(e,t.target,_.event.fix(t))}_.event.special[t]={setup:function(){var n;if(Lt(this,t,!0),!y.documentMode)return!1;(n=at.get(this,e))||this.addEventListener(e,i),at.set(this,e,(n||0)+1)},trigger:function(){return Lt(this,t),!0},teardown:function(){var t;if(!y.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,i),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},_.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,r=y.documentMode?this:n,o=at.get(r,e);o||(y.documentMode?this.addEventListener(e,i):n.addEventListener(t,i,!0)),at.set(r,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=y.documentMode?this:n,o=at.get(r,e)-1;o?at.set(r,e,o):(y.documentMode?this.removeEventListener(e,i):n.removeEventListener(t,i,!0),at.remove(r,e))}}})),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){_.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||_.contains(this,n))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),_.fn.extend({on:function(t,e,i,n){return Qt(this,t,e,i,n)},one:function(t,e,i,n){return Qt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,_(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Ut),this.each((function(){_.event.remove(this,t,i,e)}))}});var jt=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Nt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&_(t).children("tbody")[0]||t}function Rt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function zt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Gt(t,e){var i,n,r,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(r in at.remove(e,"handle events"),a)for(i=0,n=a[r].length;i<n;i++)_.event.add(e,r,a[r][i]);At.hasData(t)&&(o=At.access(t),s=_.extend({},o),At.set(e,s))}}function Wt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&_t.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Yt(t,e,i,n){e=A(e);var r,o,s,a,c,l,h=0,u=t.length,d=u-1,f=e[0],g=m(f);if(g||u>1&&"string"==typeof f&&!p.checkClone&&Pt.test(f))return t.each((function(r){var o=t.eq(r);g&&(e[0]=f.call(this,r,o.html())),Yt(o,e,i,n)}));if(u&&(o=(r=Ft(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=o),o||n)){for(a=(s=_.map(Tt(r,"script"),Rt)).length;h<u;h++)c=r,h!==d&&(c=_.clone(c,!0,!0),a&&_.merge(s,Tt(c,"script"))),i.call(t[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,_.map(s,zt),h=0;h<a;h++)c=s[h],It.test(c.type||"")&&!at.access(c,"globalEval")&&_.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?_._evalUrl&&!c.noModule&&_._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):C(c.textContent.replace(Ht,""),c,l))}return t}function Xt(t,e,i){for(var n,r=e?_.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||_.cleanData(Tt(n)),n.parentNode&&(i&&pt(n)&&Et(Tt(n,"script")),n.parentNode.removeChild(n));return t}_.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),A=pt(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||_.isXMLDoc(t)))for(s=Tt(a),n=0,r=(o=Tt(t)).length;n<r;n++)Wt(o[n],s[n]);if(e)if(i)for(o=o||Tt(t),s=s||Tt(a),n=0,r=o.length;n<r;n++)Gt(o[n],s[n]);else Gt(t,a);return(s=Tt(a,"script")).length>0&&Et(s,!A&&Tt(t,"script")),a},cleanData:function(t){for(var e,i,n,r=_.event.special,o=0;void 0!==(i=t[o]);o++)if(ot(i)){if(e=i[at.expando]){if(e.events)for(n in e.events)r[n]?_.event.remove(i,n):_.removeEvent(i,n,e.handle);i[at.expando]=void 0}i[At.expando]&&(i[At.expando]=void 0)}}}),_.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Yt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Nt(this,t).appendChild(t)}))},prepend:function(){return Yt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Nt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Yt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(_.cleanData(Tt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return _.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!jt.test(t)&&!Mt[(St.exec(t)||["",""])[1].toLowerCase()]){t=_.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(_.cleanData(Tt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Yt(this,arguments,(function(e){var i=this.parentNode;_.inArray(this,t)<0&&(_.cleanData(Tt(this)),i&&i.replaceChild(e,this))}),t)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){_.fn[t]=function(t){for(var i,n=[],r=_(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),_(r[s])[e](i),c.apply(n,i.get());return this.pushStack(n)}}));var Kt=new RegExp("^("+ut+")(?!px)[a-z%]+$","i"),Vt=/^--/,Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Jt=function(t,e,i){var n,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=o[r];return n},qt=new RegExp(ft.join("|"),"i");function $t(t,e,i){var n,r,o,s,a=Vt.test(e),A=t.style;return(i=i||Zt(t))&&(s=i.getPropertyValue(e)||i[e],a&&s&&(s=s.replace(F,"$1")||void 0),""!==s||pt(t)||(s=_.style(t,e)),!p.pixelBoxStyles()&&Kt.test(s)&&qt.test(e)&&(n=A.width,r=A.minWidth,o=A.maxWidth,A.minWidth=A.maxWidth=A.width=s,s=i.width,A.width=n,A.minWidth=r,A.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);i="1%"!==t.top,A=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),r=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),gt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,s,a,A,c=y.createElement("div"),l=y.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===l.style.backgroundClip,_.extend(p,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),A},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,i,r;return null==a&&(t=y.createElement("table"),e=y.createElement("tr"),i=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",gt.appendChild(t).appendChild(e).appendChild(i),r=n.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ie=y.createElement("div").style,ne={};function re(t){return _.cssProps[t]||ne[t]||(t in ie?t:ne[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=ee.length;i--;)if((t=ee[i]+e)in ie)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function Ae(t,e,i){var n=dt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ce(t,e,i,n,r,o){var s="width"===e?1:0,a=0,A=0,c=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(c+=_.css(t,i+ft[s],!0,r)),n?("content"===i&&(A-=_.css(t,"padding"+ft[s],!0,r)),"margin"!==i&&(A-=_.css(t,"border"+ft[s]+"Width",!0,r))):(A+=_.css(t,"padding"+ft[s],!0,r),"padding"!==i?A+=_.css(t,"border"+ft[s]+"Width",!0,r):a+=_.css(t,"border"+ft[s]+"Width",!0,r));return!n&&o>=0&&(A+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-A-a-.5))||0),A+c}function le(t,e,i){var n=Zt(t),r=(!p.boxSizingReliable()||i)&&"border-box"===_.css(t,"boxSizing",!1,n),o=r,s=$t(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(s)){if(!i)return s;s="auto"}return(!p.boxSizingReliable()&&r||!p.reliableTrDimensions()&&I(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===_.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===_.css(t,"boxSizing",!1,n),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ce(t,e,i||(r?"border":"content"),o,n,s)+"px"}function he(t,e,i,n,r){return new he.prototype.init(t,e,i,n,r)}_.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=$t(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=rt(e),A=Vt.test(e),c=t.style;if(A||(e=re(a)),s=_.cssHooks[e]||_.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:c[e];"string"==(o=typeof i)&&(r=dt.exec(i))&&r[1]&&(i=yt(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||A||(i+=r&&r[3]||(_.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(A?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var r,o,s,a=rt(e);return Vt.test(e)||(e=re(a)),(s=_.cssHooks[e]||_.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=$t(t,e,n)),"normal"===r&&e in ae&&(r=ae[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),_.each(["height","width"],(function(t,e){_.cssHooks[e]={get:function(t,i,n){if(i)return!oe.test(_.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,e,n):Jt(t,se,(function(){return le(t,e,n)}))},set:function(t,i,n){var r,o=Zt(t),s=!p.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===_.css(t,"boxSizing",!1,o),A=n?ce(t,e,n,a,o):0;return a&&s&&(A-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ce(t,e,"border",!1,o)-.5)),A&&(r=dt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=_.css(t,e)),Ae(0,i,A)}}})),_.cssHooks.marginLeft=te(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-Jt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),_.each({margin:"",padding:"",border:"Width"},(function(t,e){_.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+ft[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(_.cssHooks[t+e].set=Ae)})),_.fn.extend({css:function(t,e){return tt(this,(function(t,e,i){var n,r,o={},s=0;if(Array.isArray(e)){for(n=Zt(t),r=e.length;s<r;s++)o[e[s]]=_.css(t,e[s],!1,n);return o}return void 0!==i?_.style(t,e,i):_.css(t,e)}),t,e,arguments.length>1)}}),_.Tween=he,he.prototype={constructor:he,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||_.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(_.cssNumber[i]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,i=he.propHooks[this.prop];return this.options.duration?this.pos=e=_.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=_.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){_.fx.step[t.prop]?_.fx.step[t.prop](t):1!==t.elem.nodeType||!_.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:_.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},_.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},_.fx=he.prototype.init,_.fx.step={};var ue,de,fe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function pe(){de&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(pe):n.setTimeout(pe,_.fx.interval),_.fx.tick())}function me(){return n.setTimeout((function(){ue=void 0})),ue=Date.now()}function ve(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=ft[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function ye(t,e,i){for(var n,r=(we.tweeners[e]||[]).concat(we.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function we(t,e,i){var n,r,o=0,s=we.prefilters.length,a=_.Deferred().always((function(){delete A.elem})),A=function(){if(r)return!1;for(var e=ue||me(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(n);return a.notifyWith(t,[c,n,i]),n<1&&s?i:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:_.extend({},e),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},i),originalProperties:e,originalOptions:i,startTime:ue||me(),duration:i.duration,tweens:[],createTween:function(e,i){var n=_.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var i,n,r,o,s;for(i in t)if(r=e[n=rt(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(s=_.cssHooks[n])&&"expand"in s)for(i in o=s.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(l,c.opts.specialEasing);o<s;o++)if(n=we.prefilters[o].call(c,t,l,c.opts))return m(n.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return _.map(l,ye,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(A,{elem:t,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(we,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return yt(i.elem,t,dt.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(X);for(var i,n=0,r=t.length;n<r;n++)i=t[n],we.tweeners[i]=we.tweeners[i]||[],we.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,s,a,A,c,l,h="width"in e||"height"in e,u=this,d={},f=t.style,g=t.nodeType&&vt(t),p=at.get(t,"fxshow");for(n in i.queue||(null==(s=_._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,u.always((function(){u.always((function(){s.unqueued--,_.queue(t,"fx").length||s.empty.fire()}))}))),e)if(r=e[n],fe.test(r)){if(delete e[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!p||void 0===p[n])continue;g=!0}d[n]=p&&p[n]||_.style(t,n)}if((A=!_.isEmptyObject(e))||!_.isEmptyObject(d))for(n in h&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=p&&p.display)&&(c=at.get(t,"display")),"none"===(l=_.css(t,"display"))&&(c?l=c:(bt([t],!0),c=t.style.display||c,l=_.css(t,"display"),bt([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===_.css(t,"float")&&(A||(u.done((function(){f.display=c})),null==c&&(l=f.display,c="none"===l?"":l)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),A=!1,d)A||(p?"hidden"in p&&(g=p.hidden):p=at.access(t,"fxshow",{display:c}),o&&(p.hidden=!g),g&&bt([t],!0),u.done((function(){for(n in g||bt([t]),at.remove(t,"fxshow"),d)_.style(t,n,d[n])}))),A=ye(g?p[n]:0,n,u),n in p||(p[n]=A.start,g&&(A.end=A.start,A.start=0))}],prefilter:function(t,e){e?we.prefilters.unshift(t):we.prefilters.push(t)}}),_.speed=function(t,e,i){var n=t&&"object"==typeof t?_.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return _.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in _.fx.speeds?n.duration=_.fx.speeds[n.duration]:n.duration=_.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&_.dequeue(this,n.queue)},n},_.fn.extend({fadeTo:function(t,e,i,n){return this.filter(vt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=_.isEmptyObject(t),o=_.speed(e,i,n),s=function(){var e=we(this,_.extend({},t),o);(r||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=_.timers,s=at.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ge.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||_.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=at.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=_.timers,s=n?n.length:0;for(i.finish=!0,_.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),_.each(["toggle","show","hide"],(function(t,e){var i=_.fn[e];_.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ve(e,!0),t,n,r)}})),_.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){_.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),_.timers=[],_.fx.tick=function(){var t,e=0,i=_.timers;for(ue=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||_.fx.stop(),ue=void 0},_.fx.timer=function(t){_.timers.push(t),_.fx.start()},_.fx.interval=13,_.fx.start=function(){de||(de=!0,pe())},_.fx.stop=function(){de=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(t,e){return t=_.fx&&_.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var Ce,be=_.expr.attrHandle;_.fn.extend({attr:function(t,e){return tt(this,_.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){_.removeAttr(this,t)}))}}),_.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?_.prop(t,e,i):(1===o&&_.isXMLDoc(t)||(r=_.attrHooks[e.toLowerCase()]||(_.expr.match.bool.test(e)?Ce:void 0)),void 0!==i?null===i?void _.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=_.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&I(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(X);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),Ce={set:function(t,e,i){return!1===e?_.removeAttr(t,i):t.setAttribute(i,i),i}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=be[e]||_.find.attr;be[e]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=be[s],be[s]=r,r=null!=i(t,e,n)?s:null,be[s]=o),r}}));var Be=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;function _e(t){return(t.match(X)||[]).join(" ")}function Se(t){return t.getAttribute&&t.getAttribute("class")||""}function Ie(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}_.fn.extend({prop:function(t,e){return tt(this,_.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[_.propFix[t]||t]}))}}),_.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(t)||(e=_.propFix[e]||e,r=_.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=_.find.attr(t,"tabindex");return e?parseInt(e,10):Be.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(_.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this})),_.fn.extend({addClass:function(t){var e,i,n,r,o,s;return m(t)?this.each((function(e){_(this).addClass(t.call(this,e,Se(this)))})):(e=Ie(t)).length?this.each((function(){if(n=Se(this),i=1===this.nodeType&&" "+_e(n)+" "){for(o=0;o<e.length;o++)r=e[o],i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=_e(i),n!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,i,n,r,o,s;return m(t)?this.each((function(e){_(this).removeClass(t.call(this,e,Se(this)))})):arguments.length?(e=Ie(t)).length?this.each((function(){if(n=Se(this),i=1===this.nodeType&&" "+_e(n)+" "){for(o=0;o<e.length;o++)for(r=e[o];i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=_e(i),n!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var i,n,r,o,s=typeof t,a="string"===s||Array.isArray(t);return m(t)?this.each((function(i){_(this).toggleClass(t.call(this,i,Se(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(i=Ie(t),this.each((function(){if(a)for(o=_(this),r=0;r<i.length;r++)n=i[r],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==t&&"boolean"!==s||((n=Se(this))&&at.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+_e(Se(i))+" ").indexOf(e)>-1)return!0;return!1}});var Me=/\r/g;_.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=m(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,_(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=_.map(r,(function(t){return null==t?"":t+""}))),(e=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=_.valHooks[r.type]||_.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Me,""):null==i?"":i:void 0}}),_.extend({valHooks:{option:{get:function(t){var e=_.find.attr(t,"value");return null!=e?e:_e(_.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],A=s?o+1:r.length;for(n=o<0?A:s?o:0;n<A;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(e=_(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=_.makeArray(e),s=r.length;s--;)((n=r[s]).selected=_.inArray(_.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=_.inArray(_(t).val(),e)>-1}},p.checkOn||(_.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Te=n.location,Ee={guid:Date.now()},ke=/\?/;_.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||_.error("Invalid XML: "+(i?_.map(i.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Fe=/^(?:focusinfocus|focusoutblur)$/,De=function(t){t.stopPropagation()};_.extend(_.event,{trigger:function(t,e,i,r){var o,s,a,A,c,l,h,u,f=[i||y],g=d.call(t,"type")?t.type:t,p=d.call(t,"namespace")?t.namespace.split("."):[];if(s=u=a=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!Fe.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(p=g.split("."),g=p.shift(),p.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[_.expando]?t:new _.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:_.makeArray(e,[t]),h=_.event.special[g]||{},r||!h.trigger||!1!==h.trigger.apply(i,e))){if(!r&&!h.noBubble&&!v(i)){for(A=h.delegateType||g,Fe.test(A+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)u=s,t.type=o>1?A:h.bindType||g,(l=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&l.apply(s,e),(l=c&&s[c])&&l.apply&&ot(s)&&(t.result=l.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!ot(i)||c&&m(i[g])&&!v(i)&&((a=i[c])&&(i[c]=null),_.event.triggered=g,t.isPropagationStopped()&&u.addEventListener(g,De),i[g](),t.isPropagationStopped()&&u.removeEventListener(g,De),_.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,i){var n=_.extend(new _.Event,i,{type:t,isSimulated:!0});_.event.trigger(n,null,e)}}),_.fn.extend({trigger:function(t,e){return this.each((function(){_.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return _.event.trigger(t,e,i,!0)}});var Oe=/\[\]$/,Ue=/\r?\n/g,Qe=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;function je(t,e,i,n){var r;if(Array.isArray(e))_.each(e,(function(e,r){i||Oe.test(t)?n(t,r):je(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==b(e))n(t,e);else for(r in e)je(t+"["+r+"]",e[r],i,n)}_.param=function(t,e){var i,n=[],r=function(t,e){var i=m(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!_.isPlainObject(t))_.each(t,(function(){r(this.name,this.value)}));else for(i in t)je(i,t[i],e,r);return n.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=_.prop(this,"elements");return t?_.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!_(this).is(":disabled")&&Le.test(this.nodeName)&&!Qe.test(t)&&(this.checked||!_t.test(t))})).map((function(t,e){var i=_(this).val();return null==i?null:Array.isArray(i)?_.map(i,(function(t){return{name:e.name,value:t.replace(Ue,"\r\n")}})):{name:e.name,value:i.replace(Ue,"\r\n")}})).get()}});var Pe=/%20/g,He=/#.*$/,Ne=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,Ge=/^\/\//,We={},Ye={},Xe="*/".concat("*"),Ke=y.createElement("a");function Ve(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(X)||[];if(m(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ze(t,e,i,n){var r={},o=t===Ye;function s(a){var A;return r[a]=!0,_.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||o||r[c]?o?!(A=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),A}return s(e.dataTypes[0])||!r["*"]&&s("*")}function Je(t,e){var i,n,r=_.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&_.extend(!0,t,n),t}Ke.href=Te.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Je(Je(t,_.ajaxSettings),e):Je(_.ajaxSettings,t)},ajaxPrefilter:Ve(We),ajaxTransport:Ve(Ye),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,A,c,l,h,u,d=_.ajaxSetup({},e),f=d.context||d,g=d.context&&(f.nodeType||f.jquery)?_(f):_.event,p=_.Deferred(),m=_.Callbacks("once memory"),v=d.statusCode||{},w={},C={},b="canceled",B={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Re.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==c&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)B.always(t[B.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||b;return i&&i.abort(e),x(0,e),this}};if(p.promise(B),d.url=((t||d.url||Te.href)+"").replace(Ge,Te.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(X)||[""],null==d.crossDomain){A=y.createElement("a");try{A.href=d.url,A.href=A.href,d.crossDomain=Ke.protocol+"//"+Ke.host!=A.protocol+"//"+A.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=_.param(d.data,d.traditional)),Ze(We,d,e,B),c)return B;for(h in(l=_.event&&d.global)&&0==_.active++&&_.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!ze.test(d.type),r=d.url.replace(He,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Pe,"+")):(u=d.url.slice(r.length),d.data&&(d.processData||"string"==typeof d.data)&&(r+=(ke.test(r)?"&":"?")+d.data,delete d.data),!1===d.cache&&(r=r.replace(Ne,"$1"),u=(ke.test(r)?"&":"?")+"_="+Ee.guid+++u),d.url=r+u),d.ifModified&&(_.lastModified[r]&&B.setRequestHeader("If-Modified-Since",_.lastModified[r]),_.etag[r]&&B.setRequestHeader("If-None-Match",_.etag[r])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&B.setRequestHeader("Content-Type",d.contentType),B.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Xe+"; q=0.01":""):d.accepts["*"]),d.headers)B.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(f,B,d)||c))return B.abort();if(b="abort",m.add(d.complete),B.done(d.success),B.fail(d.error),i=Ze(Ye,d,e,B)){if(B.readyState=1,l&&g.trigger("ajaxSend",[B,d]),c)return B;d.async&&d.timeout>0&&(a=n.setTimeout((function(){B.abort("timeout")}),d.timeout));try{c=!1,i.send(w,x)}catch(t){if(c)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,s,A){var h,u,y,w,C,b=e;c||(c=!0,a&&n.clearTimeout(a),i=void 0,o=A||"",B.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(w=function(t,e,i){for(var n,r,o,s,a=t.contents,A=t.dataTypes;"*"===A[0];)A.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){A.unshift(r);break}if(A[0]in i)o=A[0];else{for(r in i){if(!A[0]||t.converters[r+" "+A[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==A[0]&&A.unshift(o),i[o]}(d,B,s)),!h&&_.inArray("script",d.dataTypes)>-1&&_.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),w=function(t,e,i,n){var r,o,s,a,A,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!A&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),A=o,o=l.shift())if("*"===o)o=A;else if("*"!==A&&A!==o){if(!(s=c[A+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[A+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+A+" to "+o}}}return{state:"success",data:e}}(d,w,B,h),h?(d.ifModified&&((C=B.getResponseHeader("Last-Modified"))&&(_.lastModified[r]=C),(C=B.getResponseHeader("etag"))&&(_.etag[r]=C)),204===t||"HEAD"===d.type?b="nocontent":304===t?b="notmodified":(b=w.state,u=w.data,h=!(y=w.error))):(y=b,!t&&b||(b="error",t<0&&(t=0))),B.status=t,B.statusText=(e||b)+"",h?p.resolveWith(f,[u,b,B]):p.rejectWith(f,[B,b,y]),B.statusCode(v),v=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[B,d,h?u:y]),m.fireWith(f,[B,b]),l&&(g.trigger("ajaxComplete",[B,d]),--_.active||_.event.trigger("ajaxStop")))}return B},getJSON:function(t,e,i){return _.get(t,e,i,"json")},getScript:function(t,e){return _.get(t,void 0,e,"script")}}),_.each(["get","post"],(function(t,e){_[e]=function(t,i,n,r){return m(i)&&(r=r||n,n=i,i=void 0),_.ajax(_.extend({url:t,type:e,dataType:r,data:i,success:n},_.isPlainObject(t)&&t))}})),_.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),_._evalUrl=function(t,e,i){return _.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){_.globalEval(t,e,i)}})},_.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=_(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){_(this).wrapInner(t.call(this,e))})):this.each((function(){var e=_(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){_(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){_(this).replaceWith(this.childNodes)})),this}}),_.expr.pseudos.hidden=function(t){return!_.expr.pseudos.visible(t)},_.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var qe={0:200,1223:204},$e=_.ajaxSettings.xhr();p.cors=!!$e&&"withCredentials"in $e,p.ajax=$e=!!$e,_.ajaxTransport((function(t){var e,i;if(p.cors||$e&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(qe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),_.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return _.globalEval(t),t}}}),_.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),_.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=_("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){i&&i()}}}));var ti,ei=[],ii=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||_.expando+"_"+Ee.guid++;return this[t]=!0,t}}),_.ajaxPrefilter("json jsonp",(function(t,e,i){var r,o,s,a=!1!==t.jsonp&&(ii.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ii,"$1"+r):!1!==t.jsonp&&(t.url+=(ke.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||_.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always((function(){void 0===o?_(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,ei.push(r)),s&&m(o)&&o(s[0]),s=o=void 0})),"script"})),p.createHTMLDocument=((ti=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ti.childNodes.length),_.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(p.createHTMLDocument?((n=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(n)):e=y),o=!i&&[],(r=H.exec(t))?[e.createElement(r[1])]:(r=Ft([t],e,o),o&&o.length&&_(o).remove(),_.merge([],r.childNodes)));var n,r,o},_.fn.load=function(t,e,i){var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=_e(t.slice(a)),t=t.slice(0,a)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&_.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(n?_("<div>").append(_.parseHTML(t)).find(n):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,o||[t.responseText,e,t])}))}),this},_.expr.pseudos.animated=function(t){return _.grep(_.timers,(function(e){return t===e.elem})).length},_.offset={setOffset:function(t,e,i){var n,r,o,s,a,A,c=_.css(t,"position"),l=_(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=_.css(t,"top"),A=_.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+A).indexOf("auto")>-1?(s=(n=l.position()).top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(A)||0),m(e)&&(e=e.call(t,i,_.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):l.css(h)}},_.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){_.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===_.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===_.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=_(t).offset()).top+=_.css(t,"borderTopWidth",!0),r.left+=_.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-_.css(n,"marginTop",!0),left:e.left-r.left-_.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===_.css(t,"position");)t=t.offsetParent;return t||gt}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;_.fn[t]=function(n){return tt(this,(function(t,n,r){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r}),t,n,arguments.length)}})),_.each(["top","left"],(function(t,e){_.cssHooks[e]=te(p.pixelPosition,(function(t,i){if(i)return i=$t(t,e),Kt.test(i)?_(t).position()[e]+"px":i}))})),_.each({Height:"height",Width:"width"},(function(t,e){_.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){_.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===o?"margin":"border");return tt(this,(function(e,i,r){var o;return v(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?_.css(e,i,a):_.style(e,i,r,a)}),e,s?r:void 0,s)}}))})),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){_.fn[e]=function(t){return this.on(e,t)}})),_.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){_.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var ni=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return n=a.call(arguments,2),r=function(){return t.apply(e||this,n.concat(a.call(arguments)))},r.guid=t.guid=t.guid||_.guid++,r},_.holdReady=function(t){t?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=I,_.isFunction=m,_.isWindow=v,_.camelCase=rt,_.type=b,_.now=Date.now,_.isNumeric=function(t){var e=_.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},_.trim=function(t){return null==t?"":(t+"").replace(ni,"$1")},void 0===(i=function(){return _}.apply(e,[]))||(t.exports=i);var ri=n.jQuery,oi=n.$;return _.noConflict=function(t){return n.$===_&&(n.$=oi),t&&n.jQuery===_&&(n.jQuery=ri),_},void 0===r&&(n.jQuery=n.$=_),_}))},710:(t,e,i)=>{t.exports=function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var A=new Error("Cannot find module '"+s+"'");throw A.code="MODULE_NOT_FOUND",A}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,i,n)}return i[s].exports}for(var o=void 0,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";var n=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,r,s,a,A,c,l=[],h=0,u=t.length,d=u,f="string"!==n.getTypeOf(t);h<t.length;)d=u-h,r=f?(e=t[h++],i=h<u?t[h++]:0,h<u?t[h++]:0):(e=t.charCodeAt(h++),i=h<u?t.charCodeAt(h++):0,h<u?t.charCodeAt(h++):0),s=e>>2,a=(3&e)<<4|i>>4,A=1<d?(15&i)<<2|r>>6:64,c=2<d?63&r:64,l.push(o.charAt(s)+o.charAt(a)+o.charAt(A)+o.charAt(c));return l.join("")},i.decode=function(t){var e,i,n,s,a,A,c=0,l=0,h="data:";if(t.substr(0,5)===h)throw new Error("Invalid base64 input, it looks like a data url.");var u,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|d):new Array(0|d);c<t.length;)e=o.indexOf(t.charAt(c++))<<2|(s=o.indexOf(t.charAt(c++)))>>4,i=(15&s)<<4|(a=o.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(A=o.indexOf(t.charAt(c++))),u[l++]=e,64!==a&&(u[l++]=i),64!==A&&(u[l++]=n);return u}},{"./support":30,"./utils":32}],2:[function(t,e,i){"use strict";var n=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,i,n,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=r}a.prototype={getContentWorker:function(){var t=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,i){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){"use strict";var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){"use strict";var n=t("./utils"),r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,i){var n=r,o=0+i;t^=-1;for(var s=0;s<o;s++)t=t>>>8^n[255&(t^e[s])];return~t}(0|e,t,t.length):function(t,e,i){var n=r,o=0+i;t^=-1;for(var s=0;s<o;s++)t=t>>>8^n[255&(t^e.charCodeAt(s))];return~t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){"use strict";var n;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=n?"uint8array":"array";function A(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}i.magic="\b\0",o.inherits(A,s),A.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},A.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},i.compressWorker=function(t){return new A("Deflate",t)},i.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,i){"use strict";function n(t,e){var i,n="";for(i=0;i<e;i++)n+=String.fromCharCode(255&t),t>>>=8;return n}function r(t,e,i,r,s,l){var h,u,d=t.file,f=t.compression,g=l!==a.utf8encode,p=o.transformTo("string",l(d.name)),m=o.transformTo("string",a.utf8encode(d.name)),v=d.comment,y=o.transformTo("string",l(v)),w=o.transformTo("string",a.utf8encode(v)),C=m.length!==d.name.length,b=w.length!==v.length,B="",x="",_="",S=d.dir,I=d.date,M={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(M.crc32=t.crc32,M.compressedSize=t.compressedSize,M.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),g||!C&&!b||(T|=2048);var E=0,k=0;S&&(E|=16),"UNIX"===s?(k=798,E|=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16}(d.unixPermissions,S)):(k=20,E|=function(t){return 63&(t||0)}(d.dosPermissions)),h=I.getUTCHours(),h<<=6,h|=I.getUTCMinutes(),h<<=5,h|=I.getUTCSeconds()/2,u=I.getUTCFullYear()-1980,u<<=4,u|=I.getUTCMonth()+1,u<<=5,u|=I.getUTCDate(),C&&(x=n(1,1)+n(A(p),4)+m,B+="up"+n(x.length,2)+x),b&&(_=n(1,1)+n(A(y),4)+w,B+="uc"+n(_.length,2)+_);var F="";return F+="\n\0",F+=n(T,2),F+=f.magic,F+=n(h,2),F+=n(u,2),F+=n(M.crc32,4),F+=n(M.compressedSize,4),F+=n(M.uncompressedSize,4),F+=n(p.length,2),F+=n(B.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+p+B,dirRecord:c.CENTRAL_FILE_HEADER+n(k,2)+F+n(y.length,2)+"\0\0\0\0"+n(E,4)+n(r,4)+p+B+y}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),A=t("../crc32"),c=t("../signature");function l(t,e,i,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var i=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:function(t){return c.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,r=function(t,e,i,r,s){var a=o.transformTo("string",s(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(i,4)+n(a.length,2)+a}(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){"use strict";var n=t("../compressions"),r=t("./ZipFileWorker");i.generateWorker=function(t,e,i){var o=new r(e.streamFiles,i,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,i){s++;var r=function(t,e){var i=t||e,r=n[i];if(!r)throw new Error(i+" is not a valid compression method !");return r}(i.options.compression,e.compression),a=i.options.compressionOptions||e.compressionOptions||{},A=i.dir,c=i.date;i._compressWorker(r,a).withStreamInfo("file",{name:t,dir:A,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){"use strict";var n=t("./utils"),r=t("./external"),o=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),A=t("./nodejsUtils");function c(t){return new r.Promise((function(e,i){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){i(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var i=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),A.isNode&&A.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var i=new s(e);return i.load(t),i})).then((function(t){var i=[r.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var o=0;o<n.length;o++)i.push(c(n[o]));return r.Promise.all(i)})).then((function(t){for(var r=t.shift(),o=r.files,s=0;s<o.length;s++){var a=o[s],A=a.fileNameStr,c=n.resolve(a.fileNameStr);i.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders}),a.dir||(i.file(c).unsafeOriginalName=A)}return r.zipComment.length&&(i.comment=r.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){"use strict";var n=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){"use strict";var n=t("readable-stream").Readable;function r(t,e,i){n.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),i&&i(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,n),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,i){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){"use strict";function n(t,e,i){var n,r=o.getTypeOf(e),a=o.extend(i||{},A);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=g(t)),a.createFolders&&(n=f(t))&&p.call(this,n,!0);var h="string"===r&&!1===a.binary&&!1===a.base64;i&&void 0!==i.binary||(a.binary=!h),(e instanceof c&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var m;m=e instanceof c||e instanceof s?e:u.isNode&&u.isStream(e)?new d(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var v=new l(t,m,a);this.files[t]=v}var r=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),A=t("./defaults"),c=t("./compressedObject"),l=t("./zipObject"),h=t("./generate"),u=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},p=function(t,e){return e=void 0!==e?e:A.createFolders,t=g(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n)},filter:function(t){var e=[];return this.forEach((function(i,n){t(i,n)&&e.push(n)})),e},file:function(t,e,i){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,i),this;if(m(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,i){return i.dir&&t.test(e)}));var e=this.root+t,i=p.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter((function(e,i){return i.name.slice(0,t.length)===t})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,i={};try{if((i=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");o.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";e=h.generateWorker(this,i,n)}catch(t){(e=new s("error")).error(t)}return new a(e,i.type||"string",i.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){"use strict";e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){"use strict";var n=t("./DataReader");function r(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===i&&this.data[o+2]===n&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&i===o[1]&&n===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){"use strict";var n=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,i){"use strict";var n=t("./Uint8ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){"use strict";var n=t("./DataReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){"use strict";var n=t("./ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){"use strict";var n=t("../utils"),r=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),A=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new A(n.transformTo("uint8array",t)):new o(n.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){"use strict";var n=t("./GenericWorker"),r=t("../utils");function o(t){n.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,n),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){"use strict";var n=t("./GenericWorker"),r=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){"use strict";var n=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){"use strict";var n=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,i){"use strict";var n=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),s=t("../base64"),a=t("../support"),A=t("../external"),c=null;if(a.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function l(t,e,i){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=i,n.checkSupport(s),this._worker=t.pipe(new r(s)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}l.prototype={accumulate:function(t){return function(t,e){return new A.Promise((function(i,r){var o=[],a=t._internalType,A=t._outputType,c=t._mimeType;t.on("data",(function(t,i){o.push(t),e&&e(i)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,i){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),i);case"base64":return s.encode(e);default:return n.transformTo(t,e)}}(A,function(t,e){var i,n=0,r=null,o=0;for(i=0;i<e.length;i++)o+=e[i].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),i=0;i<e.length;i++)r.set(e[i],n),n+=e[i].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,o),c);i(t)}catch(t){r(t)}o=[]})).resume()}))}(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,(function(t){e.call(i,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),i.blob=0===r.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,i){"use strict";for(var n=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),A=0;A<256;A++)a[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,i,n,o,s,a=t.length,A=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),A+=i<128?1:i<2048?2:i<65536?3:4;for(e=r.uint8array?new Uint8Array(A):new Array(A),o=s=0;s<A;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e}(t)},i.utf8decode=function(t){return r.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,i,r,o,s=t.length,A=new Array(2*s);for(e=i=0;e<s;)if((r=t[e++])<128)A[i++]=r;else if(4<(o=a[r]))A[i++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<s;)r=r<<6|63&t[e++],o--;1<o?A[i++]=65533:r<65536?A[i++]=r:(r-=65536,A[i++]=55296|r>>10&1023,A[i++]=56320|1023&r)}return A.length!==i&&(A.subarray?A=A.subarray(0,i):A.length=i),n.applyFromCharCode(A)}(t=n.transformTo(r.uint8array?"uint8array":"array",t))},n.inherits(c,s),c.prototype.processChunk=function(t){var e=n.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+a[t[i]]>e?i:e}(e),A=e;s!==e.length&&(r.uint8array?(A=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(A=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:i.utf8decode(A),meta:t.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,n.inherits(l,s),l.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,i){"use strict";var n=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),s=t("./external");function a(t){return t}function A(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}t("setimmediate"),i.newBlob=function(t,e){i.checkSupport("blob");try{return new Blob([t],{type:e})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,i){var n=[],r=0,o=t.length;if(o<=i)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+i,o)))):n.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+i,o)))),r+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function l(t){var e=65536,n=i.getTypeOf(t),r=!0;if("uint8array"===n?r=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return c.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function h(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}i.applyFromCharCode=l;var u={};u.string={string:a,array:function(t){return A(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return A(t,new Uint8Array(t.length))},nodebuffer:function(t){return A(t,o.allocBuffer(t.length))}},u.array={string:l,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},u.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},u.uint8array={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o.newBufferFrom(t)}},u.nodebuffer={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},i.transformTo=function(t,e){if(e=e||"",!t)return e;i.checkSupport(t);var n=i.getTypeOf(e);return u[n][t](e)},i.resolve=function(t){for(var e=t.split("/"),i=[],n=0;n<e.length;n++){var r=e[n];"."===r||""===r&&0!==n&&n!==e.length-1||(".."===r?i.pop():i.push(r))}return i.join("/")},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&o.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)n+="\\x"+((e=t.charCodeAt(i))<16?"0":"")+e.toString(16).toUpperCase();return n},i.delay=function(t,e,i){setImmediate((function(){t.apply(i||null,e||[])}))},i.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},i.prepareContent=function(t,e,o,a,c){return s.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,i){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var l=i.getTypeOf(e);return l?("arraybuffer"===l?e=i.transformTo("uint8array",e):"string"===l&&(c?e=r.decode(e):o&&!0!==a&&(e=function(t){return A(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,i){"use strict";var n=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=t("./support");function A(t){this.files=[],this.loadOptions=t}A.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",i=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=e-i;if(0<n)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){"use strict";var n=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),A=t("./compressions"),c=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in A)if(Object.prototype.hasOwnProperty.call(A,e)&&A[e].magic===t)return A[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n};t.setIndex(r)},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){"use strict";function n(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),A=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!n&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&n&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new A("error")).error(t)}return new r(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof A?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)n.prototype[c[h]]=l;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var i,n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,s=new r(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),i=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var A=new t.MessageChannel;A.port1.onmessage=l,i=function(){A.port2.postMessage(0)}}var c=[];function l(){var t,e;n=!0;for(var i=c.length;i;){for(e=c,c=[],t=-1;++t<i;)e[t]();i=c.length}n=!1}e.exports=function(t){1!==c.push(t)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,i){"use strict";var n=t("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],A=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,t!==r&&d(this,t)}function l(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function h(t,e,i){n((function(){var n;try{n=e(i)}catch(n){return o.reject(t,n)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var i=!1;function n(e){i||(i=!0,o.reject(t,e))}function r(e){i||(i=!0,o.resolve(t,e))}var s=f((function(){e(r,n)}));"error"===s.status&&n(s.value)}function f(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}(e.exports=c).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){throw i}))}))},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var i=new this.constructor(r);return this.state!==A?h(i,this.state===a?t:e,this.outcome):this.queue.push(new l(i,t,e)),i},l.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){o.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var i=f(u,e);if("error"===i.status)return o.reject(t,i.value);var n=i.value;if(n)d(t,n);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},c.reject=function(t){var e=new this(r);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,A=-1,c=new this(r);++A<i;)l(t[A],A);return c;function l(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==i||n||(n=!0,o.resolve(c,s))}),(function(t){n||(n=!0,o.reject(c,t))}))}},c.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,i=!1;if(!e)return this.resolve([]);for(var n,s=-1,a=new this(r);++s<e;)n=t[s],this.resolve(n).then((function(t){i||(i=!0,o.resolve(a,t))}),(function(t){i||(i=!0,o.reject(a,t))}));return a}},{immediate:36}],38:[function(t,e,i){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,i){"use strict";var n=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),A=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===A.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=n.deflateSetDictionary(this.strm,l)))throw new Error(s[i]);this._dict_set=!0}}function l(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}c.prototype.push=function(t,e){var i,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===A.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(c),a.next_out=0,a.avail_out=c),1!==(i=n.deflate(a,s))&&0!==i)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=c,i.deflate=l,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,i){"use strict";var n=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),A=t("./zlib/zstream"),c=t("./zlib/gzheader"),l=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function u(t,e){var i=new h(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}h.prototype.push=function(t,e){var i,a,A,c,h,u,d=this.strm,f=this.options.chunkSize,g=this.options.dictionary,p=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(f),d.next_out=0,d.avail_out=f),(i=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(u="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,i=n.inflateSetDictionary(this.strm,u)),i===s.Z_BUF_ERROR&&!0===p&&(i=s.Z_OK,p=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&i!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(A=o.utf8border(d.output,d.next_out),c=d.next_out-A,h=o.buf2string(d.output,A),d.next_out=c,d.avail_out=f-c,c&&r.arraySet(d.output,d.output,A,c,0),this.onData(h)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((0<d.avail_in||0===d.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=h,i.inflate=u,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(e=n=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),e=r=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],42:[function(t,e,i){"use strict";var n=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function A(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,i.string2buf=function(t){var e,i,r,o,s,a=t.length,A=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),A+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(A),o=s=0;s<A;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(r-56320),o++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e},i.buf2binstring=function(t){return A(t,t.length)},i.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,r,o,a=e||t.length,c=new Array(2*a);for(i=n=0;i<a;)if((r=t[i++])<128)c[n++]=r;else if(4<(o=s[r]))c[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&i<a;)r=r<<6|63&t[i++],o--;1<o?c[n++]=65533:r<65536?c[n++]=r:(r-=65536,c[n++]=55296|r>>10&1023,c[n++]=56320|1023&r)}return A(c,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}},{"./common":41}],43:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){for(var r=65535&t,o=t>>>16&65535,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;o=o+(r=r+e[n++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16}},{}],44:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,r){var o=n,s=r+i;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return~t}},{}],46:[function(t,e,i){"use strict";var n,r=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),A=t("./messages"),c=-2,l=258,h=262,u=113;function d(t,e){return t.msg=A[e],e}function f(t){return(t<<1)-(4<t?9:0)}function g(t){for(var e=t.length;0<=--e;)t[e]=0}function p(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function m(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,p(t.strm)}function v(t,e){t.pending_buf[t.pending++]=e}function y(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function w(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,A=t.strstart>t.w_size-h?t.strstart-(t.w_size-h):0,c=t.window,u=t.w_mask,d=t.prev,f=t.strstart+l,g=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(i=e)+s]===p&&c[i+s-1]===g&&c[i]===c[o]&&c[++i]===c[o+1]){o+=2,i++;do{}while(c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&o<f);if(n=l-(f-o),o=f-l,s<n){if(t.match_start=e,a<=(s=n))break;g=c[o+s-1],p=c[o+s]}}}while((e=d[e&u])>A&&0!=--r);return s<=t.lookahead?s:t.lookahead}function C(t){var e,i,n,o,A,c,l,u,d,f,g=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-h)){for(r.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=i=t.hash_size;n=t.head[--e],t.head[e]=g<=n?n-g:0,--i;);for(e=i=g;n=t.prev[--e],t.prev[e]=g<=n?n-g:0,--i;);o+=g}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,u=t.strstart+t.lookahead,f=void 0,(d=o)<(f=c.avail_in)&&(f=d),i=0===f?0:(c.avail_in-=f,r.arraySet(l,c.input,c.next_in,f,u),1===c.state.wrap?c.adler=s(c.adler,l,f,u):2===c.state.wrap&&(c.adler=a(c.adler,l,f,u)),c.next_in+=f,c.total_in+=f,f),t.lookahead+=i,t.lookahead+t.insert>=3)for(A=t.strstart-t.insert,t.ins_h=t.window[A],t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+3-1])&t.hash_mask,t.prev[A&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=A,A++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<h&&0!==t.strm.avail_in)}function b(t,e){for(var i,n;;){if(t.lookahead<h){if(C(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-h&&(t.match_length=w(t,i)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function B(t,e){for(var i,n,r;;){if(t.lookahead<h){if(C(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-h&&(t.match_length=w(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(m(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&m(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function x(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function S(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:u,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):d(t,c)}function I(t){var e=S(t);return 0===e&&function(t){t.window_size=2*t.w_size,g(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function M(t,e,i,n,o,s){if(!t)return c;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),o<1||9<o||8!==i||n<8||15<n||e<0||9<e||s<0||4<s)return d(t,c);8===n&&(n=9);var A=new _;return(t.state=A).strm=t,A.wrap=a,A.gzhead=null,A.w_bits=n,A.w_size=1<<A.w_bits,A.w_mask=A.w_size-1,A.hash_bits=o+7,A.hash_size=1<<A.hash_bits,A.hash_mask=A.hash_size-1,A.hash_shift=~~((A.hash_bits+3-1)/3),A.window=new r.Buf8(2*A.w_size),A.head=new r.Buf16(A.hash_size),A.prev=new r.Buf16(A.w_size),A.lit_bufsize=1<<o+6,A.pending_buf_size=4*A.lit_bufsize,A.pending_buf=new r.Buf8(A.pending_buf_size),A.d_buf=1*A.lit_bufsize,A.l_buf=3*A.lit_bufsize,A.level=e,A.strategy=s,A.method=i,I(t)}n=[new x(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(C(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,m(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-h&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(m(t,!1),t.strm.avail_out),1)})),new x(4,4,8,4,b),new x(4,5,16,8,b),new x(4,6,32,32,b),new x(4,4,16,16,B),new x(8,16,32,32,B),new x(8,16,128,128,B),new x(8,32,128,256,B),new x(32,128,258,1024,B),new x(32,258,258,4096,B)],i.deflateInit=function(t,e){return M(t,e,8,15,8,0)},i.deflateInit2=M,i.deflateReset=I,i.deflateResetKeep=S,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?c:(t.state.gzhead=e,0):c},i.deflate=function(t,e){var i,r,s,A;if(!t||!t.state||5<e||e<0)return t?d(t,c):c;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return d(t,0===t.avail_out?-5:c);if(r.strm=t,i=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,v(r,31),v(r,139),v(r,8),r.gzhead?(v(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),v(r,255&r.gzhead.time),v(r,r.gzhead.time>>8&255),v(r,r.gzhead.time>>16&255),v(r,r.gzhead.time>>24&255),v(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),v(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(v(r,255&r.gzhead.extra.length),v(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(v(r,0),v(r,0),v(r,0),v(r,0),v(r,0),v(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),v(r,3),r.status=u);else{var h=8+(r.w_bits-8<<4)<<8;h|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(h|=32),h+=31-h%31,r.status=u,y(r,h),0!==r.strstart&&(y(r,t.adler>>>16),y(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),p(t),s=r.pending,r.pending!==r.pending_buf_size));)v(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),p(t),s=r.pending,r.pending===r.pending_buf_size)){A=1;break}A=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,v(r,A)}while(0!==A);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===A&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),p(t),s=r.pending,r.pending===r.pending_buf_size)){A=1;break}A=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,v(r,A)}while(0!==A);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===A&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&p(t),r.pending+2<=r.pending_buf_size&&(v(r,255&t.adler),v(r,t.adler>>8&255),t.adler=0,r.status=u)):r.status=u),0!==r.pending){if(p(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&f(e)<=f(i)&&4!==e)return d(t,-5);if(666===r.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var w=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(C(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=l){if(C(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){s=t.strstart+l;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=l-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(r,e):n[r.level].func(r,e);if(3!==w&&4!==w||(r.status=666),1===w||3===w)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===w&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(g(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),p(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(v(r,255&t.adler),v(r,t.adler>>8&255),v(r,t.adler>>16&255),v(r,t.adler>>24&255),v(r,255&t.total_in),v(r,t.total_in>>8&255),v(r,t.total_in>>16&255),v(r,t.total_in>>24&255)):(y(r,t.adler>>>16),y(r,65535&t.adler)),p(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?0:1)},i.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==u&&666!==e?d(t,c):(t.state=null,e===u?d(t,-3):0):c},i.deflateSetDictionary=function(t,e){var i,n,o,a,A,l,h,u,d=e.length;if(!t||!t.state)return c;if(2===(a=(i=t.state).wrap)||1===a&&42!==i.status||i.lookahead)return c;for(1===a&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(g(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new r.Buf8(i.w_size),r.arraySet(u,e,d-i.w_size,i.w_size,0),e=u,d=i.w_size),A=t.avail_in,l=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,C(i);i.lookahead>=3;){for(n=i.strstart,o=i.lookahead-2;i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--o;);i.strstart=n,i.lookahead=2,C(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=l,t.input=h,t.avail_in=A,i.wrap=a,0},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n,r,o,s,a,A,c,l,h,u,d,f,g,p,m,v,y,w,C,b,B,x,_,S;i=t.state,n=t.next_in,_=t.input,r=n+(t.avail_in-5),o=t.next_out,S=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),A=i.dmax,c=i.wsize,l=i.whave,h=i.wnext,u=i.window,d=i.hold,f=i.bits,g=i.lencode,p=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{f<15&&(d+=_[n++]<<f,f+=8,d+=_[n++]<<f,f+=8),y=g[d&m];e:for(;;){if(d>>>=w=y>>>24,f-=w,0==(w=y>>>16&255))S[o++]=65535&y;else{if(!(16&w)){if(!(64&w)){y=g[(65535&y)+(d&(1<<w)-1)];continue e}if(32&w){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}C=65535&y,(w&=15)&&(f<w&&(d+=_[n++]<<f,f+=8),C+=d&(1<<w)-1,d>>>=w,f-=w),f<15&&(d+=_[n++]<<f,f+=8,d+=_[n++]<<f,f+=8),y=p[d&v];i:for(;;){if(d>>>=w=y>>>24,f-=w,!(16&(w=y>>>16&255))){if(!(64&w)){y=p[(65535&y)+(d&(1<<w)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(b=65535&y,f<(w&=15)&&(d+=_[n++]<<f,(f+=8)<w&&(d+=_[n++]<<f,f+=8)),A<(b+=d&(1<<w)-1)){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=w,f-=w,(w=o-s)<b){if(l<(w=b-w)&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(x=u,(B=0)===h){if(B+=c-w,w<C){for(C-=w;S[o++]=u[B++],--w;);B=o-b,x=S}}else if(h<w){if(B+=c+h-w,(w-=h)<C){for(C-=w;S[o++]=u[B++],--w;);if(B=0,h<C){for(C-=w=h;S[o++]=u[B++],--w;);B=o-b,x=S}}}else if(B+=h-w,w<C){for(C-=w;S[o++]=u[B++],--w;);B=o-b,x=S}for(;2<C;)S[o++]=x[B++],S[o++]=x[B++],S[o++]=x[B++],C-=3;C&&(S[o++]=x[B++],1<C&&(S[o++]=x[B++]))}else{for(B=o-b;S[o++]=S[B++],S[o++]=S[B++],S[o++]=S[B++],2<(C-=3););C&&(S[o++]=S[B++],1<C&&(S[o++]=S[B++]))}break}}break}}while(n<r&&o<a);n-=C=f>>3,d&=(1<<(f-=C<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=o<a?a-o+257:257-(o-a),i.hold=d,i.bits=f}},{}],49:[function(t,e,i){"use strict";var n=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),A=-2;function c(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):A}function u(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,h(t)):A}function d(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?A:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,u(t))):A}function f(t,e){var i,n;return t?(n=new l,(t.state=n).window=null,0!==(i=d(t,e))&&(t.state=null),i):A}var g,p,m=!0;function v(t){if(m){var e;for(g=new n.Buf32(512),p=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,p,0,t.work,{bits:5}),m=!1}t.lencode=g,t.lenbits=9,t.distcode=p,t.distbits=5}function y(t,e,i,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(o=s.wsize-s.wnext)&&(o=r),n.arraySet(s.window,e,i-r,o,s.wnext),(r-=o)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}i.inflateReset=u,i.inflateReset2=d,i.inflateResetKeep=h,i.inflateInit=function(t){return f(t,15)},i.inflateInit2=f,i.inflate=function(t,e){var i,l,h,u,d,f,g,p,m,w,C,b,B,x,_,S,I,M,T,E,k,F,D,O,U=0,Q=new n.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return A;12===(i=t.state).mode&&(i.mode=13),d=t.next_out,h=t.output,g=t.avail_out,u=t.next_in,l=t.input,f=t.avail_in,p=i.hold,m=i.bits,w=f,C=g,F=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;m<16;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(2&i.wrap&&35615===p){Q[i.check=0]=255&p,Q[1]=p>>>8&255,i.check=o(i.check,Q,2,0),m=p=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&p)<<8)+(p>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&p)){t.msg="unknown compression method",i.mode=30;break}if(m-=4,k=8+(15&(p>>>=4)),0===i.wbits)i.wbits=k;else if(k>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<k,t.adler=i.check=1,i.mode=512&p?10:12,m=p=0;break;case 2:for(;m<16;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(i.flags=p,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=p>>8&1),512&i.flags&&(Q[0]=255&p,Q[1]=p>>>8&255,i.check=o(i.check,Q,2,0)),m=p=0,i.mode=3;case 3:for(;m<32;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.head&&(i.head.time=p),512&i.flags&&(Q[0]=255&p,Q[1]=p>>>8&255,Q[2]=p>>>16&255,Q[3]=p>>>24&255,i.check=o(i.check,Q,4,0)),m=p=0,i.mode=4;case 4:for(;m<16;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.head&&(i.head.xflags=255&p,i.head.os=p>>8),512&i.flags&&(Q[0]=255&p,Q[1]=p>>>8&255,i.check=o(i.check,Q,2,0)),m=p=0,i.mode=5;case 5:if(1024&i.flags){for(;m<16;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.length=p,i.head&&(i.head.extra_len=p),512&i.flags&&(Q[0]=255&p,Q[1]=p>>>8&255,i.check=o(i.check,Q,2,0)),m=p=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(f<(b=i.length)&&(b=f),b&&(i.head&&(k=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,l,u,b,k)),512&i.flags&&(i.check=o(i.check,l,b,u)),f-=b,u+=b,i.length-=b),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===f)break t;for(b=0;k=l[u+b++],i.head&&k&&i.length<65536&&(i.head.name+=String.fromCharCode(k)),k&&b<f;);if(512&i.flags&&(i.check=o(i.check,l,b,u)),f-=b,u+=b,k)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===f)break t;for(b=0;k=l[u+b++],i.head&&k&&i.length<65536&&(i.head.comment+=String.fromCharCode(k)),k&&b<f;);if(512&i.flags&&(i.check=o(i.check,l,b,u)),f-=b,u+=b,k)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;m<16;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(p!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}m=p=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;m<32;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}t.adler=i.check=c(p),m=p=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=d,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=p,i.bits=m,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){p>>>=7&m,m-=7&m,i.mode=27;break}for(;m<3;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}switch(i.last=1&p,m-=1,3&(p>>>=1)){case 0:i.mode=14;break;case 1:if(v(i),i.mode=20,6!==e)break;p>>>=2,m-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}p>>>=2,m-=2;break;case 14:for(p>>>=7&m,m-=7&m;m<32;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if((65535&p)!=(p>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&p,m=p=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(b=i.length){if(f<b&&(b=f),g<b&&(b=g),0===b)break t;n.arraySet(h,l,u,b,d),f-=b,u+=b,g-=b,d+=b,i.length-=b;break}i.mode=12;break;case 17:for(;m<14;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(i.nlen=257+(31&p),p>>>=5,m-=5,i.ndist=1+(31&p),p>>>=5,m-=5,i.ncode=4+(15&p),p>>>=4,m-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;m<3;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.lens[L[i.have++]]=7&p,p>>>=3,m-=3}for(;i.have<19;)i.lens[L[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,D={bits:i.lenbits},F=a(0,i.lens,0,19,i.lencode,0,i.work,D),i.lenbits=D.bits,F){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;S=(U=i.lencode[p&(1<<i.lenbits)-1])>>>16&255,I=65535&U,!((_=U>>>24)<=m);){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(I<16)p>>>=_,m-=_,i.lens[i.have++]=I;else{if(16===I){for(O=_+2;m<O;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(p>>>=_,m-=_,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}k=i.lens[i.have-1],b=3+(3&p),p>>>=2,m-=2}else if(17===I){for(O=_+3;m<O;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}m-=_,k=0,b=3+(7&(p>>>=_)),p>>>=3,m-=3}else{for(O=_+7;m<O;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}m-=_,k=0,b=11+(127&(p>>>=_)),p>>>=7,m-=7}if(i.have+b>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;b--;)i.lens[i.have++]=k}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,D={bits:i.lenbits},F=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,D),i.lenbits=D.bits,F){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,D={bits:i.distbits},F=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,D),i.distbits=D.bits,F){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=f&&258<=g){t.next_out=d,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=p,i.bits=m,s(t,C),d=t.next_out,h=t.output,g=t.avail_out,u=t.next_in,l=t.input,f=t.avail_in,p=i.hold,m=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;S=(U=i.lencode[p&(1<<i.lenbits)-1])>>>16&255,I=65535&U,!((_=U>>>24)<=m);){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(S&&!(240&S)){for(M=_,T=S,E=I;S=(U=i.lencode[E+((p&(1<<M+T)-1)>>M)])>>>16&255,I=65535&U,!(M+(_=U>>>24)<=m);){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}p>>>=M,m-=M,i.back+=M}if(p>>>=_,m-=_,i.back+=_,i.length=I,0===S){i.mode=26;break}if(32&S){i.back=-1,i.mode=12;break}if(64&S){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&S,i.mode=22;case 22:if(i.extra){for(O=i.extra;m<O;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.length+=p&(1<<i.extra)-1,p>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;S=(U=i.distcode[p&(1<<i.distbits)-1])>>>16&255,I=65535&U,!((_=U>>>24)<=m);){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(!(240&S)){for(M=_,T=S,E=I;S=(U=i.distcode[E+((p&(1<<M+T)-1)>>M)])>>>16&255,I=65535&U,!(M+(_=U>>>24)<=m);){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}p>>>=M,m-=M,i.back+=M}if(p>>>=_,m-=_,i.back+=_,64&S){t.msg="invalid distance code",i.mode=30;break}i.offset=I,i.extra=15&S,i.mode=24;case 24:if(i.extra){for(O=i.extra;m<O;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}i.offset+=p&(1<<i.extra)-1,p>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===g)break t;if(b=C-g,i.offset>b){if((b=i.offset-b)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}B=b>i.wnext?(b-=i.wnext,i.wsize-b):i.wnext-b,b>i.length&&(b=i.length),x=i.window}else x=h,B=d-i.offset,b=i.length;for(g<b&&(b=g),g-=b,i.length-=b;h[d++]=x[B++],--b;);0===i.length&&(i.mode=21);break;case 26:if(0===g)break t;h[d++]=i.length,g--,i.mode=21;break;case 27:if(i.wrap){for(;m<32;){if(0===f)break t;f--,p|=l[u++]<<m,m+=8}if(C-=g,t.total_out+=C,i.total+=C,C&&(t.adler=i.check=i.flags?o(i.check,h,C,d-C):r(i.check,h,C,d-C)),C=g,(i.flags?p:c(p))!==i.check){t.msg="incorrect data check",i.mode=30;break}m=p=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;m<32;){if(0===f)break t;f--,p+=l[u++]<<m,m+=8}if(p!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}m=p=0}i.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;default:return A}return t.next_out=d,t.avail_out=g,t.next_in=u,t.avail_in=f,i.hold=p,i.bits=m,(i.wsize||C!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&y(t,t.output,t.next_out,C-t.avail_out)?(i.mode=31,-4):(w-=t.avail_in,C-=t.avail_out,t.total_in+=w,t.total_out+=C,i.total+=C,i.wrap&&C&&(t.adler=i.check=i.flags?o(i.check,h,C,t.next_out-C):r(i.check,h,C,t.next_out-C)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==w&&0===C||4===e)&&0===F&&(F=-5),F)},i.inflateEnd=function(t){if(!t||!t.state)return A;var e=t.state;return e.window&&(e.window=null),t.state=null,0},i.inflateGetHeader=function(t,e){var i;return t&&t.state&&2&(i=t.state).wrap?((i.head=e).done=!1,0):A},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?A:11===i.mode&&r(1,e,n,0)!==i.check?-3:y(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,0):A},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,i){"use strict";var n=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,A,c,l,h,u){var d,f,g,p,m,v,y,w,C,b=u.bits,B=0,x=0,_=0,S=0,I=0,M=0,T=0,E=0,k=0,F=0,D=null,O=0,U=new n.Buf16(16),Q=new n.Buf16(16),L=null,j=0;for(B=0;B<=15;B++)U[B]=0;for(x=0;x<A;x++)U[e[i+x]]++;for(I=b,S=15;1<=S&&0===U[S];S--);if(S<I&&(I=S),0===S)return c[l++]=20971520,c[l++]=20971520,u.bits=1,0;for(_=1;_<S&&0===U[_];_++);for(I<_&&(I=_),B=E=1;B<=15;B++)if(E<<=1,(E-=U[B])<0)return-1;if(0<E&&(0===t||1!==S))return-1;for(Q[1]=0,B=1;B<15;B++)Q[B+1]=Q[B]+U[B];for(x=0;x<A;x++)0!==e[i+x]&&(h[Q[e[i+x]]++]=x);if(v=0===t?(D=L=h,19):1===t?(D=r,O-=257,L=o,j-=257,256):(D=s,L=a,-1),B=_,m=l,T=x=F=0,g=-1,p=(k=1<<(M=I))-1,1===t&&852<k||2===t&&592<k)return 1;for(;;){for(y=B-T,C=h[x]<v?(w=0,h[x]):h[x]>v?(w=L[j+h[x]],D[O+h[x]]):(w=96,0),d=1<<B-T,_=f=1<<M;c[m+(F>>T)+(f-=d)]=y<<24|w<<16|C,0!==f;);for(d=1<<B-1;F&d;)d>>=1;if(0!==d?(F&=d-1,F+=d):F=0,x++,0==--U[B]){if(B===S)break;B=e[i+h[x]]}if(I<B&&(F&p)!==g){for(0===T&&(T=I),m+=_,E=1<<(M=B-T);M+T<S&&!((E-=U[M+T])<=0);)M++,E<<=1;if(k+=1<<M,1===t&&852<k||2===t&&592<k)return 1;c[g=F&p]=I<<24|M<<16|m-l}}return 0!==F&&(c[m+F]=B-T<<24|64<<16),u.bits=I,0}},{"../utils/common":41}],51:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,i){"use strict";var n=t("../utils/common");function r(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,s=286,a=30,A=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);r(d);var f=new Array(60);r(f);var g=new Array(512);r(g);var p=new Array(256);r(p);var m=new Array(29);r(m);var v,y,w,C=new Array(a);function b(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function x(t){return t<256?g[t]:g[256+(t>>>7)]}function _(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function S(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function I(t,e,i){S(t,i[2*e],i[2*e+1])}function M(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function T(t,e,i){var n,r,o=new Array(16),s=0;for(n=1;n<=A;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=M(o[a]++,a))}}function E(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function k(t){8<t.bi_valid?_(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function F(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function D(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&F(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!F(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function O(t,e,i){var n,r,s,a,A=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*A]<<8|t.pending_buf[t.d_buf+2*A+1],r=t.pending_buf[t.l_buf+A],A++,0===n?I(t,r,e):(I(t,(s=p[r])+o+1,e),0!==(a=c[s])&&S(t,r-=m[s],a),I(t,s=x(--n),i),0!==(a=l[s])&&S(t,n-=C[s],a)),A<t.last_lit;);I(t,256,e)}function U(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==o[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;1<=i;i--)D(t,o,i);for(r=c;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,D(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,c=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,g=e.stat_desc.max_length,p=0;for(o=0;o<=A;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)g<(o=c[2*c[2*(n=t.heap[i])+1]+1]+1)&&(o=g,p++),c[2*n+1]=o,l<n||(t.bl_count[o]++,s=0,f<=n&&(s=d[n-f]),a=c[2*n],t.opt_len+=a*(o+s),u&&(t.static_len+=a*(h[2*n+1]+s)));if(0!==p){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,p-=2}while(0<p);for(o=g;0!==o;o--)for(n=t.bl_count[o];0!==n;)l<(r=t.heap[--i])||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),n--)}}(t,e),T(o,l,t.bl_count)}function Q(t,e,i){var n,r,o=-1,s=e[1],a=0,A=7,c=4;for(0===s&&(A=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<A&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=r,c=(a=0)===s?(A=138,3):r===s?(A=6,3):(A=7,4))}function L(t,e,i){var n,r,o=-1,s=e[1],a=0,A=7,c=4;for(0===s&&(A=138,c=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<A&&r===s)){if(a<c)for(;I(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(I(t,r,t.bl_tree),a--),I(t,16,t.bl_tree),S(t,a-3,2)):a<=10?(I(t,17,t.bl_tree),S(t,a-3,3)):(I(t,18,t.bl_tree),S(t,a-11,7));o=r,c=(a=0)===s?(A=138,3):r===s?(A=6,3):(A=7,4)}}r(C);var j=!1;function P(t,e,i,r){S(t,0+(r?1:0),3),function(t,e,i){k(t),_(t,i),_(t,~i),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i)}i._tr_init=function(t){j||(function(){var t,e,i,n,r,o=new Array(16);for(n=i=0;n<28;n++)for(m[n]=i,t=0;t<1<<c[n];t++)p[i++]=n;for(p[i-1]=n,n=r=0;n<16;n++)for(C[n]=r,t=0;t<1<<l[n];t++)g[r++]=n;for(r>>=7;n<a;n++)for(C[n]=r<<7,t=0;t<1<<l[n]-7;t++)g[256+r++]=n;for(e=0;e<=A;e++)o[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,o[8]++;for(;t<=255;)d[2*t+1]=9,t++,o[9]++;for(;t<=279;)d[2*t+1]=7,t++,o[7]++;for(;t<=287;)d[2*t+1]=8,t++,o[8]++;for(T(d,287,o),t=0;t<a;t++)f[2*t+1]=5,f[2*t]=M(t,5);v=new b(d,c,257,s,A),y=new b(f,l,0,a,A),w=new b(new Array(0),h,0,19,7)}(),j=!0),t.l_desc=new B(t.dyn_ltree,v),t.d_desc=new B(t.dyn_dtree,y),t.bl_desc=new B(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,E(t)},i._tr_stored_block=P,i._tr_flush_block=function(t,e,i,n){var r,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),U(t,t.l_desc),U(t,t.d_desc),a=function(t){var e;for(Q(t,t.dyn_ltree,t.l_desc.max_code),Q(t,t.dyn_dtree,t.d_desc.max_code),U(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=r&&(r=s)):r=s=i+5,i+4<=r&&-1!==e?P(t,e,i,n):4===t.strategy||s===r?(S(t,2+(n?1:0),3),O(t,d,f)):(S(t,4+(n?1:0),3),function(t,e,i,n){var r;for(S(t,e-257,5),S(t,i-1,5),S(t,n-4,4),r=0;r<n;r++)S(t,t.bl_tree[2*u[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),O(t,t.dyn_ltree,t.dyn_dtree)),E(t),n&&k(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(p[i]+o+1)]++,t.dyn_dtree[2*x(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){S(t,2,3),I(t,256,d),function(t){16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){(function(t){!function(t){"use strict";if(!t.setImmediate){var e,i,n,r,o=1,s={},a=!1,A=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,e="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?(r="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),function(e){t.postMessage(r+e,"*")}):t.MessageChannel?((n=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){n.port2.postMessage(t)}):A&&"onreadystatechange"in A.createElement("script")?(i=A.documentElement,function(t){var e=A.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(h,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var i=new Array(arguments.length-1),n=0;n<i.length;n++)i[n]=arguments[n+1];var r={callback:t,args:i};return s[o]=r,e(o),o++},c.clearImmediate=l}function l(t){delete s[t]}function h(t){if(a)setTimeout(h,0,t);else{var e=s[t];if(e){a=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(undefined,i)}}(e)}finally{l(t),a=!1}}}}function u(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&h(+e.data.slice(r.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.amdO={},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var n=i(237);ClientFeedbackTool=n})();